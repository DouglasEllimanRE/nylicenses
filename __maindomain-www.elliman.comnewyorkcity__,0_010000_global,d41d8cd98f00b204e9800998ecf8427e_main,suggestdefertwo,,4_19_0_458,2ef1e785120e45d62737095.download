;var SuggestNoSelection=SuggestNoSelection||{};SuggestNoSelection.SmartSearchResultAnalyzer=Class.create({_defaultSettings:{useSuggestServiceForSmartSearch:!1,priorityLocationSeo:undefined},initialize:function(n){this._settings=gts.$.extend({},this._defaultSettings,n)},Analyze:function(n){var t=this._GetAnalysisFromSmartSearchDataOnly(n),i;if(t.hasPriorityLocationSeo=typeof this._settings.priorityLocationSeo!="undefined"&&this._settings.priorityLocationSeo!=null,t.hasPriorityLocationSeo){i=this._settings.refinements;i==null&&(i="");i!=""&&(i="/"+i);var u=this._settings.priorityLocationSeo.includes(this._settings.channel)?"/"+this._settings.priorityLocationSeo+i:"/"+this._settings.channel+"/"+this._settings.priorityLocationSeo+i,r=SEOService.NormalizeSEOQuery(u),f=t.smartSearchHasResults&&r==SEOService.NormalizeSEOQuery(t.firstDataSeo);return t.redirectUrl=r,t.useQueryString=!f&&t.smartSearchHasMoreThanOneResult,t}return t.redirectUrl=t.firstDataSeo,t.useQueryString=t.smartSearchHasMoreThanOneResult,t},_GetAnalysisFromSmartSearchDataOnly:function(n){var i,t,r;return typeof n=="undefined"||n==null?{firstDataSeo:null,smartSearchHasResults:!1,smartSearchHasMoreThanOneResult:!1}:(t=this._GetFirstSmartSearchMatchItem(n),t==null)?{firstDataSeo:null,smartSearchHasResults:!1,smartSearchHasMoreThanOneResult:!1}:(r=this._GetSmartSearchHasMoreThanOneResult(n),this._settings.useSuggestServiceForSmartSearch?(i=t.target===EnumSuggestTarget.LOCATION?this._settings.channel+"/"+t.option[0].valueseo:t.alllink,(typeof i=="undefined"||i===null||i==="")&&t.target===EnumSuggestTarget.RECORD&&n.group.length===1&&(i=t.option[0].valueseo)):i=t.matches[0].match.seopath,{firstDataSeo:i,smartSearchHasResults:!0,smartSearchHasMoreThanOneResult:r})},_GetFirstSmartSearchMatchItem:function(n){var t=null;return typeof n=="undefined"||n==null?null:this._settings.useSuggestServiceForSmartSearch?(n.group&&n.group.length>0&&gts.jQuery.each(n.group,function(n,i){return t=i,!0}),t):(n.dymresult.matchgroups!=null&&n.dymresult.matchgroups.length>0&&gts.jQuery.each(n.dymresult.matchgroups,function(n,i){return t=i.matchgroup,!0}),t)},_GetSmartSearchHasMoreThanOneResult:function(n){return typeof n=="undefined"||n==null?!1:this._settings.useSuggestServiceForSmartSearch?typeof n.group=="undefined"||n.group.length==0?!1:n.group.length>1||n.group[0].option.length>1:typeof n.dymresult.matchcount=="undefined"?!1:n.dymresult.matchcount>1}});;;;var SuggestProgressIndicators=SuggestProgressIndicators||{};SuggestProgressIndicators.ProgressIndicatorBase=Class.create({initialize:function(n){this._indicatorEleId="suggest-progress-indicator";this._initSettings=n;this._responseContainerEle=this._initSettings.responseContainerEle;this._indicatorEle=this._CreateControl()},Start:function(n){var t=gts.$(this._responseContainerEle).find(this._indicatorEle).length>0;t||(this._totalStepCount=n,this._SetCurrentStepCount(n),this._responseContainerEle.prepend(this._indicatorEle))},UpdateSteps:function(n){this._SetCurrentStepCount(n)},_SetCurrentStepCount:function(n){this._stepCount=n;this._OnStepCountChanged()},Stop:function(){this._stepCount=0;this._totalStepCount=0;this._OnStepCountChanged();gts.$(this._indicatorEle,this._responseContainerEle).remove()},_CreateControl:function(){},_OnStepCountChanged:function(){}});;;;var SuggestProgressIndicators=SuggestProgressIndicators||{};SuggestProgressIndicators.ProgressIndicatorFactory={GetProgressIndicator:function(n){return typeof n.searchOrderServerCall!="undefined"&&n.searchOrderServerCall=="MultipleCalls"?new SuggestProgressIndicators.Progressbar(n):new SuggestProgressIndicators.Spinner(n)}};;;;var SuggestProgressIndicators=SuggestProgressIndicators||{};SuggestProgressIndicators.Progressbar=Class.create(SuggestProgressIndicators.ProgressIndicatorBase,{_CreateControl:function(){return gts.$("<div class='progressbar-wrap'><div class='progressbar' data-content='0%'><\/div><\/div>")},_OnStepCountChanged:function(){var t=gts.$(".progressbar-wrap",this._indicatorEle),i=gts.$(".progressbar",this._indicatorEle),n=100-Math.floor(this._stepCount/this._totalStepCount*100);i.attr("data-content",n+"%");n==100?t.addClass("completed"):t.removeClass("completed");i.css("width",n+"%")}});;;;var SuggestProgressIndicators=SuggestProgressIndicators||{};SuggestProgressIndicators.Spinner=Class.create(SuggestProgressIndicators.ProgressIndicatorBase,{initialize:function($super,n){$super(n)},_SetIndicatorImageSrc:function(){},_CreateControl:function(){return gts.$("<div id='"+this._indicatorEleId+"' class='js-spinner  search-suggest__spinner-container'><i class='o-loader'><\/i><\/div>")}});;;;var SuggestSearchControls=SuggestSearchControls||{};SuggestSearchControls.GroupTypeLinkFactory=Class.create({initialize:function(n){this._initSettings=n;this._suggest=this._initSettings.suggest},CreateControl:function(n){var i=this,t=gts.$(String.Format('<a tabindex="0" href="{0}" class="{1}">{2}<\/a>',"#"+n.name,"channel  search-suggest__control  tabs__item",n.title));n.selected?(t.addClass("tabs__item--selected"),t.attr("aria-selected",!0),t.attr("aria-controls",gts.$(".js-suggest-panel",this._suggest.ModuleEle).attr("id")),i._suggest.ChangeGroupType(n.name)):(t.attr("id",n.name),t.attr("aria-selected",!1),t.attr("aria-controls","Tab_"+n.name));t.on("click keydown",function(t){(t.type==="click"||t.type==="keydown"&&t.which===13)&&(t.preventDefault(),currentSelection=gts.$(this).parent().find(".tabs__item--selected"),currentSelection.attr("href")!=="#"+n.name&&i._suggest.ChangeGroupType(n.name))});return t}});;;;var SuggestSearchControls=SuggestSearchControls||{};SuggestSearchControls.ChannelLinkFactory=Class.create({initialize:function(n){this._initSettings=n;this._suggest=this._initSettings.suggest},CreateControl:function(n){var t=this,r=n.option.value,f=n.isDropDown,i=gts.$(String.Format('<a href="{0}" class="{1}">{2}<\/a>',"#","channel  search-suggest__control  tabs__item",n.option.title)),u;return i.attr("data-at-channel",n.option.title),this._channel==r&&i.addClass("tabs__item--selected"),u=f===!0?gts.$(i):i,u.click(function(){return t.ResetAllChannel(gts.$(this)),t._suggest.TextSelectedDataEle.val(""),gts.$(this).parent().find(".tabs__item--selected").removeClass("tabs__item--selected"),gts.$(this).addClass("tabs__item--selected"),t._suggest.ChangeChannel(r,n.searchTerm),t._suggest.TextSelectedDataEle.trigger("ChannelSelected"+t._suggest.EventNS,{channel:r}),!1}),i},SetChannel:function(n){this._channel=n},ResetAllChannel:function(n){if(n.hasClass("tabs__item--selected")&&!gts.$(".search-suggest__pills--list").hasClass(".all-active")){gts.$(".search-suggest__pills--list").addClass("all-active").find(".search-suggest__pill").addClass("search-suggest__pill--active");var t=n.closest(".c-search-suggest").attr("column-number");gts.$(".js-suggest-panel .category-container").each(function(){var n=gts.$(this);n.is('[class*="default--"]')&&n.removeClass(function(n,t){return(t.match(/(^|\s)default--\S+/g)||[]).join(" ")}).addClass("default--1-3");n.removeClass("u-hide");n.find("dl").removeClass("u-hide")});n.closest(".js-lps-suggest-container").removeClass(function(n,t){return(t.match(/(^|\s)active-suggest-columns-\S+/g)||[]).join(" ")});n.closest(".js-lps-suggest-container").addClass("active-suggest-columns-"+t);return}}});;;;var SuggestSearchControls=SuggestSearchControls||{};SuggestSearchControls.CloseLinkFactory=Class.create({initialize:function(n){this._initSettings=n;this._suggest=this._initSettings.suggest},CreateControl:function(){var n=this;return gts.$("<a />").attr("id","close-suggest").attr("class","close search-suggest__close").attr("href","#").text("X").on("click",function(){return n._suggest.CloseSuggest(),!1})}});;;;var SuggestSearchControls=SuggestSearchControls||{};SuggestSearchControls.SearchControlsManager=Class.create({initialize:function(n){this._initSettings=n;this._suggestConfig=this._initSettings.suggestConfig;this._suggest=this._initSettings.suggest;this._responseContainerEle=this._initSettings.responseContainerEle;this._suggestControlsContainerId=this._initSettings.suggestControlsContainerId;this._InitializeControlFactories()},_InitializeControlFactories:function(){this._GroupTypeLinkFactory=new SuggestSearchControls.GroupTypeLinkFactory({suggest:this._suggest});this._ChannelLinkFactory=new SuggestSearchControls.ChannelLinkFactory({suggest:this._suggest});this._SelectControlFactory=new SuggestSearchControls.SelectFactory({suggest:this._suggest,suggestFilterElementPrefix:this._initSettings.suggestFilterElementPrefix});this._SearcherFilterFactory=new SuggestSearchControls.SearcherFilterFactory({suggest:this._suggest})},SetControlsData:function(n){this._selectedChannel=n.selectedChannel;this._suggestConfig=n.suggestConfig;this._ChannelLinkFactory.SetChannel(this._selectedChannel)},AddGroupTypeControls:function(n){var f=n.length,o=gts.$("#"+this._suggestControlsContainerId,this._responseContainerEle).length>0,t=gts.$("<div><\/div>"),i,u=[],e,r;if(this._initSettings.suggestType==EnumSuggestType.CATEGORY&&f&&!o){if(!this._suggest._initSettings.renderWithSuggestManager){for(t.attr("id",this._suggestControlsContainerId),t.attr("class","search-suggest__controls  grid  grid--bottom grid--full  tab-headers"),i=gts.$(String.Format('<div class="{0}"><div class="{1}"><\/div><\/div>',"search-suggest__tabs  grid__item  c-tabs","search-suggest__search-type-tabs  js-suggest-controls-tabs")),r=0;r<f;r++)e=this._GroupTypeLinkFactory.CreateControl(n[r]),u.push(e);if(u&&i.find(".js-suggest-controls-tabs").append(u),i.appendTo(t),t.children().length==0)return}return this._AddControlsToResponseContainer(t),i}},AddControls:function(n){var f,r,t,i;if(this._initSettings.suggestType==EnumSuggestType.CATEGORY&&typeof this._suggestConfig.controls!="undefined"&&(f=gts.$("#"+this._suggestControlsContainerId,this._responseContainerEle).length>0,!f)){if(r=this,t=gts.$("<div><\/div>"),t.attr("id",this._suggestControlsContainerId),t.attr("class","search-suggest__controls  grid  grid--bottom grid--full  tab-headers"),i={tabsControls:0,selectControls:0,pillsContols:0},this._suggest._initSettings.customSuggestTabsContainers)var u=gts.$(`<div class="search-suggest__tabs"><div class="search-suggest__tabs--wrapper  js-suggest-controls-tabs"></div></div>`),e=gts.$(`<div class="search-suggest__selects  js-suggest-controls-selects"></div>`),o=gts.$(`<div class="search-suggest__pills  js-search-suggest-pills"></div>`);else var u=gts.$(String.Format('<div class="{0}"><ul class="{1}"><\/ul><\/div>',"search-suggest__tabs  grid__item  default--1-2  desk--2-3  lap-wide--1-2  lap--1-2  palm-wide--1-2  palm--1-1  c-tabs","o-list-inline  search-suggest__search-type-tabs  js-suggest-controls-tabs")),e=gts.$(String.Format('<div class="{0}"><ul class="{1}"><\/ul><\/div>',"search-suggest__selects  grid__item  default--1-2  desk--1-3  lap-wide--1-2  lap--1-2  palm-wide--1-2  palm--1-1","o-list-wide  search-suggest__search-type-selects  js-suggest-controls-selects")),o=gts.$(`<div class="search-suggest__pills  grid__item  desk--1-3  lap-wide--1-2  lap--1-2  palm-wide--1-2  palm--1-1  js-search-suggest-pills"></div>`);if(gts.$.each(this._suggestConfig.controls,function(t,f){var s=f.control,h,c,l;if(!s.group||s.group.length<=0)return!0;h=s.name.toLowerCase();switch(h){case"channel":if(gts.$.each(s.group[0].optiongroup.options,function(t,i){var f=r._ChannelLinkFactory.CreateControl({option:i.option,searchTerm:n,isDropDown:r._suggest._initSettings.customSuggestTabsContainers});f.appendTo(u.find(".js-suggest-controls-tabs"))}),r._suggest._initSettings.customSuggestTabsContainers&&window.innerWidth<=768){let n=u.find(".tabs__item").sort(function(n,t){return n.className>t.className?-1:0});u.find(".js-suggest-controls-tabs").append(n)}i.tabsControls=1;break;case"searcherfilter":c=r._SearcherFilterFactory.CreateControl({option:f.option,searchTerm:n});c.appendTo(o);i.pillsContols=1;break;default:l=r._SelectControlFactory.CreateControl({controlData:s,controlName:h,searchTerm:n});l.appendTo(e.find(".js-suggest-controls-selects"));i.selectControls=1}}),i.selectControls&&e.appendTo(t),i.tabsControls&&u.appendTo(t),i.pillsContols&&(o.appendTo(t),t.addClass("search-suggest__controls--no-direction")),this._suggest._initSettings.customSuggestTabsContainers&&t.addClass("search-suggest__controls--flex"),t.children().length!=0)return this._AddControlsToResponseContainer(t),u}},_InitializeScrollCarousel:function(n,t){t.scrollCarousel({breakpoints:n,sliderSelector:".js-suggest-controls-tabs"})},_AddControlsToResponseContainer:function(n){this._responseContainerEle.prepend(n)},RemoveControls:function(){gts.$("#"+this._suggestControlsContainerId,this._responseContainerEle).remove()}});;;;var SuggestSearchControls=SuggestSearchControls||{};SuggestSearchControls.SelectFactory=Class.create({initialize:function(n){this._initSettings=n;this._suggest=this._initSettings.suggest},CreateControl:function(n){var i=this,t=gts.$("<select><\/select>");t.attr("class",this._initSettings.suggestFilterElementPrefix+"  search-suggest__control  js-custom-select");t.attr("id",n.controlName);t.attr("status","closed");t.attr("aria-label",n.controlName);gts.$.each(n.controlData.group[0].optiongroup.options,function(r,u){var e=u.option,f=gts.$("<option><\/option>"),o;f.attr("class",i._initSettings.suggestFilterElementPrefix+" option");o=typeof e.value!="undefined"?e.value:"";f.attr("value",o);f.text(i._GetOptionTitle(n.controlData,e));t.append(f)});t.on("change",function(){gts.$(this).attr("status","closed");i._suggest.FilterResults(n.searchTerm,{action:EnumSuggestAction.RELOADFILTERED})});return gts.$(String.Format('<li class="{0}"><\/li>',"list-wide__item  search-suggest__select-container")).append(t)},_GetOptionTitle:function(n,t){var i=t.title;switch(n.name){case"bedrooms":i=i.replace("Any","Minimum Bedrooms");break;case"pricerange":i=i.replace("Min","Maximum Price")}return i}});;;;var SuggestSearchControls=SuggestSearchControls||{};SuggestSearchControls.SearcherFilterFactory=Class.create({initialize:function(n){this._initSettings=n;this._suggest=this._initSettings.suggest;this._suggestPillButton="js-suggest-pill-filter";this._suggestDataGroupPrefix=this._initSettings.suggest.SuggestDataGroupPrefix;this._suggestPillContainer="js-suggest-pill-container";this._suggestPillActiveSelector="search-suggest__pill--active";this._defaultActiveColumnsClasses=[];this._numberOfColumns=null;this.BindCompleteRender()},CreateControl:function(){var n=this,t=`
				<div class="search-suggest__pills--list  all-active  ${n._suggestPillContainer}">
					${function(){var i="";let t=n.ButtonsTypes();return Object.keys(t).forEach(r=>{i+=`
									<button class="search-suggest__pill  u-hide  ${n._suggestPillButton}  ${n._suggestPillActiveSelector}" data-pill-filter-target="${t[r].target.join(" ")}" data-pill-filter-recordtype="${t[r].recordType.join(" ")}">
										${t[r].icon}
										<span class="search-suggest__pill--text">${t[r].translation}<span>
									</button>
								`}),i}()}
				</div>
			`;return gts.$(t)},ButtonsTypes:function(){return{location:{translation:"Location",icon:"<i class='icon  icon-search'><\/i>",recordType:[EnumSuggestRecordType.DXLocation,EnumSuggestRecordType.DXLocationWithCount,EnumSuggestRecordType.DXSchoolDistrictWithCount],target:[EnumSuggestTarget.LOCATION]},property:{translation:"Property",icon:"<i class='icon  icon-house-small'><\/i>",recordType:[EnumSuggestRecordType.Listing,EnumSuggestRecordType.Community],target:[]},agents:{translation:"Agents",icon:"<i class='icon  icon-agent'><\/i>",recordType:[EnumSuggestRecordType.Agent,EnumSuggestRecordType.Broker],target:[EnumSuggestRecordType.Agent,EnumSuggestRecordType.Broker]},soldrented:{translation:"Values",icon:"<i class='icon  icon-house-value'><\/i>",recordType:[EnumSuggestRecordType.SoldRented],target:[]}}},BindCompleteRender:function(){var n=this;n._suggest.ModuleEle.off("SuggestResponseRenderComplete"+n._suggest.EventNS).on("SuggestResponseRenderComplete"+n._suggest.EventNS,function(){gts.$("."+n._suggestDataGroupPrefix,n._suggest.ModuleEle).each(function(t,i){let u=gts.$(i).attr("target"),r=gts.$("."+n._suggestPillButton+"[data-pill-filter-target~='"+u+"']","."+n._suggestPillContainer);if(r.length===0){let t=gts.$(i).attr("recordindextype");r=gts.$("."+n._suggestPillButton+"[data-pill-filter-recordtype~='"+t+"']","."+n._suggestPillContainer)}r.removeClass("u-hide")});n._defaultActiveColumnsClasses=[];n._numberOfColumns=null;n._pushActiveColumns=!0;n.BindPillButtonsEvents();n.CreateDynamicalColumns();gts.$(".js-suggest-controls-tabs",n._suggest.ModuleEle).show();let t=gts.$("."+n._suggestPillButton+":visible","."+n._suggestPillContainer);t.length===1&&$(".js-suggest-controls-tabs",n._suggest.ModuleEle).show()})},BindPillButtonsEvents:function(){var n=this,t=gts.$("."+n._suggestPillButton,"."+n._suggestPillContainer);t.off("click"+n._suggest.EventNS).on("click"+n._suggest.EventNS,function(i){i.preventDefault();n.ResetDynamicalColumns();let u=gts.$(this).attr("data-pill-filter-recordtype"),r=gts.$(this).attr("data-pill-filter-target"),f="."+n._suggestDataGroupPrefix;if(gts.$(this).hasClass(n._suggestPillActiveSelector)&&!gts.$("."+n._suggestPillContainer).hasClass("all-active"))t.addClass(n._suggestPillActiveSelector),gts.$(f).removeClass("u-hide"),gts.$("."+n._suggestPillContainer).addClass("all-active");else{t.removeClass(n._suggestPillActiveSelector);gts.$(this).addClass(n._suggestPillActiveSelector);gts.$("."+n._suggestPillContainer).removeClass("all-active");gts.$(f,n._suggest.ModuleEle).addClass("u-hide");let i=u.split(" ");if(i.forEach(function(t){var i="";i=r!==u?"."+n._suggestDataGroupPrefix+"[recordindextype='"+t+"'][target!='"+t+"']":"."+n._suggestDataGroupPrefix+"[recordindextype='"+t+"']";gts.$(i,n._suggest.ModuleEle).removeClass("u-hide")}),r!==undefined&&r!==""&&r!==u){let t=r.split(" ");t.forEach(function(t){let i="."+n._suggestDataGroupPrefix+"[target='"+t+"']";gts.$(i,n._suggest.ModuleEle).removeClass("u-hide")})}}n.CreateDynamicalColumns()})},ResetDynamicalColumns:function(){const t=this,n=gts.$(".category-container",".m-lpsw");if(this._numberOfColumns!==null&&this._defaultActiveColumnsClasses.length>0)n.removeClass("u-hide"),n.each(function(n,i){const r=parseInt(gts.$(i).attr("index")),u=t._defaultActiveColumnsClasses.find(n=>n.id==r);gts.$(i).removeClass(function(n,t){return(t.match(/(^|\s)default--\S+/g)||[]).join(" ")}).addClass(u.class)});else return},CreateDynamicalColumns:function(){const n=this,t=gts.$(".js-suggest-panel",".m-lpsw"),f=t.find(".category-container");n._numberOfColumns=gts.$(".js-lps-suggest-container",t).attr("column-number");var i=0,r=[],u=[];n._defaultActiveColumnsClasses.length===0&&(n._pushActiveColumns=!0);f.each(function(t,f){if(n._pushActiveColumns){const t=gts.$(f).attr("class").match(/(^|)default--\S+/g);n._defaultActiveColumnsClasses.push({id:gts.$(f).attr("index"),"class":t?t[0]:"default--1-1"})}gts.$(".lpssuggest-group-data",gts.$(f)).is(":visible")?(i=i+1,r.push(gts.$(f).attr("index"))):u.push(gts.$(f).attr("index"))});u.forEach(function(n){gts.$(".category-container[index='"+n+"']",t).addClass("u-hide")});r.forEach(function(n){var r="default--1-"+i;gts.$(".category-container[index='"+n+"']",t).removeClass(function(n,t){return(t.match(/(^|\s)default--\S+/g)||[]).join(" ")}).addClass(r)});gts.$(".js-lps-suggest-container",n._suggest.ModuleEle).removeClass(function(n,t){return(t.match(/(^|\s)active-suggest-columns-\S+/g)||[]).join(" ")});gts.$(".js-lps-suggest-container",n._suggest.ModuleEle).addClass("active-suggest-columns-"+i);n._defaultActiveColumnsClasses.length>0&&(n._pushActiveColumns=!1)}});;;;SuggestResponseRendererBase=Class.create({_defaultOptionCount:5,_dataLoadingFlagClass:"js-suggest-loading",initialize:function(n){this._initSettings=n;this._dataContainerId=this._initSettings.dataContainerId;this._eventNS=this._initSettings.eventNS;this._suggest=this._initSettings.suggest;this._optionControlsFactoryProvider=new SuggestGroupOptionControls.FactoryProvider({});this._selectedChannel=this._initSettings.channel;this._selectedGroupType="";this._InitializeElementSelectors();this._SetSettingsFromSuggestConfig(this._initSettings.suggestConfig);this._InitializeResponseScroller();this._HookupEvents();this._SetColumnCountToResponseContainer(null)},_SetSettingsFromSuggestConfig:function(n){(this._suggestConfig=n,n!==null)&&typeof this._suggestConfig.count!="undefined"&&(this._defaultOptionCount=this._suggestConfig.count)},_InitializeElementSelectors:function(){this._moduleEle=this._initSettings.moduleEle;this._textInputEle=gts.$(this._initSettings.textInputEleSelector,this._moduleEle);this._textSelectedDataEle=gts.$(this._initSettings.textSelectedDataEleSelector,this._moduleEle);this._responseContainerEle=gts.$(this._initSettings.responseContainerEleSelector,this._moduleEle);this._suggestDataElementPrefix=this._initSettings.suggestDataElementPrefix;this._suggestDataGroupPrefix=this._initSettings.suggestDataGroupPrefix},_InitializeResponseScroller:function(){this.Scroller=new SuggestResponseScroller({eventNS:this._eventNS,responseContainerEle:this._responseContainerEle,suggestDataElementPrefix:this._suggestDataElementPrefix,textSelectedDataEle:this._textSelectedDataEle})},_HookupEvents:function(){var n=this;this._responseContainerEle.off("touchstart"+this._eventNS+" mousedown"+this._eventNS).on("touchstart"+this._eventNS+" mousedown"+this._eventNS,function(t){n._initSettings.isFlyout||n._ResponseContainerMouseDownEventHandler(t)});this._responseContainerEle.off("touchend"+this._eventNS+" mouseup"+this._eventNS).on("touchend"+this._eventNS+" mouseup"+this._eventNS,function(t){n._initSettings.isFlyout||n._ResponseContainerMouseUpEventHandler(t)})},_ResponseContainerMouseDownEventHandler:function(n){var t=gts.$(n.target).closest("."+this._suggestDataElementPrefix,this._responseContainerEle).length>0;if(this.eventOnSuggestType=gts.$(n.target).parents("[is-recent-search='true']").length>0?"clickedOnLastSearched":"",t){this._OnSuggestResultItemMouseDown();return}n.stopPropagation();this._suggest.FocusToTextInput()},_OnSuggestResultItemMouseDown:function(){var n=this;setTimeout(function(){n._textInputEle.trigger("focus",{keepValueOnFocus:n._textSelectedDataEle.val()!=="",isJsTriggered:!0})},13)},_ResponseContainerMouseUpEventHandler:function(n){var t=gts.$(n.target).closest("."+this._initSettings.suggestFilterElementPrefix,this._responseContainerEle).length>0;return t?(this._OnFilterOptionMouseUp(n),!0):!1},_OnFilterOptionMouseUp:function(n){var t=gts.$(n.target);t.attr("status")==="closed"?this._textInputEle.focus():t.attr("status","closed")},_OnFilterControlMouseUp:function(){this._textInputEle.focus();gts.jQuery.each(gts.$("."+this._initSettings.suggestFilterElementPrefix),function(n,t){if(t.id==="")return!0;gts.$("#"+t.id).attr("status","closed")})},_OpenResponseContainer:function(n){if(!this._responseContainerEle.hasClass(this._initSettings.openClass)){this._responseContainerEle.addClass("suggest-container");var t=_.invert(TranslationCollection)[this._selectedChannel];this._responseContainerEle.attr("data-channel",t);this._responseContainerEle.addClass(this._initSettings.suggestType);typeof n.hidden!="undefined"&&n.hidden||this._responseContainerEle.toggleClass(this._initSettings.openClass,!0).toggleClass(this._initSettings.closedClass,!1);this._textSelectedDataEle.val("");this.ClearResponseContainer();gts.$(window).trigger("SuggestContainerRendered"+RenoEventsNS)}},ClearResponseContainer:function(){this._suggest.SelectHandler.ClearReportData();this._responseContainerEle.html("")},CloseResponseContainer:function(){var n=this;this._selectedGroupType="";n.ClearResponseContainer();n.HideResponseContainer();n._SetColumnCountToResponseContainer(null)},HideResponseContainer:function(){this._responseContainerEle.toggleClass(this._initSettings.openClass,!1).toggleClass(this._initSettings.closedClass,!0)},StartResponseLoading:function(n){this._OpenResponseContainer(n)},EndResponseLoading:function(){},RenderResponse:function(){var n=this;if(n._responseContainerEle.parents(".is-animated").length&&n._seeMoreLinkFactory._suggest._isBusy){const t="transitionend"+RenoEventsNS+"."+n._moduleId+" webkitTransitionEnd"+RenoEventsNS+"."+n._moduleId+" oTransitionEnd"+RenoEventsNS+"."+n._moduleId;n._responseContainerEle.off(t).on(t,function(t){(!t.target||gts.$(t.target).is(n._initSettings.responseContainerEleSelector))&&n._InitializeSmartImage(n._responseContainerEle)})}else n._InitializeSmartImage(n._responseContainerEle);n._responseContainerEle.trigger("SuggestRenderComplete"+RenoEventsNS)},_InitializeSmartImage:function(n){gts.$(".js-smartimage",n).smartImage({verticalAlign:!1,scrollContainerSelectorFunction:function(){return _.compact([n.get(0),window])}})},_IsValidSuggestDataResponse:function(n){return n.group&&n.group.length>0},_GetGroupsWithDataFromResponse:function(n){var t=[];return gts.jQuery.each(n.group,function(n,i){i&&i.option.length>0&&t.push(i)}),t},_GetGroupsAsCategoriesGroupedByIndexFromResponse:function(n){var u=this._GetGroupsWithDataFromResponse(n),r=[],t=this._GroupByProperty(u,"index");for(var i in t)t.hasOwnProperty(i)&&r.push({classindex:i,data:t[i]});return r},_AppendContainerToTargetContainer:function(n,t,i){var r=gts.$(n),f=r.children(),e=f.length?parseInt(t):null,u;if(!r.find(i).length)switch(e){case null:i.appendTo(r);break;case 0:i.prependTo(r);break;default:u=f[e-1];typeof u!="undefined"?i.insertAfter(u):i.appendTo(r)}},_GetDataContainerFromResponseContainer:function(n){var t=gts.$("#"+this._dataContainerId,this._responseContainerEle),i;return t.length>0?(t.addClass("suggest-container__suggest-panel  grid  grid--spaced  is-ingrid  js-suggest-panel"),t):(typeof n=="undefined"&&(n=""),i=gts.$(String.Format('<div id="{0}" class="suggest-panel  suggest-container__suggest-panel  grid--spaced  is-ingrid  js-suggest-panel  {1}"><\/div>',this._dataContainerId,n)),i.appendTo(this._responseContainerEle),i)},_GetGroupContainer:function(n,t,i){var f=this._GetGroupContainerByGroupType(n,i),r,u,e;return f!==null?f:(r=gts.$("<dl />"),u="",t!==null&&r.attr("index",t),i!==null&&(u=SuggestUtility.ToEnumSuggestGroupType(i.suggestrecordtype),e=i.suggestrecordtype!=="undefined"?i.suggestrecordtype:1,r.attr("id","Tab_"+i.name),r.attr("type",i.name),r.attr("target",i.target),typeof i.isRecentSearch!="undefined"&&r.attr("is-recent-search",i.isRecentSearch),typeof i.alllink!="undefined"&&r.attr("data-alllink",i.alllink),typeof i.title!="undefined"&&r.attr("data-title",i.title),u&&r.attr("recordtype",String.Format("suggest-group-type__{0}",u)),r.attr("recordindextype",e)),r.attr("class",this._suggestDataGroupPrefix+"  "+this._dataLoadingFlagClass+"  suggest-data__"+u),r)},_GetGroupContainerByGroupType:function(n,t){if(t===null)return null;var i=gts.$(String.Format(".{0}[type='{1}']",this._suggestDataGroupPrefix,t.name),this._responseContainerEle);return i.length===0?null:i},_CreateGroupOptions:function(n,t){for(var i=this,f=[],e=t.target,o=t.suggestrecordtype,r=0;r<n.length;r++){var s=i._optionControlsFactoryProvider.Get(i._initSettings.suggestType,e,o),h=i._optionControlsFactoryProvider.GetFactory(s,{suggestDataElementPrefix:i._suggestDataElementPrefix,agentPhotoColor:i._initSettings.agentPhotoColor}),c={searchTarget:e,controlIndex:r,controlData:n[r],suggestRecordType:o},u=h.CreateControl(c),l=gts.hasTouch()?"click"+RenoEventsNS:"mousedown"+RenoEventsNS+" keydown"+RenoEventsNS;u.on(l,function(n){(n.keyCode===undefined||n.keyCode===13||n.keyCode===0)&&i._suggest.SelectHandler.Select(gts.$(this))});u.mouseenter(function(){i.Scroller.ScrollToItem(gts.$(this),ScrollerType.mouse)});u.mouseleave(function(){i.Scroller.ScrollToItem(null,ScrollerType.mouse)});f.push(u)}return this._suggest.SelectHandler.AddReportData(t.report),f},_AppendToGroupContainer:function(n,t){var i=t.header,e=t.options,u=t.link,f=t.alllink,r;(this._initSettings.openAsFlyout||this._initSettings.suggestId==="quick_search_top_module")&&(!this._initSettings.openAsFlyout||this._initSettings.suggestId==="quick_search_top_module")||typeof i!="undefined"&&i!==null&&gts.$(n).find(i).length===0&&gts.$(n).find("dt.search-suggest__group").length===0&&i.appendTo(gts.$(n));typeof e!="undefined"&&e!==null&&gts.jQuery.each(e,function(t,i){i.appendTo(gts.$(n))});r=null;(typeof u!="undefined"&&u!==null||typeof f!="undefined"&&f!==null)&&(r=gts.$("<div/>").addClass("suggest-container__links"));typeof u!="undefined"&&u!==null&&u.appendTo(r);typeof f!="undefined"&&f!==null&&f.appendTo(r);r!==null&&r.appendTo(gts.$(n));this._initSettings.openAsFlyout&&this._initSettings.suggestId==="quick_search_top_module"&&typeof i!="undefined"&&i!==null&&gts.$(n).find(i).length===0&&gts.$(n).find("dt.search-suggest__group").length===0&&i.appendTo(gts.$(n))},_GroupByProperty:function(n,t){for(var r={},i=0;i<n.length;i++)r[n[i][t]]||(r[n[i][t]]=[]),r[n[i][t]].push(n[i]);return r},ChangeGroupType:function(n){this._selectedGroupType=n;gts.$(".o-loader .js-smartimage",this._responseContainerEle).trigger("appear")},ChangeChannel:function(n,t){this._selectedChannel=n;this._SetSettingsFromSuggestConfig(t)},HasData:function(){return gts.$(this._responseContainerEle).children().length>0},_SetColumnCountToResponseContainer:function(n){var i=1,r,t;n!==undefined&&n!==null&&(i=n.length);r=new RegExp("(suggest-columns-([0-9]+))","g");t=this._responseContainerEle.attr("class");t=t.replace(r,"");t=t.trim();t+=" suggest-columns-"+i;this._responseContainerEle.attr("class",t);this._responseContainerEle.attr("column-number",i)},_TriggerRenderResponseCompletedEvent:function(){this._moduleEle.trigger("SuggestResponseRenderComplete"+this._eventNS,{moduleEle:this._moduleEle})}});;;;var SuggestResponseRendererFactory={GetResponseRenderer:function(n){switch(n.suggestType){case EnumSuggestType.CATEGORY:case EnumSuggestType.GROUP:case EnumSuggestType.AGENT:case EnumSuggestType.BROKER:return"undefined"!=typeof n.customSuggestStyle&&n.customSuggestStyle==="with-tabs"?new SuggestCategoryTabsResponseRenderer(n):new SuggestCategoryResponseRenderer(n);case EnumSuggestType.NOGROUP:return new SuggestNoGroupResponseRenderer(n);default:return null}}};;;;SuggestNoGroupResponseRenderer=Class.create(SuggestResponseRendererBase,{StartResponseLoading:function(){},RenderResponse:function($super,n,t){var u,f,h,i,r,e,o,l,a;if(this._IsValidSuggestDataResponse(t)&&(this._OpenResponseContainer(n),u=this._GetGroupsAsCategoriesGroupedByIndexFromResponse(t),u.length!=0)){var s=this._GetDataContainerFromResponseContainer(),v=n.search==null?null:n.search.orderIndex,c=this._GetGroupContainer(s,v,null);for(f=0;f<u.length;f++)for(h=u[f].data,i=0;i<h.length;i++){for(r=[],e=h[i],o=0;o<e.option.length;o++){if(l=s.find("."+this._suggestDataElementPrefix).length,l+r.length==this._defaultOptionCount){this._suggest.AbortOngoingRequest();break}r.push(e.option[o])}if(r.length<=0)return;a=this._CreateGroupOptions(r,e);this._AppendToGroupContainer(c,{options:a});this._AppendContainerToTargetContainer(s,i,c);this._TriggerRenderResponseCompletedEvent()}$super(n,t)}}});;;;SuggestCategoryResponseRenderer=Class.create(SuggestResponseRendererBase,{_suggestControlsContainerId:"SuggestControls",_dateContainerSelector:"category grid",_categoryContainerClass:"category-container",_subCategoryContainerClass:"subcategory",_categoryResponsiveClassesByCategoryCount:{1:"",2:"palm--1-1  palm-wide--1-1  default--1-2",3:"palm--1-1  palm-wide--1-1  lap--1-2  lap-wide--1-2  default--1-3"},initialize:function($super,n){this._showAllLink=!1;this._seeMoreOptionCount=0;this._noResultsEle=gts.$('<div class="search-suggest__no-results">No results found<\/div>');this._categoryResponsiveClassesByCategoryCount=n.categoryResponsiveClassesByCategoryCount||this._categoryResponsiveClassesByCategoryCount;$super(n);this._InitializePleaseSelectOnEnterClickMessage();this._InitializeSearchControlsManager();this._InitializeControlFactories()},_InitializeControlFactories:function(){this._showAllLinkFactory=this._optionControlsFactoryProvider.GetFactory(SuggestGroupOptionControls.FactoryType.ShowAllLinkFactory,{});this._allGroupTypeLinkFactory=this._optionControlsFactoryProvider.GetFactory(SuggestGroupOptionControls.FactoryType.AllGroupTypeLinkFactory,{suggest:this._suggest});this._seeMoreLinkFactory=this._optionControlsFactoryProvider.GetFactory(SuggestGroupOptionControls.FactoryType.SeeMoreLinkFactory,{suggest:this._suggest});this._groupHeaderFactory=this._optionControlsFactoryProvider.GetFactory(SuggestGroupOptionControls.FactoryType.GroupHeaderFactory,{suggest:this._suggest})},_SetSettingsFromSuggestConfig:function($super,n){($super(n),this._suggestConfig!=null)&&(typeof this._suggestConfig.showall!="undefined"&&(this._showAllLink=this._suggestConfig.showall),typeof this._suggestConfig.morecount!="undefined"&&(this._seeMoreOptionCount=this._suggestConfig.morecount),typeof this._suggestConfig.count!="undefined"&&(this._defaultOptionCount=this._suggestConfig.count))},_ResponseContainerMouseDownEventHandler:function($super,n){return gts.$(n.target).closest("."+this._initSettings.suggestFilterElementPrefix,this._responseContainerEle).length>0?(this._OnFilterControlMouseDown(n),!0):$super(n)},_OnFilterControlMouseDown:function(n){var t=gts.$(n.target);t.attr("status","opened")},_ResponseContainerMouseUpEventHandler:function($super,n){$super(n)||gts.$(n.target).closest("#"+this._suggestControlsContainerId,this._responseContainerEle).length&&this._OnFilterControlMouseUp(n)},_InitializeSearchControlsManager:function(){if(!this._initSettings.renderSearchControls){this._searchControlsManager=null;return}this._searchControlsManager=new SuggestSearchControls.SearchControlsManager({suggest:this._suggest,suggestType:this._initSettings.suggestType,isFlyout:this._initSettings.isFlyout,responseContainerEle:this._responseContainerEle,suggestControlsContainerId:this._suggestControlsContainerId,dataContainerId:this._dataContainerId,suggestFilterElementPrefix:this._initSettings.suggestFilterElementPrefix});this._searchControlsManager.SetControlsData({selectedChannel:this._selectedChannel,suggestConfig:this._suggestConfig})},RenderResponse:function($super,n,t){if(n.action==EnumSuggestAction.SHOWALL||this._IsValidSuggestDataResponse(t)){var i=this._GetGroupsAsCategoriesGroupedByIndexFromResponse(t);switch(n.action){case EnumSuggestAction.SHOWALL:case EnumSuggestAction.SHOWRECENTSEARCHES:case EnumSuggestAction.RELOADHIDDEN:this._RenderAll(n,i);break;case EnumSuggestAction.DISPLAYMOREOPTIONS:this._RenderMoreOptionsForGroup(n,i);break;case EnumSuggestAction.RELOADFILTERED:this._RenderFiltered(n,i)}$super(n,t);this._InitializeCustomSelects();this._TriggerRenderResponseCompletedEvent()}},_InitializeCustomSelects:function(){typeof gts.$("<div>").selectBoxIt=="function"&&gts.$(".js-custom-select",this._responseContainerEle).selectBoxIt({autoWidth:!1})},_RenderAll:function(n,t){var a=this._initSettings.isFlyout,d=this._initSettings.renderWithSuggestManager,u=this._GetDataContainerFromResponseContainer("category grid"),f=[],r=this._selectedGroupType,p=!0,w=0,o,s,v,b,y,e,h,c,l;for(r&&r.name!==""?f.push({title:"All",name:"",selected:""}):f.push({title:"All",name:"",selected:!0}),o=0;o<t.length;o++)for(s=t[o],v=this._CreateCategoryContainer(u,s),this._AppendContainerToTargetContainer(u,s.classindex,v),this._AdjustCategoryContainerCategoryCountClasses(u),b=u.find("."+this._categoryContainerClass),this._SetColumnCountToResponseContainer(b),y=s.data,e=0;e<y.length;e++){var i=y[e],g=typeof i.option!="undefined"?i.option.length:0,k="";i.name===r.name&&(k=!0,p=!1);a&&i&&i.name&&i.title&&f.push({title:i.title,name:i.name,selected:k});w+=i.option.length;this._RenderGroup(v,i,e,g,n)}a&&t.length&&(p&&r&&r.name&&(f.splice(1,0,r),h=this._CreateCategoryContainer(u,{classindex:"no-data"}),h.addClass("is-absolute"),this._AppendContainerToTargetContainer(u,null,h),this._RenderNoDataGroup(h,r,w)),this._searchControlsManager&&(c=this._searchControlsManager.AddGroupTypeControls(f),!n.hidden&&c&&c.length>0&&!this._suggest._initSettings.customSuggestTabsContainers&&this._searchControlsManager._InitializeScrollCarousel([{width:"480","class":"js-break-mobile  is-scrollable"},{width:"768","class":"js-break-lap  is-scrollable"},{"class":"js-break-default"}],c)));(this._searchControlsManager!=null&&!a||d)&&(n.action!==EnumSuggestAction.SHOWRECENTSEARCHES&&(l=this._searchControlsManager.AddControls(n.searchTerm)),!n.hidden&&l&&l.length>0&&!this._suggest._initSettings.customSuggestTabsContainers&&this._searchControlsManager._InitializeScrollCarousel([{width:"480","class":"js-break-mobile  is-scrollable"},{width:"768","class":"js-break-lap  is-scrollable"},{width:"960","class":"js-break-tablet  is-scrollable"},{"class":"js-break-default"}],l));this._ShowEnterClickMessageControl()},_AdjustCategoryContainerCategoryCountClasses:function(n){var i=gts.$(n).find("."+this._categoryContainerClass),t;i.removeClass(this._categoryResponsiveClassesByCategoryCount[1]).removeClass(this._categoryResponsiveClassesByCategoryCount[2]).removeClass(this._categoryResponsiveClassesByCategoryCount[3]);t=i.length;t<1&&(t=1);t>2&&(t=3);i.addClass(this._categoryResponsiveClassesByCategoryCount[t])},_RenderNoDataGroup:function(n,t,i){var r=this._GetGroupContainer(n,0,t),u={alllink:this._CreateAllGroupTypeLink(i)};this._AppendToGroupContainer(r,u);this._AppendContainerToTargetContainer(n,0,r);this._RemoveDataLoadingFlagFromGroupContainer(r)},_RenderGroup:function(n,t,i,r,u){var o=u.search==null?i:u.search.orderIndex,f=this._GetGroupContainer(n,o,t),s,h,e,c;this._RemoveDataLoadingFlagFromGroupContainer(f);u.action===EnumSuggestAction.RELOADFILTERED&&f.html("");s={options:this._CreateGroupOptions(t.option,t),header:this._CreateGroupHeader(t.title,f,t.morelink),alllink:this._CreateGroupAllLink(t),link:this._CreateGroupMoreLink(u.searchTerm,t,r)};this._AppendToGroupContainer(f,s);h=t.hasOwnProperty("isingroup")?t.isingroup:!1;e=this._GetSubCategoryContainer(h,t.grouptitle,n);e!=null&&gts.$(e).find(f).length===0&&e.append(f);c=e!=null?e:f;this._AppendContainerToTargetContainer(n,o,c)},_GetSubCategoryContainer:function(n,t,i){var r;return n?(r=null,gts.$.each(gts.$(".subcategory",i),function(){var n=gts.$(this);if(gts.$(".subtitle",n).html().trim()===t.trim())return r=n,!1}),r!=null)?r:gts.$(String.Format('<div class="{0}"><span class="subtitle  search-suggest__group  u-text-uppercase">{1}<\/span><\/div>',this._subCategoryContainerClass,t)):null},_CreateCategoryContainer:function(n,t){var u="category-"+t.classindex,f=n.find("."+u),i,r;return f.length>0?f:(i=gts.$("<div><\/div>"),i.attr("index",t.classindex),i.addClass(this._categoryContainerClass),i.addClass(u),i.addClass("grid__item"),r=this._GetCategoryCssClass(t.classindex),r!==""&&i.addClass(r),i)},_RenderMoreOptionsForGroup:function(n,t){var c=this,e=".suggest-container__links",i,s,h,f;if(t!=null&&t.length!==0&&(i=t[0].data,i!=null&&i.length!==0)){var r=i[0],l=this._GetDataContainerFromResponseContainer("category"),o=this._CreateCategoryContainer(l,t[0]),u=this._GetGroupContainer(o,null,r);gts.$(".seemore#"+n.settings.group.name,this._responseContainerEle).remove();gts.$(".showall#"+n.settings.group.name+"_all",this._responseContainerEle).remove();s=$(document).scrollLeft();h=$(document).scrollTop();window.scrollTo(s,h);isResponsive||c.Scroller.ScrollToItem(u.find("."+this._suggestDataElementPrefix).last());f=typeof r.option!="undefined"?r.option.length:0;f+=n.settings.group.offset;this._RenderGroup(o,r,0,f,n);u.find(e).is(":empty")&&(u.find(e).remove(),u.append('<div class="suggest-container__links"><\/div>'))}},_RenderFiltered:function(n,t){this._RenderAll(n,t)},_GetCategoryCssClass:function(n){var t="category-";switch(n){case EnumSuggestTarget.LOCATION:return t+"location";case EnumSuggestTarget.FILTEREDRECORD:return t+"filteredrecord";case EnumSuggestTarget.RECORD:return t+"record";default:return""}},_CreateGroupHeader:function(n,t,i){var r=this._groupHeaderFactory.FindExistingByTitle(n,t);return r!=null?r:this._groupHeaderFactory.CreateControl({headerCaption:n,morelink:i||""})},_CreateGroupAllLink:function(n){return this._showAllLink?this._showAllLinkFactory.CreateControl({groupData:n}):null},_CreateAllGroupTypeLink:function(n){return this._allGroupTypeLinkFactory.CreateControl(n)},_CreateGroupMoreLink:function(n,t,i){return this._seeMoreLinkFactory.CreateControl({searchTerm:n,groupData:t,offset:i,seeMoreOptionCount:this._seeMoreOptionCount})},ChangeChannel:function($super,n,t){$super(n,t);this._searchControlsManager!=null&&this._searchControlsManager.SetControlsData({selectedChannel:this._selectedChannel,suggestConfig:this._suggestConfig})},HasData:function(){return gts.$(this._responseContainerEle).find("."+this._categoryContainerClass).length>0},ShowNoResultsMessage:function(){return this._responseContainerEle.find(this._noResultsEle).length>0?(this._noResultsEle.show(),typeof this._enterClickMsgControl!="undefined"&&this._enterClickMsgControl.hide(),!0):(this._responseContainerEle.append(this._noResultsEle),!0)},StartResponseLoading:function($super,n){if($super(n),this._responseContainerEle.hasClass(this._initSettings.openClass)){this._AddDataLoadingFlagToGroupContainers(n.searches);return}},EndResponseLoading:function($super){$super();this._RemoveResultContainersThatHaveDataLoadingFlag()},_AddDataLoadingFlagToGroupContainers:function(n){var t=gts.$("."+this._suggestDataGroupPrefix,this._responseContainerEle),i,r;typeof n!="undefined"&&n.length>0&&(i=n.map(function(n){return n.type}),r=gts.$.grep(t,function(n){return gts.$.inArray(gts.$(n).attr("type"),i)!=-1}),t=gts.$(r));t.addClass(this._dataLoadingFlagClass)},_RemoveDataLoadingFlagFromGroupContainer:function(n){n.removeClass(this._dataLoadingFlagClass)},_RemoveResultContainersThatHaveDataLoadingFlag:function(){var n=this,t=gts.$("."+this._suggestDataGroupPrefix+"."+this._dataLoadingFlagClass,this._responseContainerEle);gts.$.each(t,function(t,i){var r=gts.$(i),u=r.closest("."+n._subCategoryContainerClass),f=r.closest("."+n._categoryContainerClass);r.remove();n._RemoveParentContainerIfItContainsNoGroupElements(u);n._RemoveParentContainerIfItContainsNoGroupElements(f)})},_RemoveParentContainerIfItContainsNoGroupElements:function(n){var t,i;n.length!=0&&(t=gts.$(n).find("."+this._suggestDataGroupPrefix).length==0,t)&&(n.remove(),i=gts.$("#"+this._dataContainerId,this._responseContainerEle),this._AdjustCategoryContainerCategoryCountClasses(i))},_InitializePleaseSelectOnEnterClickMessage:function(){if(this._initSettings.showMakeSelectionMessageOnEnterClick){this._enterClickMsgControl=gts.$('<p class="suggest-message">Please make a selection<\/p>');var n="SuggestEnterKeyDown"+this._initSettings.eventNS+".enterclickmessage",t=this;this._suggest.TextInputEle.off(n).on(n,function(){t._userClickedEnter=!0;t._ShowEnterClickMessageControl()})}},_ShowEnterClickMessageControl:function(){if(!(this._responseContainerEle.find("."+this._suggestDataElementPrefix).length<=0)){var n=this._enterClickMsgControl;typeof n!="undefined"&&this._userClickedEnter&&(this._responseContainerEle.find(n).length<=0&&this._responseContainerEle.prepend(n),n.show())}},ClearResponseContainer:function($super){this._userClickedEnter=!1;typeof this._enterClickMsgControl!="undefined"&&this._enterClickMsgControl.hide();$super()}});;;;SuggestCategoryTabsResponseRenderer=Class.create(SuggestCategoryResponseRenderer,{initialize:function($super,n){$super(n);this._HookupRenderCompleted()},_RenderGroup:function(n,t,i,r,u){var c=u.search===null?i:u.search.orderIndex,h=n.parent(),f=this._GetGroupContainer(n,c,t),l,a,e,v,o,s,y;this._RemoveDataLoadingFlagFromGroupContainer(f);u.action===EnumSuggestAction.RELOADFILTERED&&f.html("");l={options:this._CreateGroupOptions(t.option,t),header:this._CreateGroupHeader(t.title,f,t.morelink),alllink:this._CreateGroupAllLink(t),link:this._CreateGroupMoreLink(u.searchTerm,t,r)};this._AppendToGroupContainer(f,l);a=t.hasOwnProperty("isingroup")?t.isingroup:!1;e=this._GetSubCategoryContainer(a,t.grouptitle,n);e!==null&&gts.$(e).find(f).length===0&&e.append(f);v=h.prev().hasClass("js-tab-titles")?h.prev():gts.$('<div class="js-tab-titles suggest__tabs grid grid--full"/>').insertBefore(h);n.find(".subcategory").length===0&&(o=n.attr("index"),v.append(gts.$(String.Format("<label class='grid__item default--1-2 index-{0} {1}' for='suggest_subcategory_switcher_{0}'><span class='suggest__tabs-item'>{2}<\/span><\/label>",o,o==="1"?" is-selected":"",t.grouptitle))),gts.$(String.Format('<input id="suggest_subcategory_switcher_{0}" type="radio" name="suggest_subcategory_switcher" class="js-suggest-subcategory-switcher suggest__subcategory-switcher u-hide" value="{0}"{1} />',o,o===1?" checked='checked'":"")).insertBefore(n));s=gts.$(".js-suggest-subcategory-switcher",this._moduleEle);s.length>0&&s.filter(":checked").length===0&&gts.$(s[0]).attr("checked","checked");y=e!==null?e:f;this._AppendContainerToTargetContainer(n,c,y);this._DoReport(t)},_HookupRenderCompleted:function(){var n=this;this._moduleEle.on("SuggestResponseRenderComplete"+this._eventNS,function(t,i){n._HookupTabsEvents(i.moduleEle)})},_HookupTabsEvents:function(n){var i=gts.$(".js-tab-titles",n),t=gts.$(".js-suggest-subcategory-switcher",n);t.off("change").on("change",function(){var n=t.filter(":checked").val();i.find("label").removeClass("is-selected").filter(String.Format('[for="suggest_subcategory_switcher_{0}"]',n)).addClass("is-selected")})}});;;;ScrollerType={keyboard:"keyboard",mouse:"mouse"};SuggestResponseScroller=Class.create({initialize:function(n){this._currentScrollerType=null;this._initSettings=n;this._eventNS=this._initSettings.eventNS;this._responseContainerEle=this._initSettings.responseContainerEle;this._suggestDataElementPrefix=this._initSettings.suggestDataElementPrefix;this._textSelectedDataEle=this._initSettings.textSelectedDataEle},ScrollToNext:function(n){this.ScrollToItem(this._GetNextElement(),n)},ScrollToPrev:function(n){var t=this._GetPreviousElement();if(t==null){this.UnHighlight();return}this.ScrollToItem(t,n)},ScrollToItem:function(n,t){var r,i,u;if(this.UnHighlight(),typeof n=="undefined"||n==null||n.length==0){this._TriggerScrollingNoneSelectedEvent();return}this._responseContainerEle.is(":visible")&&!n.is(":visible")&&(this._currentScrollerType=t,n.toggleClass("suggest-over",!0),r=gts.$(this._responseContainerEle)[0].scrollHeight>gts.$(this._responseContainerEle)[0].clientHeight,typeof gts.$.ui!="undefined"&&r&&(i=0,n.length==1&&(n.position().top<0?i=gts.$(this._responseContainerEle).scrollTop()+n.position().top:n.position().top+n.height()>gts.$(this._responseContainerEle).height()?(u=n.position().top+n.height()-gts.$(this._responseContainerEle).height(),i=gts.$(this._responseContainerEle).scrollTop()+u):i=gts.$(this._responseContainerEle).scrollTop()),gts.$(this._responseContainerEle).scrollTop(i)),this._TriggerScrollingEvent(n))},_GetNextElement:function(){var r=this.GetCurrentSuggestItem(),n=gts.$("."+this._suggestDataElementPrefix,this._responseContainerEle),t=n.index(r),i=t+1;return t>=n.length-1&&(i=0),n.eq(i)},_GetPreviousElement:function(){var i=this.GetCurrentSuggestItem(),n=gts.$("."+this._suggestDataElementPrefix,this._responseContainerEle),r=n.index(i),t=r-1;return t==-1?null:n.eq(t)},_TriggerScrollingEvent:function(n){this._textSelectedDataEle.trigger("SuggestScrolling"+this._eventNS,{item:n})},_TriggerScrollingNoneSelectedEvent:function(){this._textSelectedDataEle.trigger("SuggestScrollingNoneSelected"+this._eventNS)},GetCurrentSuggestItem:function(){return gts.$(".suggest-over."+this._suggestDataElementPrefix,this._responseContainerEle)},UnHighlight:function(){gts.$("."+this._suggestDataElementPrefix,this._responseContainerEle).toggleClass("suggest-over",!1);this._currentScrollerType=null},GetCurrentScrollerType:function(){return this._currentScrollerType}});;;;var SuggestSelectHandler=Class.create({initialize:function(n){this._settings=n;this._eventNS=this._settings.eventNS;this._suggest=this._settings.suggest;this._responseContainerEle=this._settings.responseContainerEle;this._selectedChannel=this._settings.selectedChannel;this._reports=[]},Select:function(n){if(typeof n!="undefined"&&n!==null){var t=!1;if(this._DoReports(),n.attr("type")===EnumSuggestTarget.USERLOCATION){this._selectedChannel===RenoChannelType.Offices||this._selectedChannel===RenoChannelType.Associates?this._SelectUserLocationSearch(n):this._SelectUserRadiusSearch();this._CloseSuggest();return}(this._settings.suggestType===EnumSuggestType.AGENT?this._SelectAgent(n):this._settings.suggestType===EnumSuggestType.BROKER?this._SelectBroker(n):this._settings.suggestType===EnumSuggestType.CATEGORY&&n.attr("type")===EnumSuggestTarget.LOCATION&&(typeof this._settings.handleSelectCategoryLocation=="undefined"||this._settings.handleSelectCategoryLocation)?(this._AddToLastSearched(n),t=!0,this._SelectCategoryLocation(n)):n.attr("type")!==EnumSuggestTarget.LOCATION?(t=!0,this._SelectOther(n)):this._responseContainerEle.hasClass("js-location-suggest-response")&&this._AddToLastSearched(n),this._suggest.TextSelectedDataEle.trigger("SuggestSelected"+this._eventNS,{item:n,redirecting:t}),n.hasClass("is-from-search-icon"))||this._CloseSuggest()}},_AddToLastSearched:function(n){let t=localStorage.getItem("recentSearches");if(t?t=JSON.parse(t):(t={group:[]},t.group.push({index:1,option:[],target:1,suggestrecordtype:7,title:"Last Searched",totalcount:3})),t.group[0].option.length){if(t.group[0].option.some(t=>t.title===n.find("a").text()))return;t.group[0].option.push(this._GetSelectedItem(n));t.group[0].option.length>3&&t.group[0].option.shift()}else t.group[0].option.push(this._GetSelectedItem(n));t.group[0].option.reverse();localStorage.setItem("recentSearches",JSON.stringify(t))},_GetSelectedItem:function(n){const t={};return t.title=n.find("a").text(),t.valuegid=n.attr("name"),t.valuelatlng=n.attr("latlng"),t.valueseo=n.attr("seo"),t},_CloseSuggest:function(){this._settings.closeSuggestOnSelect&&this._suggest.CloseSuggest();this._suggest.ModuleEle.trigger("CloseSuggestFlyout"+RenoEventsNS)},_SelectAgent:function(n){var t=n.attr("agentName"),i=n.attr("agentId"),r=n.attr("agentEmail");this._suggest.TextSelectedDataEle.attr("agentId",i);this._suggest.TextSelectedDataEle.attr("agentEmail",r);this._suggest.TextSelectedDataEle.find(".js-agent-association-information").html(n.html());this._suggest.TextSelectedDataEle.show();this._suggest.TextInputEle.val(t);this._suggest.CloseSuggest()},_SelectBroker:function(n){var t=n.attr("brokerName"),i=n.attr("brokerId"),r=n.attr("brokerEmail");this._suggest.TextSelectedDataEle.attr("brokerId",i);this._suggest.TextSelectedDataEle.attr("brokerEmail",r);this._suggest.TextSelectedDataEle.find(".js-broker-association-information").html(n.html());this._suggest.TextSelectedDataEle.show();this._suggest.TextInputEle.val(t);this._suggest.CloseSuggest()},_SelectCategoryLocation:function(n){if(this._settings.pageSearchType===SearchType.Radius){this._DoRadiusSearch(n);return}if(this._settings.pageSearchType===SearchType.MapArea){this._DoMapAreaSearch(n);return}if(this._settings.redirectToRegionalSiteWhenLocationIsSelected){this._DoRegionalSiteLocationSearch(n);return}this._DoSeoSearch(n.attr("seo"))},_DoRadiusSearch:function(n){var t=this;gts.$.ajax({url:LocationServiceRoot+"/getradiussearch.ashx",dataType:"jsonp",data:{seoquery:n.attr("seo")},success:function(n){t._DoSeoSearch(n.response.seoquery)}})},_DoRegionalSiteLocationSearch:function(n){var t=this;gts.$.ajax({url:LocationServiceRoot+"/getregionalsitelocationsearch.ashx",dataType:"jsonp",data:{seoquery:n.attr("seo")},success:function(n){t._DoSeoSearch(n.response.seoquery,undefined,n.response.applicationpath)}})},_DoMapAreaSearch:function(n){var t=this,i=SEOService.AddMandatoryUrlParts(String.Format("{0}/{1}",t._selectedChannel,n.attr("seo")));gts.$.ajax({url:LocationServiceRoot+"/getmapareasearch.ashx?seoquery="+i,dataType:"jsonp",success:function(n){t._DoSeoSearch(n.response.seoquery)}})},_DoSeoSearch:function(n,t,i){window.location.href=this._GetCategoryLocationHref(n,t,i)},_GetCategoryLocationHref:function(n,t,i){var u=this._settings.selectedRefinementsGetter().join("/"),f=u?SEOService.EnsureLeadingSlash(n):"",e=ChannelService.ContainsChannel(n)?"":SEOService.EnsureLeadingSlash(this._selectedChannel),r;return n=n?SEOService.EnsureLeadingSlash(n):"",r=e+n+f,currentWebsiteDomainWebRoot+SEOService.AddMandatoryUrlParts(r,t,i)},_SelectOther:function(n){this._suggest.TextInputEle.trigger("RedirectStarting"+this._eventNS);var t=n.attr("seo");window.location.href=SuggestUtility.IsAbsoluteURL(t)?t:currentWebsiteDomainWebRoot+t},SetPageSearchType:function(n){this._settings.pageSearchType=n},ChangeChannel:function(n){this._selectedChannel=n},_SelectUserRadiusSearch:function(){var n=this,t;n._suggest.TextInputEle.trigger("RedirectStarting"+n._eventNS);t=new UserLocationGetter;t.getLatLng({onSuccess:function(t){gts.$.ajax({url:LocationServiceRoot+"/getuserradiussearch.ashx",dataType:"jsonp",data:{lat:t.coords.latitude,lng:t.coords.longitude,breakpoint:gts.$("body").containerBreakpoints("getCurrentBreakpoint").class.replace("js-break-","").replace("lap","mobile").replace("large","desktop")},success:function(t){if(typeof t.response.seoquery!="undefined"&&t.response.seoquery!==null){var i=new LastLocationGetter;i.SetShowCurrentLocationTag(!0);n._DoSeoSearch(t.response.seoquery)}else n._suggest.TextInputEle.trigger("RedirectStopped"+n._eventNS)},error:function(){n._suggest.TextInputEle.trigger("RedirectStopped"+n._eventNS)}})},onFail:function(t){n._suggest.TextInputEle.trigger("RedirectStopped"+n._eventNS);console.log(t.message)}})},_SelectUserLocationSearch:function(n){var t=this,i;t._suggest.TextInputEle.trigger("RedirectStarting"+t._eventNS);i=new UserLocationGetter;i.get({onSuccess:function(i){gts.$.ajax({url:LocationServiceRoot+"/getuserlocationsearch.ashx",dataType:"jsonp",data:{level:n.attr("data-value"),lat:i.Latitude,lng:i.Longitude,regionid:i.RegionId},success:function(n){typeof n.response.locationseo!="undefined"&&n.response.locationseo!==null?t._DoSeoSearch(n.response.locationseo):t._suggest.TextInputEle.trigger("RedirectStopped"+t._eventNS)},error:function(){t._suggest.TextInputEle.trigger("RedirectStopped"+t._eventNS)}})},onFail:function(n){t._suggest.TextInputEle.trigger("RedirectStopped"+t._eventNS);console.log(n.message)}})},AddReportData:function(n){typeof n!="undefined"&&this._reports.push(n)},ClearReportData:function(){this._reports.length=0},_DoReports:function(){this._reports.forEach(function(n){DoReport(n.data,n.name)});this.ClearReportData()}});;;;var LastLocationCookieItems={SeoPart:"SeoPart",ShowCurrentLocationTag:"ShowCurrentLocationTag"},LastLocationGetter=Class.create({_cookieKey:"LastLocationGetter",initialize:function(){},SetLocation:function(n){this._SetToCookie(n,LastLocationCookieItems.SeoPart)},ClearLocation:function(){this._SetToCookie("",LastLocationCookieItems.SeoPart)},SetShowCurrentLocationTag:function(n){this._SetToCookie(n,LastLocationCookieItems.ShowCurrentLocationTag)},ClearShowCurrentLocationTag:function(){this._SetToCookie(!1,LastLocationCookieItems.ShowCurrentLocationTag)},GetLocation:function(){var n=this._GetCookieValue();return n===null?null:n.data.SeoPart},GetShowCurrentLocationTag:function(){var n=this._GetCookieValue();return n===null?null:n.data.ShowCurrentLocationTag},RemoveCookie:function(){gts.$.cookies.set(this._cookieKey,null)},_GetCookieValue:function(){try{return JSON.parse(gts.$.cookies.get(this._cookieKey))}catch(n){return this.RemoveCookie(),null}},_SetToCookie:function(n,t){var r=this._GetCookieValue()||{data:{}},u,i;t===LastLocationCookieItems.SeoPart&&(r.data.SeoPart=n);t===LastLocationCookieItems.ShowCurrentLocationTag&&(r.data.ShowCurrentLocationTag=n);u=JSON.stringify(r);i=new Date;i.setHours(i.getHours()+1);gts.$.cookies.set(this._cookieKey,u,{expires:i})}});;;;var SuggestUtility={StopProcessingEvents:function(n){if(n&&n.preventDefault)return n.preventDefault(),!1;window.event&&window.event.returnValue&&(window.eventReturnValue=!1)},ToEnumSuggestType:function(n){if(typeof n=="undefined")return EnumSuggestType.NOGROUP;n=n.toString().toLowerCase();for(var t in EnumSuggestType)if(EnumSuggestType[t]==n)return EnumSuggestType[t];return EnumSuggestType.NOGROUP},ToEnumSuggestTarget:function(n){return n=n.toUpperCase(),EnumSuggestTarget[n]},ToEnumSuggestGroupType:function(n){return typeof EnumSuggestGroupType[n]!="undefined"?EnumSuggestGroupType[n]:1},IsAbsoluteURL:function(n){return SEOService.IsAbsoluteUrl(n)},ProcessSearchTermForUrl:function(n){return typeof n=="undefined"||n==null?"":n.trim().seoEncodeComponent().toLowerCase()}};;;;(function(n){"use strict";var f="tagsEditor",t={tagRemove:"js-tag-remove",tagsEditor:"tags__editor",tagsContainer:"tags__container",tagsInput:"o-input",tagsItem:"tags__item",tagsItemText:"tags__item-text",tagsSmartMenu:"tags__items",tagsItemRemove:"tags__item-remove",tagsItemRemoveAll:"tags__item-remove--all",tagsOriginalInput:"tags__original-input",tagsIsEditingMode:"is-editing",tagsHasNoTags:"has-no-tags",jsTagsContainer:"js-tags-container",jsTagsEditor:"js-tag-editor",jsTag:"js-tag",jsRemoveAllTags:"js-remove-all-tags",jsTagsSmartMenu:"js-tags",jsMoreTagsParent:"is-more-menu",jsNearbyLocationsTrigger:"js-open-nearbylocations-trigger"},i=String.Format(".{0}{1}",f,"NS"),r={tagRemove:"."+t.tagRemove,tagsEditor:"."+t.tagsEditor,tagsContainer:"."+t.tagsContainer,tagsInput:"."+t.tagsInput,tagsOriginalInput:"."+t.tagsOriginalInput,jsTagsContainer:"."+t.jsTagsContainer,jsTagsEditor:"."+t.jsTagsEditor,jsTag:"."+t.jsTag,jsRemoveAllTags:"."+t.jsRemoveAllTags,jsTagsSmartMenu:"."+t.jsTagsSmartMenu,jsMoreTagsParent:"."+t.jsMoreTagsParent},e={enterKey:13},u="click";n.widget("gts."+f,{_editor:null,options:{tagSuffix:"",tags:[],insertOnEnter:!0,watchContainer:!1,suggestEventNs:"",hasRemoveAllTags:!1,keepOriginalCSSClasses:!0,isSmartRefinements:!1,onTagAdd:null,onTagRemove:null,onBeforeTagAdd:null,onBeforeTagRemove:null,openInFlyout:"",flyoutOpened:!1},_create:function(){var t=this,i=n(t.element).closest("[data-is-module-root]").data("tags-settings");_.isUndefined(i)||(t.options=_.extend({},t.options,i));t._createEditor()},_destroySmartMenu:function(){var n=this;typeof n._smartMenuItem.smartMenu("instance")!="undefined"&&(n._smartMenuItem.smartMenu("destroy"),n._moreTagsContainer.remove())},_destroy:function(){var n=this;n._editor.replaceWith(n.element);n._destroySmartMenu();gts.$(window).off(i);gts.$("body").off(i);n.element.show()},_createEditor:function(){var f=this,o;if(f.element.wrap(String.Format('<div class="{0}  {1}"/>',t.tagsEditor,t.jsTagsEditor)),f._editor=f.element.parent(),f.options.tags.length===0&&f._editor.addClass(t.tagsHasNoTags),f.element.wrap(`<div class="${t.tagsContainer+"  "+t.jsTagsContainer}">
				<div class="${t.tagsSmartMenu+"  "+t.jsTagsSmartMenu}"></div>
				<div class="tags-loading-wrapper js-tags-container-loader u-hide"><i class="o-loader" /></div>
			</div>`),f._tagContainer=f._editor.find(r.jsTagsContainer),f._smartMenuItem=f._tagContainer.find(r.jsTagsSmartMenu),f.element.hasClass(t.tagsInput)&&(f.element.addClass(t.tagsOriginalInput),f._tagContainer.addClass(t.tagsInput),f.options.keepOriginalCSSClasses&&f._editor.addClass(t.tagsInput)),n(f.options.watchContainer).length){o=f.options.suggestEventNs!==""?"."+f.options.suggestEventNs:"";n(f.options.watchContainer).on("SuggestSelected"+o,function(t,i){var r=n(i.item),u=r.text(),e=r.attr("name");f._insertTag(e,u,!1)})}f.options.tags.length>0&&_.forEach(f.options.tags,function(n){var t=n.split("|");f._insertTag(t[0],t[1],!1)});(f.options.hasRemoveAllTags===!0&&f.options.tags.length>1||f.options.isSmartRefinements===!0)&&n(String.Format('<i class="{0}  icon  icon-close {1}"><\/i>',t.tagsItemRemove+" "+t.tagsItemRemoveAll,t.jsRemoveAllTags)).appendTo(f._editor);f.element.off("click"+i).on("click"+i,function(){n(document).trigger(u+".HideOnClickOutside")}).off("keydown"+i).on("keydown"+i,function(n){switch(n.which){case e.enterKey:f.options.insertOnEnter===!0&&f._createTag(n)}});n("body").off("click"+i).on("click"+i,function(i){if(f.focusedInput&&f.focusedInput.tagName=="INPUT"){let t=n(f.focusedInput).closest(".js-locations-wrapper");if(t.length&&n.contains(t[0],i.target))return;n(f.focusedInput).blur()}f._editor.removeClass(t.tagsIsEditingMode);n(document).trigger("ToggleTags"+RenoEventsNS)});n(document).off("click"+i).on("click"+i,r.tagsContainer,function(i){var e=n(this).closest(r.jsTagsEditor);e.addClass(t.tagsIsEditingMode);e.find(r.tagsOriginalInput).focus();f.focusedInput=document.activeElement;f._afterTagOperation();n(document).trigger(u+".HideOnClickOutside");n(document).trigger("ToggleTags"+RenoEventsNS);f.element.hasClass(t.jsNearbyLocationsTrigger)&&n(i.target).hasClass(t.jsTagsSmartMenu)&&n(document).trigger("openLocationsSuggest.RENO",[f.element.parent()])});n(window).off("resize"+i).on("resize"+i,n.throttle(250,function(){f._afterTagOperation()}));f._smartMenuItem.off("widget-redraw-end"+i).on("widget-redraw-end"+i,function(){f._moreTagsContainer.find(".js-counter").html("+"+f._moreTagsContainer.find(r.jsTag+":not("+r.tagsOriginalInput+")").length)});f.options.openInFlyout&&f._bindFlyoutEvents();f._bindTagRemove();f._redrawSmartNavigation()},_createTag:function(){var n=this,t=n.element.val();n._insertTag(t,t);n.element.val("")},_removeTagUI:function(n){this._tagContainer.find(String.Format('[data-tag-key="{0}"]',n)).remove()},_getTags:function(){var t=this,n=t._tagContainer.find("[data-tag-key]");return n.length===0?null:n},_removeAllTags:function(t){var i=this,r=[],u=i._tagContainer.find("[data-tag-key]");u.length!==0&&(u.each(function(){var t=n(this).data("tag-key");r.push(t);i._removeTagUI(t)}),typeof t=="undefined"&&(t=!0),t&&_.isFunction(i.options.onTagRemove)&&i.options.onTagRemove.call(this,r),i._afterTagOperation())},_removeTag:function(n){var t=this;_.isFunction(t.options.onBeforeTagRemove)&&t.options.onBeforeTagRemove.call(this,n);t._removeTagUI(n);_.isFunction(t.options.onTagRemove)&&t.options.onTagRemove.call(this,n);t._afterTagOperation()},_insertTag:function(i,r,u=true){var f=this,e;if(_.isUndefined(r)||r.length===0||r.toLowerCase()==="root"){f._afterTagOperation();return}e={tag:r,key:i};_.isFunction(f.options.onBeforeTagAdd)&&f.options.onBeforeTagAdd.call(this,i);f.options.suggestSelectAction!=="undefined"&&f.options.suggestSelectAction!==null&&f.options.suggestSelectAction==="ReplaceTags"&&f._removeAllTags();n(`<mark class="${t.tagsItem+"  "+t.jsTag}" contenteditable="false" data-tag-key="${e.key}">
				<span class="${t.tagsItemText}">
					${e.tag+f.options.tagSuffix}
				</span>
				<i class="${t.tagsItemRemove}  icon icon-close ${t.tagRemove}"></i>
			</mark>`).insertBefore(f._moreTagsContainer?f._moreTagsContainer:f.element);f._afterTagOperation();_.isFunction(f.options.onTagAdd)&&f.options.onTagAdd.call(this,i);u&&f._redrawSmartNavigation()},_bindTagRemove:function(){var f=this,t="click.removeTag";f._editor.off(t+i).on(t+i,r.tagRemove,function(t){t.preventDefault();n(document).trigger(u+".HideOnClickOutside");var i=n(this).parent().data("tag-key");_.isUndefined(i)||(gts.$(".js-tags-container-loader").removeClass("u-hide"),f._removeTag(i))});n(document).off(t+i+".removeAllTags").on(t+i+".removeAllTags",r.jsRemoveAllTags,function(t){t.preventDefault();n(document).trigger(u+".HideOnClickOutside");f._removeAllTags()})},_afterTagOperation:function(){var n=this;setTimeout(function(){n._tagContainer.find(r.jsTag).length==0?n._editor.addClass(t.tagsHasNoTags):n._editor.removeClass(t.tagsHasNoTags)},0)},_redrawSmartNavigation:function(){if(!this.options.flyoutOpened)if(typeof this._smartMenuItem.smartMenu("instance")!="undefined")this._smartMenuItem.smartMenu("UpdateMenuItems"),this._smartMenuItem.smartMenu("Redraw");else if(this.options.tags.length>1){this._smartMenuItem.find(r.jsMoreTagsParent).length||n(`<div class="${t.tagsItem+"  "+t.jsTag+"  "+t.jsMoreTagsParent}  u-hide">
							<i class="js-counter  ${t.tagsItem}-counter"></i>
						<div class="is-more-list"></div>
					</div>`).insertBefore(this.element);this._moreTagsContainer=this._smartMenuItem.find(r.jsMoreTagsParent);n(r.tagsOriginalInput).addClass(t.jsTag);this.options.openInFlyout||n(r.tagsOriginalInput).addClass("js-nav-top-level js-can-grow");this._smartMenuItem.addClass("has-smartmenu").smartMenu({navItemClass:t.jsTag,mainListClass:t.jsTagsSmartMenu,mainListTag:"div",differentConfiguration:!0,moreItemEquivalent:".is-more-list",hasHideClass:!0,hideClass:"u-hide",noSingleItem:!0,resetTopLevelItems:!0,cutoff:1,threshold:1,expandCollapseHtml:`<span class="${t.tagsItem}-text">Locations<i class="icon  icon-expand-down  ${t.tagsItem}-more"></i></span>`,alwaysShowExpandIcon:!0});this._smartMenuItem.off("widget-drawn"+i).on("widget-drawn"+i,function(){gts.$(window).trigger("RefinementsModuleBase.SmartRefinements.Redraw")})}},_bindFlyoutEvents:function(){let n=this;gts.$("body").off(n.options.openInFlyout+i).on("Close.RefinementFlyouts"+i,function(t,i){i.name&&i.name===n.options.openInFlyout&&(n.options.flyoutOpened=!1,n._redrawSmartNavigation())}).on("Open.RefinementFlyouts"+i,function(t,i){i.name&&i.name===n.options.openInFlyout&&(n._destroySmartMenu(),n.options.flyoutOpened=!0)})},getTags:function(){return this._getTags()},insertTag:function(n,t){return this._insertTag(n,t)},removeTag:function(n){return this._removeTag(n)},removeAllTags:function(n){return this._removeAllTags(n)}})})(jQuery);;;