;/*!
 * @fileOverview TouchSwipe - jQuery Plugin
 * @version 1.6.18
 *
 * @author Matt Bryson http://www.github.com/mattbryson
 * @see https://github.com/mattbryson/TouchSwipe-Jquery-Plugin
 * @see http://labs.rampinteractive.co.uk/touchSwipe/
 * @see http://plugins.jquery.com/project/touchSwipe
 * @license
 * Copyright (c) 2010-2015 Matt Bryson
 * Dual licensed under the MIT or GPL Version 2 licenses.
 *
 */
(function(n){typeof define=="function"&&define.amd&&define.amd.jQuery?define(["jquery"],n):typeof module!="undefined"&&module.exports?n(require("jquery")):n(jQuery)})(function(n){"use strict";function ft(t){return t&&t.allowPageScroll===undefined&&(t.swipe!==undefined||t.swipeStatus!==undefined)&&(t.allowPageScroll=o),t.click!==undefined&&t.tap===undefined&&(t.tap=t.click),t||(t={}),t=n.extend({},n.fn.swipe.defaults,t),this.each(function(){var r=n(this),i=r.data(c);i||(i=new et(this,t),r.data(c,i))})}function et(ft,et){function tr(t){var r,f,u,e;if(!pu())return n(t.target).closest(et.excludedElements,ot).length>0?void 0:(r=t.originalEvent?t.originalEvent:t,r.pointerType&&r.pointerType=="mouse"&&et.fallbackToMouseEvents==!1)?void 0:(u=r.touches,e=u?u[0]:r,st=rt,u?ct=u.length:et.preventDefaultEvents!==!1&&t.preventDefault(),at=0,vt=null,yt=null,kt=null,lt=0,dt=0,gt=0,pt=1,bt=0,ci=ku(),dr(),wi(0,e),!u||ct===et.fingers||et.fingers===a||vi()?(gi=ti(),ct==2&&(wi(1,u[1]),dt=gt=hr(ht[0].start,ht[1].start)),(et.swipeStatus||et.pinchStatus)&&(f=wt(r,st))):f=!1,f===!1)?(st=i,wt(r,st),f):(et.hold&&(ei=setTimeout(n.proxy(function(){ot.trigger("hold",[r.target]);et.hold&&(f=et.hold.call(ot,r,r.target))},this),et.longTapThreshold)),pi(!0),null)}function ir(n){var f=n.originalEvent?n.originalEvent:n,e,h;if(st!==t&&st!==i&&!yi()){var o,r=f.touches,c=r?r[0]:f,u=gr(c);li=ti();r&&(ct=r.length);et.hold&&clearTimeout(ei);st=s;ct==2&&(dt==0?(wi(1,r[1]),dt=gt=hr(ht[0].start,ht[1].start)):(gr(r[1]),gt=hr(ht[0].end,ht[1].end),kt=gu(ht[0].end,ht[1].end)),pt=du(dt,gt),bt=Math.abs(dt-gt));ct===et.fingers||et.fingers===a||!r||vi()?(vt=iu(u.start,u.end),yt=iu(u.last,u.end),uu(n,yt),at=nf(u.start,u.end),lt=tu(),bu(vt,at),o=wt(f,st),(!et.triggerOnTouchEnd||et.triggerOnTouchLeave)&&(e=!0,et.triggerOnTouchLeave&&(h=rf(this),e=uf(u.end,h)),!et.triggerOnTouchEnd&&e?st=fr(s):et.triggerOnTouchLeave&&!e&&(st=fr(t)),(st==i||st==t)&&wt(f,st))):(st=i,wt(f,st));o===!1&&(st=i,wt(f,st))}}function rr(n){var r=n.originalEvent?n.originalEvent:n,u=r.touches;if(u){if(u.length&&!yi())return yu(r),!0;if(u.length&&yi())return!0}return yi()&&(ct=nr),li=ti(),lt=tu(),or()||!er()?(st=i,wt(r,st)):et.triggerOnTouchEnd||et.triggerOnTouchEnd===!1&&st===s?(et.preventDefaultEvents!==!1&&n.cancelable!==!1&&n.preventDefault(),st=t,wt(r,st)):!et.triggerOnTouchEnd&&br()?(st=t,ui(r,st,w)):st===s&&(st=i,wt(r,st)),pi(!1),null}function ri(){ct=0;li=0;gi=0;dt=0;gt=0;pt=1;dr();pi(!1)}function ur(n){var i=n.originalEvent?n.originalEvent:n;et.triggerOnTouchLeave&&(st=fr(t),wt(i,st))}function cr(){ot.unbind(si,tr);ot.unbind(hi,ri);ot.unbind(ki,ir);ot.unbind(di,rr);ii&&ot.unbind(ii,ur);pi(!1)}function fr(n){var r=n,f=lr(),u=er(),e=or();return!f||e?r=i:u&&n==s&&(!et.triggerOnTouchEnd||et.triggerOnTouchLeave)?r=t:!u&&n==t&&et.triggerOnTouchLeave&&(r=i),r}function wt(n,r){var u,f=n.touches;return(eu()||yr())&&(u=ui(n,r,g)),(fu()||vi())&&u!==!1&&(u=ui(n,r,nt)),au()&&u!==!1?u=ui(n,r,tt):vu()&&u!==!1?u=ui(n,r,it):lu()&&u!==!1&&(u=ui(n,r,w)),r===i&&ri(n),r===t&&(f?f.length||ri(n):ri(n)),u}function ui(o,s,h){var c;if(h==g){if(ot.trigger("swipeStatus",[s,vt||null,at||0,lt||0,ct,ht,yt]),et.swipeStatus&&(c=et.swipeStatus.call(ot,o,s,vt||null,at||0,lt||0,ct,ht,yt),c===!1))return!1;if(s==t&&vr()){if(clearTimeout(fi),clearTimeout(ei),ot.trigger("swipe",[vt,at,lt,ct,ht,yt]),et.swipe&&(c=et.swipe.call(ot,o,vt,at,lt,ct,ht,yt),c===!1))return!1;switch(vt){case r:ot.trigger("swipeLeft",[vt,at,lt,ct,ht,yt]);et.swipeLeft&&(c=et.swipeLeft.call(ot,o,vt,at,lt,ct,ht,yt));break;case u:ot.trigger("swipeRight",[vt,at,lt,ct,ht,yt]);et.swipeRight&&(c=et.swipeRight.call(ot,o,vt,at,lt,ct,ht,yt));break;case f:ot.trigger("swipeUp",[vt,at,lt,ct,ht,yt]);et.swipeUp&&(c=et.swipeUp.call(ot,o,vt,at,lt,ct,ht,yt));break;case e:ot.trigger("swipeDown",[vt,at,lt,ct,ht,yt]);et.swipeDown&&(c=et.swipeDown.call(ot,o,vt,at,lt,ct,ht,yt))}}}if(h==nt){if(ot.trigger("pinchStatus",[s,kt||null,bt||0,lt||0,ct,pt,ht]),et.pinchStatus&&(c=et.pinchStatus.call(ot,o,s,kt||null,bt||0,lt||0,ct,pt,ht),c===!1))return!1;if(s==t&&ar())switch(kt){case y:ot.trigger("pinchIn",[kt||null,bt||0,lt||0,ct,pt,ht]);et.pinchIn&&(c=et.pinchIn.call(ot,o,kt||null,bt||0,lt||0,ct,pt,ht));break;case p:ot.trigger("pinchOut",[kt||null,bt||0,lt||0,ct,pt,ht]);et.pinchOut&&(c=et.pinchOut.call(ot,o,kt||null,bt||0,lt||0,ct,pt,ht))}}return h==w?(s===i||s===t)&&(clearTimeout(fi),clearTimeout(ei),sr()&&!su()?(ni=ti(),fi=setTimeout(n.proxy(function(){ni=null;ot.trigger("tap",[o.target]);et.tap&&(c=et.tap.call(ot,o,o.target))},this),et.doubleTapThreshold)):(ni=null,ot.trigger("tap",[o.target]),et.tap&&(c=et.tap.call(ot,o,o.target)))):h==tt?(s===i||s===t)&&(clearTimeout(fi),clearTimeout(ei),ni=null,ot.trigger("doubletap",[o.target]),et.doubleTap&&(c=et.doubleTap.call(ot,o,o.target))):h==it&&(s===i||s===t)&&(clearTimeout(fi),ni=null,ot.trigger("longtap",[o.target]),et.longTap&&(c=et.longTap.call(ot,o,o.target))),c}function er(){var n=!0;return et.threshold!==null&&(n=at>=et.threshold),n}function or(){var n=!1;return et.cancelThreshold!==null&&vt!==null&&(n=nu(vt)-at>=et.cancelThreshold),n}function ru(){return et.pinchThreshold!==null?bt>=et.pinchThreshold:!0}function lr(){return et.maxTimeThreshold?lt>=et.maxTimeThreshold?!1:!0:!0}function uu(n,t){if(et.preventDefaultEvents!==!1)if(et.allowPageScroll===o)n.preventDefault();else{var i=et.allowPageScroll===d;switch(t){case r:(et.swipeLeft&&i||!i&&et.allowPageScroll!=b)&&n.preventDefault();break;case u:(et.swipeRight&&i||!i&&et.allowPageScroll!=b)&&n.preventDefault();break;case f:(et.swipeUp&&i||!i&&et.allowPageScroll!=k)&&n.preventDefault();break;case e:(et.swipeDown&&i||!i&&et.allowPageScroll!=k)&&n.preventDefault()}}}function ar(){var n=pr(),t=wr(),i=ru();return n&&t&&i}function vi(){return!!(et.pinchStatus||et.pinchIn||et.pinchOut)}function fu(){return!!(ar()&&vi())}function vr(){var n=lr(),t=er(),i=pr(),r=wr(),u=or();return!u&&r&&i&&t&&n}function yr(){return!!(et.swipe||et.swipeStatus||et.swipeLeft||et.swipeRight||et.swipeUp||et.swipeDown)}function eu(){return!!(vr()&&yr())}function pr(){return ct===et.fingers||et.fingers===a||!l}function wr(){return ht[0].end.x!==0}function br(){return!!et.tap}function sr(){return!!et.doubleTap}function ou(){return!!et.longTap}function kr(){if(ni==null)return!1;var n=ti();return sr()&&n-ni<=et.doubleTapThreshold}function su(){return kr()}function hu(){return(ct===1||!l)&&(isNaN(at)||at<et.threshold)}function cu(){return lt>et.longTapThreshold&&at<ut}function lu(){return!!(hu()&&br())}function au(){return!!(kr()&&sr())}function vu(){return!!(cu()&&ou())}function yu(n){ai=ti();nr=n.touches.length+1}function dr(){ai=0;nr=0}function yi(){var n=!1,t;return ai&&(t=ti()-ai,t<=et.fingerReleaseThreshold&&(n=!0)),n}function pu(){return!!(ot.data(c+"_intouch")===!0)}function pi(n){ot&&(n===!0?(ot.bind(ki,ir),ot.bind(di,rr),ii&&ot.bind(ii,ur)):(ot.unbind(ki,ir,!1),ot.unbind(di,rr,!1),ii&&ot.unbind(ii,ur,!1)),ot.data(c+"_intouch",n===!0))}function wi(n,t){var i={start:{x:0,y:0},last:{x:0,y:0},end:{x:0,y:0}};return i.start.x=i.last.x=i.end.x=t.pageX||t.clientX,i.start.y=i.last.y=i.end.y=t.pageY||t.clientY,ht[n]=i,i}function gr(n){var i=n.identifier!==undefined?n.identifier:0,t=wu(i);return t===null&&(t=wi(i,n)),t.last.x=t.end.x,t.last.y=t.end.y,t.end.x=n.pageX||n.clientX,t.end.y=n.pageY||n.clientY,t}function wu(n){return ht[n]||null}function bu(n,t){n!=o&&(t=Math.max(t,nu(n)),ci[n].distance=t)}function nu(n){return ci[n]?ci[n].distance:undefined}function ku(){var n={};return n[r]=bi(r),n[u]=bi(u),n[f]=bi(f),n[e]=bi(e),n}function bi(n){return{direction:n,distance:0}}function tu(){return li-gi}function hr(n,t){var i=Math.abs(n.x-t.x),r=Math.abs(n.y-t.y);return Math.round(Math.sqrt(i*i+r*r))}function du(n,t){var i=t/n*1;return i.toFixed(2)}function gu(){return pt<1?p:y}function nf(n,t){return Math.round(Math.sqrt(Math.pow(t.x-n.x,2)+Math.pow(t.y-n.y,2)))}function tf(n,t){var r=n.x-t.x,u=t.y-n.y,f=Math.atan2(u,r),i=Math.round(f*180/Math.PI);return i<0&&(i=360-Math.abs(i)),i}function iu(n,t){if(ff(n,t))return o;var i=tf(n,t);return i<=45&&i>=0?r:i<=360&&i>=315?r:i>=135&&i<=225?u:i>45&&i<135?e:f}function ti(){var n=new Date;return n.getTime()}function rf(t){t=n(t);var i=t.offset();return{left:i.left,right:i.left+t.outerWidth(),top:i.top,bottom:i.top+t.outerHeight()}}function uf(n,t){return n.x>t.left&&n.x<t.right&&n.y>t.top&&n.y<t.bottom}function ff(n,t){return n.x==t.x&&n.y==t.y}var et=n.extend({},et),oi=l||h||!et.fallbackToMouseEvents,si=oi?h?v?"MSPointerDown":"pointerdown":"touchstart":"mousedown",ki=oi?h?v?"MSPointerMove":"pointermove":"touchmove":"mousemove",di=oi?h?v?"MSPointerUp":"pointerup":"touchend":"mouseup",ii=oi?h?"mouseleave":null:"mouseleave",hi=h?v?"MSPointerCancel":"pointercancel":"touchcancel",at=0,vt=null,yt=null,lt=0,dt=0,gt=0,pt=1,bt=0,kt=0,ci=null,ot=n(ft),st="start",ct=0,ht={},gi=0,li=0,ai=0,nr=0,ni=0,fi=null,ei=null;try{ot.bind(si,tr);ot.bind(hi,ri)}catch(ef){n.error("events not supported "+si+","+hi+" on jQuery.swipe")}this.enable=function(){return this.disable(),ot.bind(si,tr),ot.bind(hi,ri),ot};this.disable=function(){return cr(),ot};this.destroy=function(){cr();ot.data(c,null);ot=null};this.option=function(t,i){if(typeof t=="object")et=n.extend(et,t);else if(et[t]!==undefined){if(i===undefined)return et[t];et[t]=i}else if(t)n.error("Option "+t+" does not exist on jQuery.swipe.options");else return et;return null}}var r="left",u="right",f="up",e="down",y="in",p="out",o="none",d="auto",g="swipe",nt="pinch",w="tap",tt="doubletap",it="longtap",b="horizontal",k="vertical",a="all",ut=10,rt="start",s="move",t="end",i="cancel",l="ontouchstart"in window,v=window.navigator.msPointerEnabled&&!window.navigator.pointerEnabled&&!l,h=(window.navigator.pointerEnabled||window.navigator.msPointerEnabled)&&!l,c="TouchSwipe";n.fn.swipe=function(t){var r=n(this),i=r.data(c);if(i&&typeof t=="string"){if(i[t])return i[t].apply(i,Array.prototype.slice.call(arguments,1));n.error("Method "+t+" does not exist on jQuery.swipe")}else if(i&&typeof t=="object")i.option.apply(i,arguments);else if(!i&&(typeof t=="object"||!t))return ft.apply(this,arguments);return r};n.fn.swipe.version="1.6.18";n.fn.swipe.defaults={fingers:1,threshold:75,cancelThreshold:null,pinchThreshold:20,maxTimeThreshold:null,fingerReleaseThreshold:250,longTapThreshold:500,doubleTapThreshold:200,swipe:null,swipeLeft:null,swipeRight:null,swipeUp:null,swipeDown:null,swipeStatus:null,pinchIn:null,pinchOut:null,pinchStatus:null,click:null,tap:null,doubleTap:null,longTap:null,hold:null,triggerOnTouchEnd:!0,triggerOnTouchLeave:!1,allowPageScroll:"auto",fallbackToMouseEvents:!1,excludedElements:".noSwipe",preventDefaultEvents:!0};n.fn.swipe.phases={PHASE_START:rt,PHASE_MOVE:s,PHASE_END:t,PHASE_CANCEL:i};n.fn.swipe.directions={LEFT:r,RIGHT:u,UP:f,DOWN:e,IN:y,OUT:p};n.fn.swipe.pageScroll={NONE:o,HORIZONTAL:b,VERTICAL:k,AUTO:d};n.fn.swipe.fingers={ONE:1,TWO:2,THREE:3,FOUR:4,FIVE:5,ALL:a}});;;;(function(n,t,i){function h(t,r){this.bodyOverflowX;this.callbacks={hide:[],show:[]};this.checkInterval=null;this.Content;this.$el=n(t);this.$elProxy;this.elProxyPosition;this.enabled=!0;this.options=n.extend({},f,r);this.mouseIsOverProxy=!1;this.namespace="tooltipster-"+Math.round(Math.random()*1e5);this.Status="hidden";this.timerHide=null;this.timerShow=null;this.$tooltip;this.options.iconTheme=this.options.iconTheme.replace(".","");this.options.theme=this.options.theme.replace(".","");var e="ontouchstart"in i.documentElement,u=this.options.ShowTooltipsOnTouchDevices||ShowTooltipsOnTouchDevices;e&&(u===!1||u==="false")||this._init()}function e(t,i){var r=!0;return n.each(t,function(n){if(typeof i[n]=="undefined"||t[n]!==i[n])return r=!1,!1}),r}function s(){return!o&&r}function u(){var u=i.body||i.documentElement,r=u.style,n="transition",t;if(typeof r[n]=="string")return!0;for(v=["Moz","Webkit","Khtml","O","ms"],n=n.charAt(0).toUpperCase()+n.substr(1),t=0;t<v.length;t++)if(typeof r[v[t]+n]=="string")return!0;return!1}var f={animation:"fade",arrow:!0,arrowColor:"",autoClose:!0,content:null,contentAsHTML:!1,contentCloning:!0,debug:!0,delay:200,minWidth:0,maxWidth:null,functionInit:function(){},functionBefore:function(n,t){t()},functionReady:function(){},functionAfter:function(){},hideOnClick:!1,icon:"(?)",iconCloning:!0,iconDesktop:!1,iconTouch:!1,iconTheme:"tooltipster-icon",interactive:!1,interactiveTolerance:350,multiple:!1,offsetX:0,offsetY:0,onlyOne:!1,position:"top",positionTracker:!1,positionTrackerCallback:function(){this.option("trigger")=="hover"&&this.option("autoClose")&&this.hide()},restoration:"current",speed:350,timer:2e3,theme:"tooltipster-default",touchDevices:!0,trigger:"hover",updateAnimation:!0},r,o;h.prototype={_init:function(){var t=this,u,f;if(i.querySelector)if(u=null,t.$el.data("tooltipster-initialTitle")===undefined&&(u=t.$el.attr("title"),u===undefined&&(u=null),t.$el.data("tooltipster-initialTitle",u)),t.options.content!==null?t._content_set(t.options.content):t._content_set(u),f=t.options.functionInit.call(t.$el,t.$el,t.Content),typeof f!="undefined"&&t._content_set(f),t.$el.removeAttr("title").addClass("tooltipstered"),!r&&t.options.iconDesktop||r&&t.options.iconTouch?(typeof t.options.icon=="string"?(t.$elProxy=n('<span class="'+t.options.iconTheme+'"><\/span>'),t.$elProxy.text(t.options.icon)):t.$elProxy=t.options.iconCloning?t.options.icon.clone(!0):t.options.icon,t.$elProxy.insertAfter(t.$el)):t.$elProxy=t.$el,t.options.trigger=="hover"){t.$elProxy.on("mouseenter."+t.namespace,function(){(!s()||t.options.touchDevices)&&(t.mouseIsOverProxy=!0,t._show())}).on("mouseleave."+t.namespace,function(){(!s()||t.options.touchDevices)&&(t.mouseIsOverProxy=!1)});if(r&&t.options.touchDevices)t.$elProxy.on("touchstart."+t.namespace,function(){t._showNow()})}else if(t.options.trigger=="click")t.$elProxy.on("click."+t.namespace,function(){(!s()||t.options.touchDevices)&&t._show()})},_show:function(){var n=this;n.$el.is(":visible")&&n.Status!="shown"&&n.Status!="appearing"&&(n.options.delay?n.timerShow=setTimeout(function(){(n.options.trigger=="click"||n.options.trigger=="hover"&&n.mouseIsOverProxy)&&n._showNow()},n.options.delay):n._showNow())},_showNow:function(f){var e=this;e.options.functionBefore.call(e.$el,e.$el,function(){var o,h,s;if(e.enabled&&e.Content!==null){if(f&&e.callbacks.show.push(f),e.callbacks.hide=[],clearTimeout(e.timerShow),e.timerShow=null,clearTimeout(e.timerHide),e.timerHide=null,e.options.onlyOne&&n(".tooltipstered").not(e.$el).each(function(t,i){var r=n(i),u=r.data("tooltipster-ns");n.each(u,function(n,t){var i=r.data(t),u=i.status(),f=i.option("autoClose");u!=="hidden"&&u!=="disappearing"&&f&&i.hide()})}),o=function(){e.Status="shown";n.each(e.callbacks.show,function(n,t){t.call(e.$el)});e.callbacks.show=[]},e.Status!=="hidden")h=0,e.Status==="disappearing"?(e.Status="appearing",u()?(e.$tooltip.clearQueue().removeClass("tooltipster-dying").addClass("tooltipster-"+e.options.animation+"-show"),e.options.speed>0&&e.$tooltip.delay(e.options.speed),e.$tooltip.queue(o)):e.$tooltip.stop().fadeIn(o)):e.Status==="shown"&&o();else{e.Status="appearing";h=e.options.speed;e.bodyOverflowX=n("body").css("overflow-x");n("body").css("overflow-x","hidden");var c="tooltipster-"+e.options.animation,l="-webkit-transition-duration: "+e.options.speed+"ms; -webkit-animation-duration: "+e.options.speed+"ms; -moz-transition-duration: "+e.options.speed+"ms; -moz-animation-duration: "+e.options.speed+"ms; -o-transition-duration: "+e.options.speed+"ms; -o-animation-duration: "+e.options.speed+"ms; -ms-transition-duration: "+e.options.speed+"ms; -ms-animation-duration: "+e.options.speed+"ms; transition-duration: "+e.options.speed+"ms; animation-duration: "+e.options.speed+"ms;",a=e.options.minWidth?"min-width:"+Math.round(e.options.minWidth)+"px;":"",v=e.options.maxWidth?"max-width:"+Math.round(e.options.maxWidth)+"px;":"",y=e.options.interactive?"pointer-events: auto;":"";e.$tooltip=n('<div class="tooltipster-base '+e.options.theme+'" style="'+a+" "+v+" "+y+" "+l+'"><div class="tooltipster-content"><\/div><\/div>');u()&&e.$tooltip.addClass(c);e._content_insert();e.$tooltip.appendTo("body");e.reposition();e.options.functionReady.call(e.$el,e.$el,e.$tooltip);u()?(e.$tooltip.addClass(c+"-show"),e.options.speed>0&&e.$tooltip.delay(e.options.speed),e.$tooltip.queue(o)):e.$tooltip.css("display","none").fadeIn(e.options.speed,o);e._interval_set();n(t).on("scroll."+e.namespace,function(){e.reposition()});n(t).on(" resize."+e.namespace,function(t){var r=n(i.activeElement);r.is("input")||r.is("textarea")||e.reposition(t)});if(e.options.autoClose)if(n("body").off("."+e.namespace),e.options.trigger=="hover"){if(r&&setTimeout(function(){n("body").on("touchstart."+e.namespace,function(){e.hide()})},0),e.options.interactive){if(r)e.$tooltip.on("touchstart."+e.namespace,function(n){n.stopPropagation()});s=null;e.$elProxy.add(e.$tooltip).on("mouseleave."+e.namespace+"-autoClose",function(){clearTimeout(s);s=setTimeout(function(){e.hide()},e.options.interactiveTolerance)}).on("mouseenter."+e.namespace+"-autoClose",function(){clearTimeout(s)})}else e.$elProxy.on("mouseleave."+e.namespace+"-autoClose",function(){e.hide()});if(e.options.hideOnClick)e.$elProxy.on("click."+e.namespace+"-autoClose",function(){e.hide()})}else if(e.options.trigger=="click"&&(setTimeout(function(){n("body").on("click."+e.namespace+" touchstart."+e.namespace,function(){e.hide()})},0),e.options.interactive))e.$tooltip.on("click."+e.namespace+" touchstart."+e.namespace,function(n){n.stopPropagation()})}e.options.timer>0&&(e.timerHide=setTimeout(function(){e.timerHide=null;e.hide()},e.options.timer+h))}})},_interval_set:function(){var t=this;t.checkInterval=setInterval(function(){if(n("body").find(t.$el).length===0||n("body").find(t.$elProxy).length===0||t.Status=="hidden"||n("body").find(t.$tooltip).length===0)r?setTimeout(function(){(t.Status=="shown"||t.Status=="appearing")&&t.hide()},t.options.timer):(t.Status=="shown"||t.Status=="appearing")&&t.hide(),t._interval_cancel();else if(t.options.positionTracker){var i=t._repositionInfo(t.$elProxy),u=!1;e(i.dimension,t.elProxyPosition.dimension)&&(t.$elProxy.css("position")==="fixed"?e(i.position,t.elProxyPosition.position)&&(u=!0):e(i.offset,t.elProxyPosition.offset)&&(u=!0));u||(t.reposition(),t.options.positionTrackerCallback.call(t,t.$el))}},200)},_interval_cancel:function(){clearInterval(this.checkInterval);this.checkInterval=null},_content_set:function(n){typeof n=="object"&&n!==null&&this.options.contentCloning&&(n=n.clone(!0));this.Content=n},_content_insert:function(){var n=this,t=this.$tooltip.find(".tooltipster-content");typeof n.Content!="string"||n.options.contentAsHTML?t.empty().append(n.Content):t.text(n.Content)},_update:function(n){var t=this;t._content_set(n);t.Content!==null?t.Status!=="hidden"&&(t._content_insert(),t.reposition(),t.options.updateAnimation&&(u()?(t.$tooltip.css({width:"","-webkit-transition":"all "+t.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms","-moz-transition":"all "+t.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms","-o-transition":"all "+t.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms","-ms-transition":"all "+t.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms",transition:"all "+t.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms"}).addClass("tooltipster-content-changing"),setTimeout(function(){t.Status!="hidden"&&(t.$tooltip.removeClass("tooltipster-content-changing"),setTimeout(function(){t.Status!=="hidden"&&t.$tooltip.css({"-webkit-transition":t.options.speed+"ms","-moz-transition":t.options.speed+"ms","-o-transition":t.options.speed+"ms","-ms-transition":t.options.speed+"ms",transition:t.options.speed+"ms"})},t.options.speed))},t.options.speed)):t.$tooltip.fadeTo(t.options.speed,.5,function(){t.Status!="hidden"&&t.$tooltip.fadeTo(t.options.speed,1)}))):t.hide()},_repositionInfo:function(n){return{dimension:{height:n.outerHeight(!1),width:n.outerWidth(!1)},offset:n.offset(),position:{left:parseInt(n.css("left")),top:parseInt(n.css("top"))}}},hide:function(i){var r,f,e;if(this.$elProxy)return r=this,i&&r.callbacks.hide.push(i),r.callbacks.show=[],clearTimeout(r.timerShow),r.timerShow=null,clearTimeout(r.timerHide),r.timerHide=null,f=function(){n.each(r.callbacks.hide,function(n,t){t.call(r.$el)});r.callbacks.hide=[]},r.Status=="shown"||r.Status=="appearing"?(r.Status="disappearing",e=function(){r.Status="hidden";typeof r.Content=="object"&&r.Content!==null&&r.Content.detach();r.$tooltip.remove();r.$tooltip=null;n(t).off("."+r.namespace);n("body").off("."+r.namespace).css("overflow-x",r.bodyOverflowX);n("body").off("."+r.namespace);r.$elProxy.off("."+r.namespace+"-autoClose");r.options.functionAfter.call(r.$el,r.$el);f()},u()?(r.$tooltip.clearQueue().removeClass("tooltipster-"+r.options.animation+"-show").addClass("tooltipster-dying"),r.options.speed>0&&r.$tooltip.delay(r.options.speed),r.$tooltip.queue(e)):r.$tooltip.stop().fadeOut(r.options.speed,e)):r.Status=="hidden"&&f(),r},show:function(n){if(this.$elProxy)return this._showNow(n),this},update:function(n){return this.content(n)},content:function(n){return typeof n=="undefined"?this.Content:(this._update(n),this)},reposition:function(){var r=this,k,y,vt,p,ut,ft,w,dt,a,nt,kt,tt,gt,ni;if(n("body").find(r.$tooltip).length!==0){r.$tooltip.css("width","");r.elProxyPosition=r._repositionInfo(r.$elProxy);var o=null,b=n(t).width(),i=r.elProxyPosition,e=r.$tooltip.outerWidth(!1),ui=r.$tooltip.innerWidth()+1,c=r.$tooltip.outerHeight(!1);if(r.$elProxy.is("area")){var yt=r.$elProxy.attr("shape"),ti=r.$elProxy.parent().attr("name"),et=n('img[usemap="#'+ti+'"]'),ot=et.offset().left,st=et.offset().top,v=r.$elProxy.attr("coords")!==undefined?r.$elProxy.attr("coords").split(","):undefined;if(yt=="circle"){var pt=parseInt(v[0]),wt=parseInt(v[1]),ht=parseInt(v[2]);i.dimension.height=ht*2;i.dimension.width=ht*2;i.offset.top=st+wt-ht;i.offset.left=ot+pt-ht}else if(yt=="rect"){var pt=parseInt(v[0]),wt=parseInt(v[1]),ii=parseInt(v[2]),ri=parseInt(v[3]);i.dimension.height=ri-wt;i.dimension.width=ii-pt;i.offset.top=st+wt;i.offset.left=ot+pt}else if(yt=="poly"){var it=0,rt=0,ct=0,lt=0,bt="even";for(k=0;k<v.length;k++)y=parseInt(v[k]),bt=="even"?(y>ct&&(ct=y,k===0&&(it=ct)),y<it&&(it=y),bt="odd"):(y>lt&&(lt=y,k==1&&(rt=lt)),y<rt&&(rt=y),bt="even");i.dimension.height=lt-rt;i.dimension.width=ct-it;i.offset.top=st+rt;i.offset.left=ot+it}else i.dimension.height=et.outerHeight(!1),i.dimension.width=et.outerWidth(!1),i.offset.top=st,i.offset.left=ot}var u=0,at=0,l=0,s=parseInt(r.options.offsetY),h=parseInt(r.options.offsetX),f=r.options.position;function d(){var i=n(t).scrollLeft();u-i<0&&(o=u-i,u=i);u+e-i>b&&(o=u-(b+i-e),u=b+i-e)}function g(r,u){i.offset.top-n(t).scrollTop()-c-s-12<0&&u.indexOf("top")>-1&&(f=r);i.offset.top+i.dimension.height+c+12+s>n(t).scrollTop()+n(t).height()&&u.indexOf("bottom")>-1&&(f=r,l=i.offset.top-c-s-12)}f=="top"&&(vt=i.offset.left+e-(i.offset.left+i.dimension.width),u=i.offset.left+h-vt/2,l=i.offset.top-c-s-12,d(),g("bottom","top"));f=="top-left"&&(u=i.offset.left+h,l=i.offset.top-c-s-12,d(),g("bottom-left","top-left"));f=="top-right"&&(u=i.offset.left+i.dimension.width+h-e,l=i.offset.top-c-s-12,d(),g("bottom-right","top-right"));f=="bottom"&&(vt=i.offset.left+e-(i.offset.left+i.dimension.width),u=i.offset.left-vt/2+h,l=i.offset.top+i.dimension.height+s+12,d(),g("top","bottom"));f=="bottom-left"&&(u=i.offset.left+h,l=i.offset.top+i.dimension.height+s+12,d(),g("top-left","bottom-left"));f=="bottom-right"&&(u=i.offset.left+i.dimension.width+h-e,l=i.offset.top+i.dimension.height+s+12,d(),g("top-right","bottom-right"));f=="left"&&(u=i.offset.left-h-e-12,at=i.offset.left+h+i.dimension.width+12,p=i.offset.top+c-(i.offset.top+i.dimension.height),l=i.offset.top-p/2-s,u<0&&at+e>b?(ut=parseFloat(r.$tooltip.css("border-width"))*2,ft=e+u-ut,r.$tooltip.css("width",ft+"px"),c=r.$tooltip.outerHeight(!1),u=i.offset.left-h-ft-12-ut,p=i.offset.top+c-(i.offset.top+i.dimension.height),l=i.offset.top-p/2-s):u<0&&(u=i.offset.left+h+i.dimension.width+12,o="left"));f=="right"&&(u=i.offset.left+h+i.dimension.width+12,at=i.offset.left-h-e-12,p=i.offset.top+c-(i.offset.top+i.dimension.height),l=i.offset.top-p/2-s,u+e>b&&at<0?(ut=parseFloat(r.$tooltip.css("border-width"))*2,ft=b-u-ut,r.$tooltip.css("width",ft+"px"),c=r.$tooltip.outerHeight(!1),p=i.offset.top+c-(i.offset.top+i.dimension.height),l=i.offset.top-p/2-s):u+e>b&&(u=i.offset.left-h-e-12,o="right"));r.options.arrow&&(w="tooltipster-arrow-"+f,dt=r.options.arrowColor.length<1?r.$tooltip.css("background-color"):r.options.arrowColor,o?o=="left"?(w="tooltipster-arrow-right",o=""):o=="right"?(w="tooltipster-arrow-left",o=""):o="left:"+Math.round(o)+"px;":o="",f=="top"||f=="top-left"||f=="top-right"?(a=parseFloat(r.$tooltip.css("border-bottom-width")),nt=r.$tooltip.css("border-bottom-color")):f=="bottom"||f=="bottom-left"||f=="bottom-right"?(a=parseFloat(r.$tooltip.css("border-top-width")),nt=r.$tooltip.css("border-top-color")):f=="left"?(a=parseFloat(r.$tooltip.css("border-right-width")),nt=r.$tooltip.css("border-right-color")):f=="right"?(a=parseFloat(r.$tooltip.css("border-left-width")),nt=r.$tooltip.css("border-left-color")):(a=parseFloat(r.$tooltip.css("border-bottom-width")),nt=r.$tooltip.css("border-bottom-color")),a>1&&a++,kt="",a!==0&&(tt="",gt="border-color: "+nt+";",w.indexOf("bottom")!==-1?tt="margin-top: -"+Math.round(a)+"px;":w.indexOf("top")!==-1?tt="margin-bottom: -"+Math.round(a)+"px;":w.indexOf("left")!==-1?tt="margin-right: -"+Math.round(a)+"px;":w.indexOf("right")!==-1&&(tt="margin-left: -"+Math.round(a)+"px;"),kt='<span class="tooltipster-arrow-border" style="'+tt+" "+gt+';"><\/span>'),r.$tooltip.find(".tooltipster-arrow").remove(),ni='<div class="'+w+' tooltipster-arrow" style="'+o+'">'+kt+'<span style="border-color:'+dt+';"><\/span><\/div>',r.$tooltip.append(ni));r.$tooltip.css({top:Math.round(l)+"px",left:Math.round(u)+"px"})}return r},enable:function(){return this.enabled=!0,this},disable:function(){return this.hide(),this.enabled=!1,this},destroy:function(){var t=this,i,r;return t.hide(),t.$el[0]!==t.$elProxy[0]&&t.$elProxy.remove(),t.$el.removeData(t.namespace).off("."+t.namespace),i=t.$el.data("tooltipster-ns"),i.length===1?(r=null,t.options.restoration==="previous"?r=t.$el.data("tooltipster-initialTitle"):t.options.restoration==="current"&&(r=typeof t.Content=="string"?t.Content:n("<div><\/div>").append(t.Content).html()),r&&t.$el.attr("title",r),t.$el.removeClass("tooltipstered").removeData("tooltipster-ns").removeData("tooltipster-initialTitle")):(i=n.grep(i,function(n){return n!==t.namespace}),t.$el.data("tooltipster-ns",i)),t},elementIcon:function(){return this.$el[0]!==this.$elProxy[0]?this.$elProxy[0]:undefined},elementTooltip:function(){return this.$tooltip?this.$tooltip[0]:undefined},option:function(n,t){return typeof t=="undefined"?this.options[n]:(this.options[n]=t,this)},status:function(){return this.Status}};n.fn["tooltipster"]=function(){var t=arguments,r,i;if(this.length===0){if(typeof t[0]=="string"){r=!0;switch(t[0]){case"setDefaults":n.extend(f,t[1]);break;default:r=!1}return r?!0:this}return this}if(typeof t[0]=="string")return i="#*$~&",this.each(function(){var f=n(this).data("tooltipster-ns"),r=f?n(this).data(f[0]):null,u;if(r){if(typeof r[t[0]]=="function")u=r[t[0]](t[1],t[2]);else throw new Error('Unknown method .tooltipster("'+t[0]+'")');if(u!==r)return i=u,!1}else throw new Error("You called Tooltipster's \""+t[0]+'" method on an uninitialized element');}),i!=="#*$~&"?i:this;var u=[],e=t[0]&&typeof t[0].multiple!="undefined",o=e&&t[0].multiple||!e&&f.multiple,s=t[0]&&typeof t[0].debug!="undefined",c=s&&t[0].debug||!s&&f.debug;return this.each(function(){var f=!1,i=n(this).data("tooltipster-ns"),r=null;i?o?f=!0:c&&console.log('Tooltipster: one or more tooltips are already attached to this element: ignoring. Use the "multiple" option to attach more tooltips.'):f=!0;f&&(r=new h(this,t[0]),i||(i=[]),i.push(r.namespace),n(this).data("tooltipster-ns",i),n(this).data(r.namespace,r));u.push(r)}),o?u:this};r=!!("ontouchstart"in i.documentElement);o=!1;n("body").one("mousemove",function(){o=!0})})(jQuery,window,document);;;;/**
 * @license
 * Video.js 7.1.0 <http://videojs.com/>
 * Copyright Brightcove, Inc. <https://www.brightcove.com/>
 * Available under Apache License Version 2.0
 * <https://github.com/videojs/video.js/blob/master/LICENSE>
 *
 * Includes vtt.js <https://github.com/mozilla/vtt.js>
 * Available under Apache License Version 2.0
 * <https://github.com/mozilla/vtt.js/blob/master/LICENSE>
 */
(function(n,t){typeof exports=="object"&&typeof module!="undefined"?module.exports=t():typeof define=="function"&&define.amd?define(t):n.videojs=t()})(this,function(){function bs(n,t){return t={exports:{}},n(t,t.exports),t.exports}function rtt(n){return n.replace(/\n\r?\s*/g,"")}function cr(n,t){vv(n).forEach(function(i){return t(n[i],i)})}function ftt(n,t){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;return vv(n).reduce(function(i,r){return t(i,n[r],r)},i)}function y(n){for(var i=arguments.length,r=Array(i>1?i-1:0),t=1;t<i;t++)r[t-1]=arguments[t];return Object.assign?Object.assign.apply(Object,[n].concat(r)):(r.forEach(function(t){t&&cr(t,function(t,i){n[i]=t})}),n)}function si(n){return!!n&&(typeof n=="undefined"?"undefined":k(n))==="object"}function wu(n){return si(n)&&utt.call(n)==="[object Object]"&&n.constructor===Object}function gs(n,i){if(!n||!i)return"";if(typeof t.getComputedStyle=="function"){var r=t.getComputedStyle(n);return r?r[i]:""}return""}function pv(n){return typeof n=="string"&&/\S/.test(n)}function wv(n){if(/\s/.test(n))throw new Error("class has illegal whitespace characters");}function ett(n){return new RegExp("(^|\\s)"+n+"($|\\s)")}function lr(){return u===t.document}function bu(n){return si(n)&&n.nodeType===1}function bv(){try{return t.parent!==t.self}catch(n){return!0}}function kv(n){return function(t,i){if(!pv(t))return u[n](null);pv(i)&&(i=u.querySelector(i));var r=bu(i)?i:u;return r[n]&&r[n](t)}}function p(){var f=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"div",t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{},r=arguments[3],n=u.createElement(f);return Object.getOwnPropertyNames(t).forEach(function(i){var r=t[i];i.indexOf("aria-")!==-1||i==="role"||i==="type"?(h.warn(ks(yv,i,r)),n.setAttribute(i,r)):i==="textContent"?ku(n,r):n[i]=r}),Object.getOwnPropertyNames(i).forEach(function(t){n.setAttribute(t,i[t])}),r&&ih(n,r),n}function ku(n,t){return typeof n.textContent=="undefined"?n.innerText=t:n.textContent=t,n}function se(n,t){t.firstChild?t.insertBefore(n,t.firstChild):t.appendChild(n)}function ar(n,t){return(wv(t),n.classList)?n.classList.contains(t):ett(t).test(n.className)}function bi(n,t){return n.classList?n.classList.add(t):ar(n,t)||(n.className=(n.className+" "+t).trim()),n}function du(n,t){return n.classList?n.classList.remove(t):(wv(t),n.className=n.className.split(/\s+/).filter(function(n){return n!==t}).join(" ")),n}function dv(n,t,i){var r=ar(n,t);if(typeof i=="function"&&(i=i(n,t)),typeof i!="boolean"&&(i=!r),i!==r)return i?bi(n,t):du(n,t),n}function gv(n,t){Object.getOwnPropertyNames(t).forEach(function(i){var r=t[i];r===null||typeof r=="undefined"||r===!1?n.removeAttribute(i):n.setAttribute(i,r===!0?"":r)})}function ri(n){var f={},i,t,r,u;if(n&&n.attributes&&n.attributes.length>0)for(i=n.attributes,t=i.length-1;t>=0;t--)r=i[t].name,u=i[t].value,(typeof n[r]=="boolean"||",autoplay,controls,playsinline,loop,muted,default,defaultMuted,".indexOf(","+r+",")!==-1)&&(u=u!==null?!0:!1),f[r]=u;return f}function ny(n,t){return n.getAttribute(t)}function gu(n,t,i){n.setAttribute(t,i)}function he(n,t){n.removeAttribute(t)}function ty(){u.body.focus();u.onselectstart=function(){return!1}}function iy(){u.onselectstart=function(){return!0}}function nf(n){if(n&&n.getBoundingClientRect&&n.parentNode){var i=n.getBoundingClientRect(),t={};return["bottom","height","left","right","top","width"].forEach(function(n){i[n]!==undefined&&(t[n]=i[n])}),t.height||(t.height=parseFloat(gs(n,"height"))),t.width||(t.width=parseFloat(gs(n,"width"))),t}}function ry(n){var i=void 0;if(n.getBoundingClientRect&&n.parentNode&&(i=n.getBoundingClientRect()),!i)return{left:0,top:0};var f=u.documentElement,r=u.body,e=f.clientLeft||r.clientLeft||0,o=t.pageXOffset||r.scrollLeft,s=i.left+o-e,h=f.clientTop||r.clientTop||0,c=t.pageYOffset||r.scrollTop,l=i.top+c-h;return{left:Math.round(s),top:Math.round(l)}}function nh(n,t){var i={},r=ry(n),o=n.offsetWidth,u=n.offsetHeight,s=r.top,h=r.left,f=t.pageY,e=t.pageX;return t.changedTouches&&(e=t.changedTouches[0].pageX,f=t.changedTouches[0].pageY),i.y=Math.max(0,Math.min(1,(s-f+u)/u)),i.x=Math.max(0,Math.min(1,(e-h)/o)),i}function uy(n){return si(n)&&n.nodeType===3}function th(n){while(n.firstChild)n.removeChild(n.firstChild);return n}function fy(n){return typeof n=="function"&&(n=n()),(Array.isArray(n)?n:[n]).map(function(n){return(typeof n=="function"&&(n=n()),bu(n)||uy(n))?n:typeof n=="string"&&/\S/.test(n)?u.createTextNode(n):void 0}).filter(function(n){return n})}function ih(n,t){return fy(t).forEach(function(t){return n.appendChild(t)}),n}function ey(n,t){return ih(th(n),t)}function vr(n){return n.button===undefined&&n.buttons===undefined?!0:n.button===0&&n.buttons===undefined?!0:n.button!==0||n.buttons!==1?!1:!0}function ki(){return ott++}function tf(n){var t=n[ci];return t||(t=n[ci]=ki()),yr[t]||(yr[t]={}),yr[t]}function hy(n){var t=n[ci];return t?!!Object.getOwnPropertyNames(yr[t]).length:!1}function cy(n){var t=n[ci];if(t){delete yr[t];try{delete n[ci]}catch(i){n.removeAttribute?n.removeAttribute(ci):n[ci]=null}}}function ly(n,t){var i=tf(n);i.handlers[t].length===0&&(delete i.handlers[t],n.removeEventListener?n.removeEventListener(t,i.dispatcher,!1):n.detachEvent&&n.detachEvent("on"+t,i.dispatcher));Object.getOwnPropertyNames(i.handlers).length<=0&&(delete i.handlers,delete i.dispatcher,delete i.disabled);Object.getOwnPropertyNames(i).length===0&&cy(n)}function rh(n,t,i,r){i.forEach(function(i){n(t,i,r)})}function ce(n){function o(){return!0}function s(){return!1}var i,r,f,e;if(!n||!n.isPropagationStopped){i=n||t.event;n={};for(r in i)r!=="layerX"&&r!=="layerY"&&r!=="keyLocation"&&r!=="webkitMovementX"&&r!=="webkitMovementY"&&(r==="returnValue"&&i.preventDefault||(n[r]=i[r]));n.target||(n.target=n.srcElement||u);n.relatedTarget||(n.relatedTarget=n.fromElement===n.target?n.toElement:n.fromElement);n.preventDefault=function(){i.preventDefault&&i.preventDefault();n.returnValue=!1;i.returnValue=!1;n.defaultPrevented=!0};n.defaultPrevented=!1;n.stopPropagation=function(){i.stopPropagation&&i.stopPropagation();n.cancelBubble=!0;i.cancelBubble=!0;n.isPropagationStopped=o};n.isPropagationStopped=s;n.stopImmediatePropagation=function(){i.stopImmediatePropagation&&i.stopImmediatePropagation();n.isImmediatePropagationStopped=o;n.stopPropagation()};n.isImmediatePropagationStopped=s;n.clientX!==null&&n.clientX!==undefined&&(f=u.documentElement,e=u.body,n.pageX=n.clientX+(f&&f.scrollLeft||e&&e.scrollLeft||0)-(f&&f.clientLeft||e&&e.clientLeft||0),n.pageY=n.clientY+(f&&f.scrollTop||e&&e.scrollTop||0)-(f&&f.clientTop||e&&e.clientTop||0));n.which=n.charCode||n.keyCode;n.button!==null&&n.button!==undefined&&(n.button=n.button&1?0:n.button&4?1:n.button&2?2:0)}return n}function bt(n,t,i){var r,u;if(Array.isArray(t))return rh(bt,n,t,i);r=tf(n);r.handlers||(r.handlers={});r.handlers[t]||(r.handlers[t]=[]);i.guid||(i.guid=ki());r.handlers[t].push(i);r.dispatcher||(r.disabled=!1,r.dispatcher=function(t,i){var f,e,u,o;if(!r.disabled&&(t=ce(t),f=r.handlers[t.type],f))for(e=f.slice(0),u=0,o=e.length;u<o;u++)if(t.isImmediatePropagationStopped())break;else try{e[u].call(n,t,i)}catch(s){h.error(s)}});r.handlers[t].length===1&&(n.addEventListener?(u=!1,uh&&ay.indexOf(t)>-1&&(u={passive:!0}),n.addEventListener(t,r.dispatcher,u)):n.attachEvent&&n.attachEvent("on"+t,r.dispatcher))}function st(n,t,i){var r,e,o,u,f;if(hy(n)&&(r=tf(n),r.handlers)){if(Array.isArray(t))return rh(st,n,t,i);if(e=function(n,t){r.handlers[t]=[];ly(n,t)},t===undefined){for(o in r.handlers)Object.prototype.hasOwnProperty.call(r.handlers||{},o)&&e(n,o);return}if(u=r.handlers[t],u){if(!i){e(n,t);return}if(i.guid)for(f=0;f<u.length;f++)u[f].guid===i.guid&&u.splice(f--,1);ly(n,t)}}}function pr(n,t,i){var f=hy(n)?tf(n):{},r=n.parentNode||n.ownerDocument,u;return typeof t=="string"?t={type:t,target:n}:t.target||(t.target=n),t=ce(t),f.dispatcher&&f.dispatcher.call(n,t,i),r&&!t.isPropagationStopped()&&t.bubbles===!0?pr.call(null,r,t,i):r||t.defaultPrevented||(u=tf(t.target),t.target[t.type]&&(u.disabled=!0,typeof t.target[t.type]=="function"&&t.target[t.type](),u.disabled=!1)),!t.defaultPrevented}function rf(n,t,i){if(Array.isArray(t))return rh(rf,n,t,i);var r=function r(){st(n,t,r);i.apply(this,arguments)};r.guid=i.guid=i.guid||ki();bt(n,t,r)}function oh(n,i){i&&(eh=i);t.setTimeout(htt,n)}function hh(n){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},i=r.eventBusKey;if(i){if(!n[i].nodeName)throw new Error('The eventBusKey "'+i+'" does not refer to an element.');n.eventBusEl_=n[i]}else n.eventBusEl_=p("span",{className:"vjs-event-bus"});y(n,att);n.on("dispose",function(){n.off();t.setTimeout(function(){n.eventBusEl_=null},0)});return n}function dy(n,t){if(y(n,ky),n.state=y({},n.state,t),typeof n.handleStateChanged=="function"&&le(n))n.on("statechanged",n.handleStateChanged);return n}function v(n){return typeof n!="string"?n:n.charAt(0).toUpperCase()+n.slice(1)}function vtt(n,t){return v(n)===v(t)}function a(){for(var n={},i=arguments.length,r=Array(i),t=0;t<i;t++)r[t]=arguments[t];return r.forEach(function(t){t&&cr(t,function(t,i){if(!wu(t)){n[i]=t;return}wu(n[i])||(n[i]={});n[i]=a(n[i],t)})}),n}function btt(n,t,i){if(typeof t!="number"||t<0||t>i)throw new Error("Failed to execute '"+n+"' on 'TimeRanges': The index provided ("+t+") is non-numeric or out of bounds (0-"+i+").");}function op(n,t,i,r){return btt(n,r,i.length-1),i[r][t]}function yh(n){return n===undefined||n.length===0?{length:0,start:function(){throw new Error("This TimeRanges object is empty");},end:function(){throw new Error("This TimeRanges object is empty");}}:{length:n.length,start:op.bind(null,"start",0,n),end:op.bind(null,"end",1,n)}}function gi(n,t){return Array.isArray(n)?yh(n):n===undefined||t===undefined?yh():yh([[n,t]])}function sp(n,t){var u=0,f=void 0,r=void 0,i;if(!t)return 0;for(n&&n.length||(n=gi(0,0)),i=0;i<n.length;i++)f=n.start(i),r=n.end(i),r>t&&(r=t),u+=r-f;return u/t}function nt(n){if(n instanceof nt)return n;typeof n=="number"?this.code=n:typeof n=="string"?this.message=n:si(n)&&(typeof n.code=="number"&&(this.code=n.code),y(this,n));this.message||(this.message=nt.defaultMessages[this.code]||"")}function dtt(n,t){var i,r=null;try{i=JSON.parse(n,t)}catch(u){r=u}return[r,i]}function cp(n){return n!==undefined&&n!==null&&typeof n.then=="function"}function br(n){cp(n)&&n.then(null,function(){})}function cit(n){var t=hit.call(n);return t==="[object Function]"||typeof n=="function"&&t!=="[object RegExp]"||typeof window!="undefined"&&(n===window.setTimeout||n===window.alert||n===window.confirm||n===window.prompt)}function yit(n,t,i){if(!dp(t))throw new TypeError("iterator must be a function");arguments.length<3&&(i=this);vit.call(n)==="[object Array]"?pit(n,t,i):typeof n=="string"?wit(n,t,i):bit(n,t,i)}function pit(n,t,i){for(var r=0,u=n.length;r<u;r++)gp.call(n,r)&&t.call(i,n[r],r,n)}function wit(n,t,i){for(var r=0,u=n.length;r<u;r++)t.call(i,n.charAt(r),r,n)}function bit(n,t,i){for(var r in n)gp.call(n,r)&&t.call(i,n[r],r,n)}function nrt(){for(var n,t,r={},i=0;i<arguments.length;i++){n=arguments[i];for(t in n)git.call(n,t)&&(r[t]=n[t])}return r}function rrt(n,t){for(var i=0;i<n.length;i++)t(n[i])}function urt(n){for(var t in n)if(n.hasOwnProperty(t))return!1;return!0}function uw(n,t,i){var r=n;return dp(t)?(i=t,typeof n=="string"&&(r={uri:n})):r=irt(t,{uri:n}),r.callback=i,r}function ai(n,t,i){return t=uw(n,t,i),fw(t)}function fw(n){function w(){t.readyState===4&&setTimeout(v,0)}function b(){var n=undefined;if(n=t.response?t.response:t.responseText||frt(t),y)try{n=JSON.parse(n)}catch(i){}return n}function s(n){return clearTimeout(a),n instanceof Error||(n=new Error(""+(n||"Unknown XMLHttpRequest Error"))),n.statusCode=0,o(n,p)}function v(){var u,i,e;if(!f)return clearTimeout(a),u=n.useXDR&&t.status===undefined?200:t.status===1223?204:t.status,i=p,e=null,u!==0?(i={body:b(),statusCode:u,method:r,headers:{},url:h,rawRequest:t},t.getAllResponseHeaders&&(i.headers=trt(t.getAllResponseHeaders()))):e=new Error("Internal XMLHttpRequest Error"),o(e,i,i.body)}var e,o,t;if(typeof n.callback=="undefined")throw new Error("callback argument missing");e=!1;o=function(t,i,r){e||(e=!0,n.callback(t,i,r))};t=n.xhr||null;t||(t=n.cors||n.useXDR?new ai.XDomainRequest:new ai.XMLHttpRequest);var u,f,h=t.url=n.uri||n.url,r=t.method=n.method||"GET",c=n.body||n.data,i=t.headers=n.headers||{},l=!!n.sync,y=!1,a,p={body:undefined,headers:{},statusCode:0,method:r,url:h,rawRequest:t};if("json"in n&&n.json!==!1&&(y=!0,i.accept||i.Accept||(i.Accept="application/json"),r!=="GET"&&r!=="HEAD"&&(i["content-type"]||i["Content-Type"]||(i["Content-Type"]="application/json"),c=JSON.stringify(n.json===!0?c:n.json))),t.onreadystatechange=w,t.onload=v,t.onerror=s,t.onprogress=function(){},t.onabort=function(){f=!0},t.ontimeout=s,t.open(r,h,!l,n.username,n.password),l||(t.withCredentials=!!n.withCredentials),!l&&n.timeout>0&&(a=setTimeout(function(){if(!f){f=!0;t.abort("timeout");var n=new Error("XMLHttpRequest timeout");n.code="ETIMEDOUT";s(n)}},n.timeout)),t.setRequestHeader)for(u in i)i.hasOwnProperty(u)&&t.setRequestHeader(u,i[u]);else if(n.headers&&!urt(n.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in n&&(t.responseType=n.responseType),"beforeSend"in n&&typeof n.beforeSend=="function"&&n.beforeSend(t),t.send(c||null),t}function frt(n){if(n.responseType==="document")return n.responseXML;var t=n.responseXML&&n.responseXML.documentElement.nodeName==="parsererror";return n.responseType===""&&!t?n.responseXML:null}function ert(){}function ct(n,t){this.name="ParsingError";this.code=n.code;this.message=t||n.message}function ec(n){function i(n,t,i,r){return(n|0)*3600+(t|0)*60+(i|0)+(r|0)/1e3}var t=n.match(/^(\d+):(\d{2})(:\d{2})?\.(\d{3})/);return t?t[3]?i(t[1],t[2],t[3].replace(":",""),t[4]):t[1]>59?i(t[1],t[2],0,t[4]):i(0,t[1],t[2],t[4]):null}function hf(){this.values=be(null)}function cf(n,t,i,r){var f=r?n.split(r):[n],e,u,o,s;for(e in f)typeof f[e]=="string"&&(u=f[e].split(i),u.length===2)&&(o=u[0],s=u[1],t(o,s))}function srt(n,t,i){function f(){var t=ec(n);if(t===null)throw new ct(ct.Errors.BadTimeStamp,"Malformed timestamp: "+u);return n=n.replace(/^[^\sa-zA-Z-]+/,""),t}function e(n,t){var r=new hf;cf(n,function(n,t){var f,u,e;switch(n){case"region":for(f=i.length-1;f>=0;f--)if(i[f].id===t){r.set(n,i[f].region);break}break;case"vertical":r.alt(n,t,["rl","lr"]);break;case"line":u=t.split(",");e=u[0];r.integer(n,e);r.percent(n,e)?r.set("snapToLines",!1):null;r.alt(n,e,["auto"]);u.length===2&&r.alt("lineAlign",u[1],["start","middle","end"]);break;case"position":u=t.split(",");r.percent(n,u[0]);u.length===2&&r.alt("positionAlign",u[1],["start","middle","end"]);break;case"size":r.percent(n,t);break;case"align":r.alt(n,t,["start","middle","end","left","right"])}},/:/,/\s/);t.region=r.get("region",null);t.vertical=r.get("vertical","");t.line=r.get("line","auto");t.lineAlign=r.get("lineAlign","start");t.snapToLines=r.get("snapToLines",!0);t.size=r.get("size",100);t.align=r.get("align","middle");t.position=r.get("position",{start:0,left:0,middle:50,end:100,right:100},t.align);t.positionAlign=r.get("positionAlign",{start:"start",left:"start",middle:"middle",end:"end",right:"end"},t.align)}function r(){n=n.replace(/^\s+/,"")}var u=n;if(r(),t.startTime=f(),r(),n.substr(0,3)!=="-->")throw new ct(ct.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '-->'): "+u);n=n.substr(3);r();t.endTime=f();r();e(n,t)}function aw(n,t){function h(){function i(n){return t=t.substr(n.length),n}if(!t)return null;var n=t.match(/^([^<]*)(<[^>]*>?)?/);return i(n[1]?n[1]:n[2])}function c(n){return hrt[n]}function l(n){while(i=n.match(/&(amp|lt|gt|lrm|rlm|nbsp);/))n=n.replace(i[0],c);return n}function a(n,t){return!lw[t.localName]||lw[t.localName]===n.localName}function v(t,i){var u=crt[t],r,f;return u?(r=n.document.createElement(u),r.localName=u,f=lrt[t],f&&i&&(r[f]=i.trim()),r):null}for(var s=n.document.createElement("div"),f=s,r,e=[],o,u,i;(r=h())!==null;){if(r[0]==="<"){if(r[1]==="/"){e.length&&e[e.length-1]===r.substr(2).replace(">","")&&(e.pop(),f=f.parentNode);continue}if(o=ec(r.substr(1,r.length-2)),o){u=n.document.createProcessingInstruction("timestamp",o);f.appendChild(u);continue}if(i=r.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/),!i)continue;if(u=v(i[1],i[3]),!u)continue;if(!a(f,u))continue;i[2]&&(u.className=i[2].substr(1).replace("."," "));e.push(i[1]);f.appendChild(u);f=u;continue}f.appendChild(n.document.createTextNode(l(r)))}return s}function art(n){for(var i,t=0;t<oc.length;t++)if(i=oc[t],n>=i[0]&&n<=i[1])return!0;return!1}function vrt(n){function e(n,t){for(var i=t.childNodes.length-1;i>=0;i--)n.push(t.childNodes[i])}function r(n){var t,i,u;return!n||!n.length?null:(t=n.pop(),i=t.textContent||t.innerText,i)?(u=i.match(/^.*(\n|\r)/),u)?(n.length=0,u[0]):i:t.tagName==="ruby"?r(n):t.childNodes?(e(n,t),r(n)):void 0}var u=[],i="",f,t;if(!n||!n.childNodes)return"ltr";for(e(u,n);i=r(u);)for(t=0;t<i.length;t++)if(f=i.charCodeAt(t),art(f))return"rtl";return"ltr"}function yrt(n){var t;if(typeof n.line=="number"&&(n.snapToLines||n.line>=0&&n.line<=100))return n.line;if(!n.track||!n.track.textTrackList||!n.track.textTrackList.mediaElement)return-1;var r=n.track,i=r.textTrackList,u=0;for(t=0;t<i.length&&i[t]!==r;t++)i[t].mode==="showing"&&u++;return++u*-1}function ke(){}function de(n,t,i){var u,r;ke.call(this);this.cue=t;this.cueDiv=aw(n,t.text);u={color:"rgba(255, 255, 255, 1)",backgroundColor:"rgba(0, 0, 0, 0.8)",position:"relative",left:0,right:0,top:0,bottom:0,display:"inline",writingMode:t.vertical===""?"horizontal-tb":t.vertical==="lr"?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext"};this.applyStyles(u,this.cueDiv);this.div=n.document.createElement("div");u={direction:vrt(this.cueDiv),writingMode:t.vertical===""?"horizontal-tb":t.vertical==="lr"?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext",textAlign:t.align==="middle"?"center":t.align,font:i.font,whiteSpace:"pre-line",position:"absolute"};this.applyStyles(u);this.div.appendChild(this.cueDiv);r=0;switch(t.positionAlign){case"start":r=t.position;break;case"middle":r=t.position-t.size/2;break;case"end":r=t.position-t.size}t.vertical===""?this.applyStyles({left:this.formatStyle(r,"%"),width:this.formatStyle(t.size,"%")}):this.applyStyles({top:this.formatStyle(r,"%"),height:this.formatStyle(t.size,"%")});this.move=function(n){this.applyStyles({top:this.formatStyle(n.top,"px"),bottom:this.formatStyle(n.bottom,"px"),left:this.formatStyle(n.left,"px"),right:this.formatStyle(n.right,"px"),height:this.formatStyle(n.height,"px"),width:this.formatStyle(n.width,"px")})}}function tt(n){var i,r,f,u,t;n.div&&(r=n.div.offsetHeight,f=n.div.offsetWidth,u=n.div.offsetTop,t=(t=n.div.childNodes)&&(t=t[0])&&t.getClientRects&&t.getClientRects(),n=n.div.getBoundingClientRect(),i=t?Math.max(t[0]&&t[0].height||0,n.height/t.length):0);this.left=n.left;this.right=n.right;this.top=n.top||u;this.height=n.height||r;this.bottom=n.bottom||u+(n.height||r);this.width=n.width||f;this.lineHeight=i!==undefined?i:n.lineHeight}function prt(n,t,i,r){function y(n,t){for(var f,e,o=new tt(n),s=1,u=0;u<t.length;u++){while(n.overlapsOppositeAxis(i,t[u])||n.within(i)&&n.overlapsAny(r))n.move(t[u]);if(n.within(i))return n;f=n.intersectPercentage(i);s>f&&(e=new tt(n),s=f);n=new tt(o)}return e||o}var o=new tt(t),e=t.cue,f=yrt(e),u=[],h,l,v;if(e.snapToLines){switch(e.vertical){case"":u=["+y","-y"];h="height";break;case"rl":u=["+x","-x"];h="width";break;case"lr":u=["-x","+x"];h="width"}var c=o.lineHeight,s=c*Math.round(f),a=i[h]+c,p=u[0];Math.abs(s)>a&&(s=(s<0?-1:1)*Math.ceil(a/c)*c);f<0&&(s+=e.vertical===""?i.height:i.width,u=u.reverse());o.move(p,s)}else{l=o.lineHeight/i.height*100;switch(e.lineAlign){case"middle":f-=l/2;break;case"end":f-=l}switch(e.vertical){case"":t.applyStyles({top:t.formatStyle(f,"%")});break;case"rl":t.applyStyles({left:t.formatStyle(f,"%")});break;case"lr":t.applyStyles({right:t.formatStyle(f,"%")})}u=["+y","-x","+x","-y"];o=new tt(t)}v=y(o,u);t.move(v.toCSSCompatValues(i))}function nu(){}function tut(n){if(typeof n!="string")return!1;var t=grt[n.toLowerCase()];return t?n.toLowerCase():!1}function hc(n){if(typeof n!="string")return!1;var t=nut[n.toLowerCase()];return t?n.toLowerCase():!1}function yw(n,t,i){this.hasBeenReset=!1;var r="",u=!1,f=n,e=t,o=i,s=null,h="",c=!0,l="auto",a="start",v=50,y="middle",p=50,w="middle";Object.defineProperties(this,{id:{enumerable:!0,get:function(){return r},set:function(n){r=""+n}},pauseOnExit:{enumerable:!0,get:function(){return u},set:function(n){u=!!n}},startTime:{enumerable:!0,get:function(){return f},set:function(n){if(typeof n!="number")throw new TypeError("Start time must be set to a number.");f=n;this.hasBeenReset=!0}},endTime:{enumerable:!0,get:function(){return e},set:function(n){if(typeof n!="number")throw new TypeError("End time must be set to a number.");e=n;this.hasBeenReset=!0}},text:{enumerable:!0,get:function(){return o},set:function(n){o=""+n;this.hasBeenReset=!0}},region:{enumerable:!0,get:function(){return s},set:function(n){s=n;this.hasBeenReset=!0}},vertical:{enumerable:!0,get:function(){return h},set:function(n){var t=tut(n);if(t===!1)throw new SyntaxError("An invalid or illegal string was specified.");h=t;this.hasBeenReset=!0}},snapToLines:{enumerable:!0,get:function(){return c},set:function(n){c=!!n;this.hasBeenReset=!0}},line:{enumerable:!0,get:function(){return l},set:function(n){if(typeof n!="number"&&n!==drt)throw new SyntaxError("An invalid number or illegal string was specified.");l=n;this.hasBeenReset=!0}},lineAlign:{enumerable:!0,get:function(){return a},set:function(n){var t=hc(n);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");a=t;this.hasBeenReset=!0}},position:{enumerable:!0,get:function(){return v},set:function(n){if(n<0||n>100)throw new Error("Position must be between 0 and 100.");v=n;this.hasBeenReset=!0}},positionAlign:{enumerable:!0,get:function(){return y},set:function(n){var t=hc(n);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");y=t;this.hasBeenReset=!0}},size:{enumerable:!0,get:function(){return p},set:function(n){if(n<0||n>100)throw new Error("Size must be between 0 and 100.");p=n;this.hasBeenReset=!0}},align:{enumerable:!0,get:function(){return w},set:function(n){var t=hc(n);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");w=t;this.hasBeenReset=!0}}});this.displayState=undefined}function rut(n){if(typeof n!="string")return!1;var t=iut[n.toLowerCase()];return t?n.toLowerCase():!1}function lf(n){return typeof n=="number"&&n>=0&&n<=100}function uut(){var n=100,t=3,i=0,r=100,u=0,f=100,e="";Object.defineProperties(this,{width:{enumerable:!0,get:function(){return n},set:function(t){if(!lf(t))throw new Error("Width must be between 0 and 100.");n=t}},lines:{enumerable:!0,get:function(){return t},set:function(n){if(typeof n!="number")throw new TypeError("Lines must be set to a number.");t=n}},regionAnchorY:{enumerable:!0,get:function(){return r},set:function(n){if(!lf(n))throw new Error("RegionAnchorX must be between 0 and 100.");r=n}},regionAnchorX:{enumerable:!0,get:function(){return i},set:function(n){if(!lf(n))throw new Error("RegionAnchorY must be between 0 and 100.");i=n}},viewportAnchorY:{enumerable:!0,get:function(){return f},set:function(n){if(!lf(n))throw new Error("ViewportAnchorY must be between 0 and 100.");f=n}},viewportAnchorX:{enumerable:!0,get:function(){return u},set:function(n){if(!lf(n))throw new Error("ViewportAnchorX must be between 0 and 100.");u=n}},scroll:{enumerable:!0,get:function(){return e},set:function(n){var t=rut(n);if(t===!1)throw new SyntaxError("An invalid or illegal string was specified.");e=t}}})}function sut(n,t,i,r){var u=arguments.length>4&&arguments[4]!==undefined?arguments[4]:{},e=n.textTracks(),f;return u.kind=t,i&&(u.label=i),r&&(u.language=r),u.tech=n,f=new ut.text.TrackClass(u),e.addTrack(f),f}function hut(n,t){ir[n]=ir[n]||[];ir[n].push(t)}function cut(n,t,i){n.setTimeout(function(){return rr(t,ir[t.type],i,n)},1)}function lut(n,t){n.forEach(function(n){return n.setTech&&n.setTech(t)})}function aut(n,t,i){return n.reduceRight(vc(i),t[i]())}function vut(n,t,i,r){return t[i](n.reduce(vc(i),r))}function bw(n,t,i){var e=arguments.length>3&&arguments[3]!==undefined?arguments[3]:null,o="call"+v(i),r=n.reduce(vc(o),e),u=r===ge,f=u?null:t[i](r);return wut(n,i,f,u),f}function vc(n){return function(t,i){return t===ge?ge:i[n]?i[n](t):t}}function wut(n,t,i,r){for(var f,u=n.length-1;u>=0;u--)f=n[u],f[t]&&f[t](r,i)}function but(n){ac[n.id()]=null}function kut(n,t){var r=ac[n.id()],i=null,u;if(r===undefined||r===null)return i=t(n),ac[n.id()]=[[t,i]],i;for(u=0;u<r.length;u++){var f=r[u],e=f[0],o=f[1];e===t&&(i=o)}return i===null&&(i=t(n),r.push([t,i])),i}function rr(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},s=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[],i=arguments[2],r=arguments[3],n=arguments.length>4&&arguments[4]!==undefined?arguments[4]:[],u=arguments.length>5&&arguments[5]!==undefined?arguments[5]:!1,o=s[0],f=s.slice(1),e;if(typeof o=="string")rr(t,ir[o],i,r,n,u);else if(o){if(e=kut(r,o),!e.setSource)return n.push(e),rr(t,f,i,r,n,u);e.setSource(y({},t),function(o,s){if(o)return rr(t,f,i,r,n,u);n.push(e);rr(s,t.type===s.type?f:ir[s.type],i,r,n,u)})}else f.length?rr(t,f,i,r,n,u):u?i(t,n):rr(t,ir["*"],i,r,n,!0)}function nb(n){var t=dw(n.src);return!n.type&&t&&(n.type=t),n}function yc(n,t){var i=void 0;if(n.length===4)i=n[1]+n[1]+n[2]+n[2]+n[3]+n[3];else if(n.length===7)i=n.slice(1);else throw new Error("Invalid color code provided, "+n+"; must be formatted as e.g. #f0e or #f604e2.");return"rgba("+parseInt(i.slice(0,2),16)+","+parseInt(i.slice(2,4),16)+","+parseInt(i.slice(4,6),16)+","+t+")"}function pc(n,t,i){try{n.style[t]=i}catch(r){return}}function tft(n){no=n}function ift(){no=kc}function tu(n){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:n;return no(n,t)}function fk(n,t){return t&&(n=t(n)),n&&n!=="none"?n:void 0}function rft(n,t){var i=n.options[n.options.selectedIndex].value;return fk(i,t)}function uft(n,t,i){if(t)for(var r=0;r<n.options.length;r++)if(fk(n.options[r].value,i)===t){n.selectedIndex=r;break}}function n(t,r,f){var e=n.getPlayer(t),o,s;if(e)return r&&h.warn('Player "'+t+'" is already initialised. Options will not be applied.'),f&&e.ready(f),e;if(o=typeof t=="string"?hi("#"+yk(t)):t,!bu(o))throw new TypeError("The element or ID supplied is not valid. (videojs)");return u.body.contains(o)||h.warn("The element supplied is not included in the DOM"),r=r||{},n.hooks("beforesetup").forEach(function(n){var t=n(o,a(r));if(!si(t)||Array.isArray(t)){h.error("please return an object in beforesetup hooks");return}r=a(r,t)}),s=i.getComponent("Player"),e=new s(o,r,f),n.hooks("setup").forEach(function(n){return n(e)}),e}function not(n){for(var r=t.atob(n),u=new Uint8Array(r.length),i=0;i<r.length;i++)u[i]=r.charCodeAt(i);return u}function bht(n){return n.subarray(0,n.byteLength-n[n.byteLength-1])}function pg(n,t){return function(i){var u=this,e,f,r;if(t){if(vu&&!i)return e=t.toString().replace(/^function.+?{/,"").slice(0,-1),f=wg(e),this[wa]=new vu(f),ylt(this[wa],f),this[wa];r={postMessage:function(n){u.onmessage&&setTimeout(function(){u.onmessage({data:n,target:r})})}};t.call(r);this.postMessage=function(n){setTimeout(function(){r.onmessage({data:n,target:u})})};this.isThisThread=!0}else return new vu(n)}}function wg(n){try{return au.createObjectURL(new Blob([n],{type:alt}))}catch(i){var t=new vlt;return t.append(n),au.createObjectURL(t.getBlob(type))}}function ylt(n,t){if(n&&t){var i=n.terminate;n.objURL=t;n.terminate=function(){n.objURL&&au.revokeObjectURL(n.objURL);i.call(n)}}}function re(){}var sv="7.1.0",yu=typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},hv,h,yv,yr,ci,uh,ay,ky,i,ff,ef,nr,hp,tr,ap,ht,gr,ut,be,oc,l,tb,vf,ib,ub,fb,gt,wc,eb,bc,kc,no,ur,to,io,ob,ro,sb,uo,hb,cb,fo,dc,gc,nl,vb,yb,oo,tl,pb,il,rl,so,ho,co,iu,ru,ul,fr,fl,lo,ao,vo,yo,po,el,wo,ol,sl,bo,hl,cl,wb,ll,al,ek,ok,yf,bl,ck,uu,dl,pft,ys,ba,ka,nv,gn,ntt;hv=typeof window!="undefined"?window:typeof yu!="undefined"?yu:typeof self!="undefined"?self:{};var t=hv,cv={},lv=Object.freeze({"default":cv}),itt=lv&&cv||lv,av=typeof yu!="undefined"?yu:typeof window!="undefined"?window:{},pu;typeof document!="undefined"?pu=document:(pu=av["__GLOBAL_DOCUMENT_CACHE@4"],pu||(pu=av["__GLOBAL_DOCUMENT_CACHE@4"]=itt));var u=pu,ot=void 0,ee="info",wt=[],oe=function(n,i){var u=ot.levels[ee],f=new RegExp("^("+u+")$"),r;(n!=="log"&&i.unshift(n.toUpperCase()+":"),wt&&wt.push([].concat(i)),i.unshift("VIDEOJS:"),t.console)&&(r=t.console[n],r||n!=="debug"||(r=t.console.info||t.console.log),r&&u&&f.test(n))&&r[Array.isArray(i)?"apply":"call"](t.console,i)};ot=function(){for(var t=arguments.length,i=Array(t),n=0;n<t;n++)i[n]=arguments[n];oe("log",i)};ot.levels={all:"debug|log|warn|error",off:"",debug:"debug|log|warn|error",info:"log|warn|error",warn:"warn|error",error:"error",DEFAULT:ee};ot.level=function(n){if(typeof n=="string"){if(!ot.levels.hasOwnProperty(n))throw new Error('"'+n+'" in not a valid log level');ee=n}return ee};ot.history=function(){return wt?[].concat(wt):[]};ot.history.clear=function(){wt&&(wt.length=0)};ot.history.disable=function(){wt!==null&&(wt.length=0,wt=null)};ot.history.enable=function(){wt===null&&(wt=[])};ot.error=function(){for(var t=arguments.length,i=Array(t),n=0;n<t;n++)i[n]=arguments[n];return oe("error",i)};ot.warn=function(){for(var t=arguments.length,i=Array(t),n=0;n<t;n++)i[n]=arguments[n];return oe("warn",i)};ot.debug=function(){for(var t=arguments.length,i=Array(t),n=0;n<t;n++)i[n]=arguments[n];return oe("debug",i)};h=ot;var ks=function(n){for(var i="",t=0;t<arguments.length;t++)i+=rtt(n[t])+(arguments[t+1]||"");return i},k=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},f=function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");},o=function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(n,t):n.__proto__=t)},e=function(n,t){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:n},ds=function(n,t){return n.raw=t,n},utt=Object.prototype.toString,vv=function(n){return si(n)?Object.keys(n):[]};yv=ds(["Setting attributes in the second argument of createEl()\n                has been deprecated. Use the third argument instead.\n                createEl(type, properties, attributes). Attempting to set "," to ","."],["Setting attributes in the second argument of createEl()\n                has been deprecated. Use the third argument instead.\n                createEl(type, properties, attributes). Attempting to set "," to ","."]);var hi=kv("querySelector"),oy=kv("querySelectorAll"),sy=Object.freeze({isReal:lr,isEl:bu,isInFrame:bv,createEl:p,textContent:ku,prependTo:se,hasClass:ar,addClass:bi,removeClass:du,toggleClass:dv,setAttributes:gv,getAttributes:ri,getAttribute:ny,setAttribute:gu,removeAttribute:he,blockTextSelection:ty,unblockTextSelection:iy,getBoundingClientRect:nf,findPosition:ry,getPointerPosition:nh,isTextNode:uy,emptyEl:th,normalizeContent:fy,appendContent:ih,insertContent:ey,isSingleLeftClick:vr,$:hi,$$:oy}),ott=1;yr={};ci="vdata"+(new Date).getTime();uh=!1,function(){try{var n=Object.defineProperty({},"passive",{get:function(){uh=!0}});t.addEventListener("test",null,n);t.removeEventListener("test",null,n)}catch(r){}}();ay=["touchstart","touchmove"];var stt=Object.freeze({fixEvent:ce,on:bt,off:st,trigger:pr,one:rf}),fh=!1,eh=void 0,htt=function(){var i,r,n,f;if(lr()&&eh.options.autoSetup!==!1){var e=Array.prototype.slice.call(u.getElementsByTagName("video")),o=Array.prototype.slice.call(u.getElementsByTagName("audio")),s=Array.prototype.slice.call(u.getElementsByTagName("video-js")),t=e.concat(o,s);if(t&&t.length>0)for(i=0,r=t.length;i<r;i++)if(n=t[i],n&&n.getAttribute)n.player===undefined&&(f=n.getAttribute("data-setup"),f!==null&&eh(n));else{oh(1);break}else fh||oh(1)}};lr()&&u.readyState==="complete"?fh=!0:rf(t,"load",function(){fh=!0});var vy=function(n){var t=u.createElement("style");return t.className=n,t},ctt=function(n,t){n.styleSheet?n.styleSheet.cssText=t:n.textContent=t},s=function(n,t,i){t.guid||(t.guid=ki());var r=function(){return t.apply(n,arguments)};return r.guid=i?i+"_"+t.guid:t.guid,r},wr=function(n,t){var i=Date.now();return function(){var r=Date.now();r-i>=t&&(n.apply(undefined,arguments),i=r)}},ltt=function(n,i,r){var f=arguments.length>3&&arguments[3]!==undefined?arguments[3]:t,u=void 0;return function(){var t=this,e=arguments,o=function(){u=null;o=null;r||n.apply(t,e)};!u&&r&&n.apply(t,e);f.clearTimeout(u);u=f.setTimeout(o,i)}},d=function(){};d.prototype.allowedEvents_={};d.prototype.on=function(n,t){var i=this.addEventListener;this.addEventListener=function(){};bt(this,n,t);this.addEventListener=i};d.prototype.addEventListener=d.prototype.on;d.prototype.off=function(n,t){st(this,n,t)};d.prototype.removeEventListener=d.prototype.off;d.prototype.one=function(n,t){var i=this.addEventListener;this.addEventListener=function(){};rf(this,n,t);this.addEventListener=i};d.prototype.trigger=function(n){var t=n.type||n;typeof n=="string"&&(n={type:t});n=ce(n);this.allowedEvents_[t]&&this["on"+t]&&this["on"+t](n);pr(this,n)};d.prototype.dispatchEvent=d.prototype.trigger;var le=function(n){return n instanceof d||!!n.eventBusEl_&&["on","one","off","trigger"].every(function(t){return typeof n[t]=="function"})},yy=function(n){return typeof n=="string"&&/\S/.test(n)||Array.isArray(n)&&!!n.length},sh=function(n){if(!n.nodeName&&!le(n))throw new Error("Invalid target; must be a DOM node or evented object.");},py=function(n){if(!yy(n))throw new Error("Invalid event type; must be a non-empty string or array.");},wy=function(n){if(typeof n!="function")throw new Error("Invalid listener; must be a function.");},by=function(n,t){var f=t.length<3||t[0]===n||t[0]===n.eventBusEl_,r=void 0,u=void 0,i=void 0;return f?(r=n.eventBusEl_,t.length>=3&&t.shift(),u=t[0],i=t[1]):(r=t[0],u=t[1],i=t[2]),sh(r),py(u),wy(i),i=s(n,i),{isTargetingSelf:f,target:r,type:u,listener:i}},uf=function(n,t,i,r){sh(n);n.nodeName?stt[t](n,i,r):n[t](i,r)},att={on:function(){for(var r,f,e=this,o=arguments.length,s=Array(o),n=0;n<o;n++)s[n]=arguments[n];var t=by(this,s),c=t.isTargetingSelf,u=t.target,h=t.type,i=t.listener;uf(u,"on",h,i);c||(r=function(){return e.off(u,h,i)},r.guid=i.guid,f=function(){return e.off("dispose",r)},f.guid=i.guid,uf(this,"on","dispose",r),uf(u,"on","dispose",f))},one:function(){for(var i,s=this,e=arguments.length,o=Array(e),n=0;n<e;n++)o[n]=arguments[n];var t=by(this,o),h=t.isTargetingSelf,r=t.target,u=t.type,f=t.listener;h?uf(r,"one",u,f):(i=function i(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];s.off(r,u,i);f.apply(null,e)},i.guid=f.guid,uf(r,"one",u,i))},off:function(n,t,i){if(!n||yy(n))st(this.eventBusEl_,n,t);else{var r=n,u=t;sh(r);py(u);wy(i);i=s(this,i);this.off("dispose",i);r.nodeName?(st(r,u,i),st(r,"dispose",i)):le(r)&&(r.off(u,i),r.off("dispose",i))}},trigger:function(n,t){return pr(this.eventBusEl_,n,t)}};ky={state:{},setState:function(n){var i=this,t;return typeof n=="function"&&(n=n()),t=void 0,cr(n,function(n,r){i.state[r]!==n&&(t=t||{},t[r]={from:i.state[r],to:n});i.state[r]=n}),t&&le(this)&&this.trigger({changes:t,type:"statechanged"}),t}};i=function(){function n(t,i,r){if(f(this,n),this.player_=!t&&this.play?t=this:t,this.options_=a({},this.options_),i=this.options_=a(this.options_,i),this.id_=i.id||i.el&&i.el.id,!this.id_){var u=t&&t.id&&t.id()||"no_player";this.id_=u+"_component_"+ki()}this.name_=i.name||null;i.el?this.el_=i.el:i.createEl!==!1&&(this.el_=this.createEl());i.evented!==!1&&hh(this,{eventBusKey:this.el_?"el_":null});dy(this,this.constructor.defaultState);this.children_=[];this.childIndex_={};this.childNameIndex_={};i.initChildren!==!1&&this.initChildren();this.ready(r);i.reportTouchActivity!==!1&&this.enableTouchActivity()}return n.prototype.dispose=function(){if(this.trigger({type:"dispose",bubbles:!1}),this.children_)for(var n=this.children_.length-1;n>=0;n--)this.children_[n].dispose&&this.children_[n].dispose();this.children_=null;this.childIndex_=null;this.childNameIndex_=null;this.el_&&(this.el_.parentNode&&this.el_.parentNode.removeChild(this.el_),cy(this.el_),this.el_=null);this.player_=null},n.prototype.player=function(){return this.player_},n.prototype.options=function(n){return(h.warn("this.options() has been deprecated and will be moved to the constructor in 6.0"),!n)?this.options_:(this.options_=a(this.options_,n),this.options_)},n.prototype.el=function(){return this.el_},n.prototype.createEl=function(n,t,i){return p(n,t,i)},n.prototype.localize=function(n,t){var o=arguments.length>2&&arguments[2]!==undefined?arguments[2]:n,u=this.player_.language&&this.player_.language(),r=this.player_.languages&&this.player_.languages(),f=r&&r[u],s=u&&u.split("-")[0],e=r&&r[s],i=o;return f&&f[n]?i=f[n]:e&&e[n]&&(i=e[n]),t&&(i=i.replace(/\{(\d+)\}/g,function(n,i){var r=t[i-1],u=r;return typeof r=="undefined"&&(u=n),u})),i},n.prototype.contentEl=function(){return this.contentEl_||this.el_},n.prototype.id=function(){return this.id_},n.prototype.name=function(){return this.name_},n.prototype.children=function(){return this.children_},n.prototype.getChildById=function(n){return this.childIndex_[n]},n.prototype.getChild=function(n){if(n)return n=v(n),this.childNameIndex_[n]},n.prototype.addChild=function(t){var f=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},o=arguments.length>2&&arguments[2]!==undefined?arguments[2]:this.children_.length,i=void 0,r=void 0,e,u,s,h;if(typeof t=="string"){if(r=v(t),e=f.componentClass||r,f.name=r,u=n.getComponent(e),!u)throw new Error("Component "+e+" does not exist");if(typeof u!="function")return null;i=new u(this.player_||this,f)}else i=t;return this.children_.splice(o,0,i),typeof i.id=="function"&&(this.childIndex_[i.id()]=i),r=r||i.name&&v(i.name()),r&&(this.childNameIndex_[r]=i),typeof i.el=="function"&&i.el()&&(s=this.contentEl().children,h=s[o]||null,this.contentEl().insertBefore(i.el(),h)),i},n.prototype.removeChild=function(n){var i,t,r;if(typeof n=="string"&&(n=this.getChild(n)),n&&this.children_){for(i=!1,t=this.children_.length-1;t>=0;t--)if(this.children_[t]===n){i=!0;this.children_.splice(t,1);break}i&&(this.childIndex_[n.id()]=null,this.childNameIndex_[n.name()]=null,r=n.el(),r&&r.parentNode===this.contentEl()&&this.contentEl().removeChild(n.el()))}},n.prototype.initChildren=function(){var i=this,t=this.options_.children;if(t){var u=this.options_,f=function(n){var r=n.name,t=n.opts,f;(u[r]!==undefined&&(t=u[r]),t!==!1)&&(t===!0&&(t={}),t.playerOptions=i.options_.playerOptions,f=i.addChild(r,t),f&&(i[r]=f))},r=void 0,e=n.getComponent("Tech");r=Array.isArray(t)?t:Object.keys(t);r.concat(Object.keys(this.options_).filter(function(n){return!r.some(function(t){return typeof t=="string"?n===t:n===t.name})})).map(function(n){var r=void 0,u=void 0;return typeof n=="string"?(r=n,u=t[r]||i.options_[r]||{}):(r=n.name,u=n),{name:r,opts:u}}).filter(function(t){var i=n.getComponent(t.opts.componentClass||v(t.name));return i&&!e.isTech(i)}).forEach(f)}},n.prototype.buildCSSClass=function(){return""},n.prototype.ready=function(n){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:!1;if(n){if(!this.isReady_){this.readyQueue_=this.readyQueue_||[];this.readyQueue_.push(n);return}t?n.call(this):this.setTimeout(n,1)}},n.prototype.triggerReady=function(){this.isReady_=!0;this.setTimeout(function(){var n=this.readyQueue_;this.readyQueue_=[];n&&n.length>0&&n.forEach(function(n){n.call(this)},this);this.trigger("ready")},1)},n.prototype.$=function(n,t){return hi(n,t||this.contentEl())},n.prototype.$$=function(n,t){return oy(n,t||this.contentEl())},n.prototype.hasClass=function(n){return ar(this.el_,n)},n.prototype.addClass=function(n){bi(this.el_,n)},n.prototype.removeClass=function(n){du(this.el_,n)},n.prototype.toggleClass=function(n,t){dv(this.el_,n,t)},n.prototype.show=function(){this.removeClass("vjs-hidden")},n.prototype.hide=function(){this.addClass("vjs-hidden")},n.prototype.lockShowing=function(){this.addClass("vjs-lock-showing")},n.prototype.unlockShowing=function(){this.removeClass("vjs-lock-showing")},n.prototype.getAttribute=function(n){return ny(this.el_,n)},n.prototype.setAttribute=function(n,t){gu(this.el_,n,t)},n.prototype.removeAttribute=function(n){he(this.el_,n)},n.prototype.width=function(n,t){return this.dimension("width",n,t)},n.prototype.height=function(n,t){return this.dimension("height",n,t)},n.prototype.dimensions=function(n,t){this.width(n,!0);this.height(t)},n.prototype.dimension=function(n,t,i){if(t!==undefined){(t===null||t!==t)&&(t=0);this.el_.style[n]=(""+t).indexOf("%")!==-1||(""+t).indexOf("px")!==-1?t:t==="auto"?"":t+"px";i||this.trigger("componentresize");return}if(!this.el_)return 0;var r=this.el_.style[n],u=r.indexOf("px");return u!==-1?parseInt(r.slice(0,u),10):parseInt(this.el_["offset"+v(n)],10)},n.prototype.currentDimension=function(n){var i=0,r,u;if(n!=="width"&&n!=="height")throw new Error("currentDimension only accepts width or height value");return typeof t.getComputedStyle=="function"&&(r=t.getComputedStyle(this.el_),i=r.getPropertyValue(n)||r[n]),i=parseFloat(i),i===0&&(u="offset"+v(n),i=this.el_[u]),i},n.prototype.currentDimensions=function(){return{width:this.currentDimension("width"),height:this.currentDimension("height")}},n.prototype.currentWidth=function(){return this.currentDimension("width")},n.prototype.currentHeight=function(){return this.currentDimension("height")},n.prototype.focus=function(){this.el_.focus()},n.prototype.blur=function(){this.el_.blur()},n.prototype.emitTapEvents=function(){var r=0,n=null,u=10,f=200,t=void 0,i;this.on("touchstart",function(i){i.touches.length===1&&(n={pageX:i.touches[0].pageX,pageY:i.touches[0].pageY},r=(new Date).getTime(),t=!0)});this.on("touchmove",function(i){if(i.touches.length>1)t=!1;else if(n){var r=i.touches[0].pageX-n.pageX,f=i.touches[0].pageY-n.pageY,e=Math.sqrt(r*r+f*f);e>u&&(t=!1)}});i=function(){t=!1};this.on("touchleave",i);this.on("touchcancel",i);this.on("touchend",function(i){if(n=null,t===!0){var u=(new Date).getTime()-r;u<f&&(i.preventDefault(),this.trigger("tap"))}})},n.prototype.enableTouchActivity=function(){var n,t,i;if(this.player()&&this.player().reportUserActivity){n=s(this.player(),this.player().reportUserActivity);t=void 0;this.on("touchstart",function(){n();this.clearInterval(t);t=this.setInterval(n,250)});i=function(){n();this.clearInterval(t)};this.on("touchmove",n);this.on("touchend",i);this.on("touchcancel",i)}},n.prototype.setTimeout=function(n,i){var f=this,r,u;n=s(this,n);r=t.setTimeout(function(){f.off("dispose",u);n()},i);u=function(){return f.clearTimeout(r)};u.guid="vjs-timeout-"+r;this.on("dispose",u);return r},n.prototype.clearTimeout=function(n){t.clearTimeout(n);var i=function(){};return i.guid="vjs-timeout-"+n,this.off("dispose",i),n},n.prototype.setInterval=function(n,i){var f=this,r,u;n=s(this,n);r=t.setInterval(n,i);u=function(){return f.clearInterval(r)};u.guid="vjs-interval-"+r;this.on("dispose",u);return r},n.prototype.clearInterval=function(n){t.clearInterval(n);var i=function(){};return i.guid="vjs-interval-"+n,this.off("dispose",i),n},n.prototype.requestAnimationFrame=function(n){var u=this,i,r;if(this.supportsRaf_){n=s(this,n);i=t.requestAnimationFrame(function(){u.off("dispose",r);n()});r=function(){return u.cancelAnimationFrame(i)};r.guid="vjs-raf-"+i;this.on("dispose",r);return i}return this.setTimeout(n,1e3/60)},n.prototype.cancelAnimationFrame=function(n){if(this.supportsRaf_){t.cancelAnimationFrame(n);var i=function(){};return i.guid="vjs-raf-"+n,this.off("dispose",i),n}return this.clearTimeout(n)},n.registerComponent=function(t,i){var f,r,u,e;if(typeof t!="string"||!t)throw new Error('Illegal component name, "'+t+'"; must be a non-empty string.');var o=n.getComponent("Tech"),s=o&&o.isTech(i),h=n===i||n.prototype.isPrototypeOf(i.prototype);if(s||!h){f=void 0;f=s?"techs must be registered using Tech.registerTech()":"must be a Component subclass";throw new Error('Illegal component, "'+t+'"; '+f+".");}if(t=v(t),n.components_||(n.components_={}),r=n.getComponent("Player"),t==="Player"&&r&&r.players&&(u=r.players,e=Object.keys(u),u&&e.length>0&&e.map(function(n){return u[n]}).every(Boolean)))throw new Error("Can not register Player component after player has been created.");return n.components_[t]=i,i},n.getComponent=function(t){if(t)return t=v(t),n.components_&&n.components_[t]?n.components_[t]:void 0},n}();i.prototype.supportsRaf_=typeof t.requestAnimationFrame=="function"&&typeof t.cancelAnimationFrame=="function";i.registerComponent("Component",i);var g=t.navigator&&t.navigator.userAgent||"",gy=/AppleWebKit\/([\d.]+)/i.exec(g),ytt=gy?parseFloat(gy.pop()):null,ch=/iPad/i.test(g),lh=/iPhone/i.test(g)&&!ch,np=/iPod/i.test(g),ui=lh||ch||np,ptt=function(){var n=g.match(/OS (\d+)_/i);return n&&n[1]?n[1]:null}(),di=/Android/i.test(g),ah=function(){var n=g.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i),t,i;return n?(t=n[1]&&parseFloat(n[1]),i=n[2]&&parseFloat(n[2]),t&&i)?parseFloat(n[1]+"."+n[2]):t?t:null:null}(),tp=di&&ah<5&&ytt<537,ip=/Firefox/i.test(g),vh=/Edge/i.test(g),li=!vh&&(/Chrome/i.test(g)||/CriOS/i.test(g)),rp=function(){var n=g.match(/(Chrome|CriOS)\/(\d+)/);return n&&n[2]?parseFloat(n[2]):null}(),up=function(){var t=/MSIE\s(\d+)\.\d/.exec(g),n=t&&parseFloat(t[1]);return!n&&/Trident\/7.0/i.test(g)&&/rv:11.0/.test(g)&&(n=11),n}(),fp=/Safari/i.test(g)&&!li&&!di&&!vh,ep=(fp||ui)&&!li,ae=lr()&&("ontouchstart"in t||t.navigator.maxTouchPoints||t.DocumentTouch&&t.document instanceof t.DocumentTouch),wtt=Object.freeze({IS_IPAD:ch,IS_IPHONE:lh,IS_IPOD:np,IS_IOS:ui,IOS_VERSION:ptt,IS_ANDROID:di,ANDROID_VERSION:ah,IS_NATIVE_ANDROID:tp,IS_FIREFOX:ip,IS_EDGE:vh,IS_CHROME:li,CHROME_VERSION:rp,IE_VERSION:up,IS_SAFARI:fp,IS_ANY_SAFARI:ep,TOUCH_ENABLED:ae});var ve={},ye=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],ktt=ye[0],pe=void 0;for(ff=0;ff<ye.length;ff++)if(ye[ff][1]in u){pe=ye[ff];break}if(pe)for(ef=0;ef<pe.length;ef++)ve[ktt[ef]]=pe[ef];for(nt.prototype.code=0,nt.prototype.message="",nt.prototype.status=null,nt.errorTypes=["MEDIA_ERR_CUSTOM","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_ENCRYPTED"],nt.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."},nr=0;nr<nt.errorTypes.length;nr++)nt[nt.errorTypes[nr]]=nr,nt.prototype[nt.errorTypes[nr]]=nr;hp=dtt;var ph=function(n){return["kind","label","language","id","inBandMetadataTrackDispatchType","mode","src"].reduce(function(t,i){return n[i]&&(t[i]=n[i]),t},{cues:n.cues&&Array.prototype.map.call(n.cues,function(n){return{startTime:n.startTime,endTime:n.endTime,text:n.text,id:n.id}})})},gtt=function(n){var t=n.$$("track"),i=Array.prototype.map.call(t,function(n){return n.track}),r=Array.prototype.map.call(t,function(n){var t=ph(n.track);return n.src&&(t.src=n.src),t});return r.concat(Array.prototype.filter.call(n.textTracks(),function(n){return i.indexOf(n)===-1}).map(ph))},nit=function(n,t){return n.forEach(function(n){var i=t.addRemoteTextTrack(n).track;!n.src&&n.cues&&n.cues.forEach(function(n){return i.addCue(n)})}),t.textTracks()},lp={textTracksToJson:gtt,jsonToTextTracks:nit,trackToJson_:ph},wh="vjs-modal-dialog",tit=27,kr=function(n){function i(t,r){f(this,i);var u=e(this,n.call(this,t,r));return u.opened_=u.hasBeenOpened_=u.hasBeenFilled_=!1,u.closeable(!u.options_.uncloseable),u.content(u.options_.content),u.contentEl_=p("div",{className:wh+"-content"},{role:"document"}),u.descEl_=p("p",{className:wh+"-description vjs-control-text",id:u.el().getAttribute("aria-describedby")}),ku(u.descEl_,u.description()),u.el_.appendChild(u.descEl_),u.el_.appendChild(u.contentEl_),u}return o(i,n),i.prototype.createEl=function(){return n.prototype.createEl.call(this,"div",{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":this.id()+"_description","aria-hidden":"true","aria-label":this.label(),role:"dialog"})},i.prototype.dispose=function(){this.contentEl_=null;this.descEl_=null;this.previouslyActiveEl_=null;n.prototype.dispose.call(this)},i.prototype.buildCSSClass=function(){return wh+" vjs-hidden "+n.prototype.buildCSSClass.call(this)},i.prototype.handleKeyPress=function(n){n.which===tit&&this.closeable()&&this.close()},i.prototype.label=function(){return this.localize(this.options_.label||"Modal Window")},i.prototype.description=function(){var n=this.options_.description||this.localize("This is a modal window.");return this.closeable()&&(n+=" "+this.localize("This modal can be closed by pressing the Escape key or activating the close button.")),n},i.prototype.open=function(){if(!this.opened_){var n=this.player();if(this.trigger("beforemodalopen"),this.opened_=!0,!this.options_.fillAlways&&(this.hasBeenOpened_||this.hasBeenFilled_)||this.fill(),this.wasPlaying_=!n.paused(),this.options_.pauseOnOpen&&this.wasPlaying_&&n.pause(),this.closeable())this.on(this.el_.ownerDocument,"keydown",s(this,this.handleKeyPress));this.hadControls_=n.controls();n.controls(!1);this.show();this.conditionalFocus_();this.el().setAttribute("aria-hidden","false");this.trigger("modalopen");this.hasBeenOpened_=!0}},i.prototype.opened=function(n){return typeof n=="boolean"&&this[n?"open":"close"](),this.opened_},i.prototype.close=function(){if(this.opened_){var n=this.player();this.trigger("beforemodalclose");this.opened_=!1;this.wasPlaying_&&this.options_.pauseOnOpen&&n.play();this.closeable()&&this.off(this.el_.ownerDocument,"keydown",s(this,this.handleKeyPress));this.hadControls_&&n.controls(!0);this.hide();this.el().setAttribute("aria-hidden","true");this.trigger("modalclose");this.conditionalBlur_();this.options_.temporary&&this.dispose()}},i.prototype.closeable=function(n){var i,t,r;if(typeof n=="boolean"){if(i=this.closeable_=!!n,t=this.getChild("closeButton"),i&&!t){r=this.contentEl_;this.contentEl_=this.el_;t=this.addChild("closeButton",{controlText:"Close Modal Dialog"});this.contentEl_=r;this.on(t,"close",this.close)}!i&&t&&(this.off(t,"close",this.close),this.removeChild(t),t.dispose())}return this.closeable_},i.prototype.fill=function(){this.fillWith(this.content())},i.prototype.fillWith=function(n){var t=this.contentEl(),i=t.parentNode,u=t.nextSibling,r;this.trigger("beforemodalfill");this.hasBeenFilled_=!0;i.removeChild(t);this.empty();ey(t,n);this.trigger("modalfill");u?i.insertBefore(t,u):i.appendChild(t);r=this.getChild("closeButton");r&&i.appendChild(r.el_)},i.prototype.empty=function(){this.trigger("beforemodalempty");th(this.contentEl());this.trigger("modalempty")},i.prototype.content=function(n){return typeof n!="undefined"&&(this.content_=n),this.content_},i.prototype.conditionalFocus_=function(){var n=u.activeElement,t=this.player_.el_;if(this.previouslyActiveEl_=null,t.contains(n)||t===n){this.previouslyActiveEl_=n;this.focus();this.on(u,"keydown",this.handleKeyDown)}},i.prototype.conditionalBlur_=function(){this.previouslyActiveEl_&&(this.previouslyActiveEl_.focus(),this.previouslyActiveEl_=null);this.off(u,"keydown",this.handleKeyDown)},i.prototype.handleKeyDown=function(n){var i;if(n.which===9){var t=this.focusableEls_(),f=this.el_.querySelector(":focus"),r=void 0;for(i=0;i<t.length;i++)if(f===t[i]){r=i;break}u.activeElement===this.el_&&(r=0);n.shiftKey&&r===0?(t[t.length-1].focus(),n.preventDefault()):n.shiftKey||r!==t.length-1||(t[0].focus(),n.preventDefault())}},i.prototype.focusableEls_=function(){var n=this.el_.querySelectorAll("*");return Array.prototype.filter.call(n,function(n){return(n instanceof t.HTMLAnchorElement||n instanceof t.HTMLAreaElement)&&n.hasAttribute("href")||(n instanceof t.HTMLInputElement||n instanceof t.HTMLSelectElement||n instanceof t.HTMLTextAreaElement||n instanceof t.HTMLButtonElement)&&!n.hasAttribute("disabled")||n instanceof t.HTMLIFrameElement||n instanceof t.HTMLObjectElement||n instanceof t.HTMLEmbedElement||n.hasAttribute("tabindex")&&n.getAttribute("tabindex")!==-1||n.hasAttribute("contenteditable")})},i}(i);kr.prototype.options_={pauseOnOpen:!0,temporary:!0};i.registerComponent("ModalDialog",kr);tr=function(n){function t(){var u=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[],i,r;for(f(this,t),i=e(this,n.call(this)),i.tracks_=[],Object.defineProperty(i,"length",{get:function(){return this.tracks_.length}}),r=0;r<u.length;r++)i.addTrack(u[r]);return i}return o(t,n),t.prototype.addTrack=function(n){var t=this.tracks_.length;""+t in this||Object.defineProperty(this,t,{get:function(){return this.tracks_[t]}});this.tracks_.indexOf(n)===-1&&(this.tracks_.push(n),this.trigger({track:n,type:"addtrack"}))},t.prototype.removeTrack=function(n){for(var t=void 0,i=0,r=this.length;i<r;i++)if(this[i]===n){t=this[i];t.off&&t.off();this.tracks_.splice(i,1);break}t&&this.trigger({track:t,type:"removetrack"})},t.prototype.getTrackById=function(n){for(var i,r=null,t=0,u=this.length;t<u;t++)if(i=this[t],i.id===n){r=i;break}return r},t}(d);tr.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack"};for(ap in tr.prototype.allowedEvents_)tr.prototype["on"+ap]=null;var bh=function(n,t){for(var i=0;i<n.length;i++)Object.keys(n[i]).length&&t.id!==n[i].id&&(n[i].enabled=!1)},iit=function(n){function t(){var i=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[],r,u;for(f(this,t),r=i.length-1;r>=0;r--)if(i[r].enabled){bh(i,i[r]);break}return u=e(this,n.call(this,i)),u.changing_=!1,u}return o(t,n),t.prototype.addTrack=function(t){var i=this;(t.enabled&&bh(this,t),n.prototype.addTrack.call(this,t),t.addEventListener)&&t.addEventListener("enabledchange",function(){i.changing_||(i.changing_=!0,bh(i,t),i.changing_=!1,i.trigger("change"))})},t}(tr),kh=function(n,t){for(var i=0;i<n.length;i++)Object.keys(n[i]).length&&t.id!==n[i].id&&(n[i].selected=!1)},rit=function(n){function t(){var i=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[],r,u;for(f(this,t),r=i.length-1;r>=0;r--)if(i[r].selected){kh(i,i[r]);break}return u=e(this,n.call(this,i)),u.changing_=!1,Object.defineProperty(u,"selectedIndex",{get:function(){for(var n=0;n<this.length;n++)if(this[n].selected)return n;return-1},set:function(){}}),u}return o(t,n),t.prototype.addTrack=function(t){var i=this;(t.selected&&kh(this,t),n.prototype.addTrack.call(this,t),t.addEventListener)&&t.addEventListener("selectedchange",function(){i.changing_||(i.changing_=!0,kh(i,t),i.changing_=!1,i.trigger("change"))})},t}(tr),vp=function(n){function t(){return f(this,t),e(this,n.apply(this,arguments))}return o(t,n),t.prototype.addTrack=function(t){n.prototype.addTrack.call(this,t);t.addEventListener("modechange",s(this,function(){this.trigger("change")}));["metadata","chapters"].indexOf(t.kind)===-1&&t.addEventListener("modechange",s(this,function(){this.trigger("selectedlanguagechange")}))},t}(tr),uit=function(){function n(){var i=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[],t,r;for(f(this,n),this.trackElements_=[],Object.defineProperty(this,"length",{get:function(){return this.trackElements_.length}}),t=0,r=i.length;t<r;t++)this.addTrackElement_(i[t])}return n.prototype.addTrackElement_=function(n){var t=this.trackElements_.length;""+t in this||Object.defineProperty(this,t,{get:function(){return this.trackElements_[t]}});this.trackElements_.indexOf(n)===-1&&this.trackElements_.push(n)},n.prototype.getTrackElementByTrack_=function(n){for(var i=void 0,t=0,r=this.trackElements_.length;t<r;t++)if(n===this.trackElements_[t].track){i=this.trackElements_[t];break}return i},n.prototype.removeTrackElement_=function(n){for(var t=0,i=this.trackElements_.length;t<i;t++)if(n===this.trackElements_[t]){this.trackElements_.splice(t,1);break}},n}(),yp=function(){function n(t){f(this,n);n.prototype.setCues_.call(this,t);Object.defineProperty(this,"length",{get:function(){return this.length_}})}return n.prototype.setCues_=function(n){var i=this.length||0,t=0,r=n.length,u;if(this.cues_=n,this.length_=n.length,u=function(n){""+n in this||Object.defineProperty(this,""+n,{get:function(){return this.cues_[n]}})},i<r)for(t=i;t<r;t++)u.call(this,t)},n.prototype.getCueById=function(n){for(var i,r=null,t=0,u=this.length;t<u;t++)if(i=this[t],i.id===n){r=i;break}return r},n}(),fit={alternative:"alternative",captions:"captions",main:"main",sign:"sign",subtitles:"subtitles",commentary:"commentary"},eit={alternative:"alternative",descriptions:"descriptions",main:"main","main-desc":"main-desc",translation:"translation",commentary:"commentary"},oit={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"},pp={disabled:"disabled",hidden:"hidden",showing:"showing"},dh=function(n){function t(){var i=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},o;f(this,t);var r=e(this,n.call(this)),u={id:i.id||"vjs_track_"+ki(),kind:i.kind||"",label:i.label||"",language:i.language||""},s=function(n){Object.defineProperty(r,n,{get:function(){return u[n]},set:function(){}})};for(o in u)s(o);return r}return o(t,n),t}(d),gh=function(n){var o=["protocol","hostname","port","pathname","search","hash","host"],f=u.createElement("a"),s,r,i,e;for(f.href=n,s=f.host===""&&f.protocol!=="file:",r=void 0,s&&(r=u.createElement("div"),r.innerHTML='<a href="'+n+'"><\/a>',f=r.firstChild,r.setAttribute("style","display:none; position:absolute;"),u.body.appendChild(r)),i={},e=0;e<o.length;e++)i[o[e]]=f[o[e]];return i.protocol==="http:"&&(i.host=i.host.replace(/:80$/,"")),i.protocol==="https:"&&(i.host=i.host.replace(/:443$/,"")),i.protocol||(i.protocol=t.location.protocol),s&&u.body.removeChild(r),i},wp=function(n){if(!n.match(/^https?:\/\//)){var t=u.createElement("div");t.innerHTML='<a href="'+n+'">x<\/a>';n=t.firstChild.href}return n},nc=function(n){if(typeof n=="string"){var t=/^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/i.exec(n);if(t)return t.pop().toLowerCase()}return""},we=function(n){var i=t.location,r=gh(n),u=r.protocol===":"?i.protocol:r.protocol;return u+r.host!==i.protocol+i.host},sit=Object.freeze({parseUrl:gh,getAbsoluteURL:wp,getFileExtension:nc,isCrossOrigin:we}),tc=cit,hit=Object.prototype.toString;var bp=Object.freeze({"default":tc,__moduleExports:tc}),of=bs(function(n,t){function i(n){return n.replace(/^\s*|\s*$/g,"")}t=n.exports=i;t.left=function(n){return n.replace(/^\s*/,"")};t.right=function(n){return n.replace(/\s*$/,"")}}),lit=of.left,ait=of.right,kp=Object.freeze({"default":of,__moduleExports:of,left:lit,right:ait}),dp=bp&&tc||bp,ic=yit,vit=Object.prototype.toString,gp=Object.prototype.hasOwnProperty;var nw=Object.freeze({"default":ic,__moduleExports:ic}),rc=kp&&of||kp,kit=nw&&ic||nw,dit=function(n){return Object.prototype.toString.call(n)==="[object Array]"},uc=function(n){if(!n)return{};var t={};return kit(rc(n).split("\n"),function(n){var u=n.indexOf(":"),i=rc(n.slice(0,u)).toLowerCase(),r=rc(n.slice(u+1));typeof t[i]=="undefined"?t[i]=r:dit(t[i])?t[i].push(r):t[i]=[t[i],r]}),t},tw=Object.freeze({"default":uc,__moduleExports:uc}),fc=nrt,git=Object.prototype.hasOwnProperty;var iw=Object.freeze({"default":fc,__moduleExports:fc}),trt=tw&&uc||tw,irt=iw&&fc||iw,rw=ai;ai.XMLHttpRequest=t.XMLHttpRequest||ert;ai.XDomainRequest="withCredentials"in new ai.XMLHttpRequest?ai.XMLHttpRequest:t.XDomainRequest;rrt(["get","put","post","patch","head","delete"],function(n){ai[n==="delete"?"del":n]=function(t,i,r){return i=uw(t,i,r),i.method=n.toUpperCase(),fw(i)}});var ew=function(n,i){var r=new t.WebVTT.Parser(t,t.vttjs,t.WebVTT.StringDecoder()),u=[];r.oncue=function(n){i.addCue(n)};r.onparsingerror=function(n){u.push(n)};r.onflush=function(){i.trigger({type:"loadeddata",target:i})};r.parse(n);u.length>0&&(t.console&&t.console.groupCollapsed&&t.console.groupCollapsed("Text Track parsing errors for "+i.src),u.forEach(function(n){return h.error(n)}),t.console&&t.console.groupEnd&&t.console.groupEnd());r.flush()},ort=function(n,i){var r={uri:n},u=we(n);u&&(r.cors=u);rw(r,s(this,function(n,r,u){if(n)return h.error(n,r);if(i.loaded_=!0,typeof t.WebVTT!="function"){if(i.tech_){var f=function(){return ew(u,i)};i.tech_.on("vttjsloaded",f);i.tech_.on("vttjserror",function(){h.error("vttjs failed to load, stopping trying to process "+i.src);i.tech_.off("vttjsloaded",f)})}}else ew(u,i)}))},sf=function(n){function i(){var u=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},t;if(f(this,i),!u.tech)throw new Error("A tech was not provided.");var r=a(u,{kind:oit[u.kind]||"subtitles",language:u.language||u.srclang||""}),o=pp[r.mode]||"disabled",v=r.default;(r.kind==="metadata"||r.kind==="chapters")&&(o="hidden");t=e(this,n.call(this,r));t.tech_=r.tech;t.cues_=[];t.activeCues_=[];var y=new yp(t.cues_),c=new yp(t.activeCues_),h=!1,l=s(t,function(){this.activeCues;h&&(this.trigger("cuechange"),h=!1)});return o!=="disabled"&&t.tech_.ready(function(){t.tech_.on("timeupdate",l)},!0),Object.defineProperties(t,{"default":{get:function(){return v},set:function(){}},mode:{get:function(){return o},set:function(n){var t=this;pp[n]&&(o=n,o==="showing"&&this.tech_.ready(function(){t.tech_.on("timeupdate",l)},!0),this.trigger("modechange"))}},cues:{get:function(){return this.loaded_?y:null},set:function(){}},activeCues:{get:function(){var i,t,r,f,n,u;if(!this.loaded_)return null;if(this.cues.length===0)return c;for(i=this.tech_.currentTime(),t=[],r=0,f=this.cues.length;r<f;r++)n=this.cues[r],n.startTime<=i&&n.endTime>=i?t.push(n):n.startTime===n.endTime&&n.startTime<=i&&n.startTime+.5>=i&&t.push(n);if(h=!1,t.length!==this.activeCues_.length)h=!0;else for(u=0;u<t.length;u++)this.activeCues_.indexOf(t[u])===-1&&(h=!0);return this.activeCues_=t,c.setCues_(this.activeCues_),c},set:function(){}}}),r.src?(t.src=r.src,ort(r.src,t)):t.loaded_=!0,t}return o(i,n),i.prototype.addCue=function(n){var i=n,u,f,r;if(t.vttjs&&!(n instanceof t.vttjs.VTTCue)){i=new t.vttjs.VTTCue(n.startTime,n.endTime,n.text);for(u in n)u in i||(i[u]=n[u]);i.id=n.id;i.originalCue_=n}for(f=this.tech_.textTracks(),r=0;r<f.length;r++)f[r]!==this&&f[r].removeCue(i);this.cues_.push(i);this.cues.setCues_(this.cues_)},i.prototype.removeCue=function(n){for(var i=this.cues_.length,t;i--;)if(t=this.cues_[i],t===n||t.originalCue_&&t.originalCue_===n){this.cues_.splice(i,1);this.cues.setCues_(this.cues_);break}},i}(dh);sf.prototype.allowedEvents_={cuechange:"cuechange"};var ow=function(n){function t(){var o=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};f(this,t);var r=a(o,{kind:eit[o.kind]||""}),i=e(this,n.call(this,r)),u=!1;return Object.defineProperty(i,"enabled",{get:function(){return u},set:function(n){typeof n=="boolean"&&n!==u&&(u=n,this.trigger("enabledchange"))}}),r.enabled&&(i.enabled=r.enabled),i.loaded_=!0,i}return o(t,n),t}(dh),sw=function(n){function t(){var o=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};f(this,t);var i=a(o,{kind:fit[o.kind]||""}),r=e(this,n.call(this,i)),u=!1;return Object.defineProperty(r,"selected",{get:function(){return u},set:function(n){typeof n=="boolean"&&n!==u&&(u=n,this.trigger("selectedchange"))}}),i.selected&&(r.selected=i.selected),r}return o(t,n),t}(dh),hw=0,cw=2,dr=function(n){function t(){var o=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};f(this,t);var i=e(this,n.call(this)),u=void 0,r=new sf(o);return i.kind=r.kind,i.src=r.src,i.srclang=r.language,i.label=r.label,i.default=r.default,Object.defineProperties(i,{readyState:{get:function(){return u}},track:{get:function(){return r}}}),u=hw,r.addEventListener("loadeddata",function(){u=cw;i.trigger({type:"load",target:i})}),i}return o(t,n),t}(d);dr.prototype.allowedEvents_={load:"load"};dr.NONE=hw;dr.LOADING=1;dr.LOADED=cw;dr.ERROR=3;ht={audio:{ListClass:iit,TrackClass:ow,capitalName:"Audio"},video:{ListClass:rit,TrackClass:sw,capitalName:"Video"},text:{ListClass:vp,TrackClass:sf,capitalName:"Text"}};Object.keys(ht).forEach(function(n){ht[n].getterName=n+"Tracks";ht[n].privateName=n+"Tracks_"});gr={remoteText:{ListClass:vp,TrackClass:sf,capitalName:"RemoteText",getterName:"remoteTextTracks",privateName:"remoteTextTracks_"},remoteTextEl:{ListClass:uit,TrackClass:dr,capitalName:"RemoteTextTrackEls",getterName:"remoteTextTrackEls",privateName:"remoteTextTrackEls_"}};ut=a(ht,gr);gr.names=Object.keys(gr);ht.names=Object.keys(ht);ut.names=[].concat(gr.names).concat(ht.names);be=Object.create||function(){function n(){}return function(t){if(arguments.length!==1)throw new Error("Object.create shim only accepts one parameter.");return n.prototype=t,new n}}();ct.prototype=be(Error.prototype);ct.prototype.constructor=ct;ct.Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}};hf.prototype={set:function(n,t){this.get(n)||t===""||(this.values[n]=t)},get:function(n,t,i){return i?this.has(n)?this.values[n]:t[i]:this.has(n)?this.values[n]:t},has:function(n){return n in this.values},alt:function(n,t,i){for(var r=0;r<i.length;++r)if(t===i[r]){this.set(n,t);break}},integer:function(n,t){/^-?\d+$/.test(t)&&this.set(n,parseInt(t,10))},percent:function(n,t){var i;return(i=t.match(/^([\d]{1,3})(\.[\d]*)?%$/))&&(t=parseFloat(t),t>=0&&t<=100)?(this.set(n,t),!0):!1}};var hrt={"&amp;":"&","&lt;":"<","&gt;":">","&lrm;":"","&rlm;":"","&nbsp;":""},crt={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},lrt={v:"title",lang:"lang"},lw={rt:"ruby"};oc=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];ke.prototype.applyStyles=function(n,t){t=t||this.div;for(var i in n)n.hasOwnProperty(i)&&(t.style[i]=n[i])};ke.prototype.formatStyle=function(n,t){return n===0?0:n+t};de.prototype=be(ke.prototype);de.prototype.constructor=de;tt.prototype.move=function(n,t){t=t!==undefined?t:this.lineHeight;switch(n){case"+x":this.left+=t;this.right+=t;break;case"-x":this.left-=t;this.right-=t;break;case"+y":this.top+=t;this.bottom+=t;break;case"-y":this.top-=t;this.bottom-=t}};tt.prototype.overlaps=function(n){return this.left<n.right&&this.right>n.left&&this.top<n.bottom&&this.bottom>n.top};tt.prototype.overlapsAny=function(n){for(var t=0;t<n.length;t++)if(this.overlaps(n[t]))return!0;return!1};tt.prototype.within=function(n){return this.top>=n.top&&this.bottom<=n.bottom&&this.left>=n.left&&this.right<=n.right};tt.prototype.overlapsOppositeAxis=function(n,t){switch(t){case"+x":return this.left<n.left;case"-x":return this.right>n.right;case"+y":return this.top<n.top;case"-y":return this.bottom>n.bottom}};tt.prototype.intersectPercentage=function(n){var t=Math.max(0,Math.min(this.right,n.right)-Math.max(this.left,n.left)),i=Math.max(0,Math.min(this.bottom,n.bottom)-Math.max(this.top,n.top)),r=t*i;return r/(this.height*this.width)};tt.prototype.toCSSCompatValues=function(n){return{top:this.top-n.top,bottom:n.bottom-this.bottom,left:this.left-n.left,right:n.right-this.right,height:this.height,width:this.width}};tt.getSimpleBoxPosition=function(n){var t=n.div?n.div.offsetHeight:n.tagName?n.offsetHeight:0,r=n.div?n.div.offsetWidth:n.tagName?n.offsetWidth:0,i=n.div?n.div.offsetTop:n.tagName?n.offsetTop:0;return n=n.div?n.div.getBoundingClientRect():n.tagName?n.getBoundingClientRect():n,{left:n.left,right:n.right,top:n.top||i,height:n.height||t,bottom:n.bottom||i+(n.height||t),width:n.width||r}};nu.StringDecoder=function(){return{decode:function(n){if(!n)return"";if(typeof n!="string")throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(n))}}};nu.convertCueToDOMTree=function(n,t){return!n||!t?null:aw(n,t)};var wrt=.05,brt="sans-serif",krt="1.5%";nu.processCues=function(n,t,i){function o(n){for(var t=0;t<n.length;t++)if(n[t].hasBeenReset||!n[t].displayState)return!0;return!1}var r,u;if(!n||!t||!i)return null;while(i.firstChild)i.removeChild(i.firstChild);if(r=n.document.createElement("div"),r.style.position="absolute",r.style.left="0",r.style.right="0",r.style.top="0",r.style.bottom="0",r.style.margin=krt,i.appendChild(r),!o(t)){for(u=0;u<t.length;u++)r.appendChild(t[u].displayState);return}var f=[],e=tt.getSimpleBoxPosition(r),s=Math.round(e.height*wrt*100)/100,h={font:s+"px "+brt};(function(){for(var i,u,o=0;o<t.length;o++)u=t[o],i=new de(n,u,h),r.appendChild(i.div),prt(n,i,e,f),u.displayState=i.div,f.push(tt.getSimpleBoxPosition(i))})()};nu.Parser=function(n,t,i){i||(i=t,t={});t||(t={});this.window=n;this.vttjs=t;this.state="INITIAL";this.buffer="";this.decoder=i||new TextDecoder("utf8");this.regionList=[]};nu.Parser.prototype={reportOrThrowError:function(n){if(n instanceof ct)this.onparsingerror&&this.onparsingerror(n);else throw n;},parse:function(n){function f(){for(var i=t.buffer,n=0,r;n<i.length&&i[n]!=="\r"&&i[n]!=="\n";)++n;return r=i.substr(0,n),i[n]==="\r"&&++n,i[n]==="\n"&&++n,t.buffer=i.substr(n),r}function s(n){var i=new hf,r;cf(n,function(n,t){var u,r;switch(n){case"id":i.set(n,t);break;case"width":i.percent(n,t);break;case"lines":i.integer(n,t);break;case"regionanchor":case"viewportanchor":if(u=t.split(","),u.length!==2)break;if(r=new hf,r.percent("x",u[0]),r.percent("y",u[1]),!r.has("x")||!r.has("y"))break;i.set(n+"X",r.get("x"));i.set(n+"Y",r.get("y"));break;case"scroll":i.alt(n,t,["up"])}},/=/,/\s/);i.has("id")&&(r=new(t.vttjs.VTTRegion||t.window.VTTRegion),r.width=i.get("width",100),r.lines=i.get("lines",3),r.regionAnchorX=i.get("regionanchorX",0),r.regionAnchorY=i.get("regionanchorY",100),r.viewportAnchorX=i.get("viewportanchorX",0),r.viewportAnchorY=i.get("viewportanchorY",100),r.scroll=i.get("scroll",""),t.onregion&&t.onregion(r),t.regionList.push({id:i.get("id"),region:r}))}function h(n){var i=new hf;cf(n,function(n,t){switch(n){case"MPEGT":i.integer(n+"S",t);break;case"LOCA":i.set(n+"L",ec(t))}},/[^\d]:/,/,/);t.ontimestampmap&&t.ontimestampmap({MPEGTS:i.get("MPEGTS"),LOCAL:i.get("LOCAL")})}function c(n){n.match(/X-TIMESTAMP-MAP/)?cf(n,function(n,t){switch(n){case"X-TIMESTAMP-MAP":h(t)}},/=/):cf(n,function(n,t){switch(n){case"Region":s(t)}},/:/)}var t=this,i,u,r,o;n&&(t.buffer+=t.decoder.decode(n,{stream:!0}));try{if(t.state==="INITIAL"){if(!/\r\n|\n/.test(t.buffer))return this;if(i=f(),u=i.match(/^WEBVTT([ \t].*)?$/),!u||!u[0])throw new ct(ct.Errors.BadSignature);t.state="HEADER"}for(r=!1;t.buffer;){if(!/\r\n|\n/.test(t.buffer))return this;r?r=!1:i=f();switch(t.state){case"HEADER":/:/.test(i)?c(i):i||(t.state="ID");continue;case"NOTE":i||(t.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(i)){t.state="NOTE";break}if(!i)continue;if(t.cue=new(t.vttjs.VTTCue||t.window.VTTCue)(0,0,""),t.state="CUE",i.indexOf("-->")===-1){t.cue.id=i;continue}case"CUE":try{srt(i,t.cue,t.regionList)}catch(e){t.reportOrThrowError(e);t.cue=null;t.state="BADCUE";continue}t.state="CUETEXT";continue;case"CUETEXT":if(o=i.indexOf("-->")!==-1,!i||o&&(r=!0)){t.oncue&&t.oncue(t.cue);t.cue=null;t.state="ID";continue}t.cue.text&&(t.cue.text+="\n");t.cue.text+=i;continue;case"BADCUE":i||(t.state="ID");continue}}}catch(e){if(t.reportOrThrowError(e),t.state==="CUETEXT"&&t.cue&&t.oncue)t.oncue(t.cue);t.cue=null;t.state=t.state==="INITIAL"?"BADWEBVTT":"BADCUE"}return this},flush:function(){var n=this;try{if(n.buffer+=n.decoder.decode(),(n.cue||n.state==="HEADER")&&(n.buffer+="\n\n",n.parse()),n.state==="INITIAL")throw new ct(ct.Errors.BadSignature);}catch(t){n.reportOrThrowError(t)}return n.onflush&&n.onflush(),this}};var sc=nu,vw=Object.freeze({"default":sc,__moduleExports:sc}),drt="auto",grt={"":1,lr:1,rl:1},nut={start:1,middle:1,end:1,left:1,right:1};yw.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text)};var cc=yw,pw=Object.freeze({"default":cc,__moduleExports:cc}),iut={"":!0,up:!0};var lc=uut,ww=Object.freeze({"default":lc,__moduleExports:lc}),fut=vw&&sc||vw,eut=pw&&cc||pw,out=ww&&lc||ww,af=bs(function(n){var i=n.exports={WebVTT:fut,VTTCue:eut,VTTRegion:out};t.vttjs=i;t.WebVTT=i.WebVTT;var r=i.VTTCue,u=i.VTTRegion,f=t.VTTCue,e=t.VTTRegion;i.shim=function(){t.VTTCue=r;t.VTTRegion=u};i.restore=function(){t.VTTCue=f;t.VTTRegion=e};t.VTTCue||i.shim()}),fpt=af.WebVTT,ept=af.VTTCue,opt=af.VTTRegion;l=function(n){function i(){var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},u=arguments.length>1&&arguments[1]!==undefined?arguments[1]:function(){},t;f(this,i);r.reportTouchActivity=!1;t=e(this,n.call(this,null,r,u));t.hasStarted_=!1;t.on("playing",function(){this.hasStarted_=!0});t.on("loadstart",function(){this.hasStarted_=!1});return ut.names.forEach(function(n){var i=ut[n];r&&r[i.getterName]&&(t[i.privateName]=r[i.getterName])}),t.featuresProgressEvents||t.manualProgressOn(),t.featuresTimeupdateEvents||t.manualTimeUpdatesOn(),["Text","Audio","Video"].forEach(function(n){r["native"+n+"Tracks"]===!1&&(t["featuresNative"+n+"Tracks"]=!1)}),r.nativeCaptions===!1||r.nativeTextTracks===!1?t.featuresNativeTextTracks=!1:(r.nativeCaptions===!0||r.nativeTextTracks===!0)&&(t.featuresNativeTextTracks=!0),t.featuresNativeTextTracks||t.emulateTextTracks(),t.autoRemoteTextTracks_=new ut.text.ListClass,t.initTrackListeners(),r.nativeControlsForTouch||t.emitTapEvents(),t.constructor&&(t.name_=t.constructor.name||"Unknown Tech"),t}return o(i,n),i.prototype.triggerSourceset=function(n){var t=this;if(!this.isReady_)this.one("ready",function(){return t.setTimeout(function(){return t.triggerSourceset(n)},1)});this.trigger({src:n,type:"sourceset"})},i.prototype.manualProgressOn=function(){this.on("durationchange",this.onDurationChange);this.manualProgress=!0;this.one("ready",this.trackProgress)},i.prototype.manualProgressOff=function(){this.manualProgress=!1;this.stopTrackingProgress();this.off("durationchange",this.onDurationChange)},i.prototype.trackProgress=function(){this.stopTrackingProgress();this.progressInterval=this.setInterval(s(this,function(){var n=this.bufferedPercent();this.bufferedPercent_!==n&&n>0&&this.trigger("progress");this.bufferedPercent_=n;n===1&&this.stopTrackingProgress()}),500)},i.prototype.onDurationChange=function(){this.duration_=this.duration()},i.prototype.buffered=function(){return gi(0,0)},i.prototype.bufferedPercent=function(){return sp(this.buffered(),this.duration_)},i.prototype.stopTrackingProgress=function(){this.clearInterval(this.progressInterval)},i.prototype.manualTimeUpdatesOn=function(){this.manualTimeUpdates=!0;this.on("play",this.trackCurrentTime);this.on("pause",this.stopTrackingCurrentTime)},i.prototype.manualTimeUpdatesOff=function(){this.manualTimeUpdates=!1;this.stopTrackingCurrentTime();this.off("play",this.trackCurrentTime);this.off("pause",this.stopTrackingCurrentTime)},i.prototype.trackCurrentTime=function(){this.currentTimeInterval&&this.stopTrackingCurrentTime();this.currentTimeInterval=this.setInterval(function(){this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},250)},i.prototype.stopTrackingCurrentTime=function(){this.clearInterval(this.currentTimeInterval);this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},i.prototype.dispose=function(){this.clearTracks(ht.names);this.manualProgress&&this.manualProgressOff();this.manualTimeUpdates&&this.manualTimeUpdatesOff();n.prototype.dispose.call(this)},i.prototype.clearTracks=function(n){var t=this;n=[].concat(n);n.forEach(function(n){for(var i=t[n+"Tracks"]()||[],u=i.length,r;u--;)r=i[u],n==="text"&&t.removeRemoteTextTrack(r),i.removeTrack(r)})},i.prototype.cleanupAutoTextTracks=function(){for(var n=this.autoRemoteTextTracks_||[],t=n.length,i;t--;)i=n[t],this.removeRemoteTextTrack(i)},i.prototype.reset=function(){},i.prototype.error=function(n){return n!==undefined&&(this.error_=new nt(n),this.trigger("error")),this.error_},i.prototype.played=function(){return this.hasStarted_?gi(0,0):gi()},i.prototype.setCurrentTime=function(){this.manualTimeUpdates&&this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},i.prototype.initTrackListeners=function(){var n=this;ht.names.forEach(function(t){var u=ht[t],i=function(){n.trigger(t+"trackchange")},r=n[u.getterName]();r.addEventListener("removetrack",i);r.addEventListener("addtrack",i);n.on("dispose",function(){r.removeEventListener("removetrack",i);r.removeEventListener("addtrack",i)})})},i.prototype.addWebVttScript_=function(){var i=this,n;if(!t.WebVTT)if(u.body.contains(this.el())){if(!this.options_["vtt.js"]&&wu(af)&&Object.keys(af).length>0){this.trigger("vttjsloaded");return}n=u.createElement("script");n.src=this.options_["vtt.js"]||"https://vjs.zencdn.net/vttjs/0.14.1/vtt.min.js";n.onload=function(){i.trigger("vttjsloaded")};n.onerror=function(){i.trigger("vttjserror")};this.on("dispose",function(){n.onload=null;n.onerror=null});t.WebVTT=!0;this.el().parentNode.appendChild(n)}else this.ready(this.addWebVttScript_)},i.prototype.emulateTextTracks=function(){var e=this,n=this.textTracks(),r=this.remoteTextTracks(),u=function(t){return n.addTrack(t.track)},f=function(t){return n.removeTrack(t.track)},i,t;r.on("addtrack",u);r.on("removetrack",f);this.addWebVttScript_();i=function(){return e.trigger("texttrackchange")};t=function(){var t,r;for(i(),t=0;t<n.length;t++)r=n[t],r.removeEventListener("cuechange",i),r.mode==="showing"&&r.addEventListener("cuechange",i)};t();n.addEventListener("change",t);n.addEventListener("addtrack",t);n.addEventListener("removetrack",t);this.on("dispose",function(){var e,o;for(r.off("addtrack",u),r.off("removetrack",f),n.removeEventListener("change",t),n.removeEventListener("addtrack",t),n.removeEventListener("removetrack",t),e=0;e<n.length;e++)o=n[e],o.removeEventListener("cuechange",i)})},i.prototype.addTextTrack=function(n,t,i){if(!n)throw new Error("TextTrack kind is required but was not provided");return sut(this,n,t,i)},i.prototype.createRemoteTextTrack=function(n){var t=a(n,{tech:this});return new gr.remoteTextEl.TrackClass(t)},i.prototype.addRemoteTextTrack=function(){var i=this,r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},n=arguments[1],t=this.createRemoteTextTrack(r);return n!==!0&&n!==!1&&(h.warn('Calling addRemoteTextTrack without explicitly setting the "manualCleanup" parameter to `true` is deprecated and default to `false` in future version of video.js'),n=!0),this.remoteTextTrackEls().addTrackElement_(t),this.remoteTextTracks().addTrack(t.track),n!==!0&&this.ready(function(){return i.autoRemoteTextTracks_.addTrack(t.track)}),t},i.prototype.removeRemoteTextTrack=function(n){var t=this.remoteTextTrackEls().getTrackElementByTrack_(n);this.remoteTextTrackEls().removeTrackElement_(t);this.remoteTextTracks().removeTrack(n);this.autoRemoteTextTracks_.removeTrack(n)},i.prototype.getVideoPlaybackQuality=function(){return{}},i.prototype.setPoster=function(){},i.prototype.playsinline=function(){},i.prototype.setPlaysinline=function(){},i.prototype.overrideNativeAudioTracks=function(){},i.prototype.overrideNativeVideoTracks=function(){},i.prototype.canPlayType=function(){return""},i.canPlayType=function(){return""},i.canPlaySource=function(n){return i.canPlayType(n.type)},i.isTech=function(n){return n.prototype instanceof i||n instanceof i||n===i},i.registerTech=function(n,t){if(i.techs_||(i.techs_={}),!i.isTech(t))throw new Error("Tech "+n+" must be a Tech");if(!i.canPlayType)throw new Error("Techs must have a static canPlayType method on them");if(!i.canPlaySource)throw new Error("Techs must have a static canPlaySource method on them");return n=v(n),i.techs_[n]=t,n!=="Tech"&&i.defaultTechOrder_.push(n),t},i.getTech=function(n){if(n)return(n=v(n),i.techs_&&i.techs_[n])?i.techs_[n]:t&&t.videojs&&t.videojs[n]?(h.warn("The "+n+" tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)"),t.videojs[n]):void 0},i}(i);ut.names.forEach(function(n){var t=ut[n];l.prototype[t.getterName]=function(){return this[t.privateName]=this[t.privateName]||new t.ListClass,this[t.privateName]}});l.prototype.featuresVolumeControl=!0;l.prototype.featuresMuteControl=!0;l.prototype.featuresFullscreenResize=!1;l.prototype.featuresPlaybackRate=!1;l.prototype.featuresProgressEvents=!1;l.prototype.featuresSourceset=!1;l.prototype.featuresTimeupdateEvents=!1;l.prototype.featuresNativeTextTracks=!1;l.withSourceHandlers=function(n){n.registerSourceHandler=function(t,i){var r=n.sourceHandlers;r||(r=n.sourceHandlers=[]);i===undefined&&(i=r.length);r.splice(i,0,t)};n.canPlayType=function(t){for(var u=n.sourceHandlers||[],i=void 0,r=0;r<u.length;r++)if(i=u[r].canPlayType(t),i)return i;return""};n.selectSourceHandler=function(t,i){for(var u=n.sourceHandlers||[],f=void 0,r=0;r<u.length;r++)if(f=u[r].canHandleSource(t,i),f)return u[r];return null};n.canPlaySource=function(t,i){var r=n.selectSourceHandler(t,i);return r?r.canHandleSource(t,i):""};["seekable","seeking","duration"].forEach(function(n){var t=this[n];typeof t=="function"&&(this[n]=function(){return this.sourceHandler_&&this.sourceHandler_[n]?this.sourceHandler_[n].apply(this.sourceHandler_,arguments):t.apply(this,arguments)})},n.prototype);n.prototype.setSource=function(t){var i=n.selectSourceHandler(t,this.options_);i||(n.nativeSourceHandler?i=n.nativeSourceHandler:h.error("No source handler found for the current source."));this.disposeSourceHandler();this.off("dispose",this.disposeSourceHandler);i!==n.nativeSourceHandler&&(this.currentSource_=t);this.sourceHandler_=i.handleSource(t,this,this.options_);this.on("dispose",this.disposeSourceHandler)};n.prototype.disposeSourceHandler=function(){this.currentSource_&&(this.clearTracks(["audio","video"]),this.currentSource_=null);this.cleanupAutoTextTracks();this.sourceHandler_&&(this.sourceHandler_.dispose&&this.sourceHandler_.dispose(),this.sourceHandler_=null)}};i.registerComponent("Tech",l);l.registerTech("Tech",l);l.defaultTechOrder_=[];var ir={},ac={},ge={};var yut={buffered:1,currentTime:1,duration:1,seekable:1,played:1,paused:1},put={setCurrentTime:1},kw={play:1,pause:1};var dut={opus:"video/ogg",ogv:"video/ogg",mp4:"video/mp4",mov:"video/mp4",m4v:"video/mp4",mkv:"video/x-matroska",mp3:"audio/mpeg",aac:"audio/aac",oga:"audio/ogg",m3u8:"application/x-mpegURL"},dw=function(){var n=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"",t=nc(n),i=dut[t.toLowerCase()];return i||""},gut=function(n,t){var u,f,r,i;if(!t)return"";if(n.cache_.source.src===t&&n.cache_.source.type)return n.cache_.source.type;if(u=n.cache_.sources.filter(function(n){return n.src===t}),u.length)return u[0].type;for(f=n.$$("source"),r=0;r<f.length;r++)if(i=f[r],i.type&&i.src&&i.src===t)return i.type;return dw(t)},gw=function gw(n){if(Array.isArray(n)){var t=[];n.forEach(function(n){n=gw(n);Array.isArray(n)?t=t.concat(n):si(n)&&t.push(n)});n=t}else n=typeof n=="string"&&n.trim()?[nb({src:n})]:si(n)&&typeof n.src=="string"&&n.src&&n.src.trim()?[nb(n)]:[];return n};tb=function(n){function t(r,u,o){var p,w,h,y,s,c;if(f(this,t),p=a({createEl:!1},u),w=e(this,n.call(this,r,p,o)),u.playerOptions.sources&&u.playerOptions.sources.length!==0)r.src(u.playerOptions.sources);else for(h=0,y=u.playerOptions.techOrder;h<y.length;h++)if(s=v(y[h]),c=l.getTech(s),s||(c=i.getComponent(s)),c&&c.isSupported()){r.loadTech_(s);break}return w}return o(t,n),t}(i);i.registerComponent("MediaLoader",tb);vf=function(n){function t(i,r){f(this,t);var u=e(this,n.call(this,i,r));return u.emitTapEvents(),u.enable(),u}return o(t,n),t.prototype.createEl=function(){var i=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"div",t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{},u;return t=y({innerHTML:'<span aria-hidden="true" class="vjs-icon-placeholder"><\/span>',className:this.buildCSSClass(),tabIndex:0},t),i==="button"&&h.error("Creating a ClickableComponent with an HTML element of "+i+" is not supported; use a Button instead."),r=y({role:"button"},r),this.tabIndex_=t.tabIndex,u=n.prototype.createEl.call(this,i,t,r),this.createControlTextEl(u),u},t.prototype.dispose=function(){this.controlTextEl_=null;n.prototype.dispose.call(this)},t.prototype.createControlTextEl=function(n){return this.controlTextEl_=p("span",{className:"vjs-control-text"},{"aria-live":"polite"}),n&&n.appendChild(this.controlTextEl_),this.controlText(this.controlText_,n),this.controlTextEl_},t.prototype.controlText=function(n){var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.el(),t;if(n===undefined)return this.controlText_||"Need Text";t=this.localize(n);this.controlText_=n;ku(this.controlTextEl_,t);this.nonIconControl||i.setAttribute("title",t)},t.prototype.buildCSSClass=function(){return"vjs-control vjs-button "+n.prototype.buildCSSClass.call(this)},t.prototype.enable=function(){if(!this.enabled_){this.enabled_=!0;this.removeClass("vjs-disabled");this.el_.setAttribute("aria-disabled","false");typeof this.tabIndex_!="undefined"&&this.el_.setAttribute("tabIndex",this.tabIndex_);this.on(["tap","click"],this.handleClick);this.on("focus",this.handleFocus);this.on("blur",this.handleBlur)}},t.prototype.disable=function(){this.enabled_=!1;this.addClass("vjs-disabled");this.el_.setAttribute("aria-disabled","true");typeof this.tabIndex_!="undefined"&&this.el_.removeAttribute("tabIndex");this.off(["tap","click"],this.handleClick);this.off("focus",this.handleFocus);this.off("blur",this.handleBlur)},t.prototype.handleClick=function(){},t.prototype.handleFocus=function(){bt(u,"keydown",s(this,this.handleKeyPress))},t.prototype.handleKeyPress=function(t){t.which===32||t.which===13?(t.preventDefault(),this.trigger("click")):n.prototype.handleKeyPress&&n.prototype.handleKeyPress.call(this,t)},t.prototype.handleBlur=function(){st(u,"keydown",s(this,this.handleKeyPress))},t}(i);i.registerComponent("ClickableComponent",vf);ib=function(n){function t(i,r){f(this,t);var u=e(this,n.call(this,i,r));u.update();i.on("posterchange",s(u,u.update));return u}return o(t,n),t.prototype.dispose=function(){this.player().off("posterchange",this.update);n.prototype.dispose.call(this)},t.prototype.createEl=function(){return p("div",{className:"vjs-poster",tabIndex:-1})},t.prototype.update=function(){var n=this.player().poster();this.setSrc(n);n?this.show():this.hide()},t.prototype.setSrc=function(n){var t="";n&&(t='url("'+n+'")');this.el_.style.backgroundImage=t},t.prototype.handleClick=function(){this.player_.controls()&&(this.player_.paused()?br(this.player_.play()):this.player_.pause())},t}(vf);i.registerComponent("PosterImage",ib);var at="#222",rb="#ccc",nft={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'};ub=function(n){function i(t,r,u){f(this,i);var o=e(this,n.call(this,t,r,u));t.on("loadstart",s(o,o.toggleDisplay));t.on("texttrackchange",s(o,o.updateDisplay));t.on("loadstart",s(o,o.preselectTrack));return t.ready(s(o,function(){var i,n;if(t.tech_&&t.tech_.featuresNativeTextTracks){this.hide();return}t.on("fullscreenchange",s(this,this.updateDisplay));for(i=this.options_.playerOptions.tracks||[],n=0;n<i.length;n++)this.player_.addRemoteTextTrack(i[n],!0);this.preselectTrack()})),o}return o(i,n),i.prototype.preselectTrack=function(){for(var n,o={captions:1,subtitles:1},e=this.player_.textTracks(),t=this.player_.cache_.selectedLanguage,r=void 0,u=void 0,i=void 0,f=0;f<e.length;f++)n=e[f],t&&t.enabled&&t.language===n.language?n.kind===t.kind?i=n:i||(i=n):t&&!t.enabled?(i=null,r=null,u=null):n.default&&(n.kind!=="descriptions"||r?n.kind in o&&!u&&(u=n):r=n);i?i.mode="showing":u?u.mode="showing":r&&(r.mode="showing")},i.prototype.toggleDisplay=function(){this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks?this.hide():this.show()},i.prototype.createEl=function(){return n.prototype.createEl.call(this,"div",{className:"vjs-text-track-display"},{"aria-live":"off","aria-atomic":"true"})},i.prototype.clearDisplay=function(){typeof t.WebVTT=="function"&&t.WebVTT.processCues(t,[],this.el_)},i.prototype.updateDisplay=function(){var r=this.player_.textTracks(),n;this.clearDisplay();for(var t=null,i=null,u=r.length;u--;)n=r[u],n.mode==="showing"&&(n.kind==="descriptions"?t=n:i=n);i?(this.getAttribute("aria-live")!=="off"&&this.setAttribute("aria-live","off"),this.updateForTrack(i)):t&&(this.getAttribute("aria-live")!=="assertive"&&this.setAttribute("aria-live","assertive"),this.updateForTrack(t))},i.prototype.updateForTrack=function(n){var u,f,i,e,o,r,s;if(typeof t.WebVTT=="function"&&n.activeCues){for(u=[],f=0;f<n.activeCues.length;f++)u.push(n.activeCues[f]);if(t.WebVTT.processCues(t,u,this.el_),this.player_.textTrackSettings)for(i=this.player_.textTrackSettings.getValues(),e=u.length;e--;)(o=u[e],o)&&(r=o.displayState,i.color&&(r.firstChild.style.color=i.color),i.textOpacity&&pc(r.firstChild,"color",yc(i.color||"#fff",i.textOpacity)),i.backgroundColor&&(r.firstChild.style.backgroundColor=i.backgroundColor),i.backgroundOpacity&&pc(r.firstChild,"backgroundColor",yc(i.backgroundColor||"#000",i.backgroundOpacity)),i.windowColor&&(i.windowOpacity?pc(r,"backgroundColor",yc(i.windowColor,i.windowOpacity)):r.style.backgroundColor=i.windowColor),i.edgeStyle&&(i.edgeStyle==="dropshadow"?r.firstChild.style.textShadow="2px 2px 3px "+at+", 2px 2px 4px "+at+", 2px 2px 5px "+at:i.edgeStyle==="raised"?r.firstChild.style.textShadow="1px 1px "+at+", 2px 2px "+at+", 3px 3px "+at:i.edgeStyle==="depressed"?r.firstChild.style.textShadow="1px 1px "+rb+", 0 1px "+rb+", -1px -1px "+at+", 0 -1px "+at:i.edgeStyle==="uniform"&&(r.firstChild.style.textShadow="0 0 4px "+at+", 0 0 4px "+at+", 0 0 4px "+at+", 0 0 4px "+at)),i.fontPercent&&i.fontPercent!==1&&(s=t.parseFloat(r.style.fontSize),r.style.fontSize=s*i.fontPercent+"px",r.style.height="auto",r.style.top="auto",r.style.bottom="2px"),i.fontFamily&&i.fontFamily!=="default"&&(i.fontFamily==="small-caps"?r.firstChild.style.fontVariant="small-caps":r.firstChild.style.fontFamily=nft[i.fontFamily]))}},i}(i);i.registerComponent("TextTrackDisplay",ub);fb=function(n){function t(){return f(this,t),e(this,n.apply(this,arguments))}return o(t,n),t.prototype.createEl=function(){var t=this.player_.isAudio(),i=this.localize(t?"Audio Player":"Video Player"),r=p("span",{className:"vjs-control-text",innerHTML:this.localize("{1} is loading.",[i])});return n.prototype.createEl.call(this,"div",{className:"o-loader  o-loader--video",dir:"ltr"})},t}(i);i.registerComponent("LoadingSpinner",fb);gt=function(n){function t(){return f(this,t),e(this,n.apply(this,arguments))}return o(t,n),t.prototype.createEl=function(n){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{},u;return n="button",t=y({innerHTML:'<span aria-hidden="true" class="vjs-icon-placeholder"><\/span>',className:this.buildCSSClass()},t),r=y({type:"button"},r),u=i.prototype.createEl.call(this,n,t,r),this.createControlTextEl(u),u},t.prototype.addChild=function(n){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},r=this.constructor.name;return h.warn("Adding an actionable (user controllable) child to a Button ("+r+") is not supported; use a ClickableComponent instead."),i.prototype.addChild.call(this,n,t)},t.prototype.enable=function(){n.prototype.enable.call(this);this.el_.removeAttribute("disabled")},t.prototype.disable=function(){n.prototype.disable.call(this);this.el_.setAttribute("disabled","disabled")},t.prototype.handleKeyPress=function(t){t.which!==32&&t.which!==13&&n.prototype.handleKeyPress.call(this,t)},t}(vf);i.registerComponent("Button",gt);wc=function(n){function t(i,r){f(this,t);var u=e(this,n.call(this,i,r));u.mouseused_=!1;u.on("mousedown",u.handleMouseDown);return u}return o(t,n),t.prototype.buildCSSClass=function(){return"vjs-big-play-button"},t.prototype.handleClick=function(n){var t=this.player_.play(),i,r,u;if(this.mouseused_&&n.clientX&&n.clientY){br(t);return}if(i=this.player_.getChild("controlBar"),r=i&&i.getChild("playToggle"),!r){this.player_.focus();return}u=function(){return r.focus()};cp(t)?t.then(u,function(){}):this.setTimeout(u,1)},t.prototype.handleKeyPress=function(t){this.mouseused_=!1;n.prototype.handleKeyPress.call(this,t)},t.prototype.handleMouseDown=function(){this.mouseused_=!0},t}(gt);wc.prototype.controlText_="Play Video";i.registerComponent("BigPlayButton",wc);eb=function(n){function t(i,r){f(this,t);var u=e(this,n.call(this,i,r));return u.controlText(r&&r.controlText||u.localize("Close")),u}return o(t,n),t.prototype.buildCSSClass=function(){return"vjs-close-button "+n.prototype.buildCSSClass.call(this)},t.prototype.handleClick=function(){this.trigger({type:"close",bubbles:!1})},t}(gt);i.registerComponent("CloseButton",eb);bc=function(n){function t(i,r){f(this,t);var u=e(this,n.call(this,i,r));u.on(i,"play",u.handlePlay);u.on(i,"pause",u.handlePause);u.on(i,"ended",u.handleEnded);return u}return o(t,n),t.prototype.buildCSSClass=function(){return"vjs-play-control "+n.prototype.buildCSSClass.call(this)},t.prototype.handleClick=function(){this.player_.paused()?this.player_.play():this.player_.pause()},t.prototype.handleSeeked=function(n){this.removeClass("vjs-ended");this.player_.paused()?this.handlePause(n):this.handlePlay(n)},t.prototype.handlePlay=function(){this.removeClass("vjs-ended");this.removeClass("vjs-paused");this.addClass("vjs-playing");this.controlText("Pause")},t.prototype.handlePause=function(){this.removeClass("vjs-playing");this.addClass("vjs-paused");this.controlText("Play")},t.prototype.handleEnded=function(){this.removeClass("vjs-playing");this.addClass("vjs-ended");this.controlText("Replay");this.one(this.player_,"seeked",this.handleSeeked)},t}(gt);bc.prototype.controlText_="Play";i.registerComponent("PlayToggle",bc);kc=function(n,t){n=n<0?0:n;var i=Math.floor(n%60),r=Math.floor(n/60%60),u=Math.floor(n/3600),f=Math.floor(t/60%60),e=Math.floor(t/3600);return(isNaN(n)||n===Infinity)&&(u=r=i="-"),u=u>0||e>0?u+":":"",r=((u||f>=10)&&r<10?"0"+r:r)+":",i=i<10?"0"+i:i,u+r+i};no=kc;ur=function(n){function t(i,r){f(this,t);var u=e(this,n.call(this,i,r));u.throttledUpdateContent=wr(s(u,u.updateContent),25);u.on(i,"timeupdate",u.throttledUpdateContent);return u}return o(t,n),t.prototype.createEl=function(){var t=this.buildCSSClass(),i=n.prototype.createEl.call(this,"div",{className:t+" vjs-time-control vjs-control",innerHTML:'<span class="vjs-control-text">'+this.localize(this.labelText_)+"<\/span>"});return this.contentEl_=p("span",{className:t+"-display"},{"aria-live":"off"}),this.updateTextNode_(),i.appendChild(this.contentEl_),i},t.prototype.dispose=function(){this.contentEl_=null;this.textNode_=null;n.prototype.dispose.call(this)},t.prototype.updateTextNode_=function(){if(this.contentEl_){while(this.contentEl_.firstChild)this.contentEl_.removeChild(this.contentEl_.firstChild);this.textNode_=u.createTextNode(this.formattedTime_||this.formatTime_(0));this.contentEl_.appendChild(this.textNode_)}},t.prototype.formatTime_=function(n){return tu(n)},t.prototype.updateFormattedTime_=function(n){var t=this.formatTime_(n);t!==this.formattedTime_&&(this.formattedTime_=t,this.requestAnimationFrame(this.updateTextNode_))},t.prototype.updateContent=function(){},t}(i);ur.prototype.labelText_="Time";ur.prototype.controlText_="Time";i.registerComponent("TimeDisplay",ur);to=function(n){function t(i,r){f(this,t);var u=e(this,n.call(this,i,r));u.on(i,"ended",u.handleEnded);return u}return o(t,n),t.prototype.buildCSSClass=function(){return"vjs-current-time"},t.prototype.updateContent=function(){var n=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();this.updateFormattedTime_(n)},t.prototype.handleEnded=function(){this.player_.duration()&&this.updateFormattedTime_(this.player_.duration())},t}(ur);to.prototype.labelText_="Current Time";to.prototype.controlText_="Current Time";i.registerComponent("CurrentTimeDisplay",to);io=function(n){function t(i,r){f(this,t);var u=e(this,n.call(this,i,r));u.on(i,"durationchange",u.updateContent);u.on(i,"loadedmetadata",u.throttledUpdateContent);return u}return o(t,n),t.prototype.buildCSSClass=function(){return"vjs-duration"},t.prototype.updateContent=function(){var n=this.player_.duration();n&&this.duration_!==n&&(this.duration_=n,this.updateFormattedTime_(n))},t}(ur);io.prototype.labelText_="Duration";io.prototype.controlText_="Duration";i.registerComponent("DurationDisplay",io);ob=function(n){function t(){return f(this,t),e(this,n.apply(this,arguments))}return o(t,n),t.prototype.createEl=function(){return n.prototype.createEl.call(this,"div",{className:"vjs-time-control vjs-time-divider",innerHTML:"<div><span>/<\/span><\/div>"})},t}(i);i.registerComponent("TimeDivider",ob);ro=function(n){function t(i,r){f(this,t);var u=e(this,n.call(this,i,r));u.on(i,"durationchange",u.throttledUpdateContent);u.on(i,"ended",u.handleEnded);return u}return o(t,n),t.prototype.buildCSSClass=function(){return"vjs-remaining-time"},t.prototype.formatTime_=function(t){return"-"+n.prototype.formatTime_.call(this,t)},t.prototype.updateContent=function(){this.player_.duration()&&(this.player_.remainingTimeDisplay?this.updateFormattedTime_(this.player_.remainingTimeDisplay()):this.updateFormattedTime_(this.player_.remainingTime()))},t.prototype.handleEnded=function(){this.player_.duration()&&this.updateFormattedTime_(0)},t}(ur);ro.prototype.labelText_="Remaining Time";ro.prototype.controlText_="Remaining Time";i.registerComponent("RemainingTimeDisplay",ro);sb=function(n){function t(i,r){f(this,t);var u=e(this,n.call(this,i,r));u.updateShowing();u.on(u.player(),"durationchange",u.updateShowing);return u}return o(t,n),t.prototype.createEl=function(){var t=n.prototype.createEl.call(this,"div",{className:"vjs-live-control vjs-control"});return this.contentEl_=p("div",{className:"vjs-live-display",innerHTML:'<span class="vjs-control-text">'+this.localize("Stream Type")+"<\/span>"+this.localize("LIVE")},{"aria-live":"off"}),t.appendChild(this.contentEl_),t},t.prototype.dispose=function(){this.contentEl_=null;n.prototype.dispose.call(this)},t.prototype.updateShowing=function(){this.player().duration()===Infinity?this.show():this.hide()},t}(i);i.registerComponent("LiveDisplay",sb);uo=function(n){function t(i,r){f(this,t);var u=e(this,n.call(this,i,r));return u.bar=u.getChild(u.options_.barName),u.vertical(!!u.options_.vertical),u.enable(),u}return o(t,n),t.prototype.enabled=function(){return this.enabled_},t.prototype.enable=function(){if(!this.enabled()){this.on("mousedown",this.handleMouseDown);this.on("touchstart",this.handleMouseDown);this.on("focus",this.handleFocus);this.on("blur",this.handleBlur);this.on("click",this.handleClick);this.on(this.player_,"controlsvisible",this.update);if(this.playerEvent)this.on(this.player_,this.playerEvent,this.update);this.removeClass("disabled");this.setAttribute("tabindex",0);this.enabled_=!0}},t.prototype.disable=function(){if(this.enabled()){var n=this.bar.el_.ownerDocument;this.off("mousedown",this.handleMouseDown);this.off("touchstart",this.handleMouseDown);this.off("focus",this.handleFocus);this.off("blur",this.handleBlur);this.off("click",this.handleClick);this.off(this.player_,"controlsvisible",this.update);this.off(n,"mousemove",this.handleMouseMove);this.off(n,"mouseup",this.handleMouseUp);this.off(n,"touchmove",this.handleMouseMove);this.off(n,"touchend",this.handleMouseUp);this.removeAttribute("tabindex");this.addClass("disabled");this.playerEvent&&this.off(this.player_,this.playerEvent,this.update);this.enabled_=!1}},t.prototype.createEl=function(t){var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};return i.className=i.className+" vjs-slider",i=y({tabIndex:0},i),r=y({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100,tabIndex:0},r),n.prototype.createEl.call(this,t,i,r)},t.prototype.handleMouseDown=function(n){var t=this.bar.el_.ownerDocument;n.type==="mousedown"&&n.preventDefault();n.type!=="touchstart"||li||n.preventDefault();ty();this.addClass("vjs-sliding");this.trigger("slideractive");this.on(t,"mousemove",this.handleMouseMove);this.on(t,"mouseup",this.handleMouseUp);this.on(t,"touchmove",this.handleMouseMove);this.on(t,"touchend",this.handleMouseUp);this.handleMouseMove(n)},t.prototype.handleMouseMove=function(){},t.prototype.handleMouseUp=function(){var n=this.bar.el_.ownerDocument;iy();this.removeClass("vjs-sliding");this.trigger("sliderinactive");this.off(n,"mousemove",this.handleMouseMove);this.off(n,"mouseup",this.handleMouseUp);this.off(n,"touchmove",this.handleMouseMove);this.off(n,"touchend",this.handleMouseUp);this.update()},t.prototype.update=function(){var n,t,i,r;if(this.el_)return(n=this.getPercent(),t=this.bar,!t)?void 0:((typeof n!="number"||n!==n||n<0||n===Infinity)&&(n=0),i=(n*100).toFixed(2)+"%",r=t.el().style,this.vertical()?r.height=i:r.width=i,n)},t.prototype.calculateDistance=function(n){var t=nh(this.el_,n);return this.vertical()?t.y:t.x},t.prototype.handleFocus=function(){this.on(this.bar.el_.ownerDocument,"keydown",this.handleKeyPress)},t.prototype.handleKeyPress=function(n){n.which===37||n.which===40?(n.preventDefault(),this.stepBack()):(n.which===38||n.which===39)&&(n.preventDefault(),this.stepForward())},t.prototype.handleBlur=function(){this.off(this.bar.el_.ownerDocument,"keydown",this.handleKeyPress)},t.prototype.handleClick=function(n){n.stopImmediatePropagation();n.preventDefault()},t.prototype.vertical=function(n){if(n===undefined)return this.vertical_||!1;this.vertical_=!!n;this.vertical_?this.addClass("vjs-slider-vertical"):this.addClass("vjs-slider-horizontal")},t}(i);i.registerComponent("Slider",uo);hb=function(n){function t(i,r){f(this,t);var u=e(this,n.call(this,i,r));u.partEls_=[];u.on(i,"progress",u.update);return u}return o(t,n),t.prototype.createEl=function(){return n.prototype.createEl.call(this,"div",{className:"vjs-load-progress",innerHTML:'<span class="vjs-control-text"><span>'+this.localize("Loaded")+"<\/span>: 0%<\/span>"})},t.prototype.dispose=function(){this.partEls_=null;n.prototype.dispose.call(this)},t.prototype.update=function(){var t=this.player_.buffered(),s=this.player_.duration(),f=this.player_.bufferedEnd(),i=this.partEls_,e=function(n,t){var i=n/t||0;return(i>=1?1:i)*100+"%"},n,u;for(this.el_.style.width=e(f,s),n=0;n<t.length;n++){var o=t.start(n),h=t.end(n),r=i[n];r||(r=this.el_.appendChild(p()),i[n]=r);r.style.left=e(o,f);r.style.width=e(h-o,f)}for(u=i.length;u>t.length;u--)this.el_.removeChild(i[u-1]);i.length=t.length},t}(i);i.registerComponent("LoadProgressBar",hb);cb=function(n){function t(){return f(this,t),e(this,n.apply(this,arguments))}return o(t,n),t.prototype.createEl=function(){return n.prototype.createEl.call(this,"div",{className:"vjs-time-tooltip"})},t.prototype.update=function(n,t,i){var u=nf(this.el_),f=nf(this.player_.el()),e=n.width*t;if(f&&u){var o=n.left-f.left+e,s=n.width-e+(f.right-n.right),r=u.width/2;o<r?r+=r-o:s<r&&(r=s);r<0?r=0:r>u.width&&(r=u.width);this.el_.style.right="-"+r+"px";ku(this.el_,i)}},t}(i);i.registerComponent("TimeTooltip",cb);fo=function(n){function t(){return f(this,t),e(this,n.apply(this,arguments))}return o(t,n),t.prototype.createEl=function(){return n.prototype.createEl.call(this,"div",{className:"vjs-play-progress vjs-slider-bar",innerHTML:'<span class="vjs-control-text"><span>'+this.localize("Progress")+"<\/span>: 0%<\/span>"})},t.prototype.update=function(n,t){var i=this;this.rafId_&&this.cancelAnimationFrame(this.rafId_);this.rafId_=this.requestAnimationFrame(function(){var u=i.player_.scrubbing()?i.player_.getCache().currentTime:i.player_.currentTime(),f=tu(u,i.player_.duration()),r=i.getChild("timeTooltip");r&&r.update(n,t,f)})},t}(i);fo.prototype.options_={children:[]};ui||di||fo.prototype.options_.children.push("timeTooltip");i.registerComponent("PlayProgressBar",fo);dc=function(n){function t(i,r){f(this,t);var u=e(this,n.call(this,i,r));return u.update=wr(s(u,u.update),25),u}return o(t,n),t.prototype.createEl=function(){return n.prototype.createEl.call(this,"div",{className:"vjs-mouse-display"})},t.prototype.update=function(n,t){var i=this;this.rafId_&&this.cancelAnimationFrame(this.rafId_);this.rafId_=this.requestAnimationFrame(function(){var r=i.player_.duration(),u=tu(t*r,r);i.el_.style.left=n.width*t+"px";i.getChild("timeTooltip").update(n,t,u)})},t}(i);dc.prototype.options_={children:["timeTooltip"]};i.registerComponent("MouseTimeDisplay",dc);var lb=5,ab=30,eo=function(n){function t(i,r){f(this,t);var u=e(this,n.call(this,i,r));return u.setEventHandlers_(),u}return o(t,n),t.prototype.setEventHandlers_=function(){var n=this;this.update=wr(s(this,this.update),ab);this.on(this.player_,"timeupdate",this.update);this.on(this.player_,"ended",this.handleEnded);this.updateInterval=null;this.on(this.player_,["playing"],function(){n.clearInterval(n.updateInterval);n.updateInterval=n.setInterval(function(){n.requestAnimationFrame(function(){n.update()})},ab)});this.on(this.player_,["ended","pause","waiting"],function(){n.clearInterval(n.updateInterval)});this.on(this.player_,["timeupdate","ended"],this.update)},t.prototype.createEl=function(){return n.prototype.createEl.call(this,"div",{className:"vjs-progress-holder"},{"aria-label":this.localize("Progress Bar")})},t.prototype.update_=function(n,t){var i=this.player_.duration();this.el_.setAttribute("aria-valuenow",(t*100).toFixed(2));this.el_.setAttribute("aria-valuetext",this.localize("progress bar timing: currentTime={1} duration={2}",[tu(n,i),tu(i,i)],"{1} of {2}"));this.bar.update(nf(this.el_),t)},t.prototype.update=function(){var t=n.prototype.update.call(this);return this.update_(this.getCurrentTime_(),t),t},t.prototype.getCurrentTime_=function(){return this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime()},t.prototype.handleEnded=function(){this.update_(this.player_.duration(),1)},t.prototype.getPercent=function(){var n=this.getCurrentTime_()/this.player_.duration();return n>=1?1:n||0},t.prototype.handleMouseDown=function(t){vr(t)&&(t.stopPropagation(),this.player_.scrubbing(!0),this.videoWasPlaying=!this.player_.paused(),this.player_.pause(),n.prototype.handleMouseDown.call(this,t))},t.prototype.handleMouseMove=function(n){if(vr(n)){var t=this.calculateDistance(n)*this.player_.duration();t===this.player_.duration()&&(t=t-.1);this.player_.currentTime(t)}},t.prototype.enable=function(){n.prototype.enable.call(this);var t=this.getChild("mouseTimeDisplay");t&&t.show()},t.prototype.disable=function(){n.prototype.disable.call(this);var t=this.getChild("mouseTimeDisplay");t&&t.hide()},t.prototype.handleMouseUp=function(t){n.prototype.handleMouseUp.call(this,t);t&&t.stopPropagation();this.player_.scrubbing(!1);this.player_.trigger({type:"timeupdate",target:this,manuallyTriggered:!0});this.videoWasPlaying&&br(this.player_.play())},t.prototype.stepForward=function(){this.player_.currentTime(this.player_.currentTime()+lb)},t.prototype.stepBack=function(){this.player_.currentTime(this.player_.currentTime()-lb)},t.prototype.handleAction=function(){this.player_.paused()?this.player_.play():this.player_.pause()},t.prototype.handleKeyPress=function(t){t.which===32||t.which===13?(t.preventDefault(),this.handleAction(t)):n.prototype.handleKeyPress&&n.prototype.handleKeyPress.call(this,t)},t}(uo);eo.prototype.options_={children:["loadProgressBar","playProgressBar"],barName:"playProgressBar"};ui||di||eo.prototype.options_.children.splice(1,0,"mouseTimeDisplay");eo.prototype.playerEvent="timeupdate";i.registerComponent("SeekBar",eo);gc=function(n){function t(i,r){f(this,t);var u=e(this,n.call(this,i,r));return u.handleMouseMove=wr(s(u,u.handleMouseMove),25),u.throttledHandleMouseSeek=wr(s(u,u.handleMouseSeek),25),u.enable(),u}return o(t,n),t.prototype.createEl=function(){return n.prototype.createEl.call(this,"div",{className:"vjs-progress-control vjs-control"})},t.prototype.handleMouseMove=function(n){var i=this.getChild("seekBar");if(i){var r=i.getChild("mouseTimeDisplay"),u=i.el(),f=nf(u),t=nh(u,n).x;t>1?t=1:t<0&&(t=0);r&&r.update(f,t)}},t.prototype.handleMouseSeek=function(n){var t=this.getChild("seekBar");t&&t.handleMouseMove(n)},t.prototype.enabled=function(){return this.enabled_},t.prototype.disable=function(){(this.children().forEach(function(n){return n.disable&&n.disable()}),this.enabled())&&(this.off(["mousedown","touchstart"],this.handleMouseDown),this.off(this.el_,"mousemove",this.handleMouseMove),this.handleMouseUp(),this.addClass("disabled"),this.enabled_=!1)},t.prototype.enable=function(){if(this.children().forEach(function(n){return n.enable&&n.enable()}),!this.enabled()){this.on(["mousedown","touchstart"],this.handleMouseDown);this.on(this.el_,"mousemove",this.handleMouseMove);this.removeClass("disabled");this.enabled_=!0}},t.prototype.handleMouseDown=function(n){var t=this.el_.ownerDocument,i=this.getChild("seekBar");i&&i.handleMouseDown(n);this.on(t,"mousemove",this.throttledHandleMouseSeek);this.on(t,"touchmove",this.throttledHandleMouseSeek);this.on(t,"mouseup",this.handleMouseUp);this.on(t,"touchend",this.handleMouseUp)},t.prototype.handleMouseUp=function(n){var t=this.el_.ownerDocument,i=this.getChild("seekBar");i&&i.handleMouseUp(n);this.off(t,"mousemove",this.throttledHandleMouseSeek);this.off(t,"touchmove",this.throttledHandleMouseSeek);this.off(t,"mouseup",this.handleMouseUp);this.off(t,"touchend",this.handleMouseUp)},t}(i);gc.prototype.options_={children:["seekBar"]};i.registerComponent("ProgressControl",gc);nl=function(n){function t(i,r){f(this,t);var o=e(this,n.call(this,i,r));o.on(i,"fullscreenchange",o.handleFullscreenChange);return u[ve.fullscreenEnabled]===!1&&o.disable(),o}return o(t,n),t.prototype.buildCSSClass=function(){return"vjs-fullscreen-control "+n.prototype.buildCSSClass.call(this)},t.prototype.handleFullscreenChange=function(){this.player_.isFullscreen()?this.controlText("Non-Fullscreen"):this.controlText("Fullscreen")},t.prototype.handleClick=function(){this.player_.isFullscreen()?this.player_.exitFullscreen():this.player_.requestFullscreen()},t}(gt);nl.prototype.controlText_="Fullscreen";i.registerComponent("FullscreenToggle",nl);vb=function(n,t){t.tech_&&!t.tech_.featuresVolumeControl&&n.addClass("vjs-hidden");n.on(t,"loadstart",function(){t.tech_.featuresVolumeControl?n.removeClass("vjs-hidden"):n.addClass("vjs-hidden")})};yb=function(n){function t(){return f(this,t),e(this,n.apply(this,arguments))}return o(t,n),t.prototype.createEl=function(){return n.prototype.createEl.call(this,"div",{className:"vjs-volume-level",innerHTML:'<span class="vjs-control-text"><\/span>'})},t}(i);i.registerComponent("VolumeLevel",yb);oo=function(n){function t(i,r){f(this,t);var u=e(this,n.call(this,i,r));u.on("slideractive",u.updateLastVolume_);u.on(i,"volumechange",u.updateARIAAttributes);return i.ready(function(){return u.updateARIAAttributes()}),u}return o(t,n),t.prototype.createEl=function(){return n.prototype.createEl.call(this,"div",{className:"vjs-volume-bar vjs-slider-bar"},{"aria-label":this.localize("Volume Level"),"aria-live":"polite"})},t.prototype.handleMouseDown=function(t){vr(t)&&n.prototype.handleMouseDown.call(this,t)},t.prototype.handleMouseMove=function(n){vr(n)&&(this.checkMuted(),this.player_.volume(this.calculateDistance(n)))},t.prototype.checkMuted=function(){this.player_.muted()&&this.player_.muted(!1)},t.prototype.getPercent=function(){return this.player_.muted()?0:this.player_.volume()},t.prototype.stepForward=function(){this.checkMuted();this.player_.volume(this.player_.volume()+.1)},t.prototype.stepBack=function(){this.checkMuted();this.player_.volume(this.player_.volume()-.1)},t.prototype.updateARIAAttributes=function(){var n=this.player_.muted()?0:this.volumeAsPercentage_();this.el_.setAttribute("aria-valuenow",n);this.el_.setAttribute("aria-valuetext",n+"%")},t.prototype.volumeAsPercentage_=function(){return Math.round(this.player_.volume()*100)},t.prototype.updateLastVolume_=function(){var n=this,t=this.player_.volume();this.one("sliderinactive",function(){n.player_.volume()===0&&n.player_.lastVolume_(t)})},t}(uo);oo.prototype.options_={children:["volumeLevel"],barName:"volumeLevel"};oo.prototype.playerEvent="volumechange";i.registerComponent("VolumeBar",oo);tl=function(n){function t(i){var u=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},r;f(this,t);u.vertical=u.vertical||!1;(typeof u.volumeBar=="undefined"||wu(u.volumeBar))&&(u.volumeBar=u.volumeBar||{},u.volumeBar.vertical=u.vertical);r=e(this,n.call(this,i,u));vb(r,i);r.throttledHandleMouseMove=wr(s(r,r.handleMouseMove),25);r.on("mousedown",r.handleMouseDown);r.on("touchstart",r.handleMouseDown);r.on(r.volumeBar,["focus","slideractive"],function(){r.volumeBar.addClass("vjs-slider-active");r.addClass("vjs-slider-active");r.trigger("slideractive")});r.on(r.volumeBar,["blur","sliderinactive"],function(){r.volumeBar.removeClass("vjs-slider-active");r.removeClass("vjs-slider-active");r.trigger("sliderinactive")});return r}return o(t,n),t.prototype.createEl=function(){var t="vjs-volume-horizontal";return this.options_.vertical&&(t="vjs-volume-vertical"),n.prototype.createEl.call(this,"div",{className:"vjs-volume-control vjs-control "+t})},t.prototype.handleMouseDown=function(){var n=this.el_.ownerDocument;this.on(n,"mousemove",this.throttledHandleMouseMove);this.on(n,"touchmove",this.throttledHandleMouseMove);this.on(n,"mouseup",this.handleMouseUp);this.on(n,"touchend",this.handleMouseUp)},t.prototype.handleMouseUp=function(){var n=this.el_.ownerDocument;this.off(n,"mousemove",this.throttledHandleMouseMove);this.off(n,"touchmove",this.throttledHandleMouseMove);this.off(n,"mouseup",this.handleMouseUp);this.off(n,"touchend",this.handleMouseUp)},t.prototype.handleMouseMove=function(n){this.volumeBar.handleMouseMove(n)},t}(i);tl.prototype.options_={children:["volumeBar"]};i.registerComponent("VolumeControl",tl);pb=function(n,t){t.tech_&&!t.tech_.featuresMuteControl&&n.addClass("vjs-hidden");n.on(t,"loadstart",function(){t.tech_.featuresMuteControl?n.removeClass("vjs-hidden"):n.addClass("vjs-hidden")})};il=function(n){function t(i,r){f(this,t);var u=e(this,n.call(this,i,r));pb(u,i);u.on(i,["loadstart","volumechange"],u.update);return u}return o(t,n),t.prototype.buildCSSClass=function(){return"vjs-mute-control "+n.prototype.buildCSSClass.call(this)},t.prototype.handleClick=function(){var i=this.player_.volume(),n=this.player_.lastVolume_(),t;i===0?(t=n<.1?.1:n,this.player_.volume(t),this.player_.muted(!1)):this.player_.muted(this.player_.muted()?!1:!0)},t.prototype.update=function(){this.updateIcon_();this.updateControlText_()},t.prototype.updateIcon_=function(){var i=this.player_.volume(),n=3,t;for(ui&&this.player_.muted(this.player_.tech_.el_.muted),i===0||this.player_.muted()?n=0:i<.33?n=1:i<.67&&(n=2),t=0;t<4;t++)du(this.el_,"vjs-vol-"+t);bi(this.el_,"vjs-vol-"+n)},t.prototype.updateControlText_=function(){var t=this.player_.muted()||this.player_.volume()===0,n=t?"Unmute":"Mute";this.controlText()!==n&&this.controlText(n)},t}(gt);il.prototype.controlText_="Mute";i.registerComponent("MuteToggle",il);rl=function(n){function t(i){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},u;f(this,t);r.inline=typeof r.inline!="undefined"?r.inline:!0;(typeof r.volumeControl=="undefined"||wu(r.volumeControl))&&(r.volumeControl=r.volumeControl||{},r.volumeControl.vertical=!r.inline);u=e(this,n.call(this,i,r));u.on(i,["loadstart"],u.volumePanelState_);u.on(u.volumeControl,["slideractive"],u.sliderActive_);u.on(u.volumeControl,["sliderinactive"],u.sliderInactive_);return u}return o(t,n),t.prototype.sliderActive_=function(){this.addClass("vjs-slider-active")},t.prototype.sliderInactive_=function(){this.removeClass("vjs-slider-active")},t.prototype.volumePanelState_=function(){this.volumeControl.hasClass("vjs-hidden")&&this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-hidden");this.volumeControl.hasClass("vjs-hidden")&&!this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-mute-toggle-only")},t.prototype.createEl=function(){var t="vjs-volume-panel-horizontal";return this.options_.inline||(t="vjs-volume-panel-vertical"),n.prototype.createEl.call(this,"div",{className:"vjs-volume-panel vjs-control "+t})},t}(i);rl.prototype.options_={children:["muteToggle","volumeControl"]};i.registerComponent("VolumePanel",rl);so=function(n){function t(i,r){f(this,t);var u=e(this,n.call(this,i,r));r&&(u.menuButton_=r.menuButton);u.focusedChild_=-1;u.on("keydown",u.handleKeyPress);return u}return o(t,n),t.prototype.addItem=function(n){this.addChild(n);n.on("click",s(this,function(){this.menuButton_&&(this.menuButton_.unpressButton(),n.name()!=="CaptionSettingsMenuItem"&&this.menuButton_.focus())}))},t.prototype.createEl=function(){var i=this.options_.contentElType||"ul",t;return this.contentEl_=p(i,{className:"vjs-menu-content"}),t=n.prototype.createEl.call(this,"div",{append:this.contentEl_,className:"vjs-menu"}),t.appendChild(this.contentEl_),bt(t,"click",function(n){n.preventDefault();n.stopImmediatePropagation()}),t},t.prototype.dispose=function(){this.contentEl_=null;n.prototype.dispose.call(this)},t.prototype.handleKeyPress=function(n){n.which===37||n.which===40?(n.preventDefault(),this.stepForward()):(n.which===38||n.which===39)&&(n.preventDefault(),this.stepBack())},t.prototype.stepForward=function(){var n=0;this.focusedChild_!==undefined&&(n=this.focusedChild_+1);this.focus(n)},t.prototype.stepBack=function(){var n=0;this.focusedChild_!==undefined&&(n=this.focusedChild_-1);this.focus(n)},t.prototype.focus=function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0,n=this.children().slice(),i=n.length&&n[0].className&&/vjs-menu-title/.test(n[0].className);i&&n.shift();n.length>0&&(t<0?t=0:t>=n.length&&(t=n.length-1),this.focusedChild_=t,n[t].el_.focus())},t}(i);i.registerComponent("Menu",so);ho=function(n){function t(i){var u=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},r,o;f(this,t);r=e(this,n.call(this,i,u));r.menuButton_=new gt(i,u);r.menuButton_.controlText(r.controlText_);r.menuButton_.el_.setAttribute("aria-haspopup","true");o=gt.prototype.buildCSSClass();r.menuButton_.el_.className=r.buildCSSClass()+" "+o;r.menuButton_.removeClass("vjs-control");r.addChild(r.menuButton_);r.update();r.enabled_=!0;r.on(r.menuButton_,"tap",r.handleClick);r.on(r.menuButton_,"click",r.handleClick);r.on(r.menuButton_,"focus",r.handleFocus);r.on(r.menuButton_,"blur",r.handleBlur);r.on("keydown",r.handleSubmenuKeyPress);return r}return o(t,n),t.prototype.update=function(){var n=this.createMenu();this.menu&&(this.menu.dispose(),this.removeChild(this.menu));this.menu=n;this.addChild(n);this.buttonPressed_=!1;this.menuButton_.el_.setAttribute("aria-expanded","false");this.items&&this.items.length<=this.hideThreshold_?this.hide():this.show()},t.prototype.createMenu=function(){var n=new so(this.player_,{menuButton:this}),i,t;if(this.hideThreshold_=0,this.options_.title&&(i=p("li",{className:"vjs-menu-title",innerHTML:v(this.options_.title),tabIndex:-1}),this.hideThreshold_+=1,n.children_.unshift(i),se(i,n.contentEl())),this.items=this.createItems(),this.items)for(t=0;t<this.items.length;t++)n.addItem(this.items[t]);return n},t.prototype.createItems=function(){},t.prototype.createEl=function(){return n.prototype.createEl.call(this,"div",{className:this.buildWrapperCSSClass()},{})},t.prototype.buildWrapperCSSClass=function(){var t="vjs-menu-button",i;return t+=this.options_.inline===!0?"-inline":"-popup",i=gt.prototype.buildCSSClass(),"vjs-menu-button "+t+" "+i+" "+n.prototype.buildCSSClass.call(this)},t.prototype.buildCSSClass=function(){var t="vjs-menu-button";return t+=this.options_.inline===!0?"-inline":"-popup","vjs-menu-button "+t+" "+n.prototype.buildCSSClass.call(this)},t.prototype.controlText=function(n){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.menuButton_.el();return this.menuButton_.controlText(n,t)},t.prototype.handleClick=function(){this.one(this.menu.contentEl(),"mouseleave",s(this,function(){this.unpressButton();this.el_.blur()}));this.buttonPressed_?this.unpressButton():this.pressButton()},t.prototype.focus=function(){this.menuButton_.focus()},t.prototype.blur=function(){this.menuButton_.blur()},t.prototype.handleFocus=function(){bt(u,"keydown",s(this,this.handleKeyPress))},t.prototype.handleBlur=function(){st(u,"keydown",s(this,this.handleKeyPress))},t.prototype.handleKeyPress=function(n){n.which===27||n.which===9?(this.buttonPressed_&&this.unpressButton(),n.which!==9&&(n.preventDefault(),this.menuButton_.el_.focus())):(n.which===38||n.which===40)&&(this.buttonPressed_||(this.pressButton(),n.preventDefault()))},t.prototype.handleSubmenuKeyPress=function(n){(n.which===27||n.which===9)&&(this.buttonPressed_&&this.unpressButton(),n.which!==9&&(n.preventDefault(),this.menuButton_.el_.focus()))},t.prototype.pressButton=function(){if(this.enabled_){if(this.buttonPressed_=!0,this.menu.lockShowing(),this.menuButton_.el_.setAttribute("aria-expanded","true"),ui&&bv())return;this.menu.focus()}},t.prototype.unpressButton=function(){this.enabled_&&(this.buttonPressed_=!1,this.menu.unlockShowing(),this.menuButton_.el_.setAttribute("aria-expanded","false"))},t.prototype.disable=function(){this.unpressButton();this.enabled_=!1;this.addClass("vjs-disabled");this.menuButton_.disable()},t.prototype.enable=function(){this.enabled_=!0;this.removeClass("vjs-disabled");this.menuButton_.enable()},t}(i);i.registerComponent("MenuButton",ho);co=function(n){function t(i,r){var o,u,h;if(f(this,t),o=r.tracks,u=e(this,n.call(this,i,r)),u.items.length<=1&&u.hide(),!o)return e(u);h=s(u,u.update);o.addEventListener("removetrack",h);o.addEventListener("addtrack",h);u.player_.on("ready",h);u.player_.on("dispose",function(){o.removeEventListener("removetrack",h);o.removeEventListener("addtrack",h)});return u}return o(t,n),t}(ho);i.registerComponent("TrackButton",co);iu=function(n){function t(i,r){f(this,t);var u=e(this,n.call(this,i,r));return u.selectable=r.selectable,u.isSelected_=r.selected||!1,u.multiSelectable=r.multiSelectable,u.selected(u.isSelected_),u.selectable?u.multiSelectable?u.el_.setAttribute("role","menuitemcheckbox"):u.el_.setAttribute("role","menuitemradio"):u.el_.setAttribute("role","menuitem"),u}return o(t,n),t.prototype.createEl=function(t,i,r){return this.nonIconControl=!0,n.prototype.createEl.call(this,"li",y({className:"vjs-menu-item",innerHTML:'<span class="vjs-menu-item-text">'+this.localize(this.options_.label)+"<\/span>",tabIndex:-1},i),r)},t.prototype.handleClick=function(){this.selected(!0)},t.prototype.selected=function(n){this.selectable&&(n?(this.addClass("vjs-selected"),this.el_.setAttribute("aria-checked","true"),this.controlText(", selected"),this.isSelected_=!0):(this.removeClass("vjs-selected"),this.el_.setAttribute("aria-checked","false"),this.controlText(""),this.isSelected_=!1))},t}(vf);i.registerComponent("MenuItem",iu);ru=function(n){function i(r,o){var l,h,s,a,v,c;f(this,i);l=o.track;h=r.textTracks();o.label=l.label||l.language||"Unknown";o.selected=l.mode==="showing";s=e(this,n.call(this,r,o));s.track=l;a=function(){for(var t=arguments.length,i=Array(t),n=0;n<t;n++)i[n]=arguments[n];s.handleTracksChange.apply(s,i)};v=function(){for(var t=arguments.length,i=Array(t),n=0;n<t;n++)i[n]=arguments[n];s.handleSelectedLanguageChange.apply(s,i)};r.on(["loadstart","texttrackchange"],a);h.addEventListener("change",a);h.addEventListener("selectedlanguagechange",v);s.on("dispose",function(){r.off(["loadstart","texttrackchange"],a);h.removeEventListener("change",a);h.removeEventListener("selectedlanguagechange",v)});if(h.onchange===undefined){c=void 0;s.on(["tap","click"],function(){if(k(t.Event)!=="object")try{c=new t.Event("change")}catch(n){}c||(c=u.createEvent("Event"),c.initEvent("change",!0,!0));h.dispatchEvent(c)})}return s.handleTracksChange(),s}return o(i,n),i.prototype.handleClick=function(t){var e=this.track.kind,u=this.track.kinds,f=this.player_.textTracks(),r,i;if(u||(u=[e]),n.prototype.handleClick.call(this,t),f)for(r=0;r<f.length;r++)i=f[r],i===this.track&&u.indexOf(i.kind)>-1?i.mode!=="showing"&&(i.mode="showing"):i.mode!=="disabled"&&(i.mode="disabled")},i.prototype.handleTracksChange=function(){var n=this.track.mode==="showing";n!==this.isSelected_&&this.selected(n)},i.prototype.handleSelectedLanguageChange=function(){if(this.track.mode==="showing"){var n=this.player_.cache_.selectedLanguage;if(n&&n.enabled&&n.language===this.track.language&&n.kind!==this.track.kind)return;this.player_.cache_.selectedLanguage={enabled:!0,language:this.track.language,kind:this.track.kind}}},i.prototype.dispose=function(){this.track=null;n.prototype.dispose.call(this)},i}(iu);i.registerComponent("TextTrackMenuItem",ru);ul=function(n){function t(i,r){return f(this,t),r.track={player:i,kind:r.kind,kinds:r.kinds,"default":!1,mode:"disabled"},r.kinds||(r.kinds=[r.kind]),r.track.label=r.label?r.label:r.kinds.join(" and ")+" off",r.selectable=!0,r.multiSelectable=!1,e(this,n.call(this,i,r))}return o(t,n),t.prototype.handleTracksChange=function(){for(var i,r=this.player().textTracks(),n=!0,t=0,u=r.length;t<u;t++)if(i=r[t],this.options_.kinds.indexOf(i.kind)>-1&&i.mode==="showing"){n=!1;break}n!==this.isSelected_&&this.selected(n)},t.prototype.handleSelectedLanguageChange=function(){for(var t,i=this.player().textTracks(),r=!0,n=0,u=i.length;n<u;n++)if(t=i[n],["captions","descriptions","subtitles"].indexOf(t.kind)>-1&&t.mode==="showing"){r=!1;break}r&&(this.player_.cache_.selectedLanguage={enabled:!1})},t}(ru);i.registerComponent("OffTextTrackMenuItem",ul);fr=function(n){function t(i){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};return f(this,t),r.tracks=i.textTracks(),e(this,n.call(this,i,r))}return o(t,n),t.prototype.createItems=function(){var i=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[],e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:ru,f=void 0,r,n,t,u;for(this.label_&&(f=this.label_+" off"),i.push(new ul(this.player_,{kinds:this.kinds_,kind:this.kind_,label:f})),this.hideThreshold_+=1,r=this.player_.textTracks(),Array.isArray(this.kinds_)||(this.kinds_=[this.kind_]),n=0;n<r.length;n++)t=r[n],this.kinds_.indexOf(t.kind)>-1&&(u=new e(this.player_,{track:t,selectable:!0,multiSelectable:!1}),u.addClass("vjs-"+t.kind+"-menu-item"),i.push(u));return i},t}(co);i.registerComponent("TextTrackButton",fr);fl=function(n){function t(i,r){var u;f(this,t);var h=r.track,o=r.cue,c=i.currentTime();return r.selectable=!0,r.multiSelectable=!1,r.label=o.text,r.selected=o.startTime<=c&&c<o.endTime,u=e(this,n.call(this,i,r)),u.track=h,u.cue=o,h.addEventListener("cuechange",s(u,u.update)),u}return o(t,n),t.prototype.handleClick=function(){n.prototype.handleClick.call(this);this.player_.currentTime(this.cue.startTime);this.update(this.cue.startTime)},t.prototype.update=function(){var n=this.cue,t=this.player_.currentTime();this.selected(n.startTime<=t&&t<n.endTime)},t}(iu);i.registerComponent("ChaptersTrackMenuItem",fl);lo=function(n){function t(i,r,u){return f(this,t),e(this,n.call(this,i,r,u))}return o(t,n),t.prototype.buildCSSClass=function(){return"vjs-chapters-button "+n.prototype.buildCSSClass.call(this)},t.prototype.buildWrapperCSSClass=function(){return"vjs-chapters-button "+n.prototype.buildWrapperCSSClass.call(this)},t.prototype.update=function(t){(!this.track_||t&&(t.type==="addtrack"||t.type==="removetrack"))&&this.setTrack(this.findChaptersTrack());n.prototype.update.call(this)},t.prototype.setTrack=function(n){var t,i;this.track_!==n&&(this.updateHandler_||(this.updateHandler_=this.update.bind(this)),this.track_&&(t=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_),t&&t.removeEventListener("load",this.updateHandler_),this.track_=null),this.track_=n,this.track_&&(this.track_.mode="hidden",i=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_),i&&i.addEventListener("load",this.updateHandler_)))},t.prototype.findChaptersTrack=function(){for(var t,i=this.player_.textTracks()||[],n=i.length-1;n>=0;n--)if(t=i[n],t.kind===this.kind_)return t},t.prototype.getMenuCaption=function(){return this.track_&&this.track_.label?this.track_.label:this.localize(v(this.kind_))},t.prototype.createMenu=function(){return this.options_.title=this.getMenuCaption(),n.prototype.createMenu.call(this)},t.prototype.createItems=function(){var i=[],n,t,r,u,f;if(!this.track_||(n=this.track_.cues,!n))return i;for(t=0,r=n.length;t<r;t++)u=n[t],f=new fl(this.player_,{track:this.track_,cue:u}),i.push(f);return i},t}(fr);lo.prototype.kind_="chapters";lo.prototype.controlText_="Chapters";i.registerComponent("ChaptersButton",lo);ao=function(n){function t(i,r,u){f(this,t);var o=e(this,n.call(this,i,r,u)),h=i.textTracks(),c=s(o,o.handleTracksChange);h.addEventListener("change",c);o.on("dispose",function(){h.removeEventListener("change",c)});return o}return o(t,n),t.prototype.handleTracksChange=function(){for(var t,i=this.player().textTracks(),r=!1,n=0,u=i.length;n<u;n++)if(t=i[n],t.kind!==this.kind_&&t.mode==="showing"){r=!0;break}r?this.disable():this.enable()},t.prototype.buildCSSClass=function(){return"vjs-descriptions-button "+n.prototype.buildCSSClass.call(this)},t.prototype.buildWrapperCSSClass=function(){return"vjs-descriptions-button "+n.prototype.buildWrapperCSSClass.call(this)},t}(fr);ao.prototype.kind_="descriptions";ao.prototype.controlText_="Descriptions";i.registerComponent("DescriptionsButton",ao);vo=function(n){function t(i,r,u){return f(this,t),e(this,n.call(this,i,r,u))}return o(t,n),t.prototype.buildCSSClass=function(){return"vjs-subtitles-button "+n.prototype.buildCSSClass.call(this)},t.prototype.buildWrapperCSSClass=function(){return"vjs-subtitles-button "+n.prototype.buildWrapperCSSClass.call(this)},t}(fr);vo.prototype.kind_="subtitles";vo.prototype.controlText_="Subtitles";i.registerComponent("SubtitlesButton",vo);yo=function(n){function t(i,r){f(this,t);r.track={player:i,kind:r.kind,label:r.kind+" settings",selectable:!1,"default":!1,mode:"disabled"};r.selectable=!1;r.name="CaptionSettingsMenuItem";var u=e(this,n.call(this,i,r));return u.addClass("vjs-texttrack-settings"),u.controlText(", opens "+r.kind+" settings dialog"),u}return o(t,n),t.prototype.handleClick=function(){this.player().getChild("textTrackSettings").open()},t}(ru);i.registerComponent("CaptionSettingsMenuItem",yo);po=function(n){function t(i,r,u){return f(this,t),e(this,n.call(this,i,r,u))}return o(t,n),t.prototype.buildCSSClass=function(){return"vjs-captions-button "+n.prototype.buildCSSClass.call(this)},t.prototype.buildWrapperCSSClass=function(){return"vjs-captions-button "+n.prototype.buildWrapperCSSClass.call(this)},t.prototype.createItems=function(){var t=[];return this.player().tech_&&this.player().tech_.featuresNativeTextTracks||!this.player().getChild("textTrackSettings")||(t.push(new yo(this.player_,{kind:this.kind_})),this.hideThreshold_+=1),n.prototype.createItems.call(this,t)},t}(fr);po.prototype.kind_="captions";po.prototype.controlText_="Captions";i.registerComponent("CaptionsButton",po);el=function(n){function t(){return f(this,t),e(this,n.apply(this,arguments))}return o(t,n),t.prototype.createEl=function(t,i,r){var u='<span class="vjs-menu-item-text">'+this.localize(this.options_.label);return this.options_.track.kind==="captions"&&(u+='\n        <span aria-hidden="true" class="vjs-icon-placeholder"><\/span>\n        <span class="vjs-control-text"> '+this.localize("Captions")+"<\/span>\n      "),u+="<\/span>",n.prototype.createEl.call(this,t,y({innerHTML:u},i),r)},t}(ru);i.registerComponent("SubsCapsMenuItem",el);wo=function(n){function t(i){var u=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},r;return f(this,t),r=e(this,n.call(this,i,u)),r.label_="subtitles",["en","en-us","en-ca","fr-ca"].indexOf(r.player_.language_)>-1&&(r.label_="captions"),r.menuButton_.controlText(v(r.label_)),r}return o(t,n),t.prototype.buildCSSClass=function(){return"vjs-subs-caps-button "+n.prototype.buildCSSClass.call(this)},t.prototype.buildWrapperCSSClass=function(){return"vjs-subs-caps-button "+n.prototype.buildWrapperCSSClass.call(this)},t.prototype.createItems=function(){var t=[];return this.player().tech_&&this.player().tech_.featuresNativeTextTracks||!this.player().getChild("textTrackSettings")||(t.push(new yo(this.player_,{kind:this.label_})),this.hideThreshold_+=1),n.prototype.createItems.call(this,t,el)},t}(fr);wo.prototype.kinds_=["captions","subtitles"];wo.prototype.controlText_="Subtitles";i.registerComponent("SubsCapsButton",wo);ol=function(n){function t(i,r){var o,s,u,h;f(this,t);o=r.track;s=i.audioTracks();r.label=o.label||o.language||"Unknown";r.selected=o.enabled;u=e(this,n.call(this,i,r));u.track=o;u.addClass("vjs-"+o.kind+"-menu-item");h=function(){for(var t=arguments.length,i=Array(t),n=0;n<t;n++)i[n]=arguments[n];u.handleTracksChange.apply(u,i)};s.addEventListener("change",h);u.on("dispose",function(){s.removeEventListener("change",h)});return u}return o(t,n),t.prototype.createEl=function(t,i,r){var u='<span class="vjs-menu-item-text">'+this.localize(this.options_.label);return this.options_.track.kind==="main-desc"&&(u+='\n        <span aria-hidden="true" class="vjs-icon-placeholder"><\/span>\n        <span class="vjs-control-text"> '+this.localize("Descriptions")+"<\/span>\n      "),u+="<\/span>",n.prototype.createEl.call(this,t,y({innerHTML:u},i),r)},t.prototype.handleClick=function(t){var u=this.player_.audioTracks(),i,r;for(n.prototype.handleClick.call(this,t),i=0;i<u.length;i++)r=u[i],r.enabled=r===this.track},t.prototype.handleTracksChange=function(){this.selected(this.track.enabled)},t}(iu);i.registerComponent("AudioTrackMenuItem",ol);sl=function(n){function t(i){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};return f(this,t),r.tracks=i.audioTracks(),e(this,n.call(this,i,r))}return o(t,n),t.prototype.buildCSSClass=function(){return"vjs-audio-button "+n.prototype.buildCSSClass.call(this)},t.prototype.buildWrapperCSSClass=function(){return"vjs-audio-button "+n.prototype.buildWrapperCSSClass.call(this)},t.prototype.createItems=function(){var i=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[],t,n,r;for(this.hideThreshold_=1,t=this.player_.audioTracks(),n=0;n<t.length;n++)r=t[n],i.push(new ol(this.player_,{track:r,selectable:!0,multiSelectable:!1}));return i},t}(co);sl.prototype.controlText_="Audio Track";i.registerComponent("AudioTrackButton",sl);bo=function(n){function t(i,r){var o,s,u;f(this,t);o=r.rate;s=parseFloat(o,10);r.label=o;r.selected=s===1;r.selectable=!0;r.multiSelectable=!1;u=e(this,n.call(this,i,r));u.label=o;u.rate=s;u.on(i,"ratechange",u.update);return u}return o(t,n),t.prototype.handleClick=function(){n.prototype.handleClick.call(this);this.player().playbackRate(this.rate)},t.prototype.update=function(){this.selected(this.player().playbackRate()===this.rate)},t}(iu);bo.prototype.contentElType="button";i.registerComponent("PlaybackRateMenuItem",bo);hl=function(n){function t(i,r){f(this,t);var u=e(this,n.call(this,i,r));u.updateVisibility();u.updateLabel();u.on(i,"loadstart",u.updateVisibility);u.on(i,"ratechange",u.updateLabel);return u}return o(t,n),t.prototype.createEl=function(){var t=n.prototype.createEl.call(this);return this.labelEl_=p("div",{className:"vjs-playback-rate-value",innerHTML:"1x"}),t.appendChild(this.labelEl_),t},t.prototype.dispose=function(){this.labelEl_=null;n.prototype.dispose.call(this)},t.prototype.buildCSSClass=function(){return"vjs-playback-rate "+n.prototype.buildCSSClass.call(this)},t.prototype.buildWrapperCSSClass=function(){return"vjs-playback-rate "+n.prototype.buildWrapperCSSClass.call(this)},t.prototype.createMenu=function(){var i=new so(this.player()),t=this.playbackRates(),n;if(t)for(n=t.length-1;n>=0;n--)i.addChild(new bo(this.player(),{rate:t[n]+"x"}));return i},t.prototype.updateARIAAttributes=function(){this.el().setAttribute("aria-valuenow",this.player().playbackRate())},t.prototype.handleClick=function(){for(var r=this.player().playbackRate(),n=this.playbackRates(),i=n[0],t=0;t<n.length;t++)if(n[t]>r){i=n[t];break}this.player().playbackRate(i)},t.prototype.playbackRates=function(){return this.options_.playbackRates||this.options_.playerOptions&&this.options_.playerOptions.playbackRates},t.prototype.playbackRateSupported=function(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()&&this.playbackRates().length>0},t.prototype.updateVisibility=function(){this.playbackRateSupported()?this.removeClass("vjs-hidden"):this.addClass("vjs-hidden")},t.prototype.updateLabel=function(){this.playbackRateSupported()&&(this.labelEl_.innerHTML=this.player().playbackRate()+"x")},t}(ho);hl.prototype.controlText_="Playback Rate";i.registerComponent("PlaybackRateMenuButton",hl);cl=function(n){function t(){return f(this,t),e(this,n.apply(this,arguments))}return o(t,n),t.prototype.buildCSSClass=function(){return"vjs-spacer "+n.prototype.buildCSSClass.call(this)},t.prototype.createEl=function(){return n.prototype.createEl.call(this,"div",{className:this.buildCSSClass()})},t}(i);i.registerComponent("Spacer",cl);wb=function(n){function t(){return f(this,t),e(this,n.apply(this,arguments))}return o(t,n),t.prototype.buildCSSClass=function(){return"vjs-custom-control-spacer "+n.prototype.buildCSSClass.call(this)},t.prototype.createEl=function(){var t=n.prototype.createEl.call(this,{className:this.buildCSSClass()});return t.innerHTML="",t},t}(cl);i.registerComponent("CustomControlSpacer",wb);ll=function(n){function t(){return f(this,t),e(this,n.apply(this,arguments))}return o(t,n),t.prototype.createEl=function(){return n.prototype.createEl.call(this,"div",{className:"vjs-control-bar",dir:"ltr"})},t}(i);ll.prototype.options_={children:["playToggle","volumePanel","currentTimeDisplay","timeDivider","durationDisplay","progressControl","liveDisplay","remainingTimeDisplay","customControlSpacer","playbackRateMenuButton","chaptersButton","descriptionsButton","subsCapsButton","audioTrackButton","fullscreenToggle"]};i.registerComponent("ControlBar",ll);al=function(n){function t(i,r){f(this,t);var u=e(this,n.call(this,i,r));u.on(i,"error",u.open);return u}return o(t,n),t.prototype.buildCSSClass=function(){return"vjs-error-display "+n.prototype.buildCSSClass.call(this)},t.prototype.content=function(){var n=this.player().error();return n?this.localize(n.message):""},t}(kr);al.prototype.options_=a(kr.prototype.options_,{pauseOnOpen:!1,fillAlways:!0,temporary:!1,uncloseable:!0});i.registerComponent("ErrorDisplay",al);var vl="vjs-text-track-settings",bb=["#000","Black"],kb=["#00F","Blue"],db=["#0FF","Cyan"],gb=["#0F0","Green"],nk=["#F0F","Magenta"],tk=["#F00","Red"],ik=["#FFF","White"],rk=["#FF0","Yellow"],yl=["1","Opaque"],pl=["0.5","Semi-Transparent"],uk=["0","Transparent"],er={backgroundColor:{selector:".vjs-bg-color > select",id:"captions-background-color-%s",label:"Color",options:[bb,ik,tk,gb,kb,rk,nk,db]},backgroundOpacity:{selector:".vjs-bg-opacity > select",id:"captions-background-opacity-%s",label:"Transparency",options:[yl,pl,uk]},color:{selector:".vjs-fg-color > select",id:"captions-foreground-color-%s",label:"Color",options:[ik,bb,tk,gb,kb,rk,nk,db]},edgeStyle:{selector:".vjs-edge-style > select",id:"%s",label:"Text Edge Style",options:[["none","None"],["raised","Raised"],["depressed","Depressed"],["uniform","Uniform"],["dropshadow","Dropshadow"]]},fontFamily:{selector:".vjs-font-family > select",id:"captions-font-family-%s",label:"Font Family",options:[["proportionalSansSerif","Proportional Sans-Serif"],["monospaceSansSerif","Monospace Sans-Serif"],["proportionalSerif","Proportional Serif"],["monospaceSerif","Monospace Serif"],["casual","Casual"],["script","Script"],["small-caps","Small Caps"]]},fontPercent:{selector:".vjs-font-percent > select",id:"captions-font-size-%s",label:"Font Size",options:[["0.50","50%"],["0.75","75%"],["1.00","100%"],["1.25","125%"],["1.50","150%"],["1.75","175%"],["2.00","200%"],["3.00","300%"],["4.00","400%"]],"default":2,parser:function(n){return n==="1.00"?null:Number(n)}},textOpacity:{selector:".vjs-text-opacity > select",id:"captions-foreground-opacity-%s",label:"Transparency",options:[yl,pl]},windowColor:{selector:".vjs-window-color > select",id:"captions-window-color-%s",label:"Color"},windowOpacity:{selector:".vjs-window-opacity > select",id:"captions-window-opacity-%s",label:"Transparency",options:[uk,pl,yl]}};er.windowColor.options=er.backgroundColor.options;ek=function(n){function i(t,r){f(this,i);r.temporary=!1;var u=e(this,n.call(this,t,r));u.updateDisplay=s(u,u.updateDisplay);u.fill();u.hasBeenOpened_=u.hasBeenFilled_=!0;u.endDialog=p("p",{className:"vjs-control-text",textContent:u.localize("End of dialog window.")});u.el().appendChild(u.endDialog);u.setDefaults();r.persistTextTrackSettings===undefined&&(u.options_.persistTextTrackSettings=u.options_.playerOptions.persistTextTrackSettings);u.on(u.$(".vjs-done-button"),"click",function(){u.saveSettings();u.close()});u.on(u.$(".vjs-default-button"),"click",function(){u.setDefaults();u.updateDisplay()});return cr(er,function(n){u.on(u.$(n.selector),"change",u.updateDisplay)}),u.options_.persistTextTrackSettings&&u.restoreSettings(),u}return o(i,n),i.prototype.dispose=function(){this.endDialog=null;n.prototype.dispose.call(this)},i.prototype.createElSelect_=function(n){var f=this,e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"",t=arguments.length>2&&arguments[2]!==undefined?arguments[2]:"label",i=er[n],r=i.id.replace("%s",this.id_),u=[e,r].join(" ").trim();return["<"+t+' id="'+r+'" class="'+(t==="label"?"vjs-label":"")+'">',this.localize(i.label),"<\/"+t+">",'<select aria-labelledby="'+u+'">'].concat(i.options.map(function(n){var t=r+"-"+n[1].replace(/\W+/g,"");return['<option id="'+t+'" value="'+n[0]+'" ','aria-labelledby="'+u+" "+t+'">',f.localize(n[1]),"<\/option>"].join("")})).concat("<\/select>").join("")},i.prototype.createElFgColor_=function(){var n="captions-text-legend-"+this.id_;return['<fieldset class="vjs-fg-color vjs-track-setting">','<legend id="'+n+'">',this.localize("Text"),"<\/legend>",this.createElSelect_("color",n),'<span class="vjs-text-opacity vjs-opacity">',this.createElSelect_("textOpacity",n),"<\/span>","<\/fieldset>"].join("")},i.prototype.createElBgColor_=function(){var n="captions-background-"+this.id_;return['<fieldset class="vjs-bg-color vjs-track-setting">','<legend id="'+n+'">',this.localize("Background"),"<\/legend>",this.createElSelect_("backgroundColor",n),'<span class="vjs-bg-opacity vjs-opacity">',this.createElSelect_("backgroundOpacity",n),"<\/span>","<\/fieldset>"].join("")},i.prototype.createElWinColor_=function(){var n="captions-window-"+this.id_;return['<fieldset class="vjs-window-color vjs-track-setting">','<legend id="'+n+'">',this.localize("Window"),"<\/legend>",this.createElSelect_("windowColor",n),'<span class="vjs-window-opacity vjs-opacity">',this.createElSelect_("windowOpacity",n),"<\/span>","<\/fieldset>"].join("")},i.prototype.createElColors_=function(){return p("div",{className:"vjs-track-settings-colors",innerHTML:[this.createElFgColor_(),this.createElBgColor_(),this.createElWinColor_()].join("")})},i.prototype.createElFont_=function(){return p("div",{className:"vjs-track-settings-font",innerHTML:['<fieldset class="vjs-font-percent vjs-track-setting">',this.createElSelect_("fontPercent","","legend"),"<\/fieldset>",'<fieldset class="vjs-edge-style vjs-track-setting">',this.createElSelect_("edgeStyle","","legend"),"<\/fieldset>",'<fieldset class="vjs-font-family vjs-track-setting">',this.createElSelect_("fontFamily","","legend"),"<\/fieldset>"].join("")})},i.prototype.createElControls_=function(){var n=this.localize("restore all settings to the default values");return p("div",{className:"vjs-track-settings-controls",innerHTML:['<button class="vjs-default-button" title="'+n+'">',this.localize("Reset"),'<span class="vjs-control-text"> '+n+"<\/span>","<\/button>",'<button class="vjs-done-button">'+this.localize("Done")+"<\/button>"].join("")})},i.prototype.content=function(){return[this.createElColors_(),this.createElFont_(),this.createElControls_()]},i.prototype.label=function(){return this.localize("Caption Settings Dialog")},i.prototype.description=function(){return this.localize("Beginning of dialog window. Escape will cancel and close the window.")},i.prototype.buildCSSClass=function(){return n.prototype.buildCSSClass.call(this)+" vjs-text-track-settings"},i.prototype.getValues=function(){var n=this;return ftt(er,function(t,i,r){var u=rft(n.$(i.selector),i.parser);return u!==undefined&&(t[r]=u),t},{})},i.prototype.setValues=function(n){var t=this;cr(er,function(i,r){uft(t.$(i.selector),n[r],i.parser)})},i.prototype.setDefaults=function(){var n=this;cr(er,function(t){var i=t.hasOwnProperty("default")?t.default:0;n.$(t.selector).selectedIndex=i})},i.prototype.restoreSettings=function(){var n=void 0;try{n=JSON.parse(t.localStorage.getItem(vl))}catch(i){h.warn(i)}n&&this.setValues(n)},i.prototype.saveSettings=function(){if(this.options_.persistTextTrackSettings){var n=this.getValues();try{Object.keys(n).length?t.localStorage.setItem(vl,JSON.stringify(n)):t.localStorage.removeItem(vl)}catch(i){h.warn(i)}}},i.prototype.updateDisplay=function(){var n=this.player_.getChild("textTrackDisplay");n&&n.updateDisplay()},i.prototype.conditionalBlur_=function(){this.previouslyActiveEl_=null;this.off(u,"keydown",this.handleKeyDown);var n=this.player_.controlBar,t=n&&n.subsCapsButton,i=n&&n.captionsButton;t?t.focus():i&&i.focus()},i}(kr);i.registerComponent("TextTrackSettings",ek);ok=function(n){function i(r,u){var s,h,o;if(f(this,i),s=u.ResizeObserver||t.ResizeObserver,u.ResizeObserver===null&&(s=!1),h=a({createEl:!s},u),o=e(this,n.call(this,r,h)),o.ResizeObserver=u.ResizeObserver||t.ResizeObserver,o.loadListener_=null,o.resizeObserver_=null,o.debouncedHandler_=ltt(function(){o.resizeHandler()},100,!1,r),s)o.resizeObserver_=new o.ResizeObserver(o.debouncedHandler_),o.resizeObserver_.observe(r.el());else{o.loadListener_=function(){o.el_.contentWindow&&bt(o.el_.contentWindow,"resize",o.debouncedHandler_);o.off("load",o.loadListener_)};o.on("load",o.loadListener_)}return o}return o(i,n),i.prototype.createEl=function(){return n.prototype.createEl.call(this,"iframe",{className:"vjs-resize-manager"})},i.prototype.resizeHandler=function(){this.player_.trigger("playerresize")},i.prototype.dispose=function(){this.resizeObserver_&&(this.player_.el()&&this.resizeObserver_.unobserve(this.player_.el()),this.resizeObserver_.disconnect());this.el_&&this.el_.contentWindow&&st(this.el_.contentWindow,"resize",this.debouncedHandler_);this.loadListener_&&this.off("load",this.loadListener_);this.ResizeObserver=null;this.resizeObserver=null;this.debouncedHandler_=null;this.loadListener_=null},i}(i);i.registerComponent("ResizeManager",ok);var wl=function(n){var f=n.el(),i,r;if(f.hasAttribute("src"))return n.triggerSourceset(f.src),!0;var u=n.$$("source"),t=[],e="";if(!u.length)return!1;for(i=0;i<u.length;i++)r=u[i].src,r&&t.indexOf(r)===-1&&t.push(r);return t.length?(t.length===1&&(e=t[0]),n.triggerSourceset(e),!0):!1},fft=Object.defineProperty({},"innerHTML",{get:function(){return this.cloneNode(!0).innerHTML},set:function(n){var i=u.createElement(this.nodeName.toLowerCase()),r;for(i.innerHTML=n,r=u.createDocumentFragment();i.childNodes.length;)r.appendChild(i.childNodes[0]);return this.innerText="",t.Element.prototype.appendChild.call(this,r),this.innerHTML}}),sk=function(n,t){for(var i={},r=0;r<n.length;r++)if(i=Object.getOwnPropertyDescriptor(n[r],t),i&&i.set&&i.get)break;return i.enumerable=!0,i.configurable=!0,i},eft=function(n){return sk([n.el(),t.HTMLMediaElement.prototype,t.Element.prototype,fft],"innerHTML")},hk=function(n){var t=n.el();if(!t.resetSourceWatch_){var i={},r=eft(n),u=function(i){return function(){for(var e,u=arguments.length,f=Array(u),r=0;r<u;r++)f[r]=arguments[r];return e=i.apply(t,f),wl(n),e}};["append","appendChild","insertAdjacentHTML"].forEach(function(n){t[n]&&(i[n]=t[n],t[n]=u(i[n]))});Object.defineProperty(t,"innerHTML",a(r,{set:u(r.set)}));t.resetSourceWatch_=function(){t.resetSourceWatch_=null;Object.keys(i).forEach(function(n){t[n]=i[n]});Object.defineProperty(t,"innerHTML",r)};n.one("sourceset",t.resetSourceWatch_)}},oft=Object.defineProperty({},"src",{get:function(){return this.hasAttribute("src")?wp(t.Element.prototype.getAttribute.call(this,"src")):""},set:function(n){return t.Element.prototype.setAttribute.call(this,"src",n),n}}),sft=function(n){return sk([n.el(),t.HTMLMediaElement.prototype,oft],"src")},hft=function(n){var t;if(n.featuresSourceset&&(t=n.el(),!t.resetSourceset_)){var i=sft(n),r=t.setAttribute,u=t.load;Object.defineProperty(t,"src",a(i,{set:function(r){var u=i.set.call(t,r);return n.triggerSourceset(t.src),u}}));t.setAttribute=function(i,u){var f=r.call(t,i,u);return/src/i.test(i)&&n.triggerSourceset(t.src),f};t.load=function(){var i=u.call(t);return wl(n)||(n.triggerSourceset(""),hk(n)),i};t.currentSrc?n.triggerSourceset(t.currentSrc):wl(n)||hk(n);t.resetSourceset_=function(){t.resetSourceset_=null;t.load=u;t.setAttribute=r;Object.defineProperty(t,"src",i);t.resetSourceWatch_&&t.resetSourceWatch_()}}},cft=ds(["Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.\n            This may prevent text tracks from loading."],["Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.\n            This may prevent text tracks from loading."]),r=function(n){function i(t,r){var o,p,s;f(this,i);var u=e(this,n.call(this,t,r)),c=t.source,l=!1;if(c&&(u.el_.currentSrc!==c.src||t.tag&&t.tag.initNetworkState_===3)?u.setSource(c):u.handleLateInit_(u.el_),t.enableSourceset&&u.setupSourcesetHandling_(),u.el_.hasChildNodes()){for(var v=u.el_.childNodes,y=v.length,a=[];y--;)o=v[y],p=o.nodeName.toLowerCase(),p==="track"&&(u.featuresNativeTextTracks?(u.remoteTextTrackEls().addTrackElement_(o),u.remoteTextTracks().addTrack(o.track),u.textTracks().addTrack(o.track),l||u.el_.hasAttribute("crossorigin")||!we(o.src)||(l=!0)):a.push(o));for(s=0;s<a.length;s++)u.el_.removeChild(a[s])}return u.proxyNativeTracks_(),u.featuresNativeTextTracks&&l&&h.warn(ks(cft)),u.restoreMetadataTracksInIOSNativePlayer_(),(ae||lh||tp)&&t.nativeControlsForTouch===!0&&u.setControls(!0),u.proxyWebkitFullscreen_(),u.triggerReady(),u}return o(i,n),i.prototype.dispose=function(){this.el_&&this.el_.resetSourceset_&&this.el_.resetSourceset_();i.disposeMediaElement(this.el_);this.options_=null;n.prototype.dispose.call(this)},i.prototype.setupSourcesetHandling_=function(){hft(this)},i.prototype.restoreMetadataTracksInIOSNativePlayer_=function(){var n=this.textTracks(),r=void 0,t=function(){var t,i;for(r=[],t=0;t<n.length;t++)i=n[t],i.kind==="metadata"&&r.push({track:i,storedMode:i.mode})},i;t();n.addEventListener("change",t);this.on("dispose",function(){return n.removeEventListener("change",t)});i=function i(){for(var t,u=0;u<r.length;u++)t=r[u],t.track.mode==="disabled"&&t.track.mode!==t.storedMode&&(t.track.mode=t.storedMode);n.removeEventListener("change",i)};this.on("webkitbeginfullscreen",function(){n.removeEventListener("change",t);n.removeEventListener("change",i);n.addEventListener("change",i)});this.on("webkitendfullscreen",function(){n.removeEventListener("change",t);n.addEventListener("change",t);n.removeEventListener("change",i)})},i.prototype.overrideNative_=function(n,t){var r=this,i;t===this["featuresNative"+n+"Tracks"]&&(i=n.toLowerCase(),this[i+"TracksListeners_"]&&Object.keys(this[i+"TracksListeners_"]).forEach(function(n){var t=r.el()[i+"Tracks"];t.removeEventListener(n,r[i+"TracksListeners_"][n])}),this["featuresNative"+n+"Tracks"]=!t,this[i+"TracksListeners_"]=null,this.proxyNativeTracksForType_(i))},i.prototype.overrideNativeAudioTracks=function(n){this.overrideNative_("Audio",n)},i.prototype.overrideNativeVideoTracks=function(n){this.overrideNative_("Video",n)},i.prototype.proxyNativeTracksForType_=function(n){var e=this,r=ht[n],i=this.el()[r.getterName],t=this[r.getterName](),u,f;if(this["featuresNative"+r.capitalName+"Tracks"]&&i&&i.addEventListener){u={change:function(){t.trigger({type:"change",target:t,currentTarget:t,srcElement:t})},addtrack:function(n){t.addTrack(n.track)},removetrack:function(n){t.removeTrack(n.track)}};f=function(){for(var f,r,u=[],n=0;n<t.length;n++){for(f=!1,r=0;r<i.length;r++)if(i[r]===t[n]){f=!0;break}f||u.push(t[n])}while(u.length)t.removeTrack(u.shift())};this[r.getterName+"Listeners_"]=u;Object.keys(u).forEach(function(n){var t=u[n];i.addEventListener(n,t);e.on("dispose",function(){return i.removeEventListener(n,t)})});this.on("loadstart",f);this.on("dispose",function(){return e.off("loadstart",f)})}},i.prototype.proxyNativeTracks_=function(){var n=this;ht.names.forEach(function(t){n.proxyNativeTracksForType_(t)})},i.prototype.createEl=function(){var n=this.options_.tag,e,h,o,s,r,t,f;for(n&&(this.options_.playerElIngest||this.movingMediaElementInDOM)||(n?(e=n.cloneNode(!0),n.parentNode&&n.parentNode.insertBefore(e,n),i.disposeMediaElement(n),n=e):(n=u.createElement("video"),h=this.options_.tag&&ri(this.options_.tag),o=a({},h),ae&&this.options_.nativeControlsForTouch===!0||delete o.controls,gv(n,y(o,{id:this.options_.techId,"class":"vjs-tech"}))),n.playerId=this.options_.playerId),typeof this.options_.preload!="undefined"&&gu(n,"preload",this.options_.preload),s=["loop","muted","playsinline","autoplay"],r=0;r<s.length;r++)t=s[r],f=this.options_[t],typeof f!="undefined"&&(f?gu(n,t,t):he(n,t),n[t]=f);return n},i.prototype.handleLateInit_=function(n){var i,r,u,t;if(n.networkState!==0&&n.networkState!==3){if(n.readyState===0){i=!1;r=function(){i=!0};this.on("loadstart",r);u=function(){i||this.trigger("loadstart")};this.on("loadedmetadata",u);this.ready(function(){this.off("loadstart",r);this.off("loadedmetadata",u);i||this.trigger("loadstart")});return}t=["loadstart"];t.push("loadedmetadata");n.readyState>=2&&t.push("loadeddata");n.readyState>=3&&t.push("canplay");n.readyState>=4&&t.push("canplaythrough");this.ready(function(){t.forEach(function(n){this.trigger(n)},this)})}},i.prototype.setCurrentTime=function(n){try{this.el_.currentTime=n}catch(t){h(t,"Video is not ready. (Video.js)")}},i.prototype.duration=function(){var n=this,t;if(this.el_.duration===Infinity&&di&&li&&this.el_.currentTime===0){t=function t(){n.el_.currentTime>0&&(n.el_.duration===Infinity&&n.trigger("durationchange"),n.off("timeupdate",t))};this.on("timeupdate",t);return NaN}return this.el_.duration||NaN},i.prototype.width=function(){return this.el_.offsetWidth},i.prototype.height=function(){return this.el_.offsetHeight},i.prototype.proxyWebkitFullscreen_=function(){var i=this,n,t;if("webkitDisplayingFullscreen"in this.el_){n=function(){this.trigger("fullscreenchange",{isFullscreen:!1})};t=function(){if("webkitPresentationMode"in this.el_&&this.el_.webkitPresentationMode!=="picture-in-picture"){this.one("webkitendfullscreen",n);this.trigger("fullscreenchange",{isFullscreen:!0})}};this.on("webkitbeginfullscreen",t);this.on("dispose",function(){i.off("webkitbeginfullscreen",t);i.off("webkitendfullscreen",n)})}},i.prototype.supportsFullScreen=function(){if(typeof this.el_.webkitEnterFullScreen=="function"){var n=t.navigator&&t.navigator.userAgent||"";if(/Android/.test(n)||!/Chrome|Mac OS X 10.5/.test(n))return!0}return!1},i.prototype.enterFullScreen=function(){var n=this.el_;n.paused&&n.networkState<=n.HAVE_METADATA?(this.el_.play(),this.setTimeout(function(){n.pause();n.webkitEnterFullScreen()},0)):n.webkitEnterFullScreen()},i.prototype.exitFullScreen=function(){this.el_.webkitExitFullScreen()},i.prototype.src=function(n){if(n===undefined)return this.el_.src;this.setSrc(n)},i.prototype.reset=function(){i.resetMediaElement(this.el_)},i.prototype.currentSrc=function(){return this.currentSource_?this.currentSource_.src:this.el_.currentSrc},i.prototype.setControls=function(n){this.el_.controls=!!n},i.prototype.addTextTrack=function(t,i,r){return this.featuresNativeTextTracks?this.el_.addTextTrack(t,i,r):n.prototype.addTextTrack.call(this,t,i,r)},i.prototype.createRemoteTextTrack=function(t){if(!this.featuresNativeTextTracks)return n.prototype.createRemoteTextTrack.call(this,t);var i=u.createElement("track");return t.kind&&(i.kind=t.kind),t.label&&(i.label=t.label),(t.language||t.srclang)&&(i.srclang=t.language||t.srclang),t.default&&(i.default=t.default),t.id&&(i.id=t.id),t.src&&(i.src=t.src),i},i.prototype.addRemoteTextTrack=function(t,i){var r=n.prototype.addRemoteTextTrack.call(this,t,i);return this.featuresNativeTextTracks&&this.el().appendChild(r),r},i.prototype.removeRemoteTextTrack=function(t){if(n.prototype.removeRemoteTextTrack.call(this,t),this.featuresNativeTextTracks)for(var i=this.$$("track"),r=i.length;r--;)(t===i[r]||t===i[r].track)&&this.el().removeChild(i[r])},i.prototype.getVideoPlaybackQuality=function(){if(typeof this.el().getVideoPlaybackQuality=="function")return this.el().getVideoPlaybackQuality();var n={};return typeof this.el().webkitDroppedFrameCount!="undefined"&&typeof this.el().webkitDecodedFrameCount!="undefined"&&(n.droppedVideoFrames=this.el().webkitDroppedFrameCount,n.totalVideoFrames=this.el().webkitDecodedFrameCount),t.performance&&typeof t.performance.now=="function"?n.creationTime=t.performance.now():t.performance&&t.performance.timing&&typeof t.performance.timing.navigationStart=="number"&&(n.creationTime=t.Date.now()-t.performance.timing.navigationStart),n},i}(l);lr()&&(r.TEST_VID=u.createElement("video"),yf=u.createElement("track"),yf.kind="captions",yf.srclang="en",yf.label="English",r.TEST_VID.appendChild(yf));r.isSupported=function(){try{r.TEST_VID.volume=.5}catch(n){return!1}return!!(r.TEST_VID&&r.TEST_VID.canPlayType)};r.canPlayType=function(n){return r.TEST_VID.canPlayType(n)};r.canPlaySource=function(n){return r.canPlayType(n.type)};r.canControlVolume=function(){try{var n=r.TEST_VID.volume;return r.TEST_VID.volume=n/2+.1,n!==r.TEST_VID.volume}catch(t){return!1}};r.canMuteVolume=function(){try{var n=r.TEST_VID.muted;return r.TEST_VID.muted=!n,r.TEST_VID.muted?gu(r.TEST_VID,"muted","muted"):he(r.TEST_VID,"muted","muted"),n!==r.TEST_VID.muted}catch(t){return!1}};r.canControlPlaybackRate=function(){if(di&&li&&rp<58)return!1;try{var n=r.TEST_VID.playbackRate;return r.TEST_VID.playbackRate=n/2+.1,n!==r.TEST_VID.playbackRate}catch(t){return!1}};r.canOverrideAttributes=function(){try{var n=function(){};Object.defineProperty(u.createElement("video"),"src",{get:n,set:n});Object.defineProperty(u.createElement("audio"),"src",{get:n,set:n});Object.defineProperty(u.createElement("video"),"innerHTML",{get:n,set:n});Object.defineProperty(u.createElement("audio"),"innerHTML",{get:n,set:n})}catch(t){return!1}return!0};r.supportsNativeTextTracks=function(){return ep||ui&&li};r.supportsNativeVideoTracks=function(){return!!(r.TEST_VID&&r.TEST_VID.videoTracks)};r.supportsNativeAudioTracks=function(){return!!(r.TEST_VID&&r.TEST_VID.audioTracks)};r.Events=["loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","progress","play","pause","ratechange","resize","volumechange"];r.prototype.featuresVolumeControl=r.canControlVolume();r.prototype.featuresMuteControl=r.canMuteVolume();r.prototype.featuresPlaybackRate=r.canControlPlaybackRate();r.prototype.featuresSourceset=r.canOverrideAttributes();r.prototype.movingMediaElementInDOM=!ui;r.prototype.featuresFullscreenResize=!0;r.prototype.featuresProgressEvents=!0;r.prototype.featuresTimeupdateEvents=!0;r.prototype.featuresNativeTextTracks=r.supportsNativeTextTracks();r.prototype.featuresNativeVideoTracks=r.supportsNativeVideoTracks();r.prototype.featuresNativeAudioTracks=r.supportsNativeAudioTracks();bl=r.TEST_VID&&r.TEST_VID.constructor.prototype.canPlayType;ck=/^application\/(?:x-|vnd\.apple\.)mpegurl/i;r.patchCanPlayType=function(){ah>=4&&!ip&&!li&&(r.TEST_VID.constructor.prototype.canPlayType=function(n){return n&&ck.test(n)?"maybe":bl.call(this,n)})};r.unpatchCanPlayType=function(){var n=r.TEST_VID.constructor.prototype.canPlayType;return r.TEST_VID.constructor.prototype.canPlayType=bl,n};r.patchCanPlayType();r.disposeMediaElement=function(n){if(n){for(n.parentNode&&n.parentNode.removeChild(n);n.hasChildNodes();)n.removeChild(n.firstChild);n.removeAttribute("src");typeof n.load=="function"&&function(){try{n.load()}catch(t){}}()}};r.resetMediaElement=function(n){if(n){for(var t=n.querySelectorAll("source"),i=t.length;i--;)n.removeChild(t[i]);n.removeAttribute("src");typeof n.load=="function"&&function(){try{n.load()}catch(t){}}()}};["muted","defaultMuted","autoplay","controls","loop","playsinline"].forEach(function(n){r.prototype[n]=function(){return this.el_[n]||this.el_.hasAttribute(n)}});["muted","defaultMuted","autoplay","loop","playsinline"].forEach(function(n){r.prototype["set"+v(n)]=function(t){this.el_[n]=t;t?this.el_.setAttribute(n,n):this.el_.removeAttribute(n)}});["paused","currentTime","buffered","volume","poster","preload","error","seeking","seekable","ended","playbackRate","defaultPlaybackRate","played","networkState","readyState","videoWidth","videoHeight"].forEach(function(n){r.prototype[n]=function(){return this.el_[n]}});["volume","src","poster","preload","playbackRate","defaultPlaybackRate"].forEach(function(n){r.prototype["set"+v(n)]=function(t){this.el_[n]=t}});["pause","load","play"].forEach(function(n){r.prototype[n]=function(){return this.el_[n]()}});l.withSourceHandlers(r);r.nativeSourceHandler={};r.nativeSourceHandler.canPlayType=function(n){try{return r.TEST_VID.canPlayType(n)}catch(t){return""}};r.nativeSourceHandler.canHandleSource=function(n){if(n.type)return r.nativeSourceHandler.canPlayType(n.type);if(n.src){var t=nc(n.src);return r.nativeSourceHandler.canPlayType("video/"+t)}return""};r.nativeSourceHandler.handleSource=function(n,t){t.setSrc(n.src)};r.nativeSourceHandler.dispose=function(){};r.registerSourceHandler(r.nativeSourceHandler);l.registerTech("Html5",r);var lft=ds(["\n        Using the tech directly can be dangerous. I hope you know what you're doing.\n        See https://github.com/videojs/video.js/issues/2617 for more info.\n      "],["\n        Using the tech directly can be dangerous. I hope you know what you're doing.\n        See https://github.com/videojs/video.js/issues/2617 for more info.\n      "]),lk=["progress","abort","suspend","emptied","stalled","loadedmetadata","loadeddata","timeupdate","resize","volumechange","texttrackchange"],kl={canplay:"CanPlay",canplaythrough:"CanPlayThrough",playing:"Playing",seeked:"Seeked"},w=function(n){function r(t,i,u){var h,s,o,c,v,l,p;if(f(this,r),t.id=t.id||i.id||"vjs_video_"+ki(),i=y(r.getTagSettings(t),i),i.initChildren=!1,i.createEl=!1,i.evented=!1,i.reportTouchActivity=!1,!i.language)if(typeof t.closest=="function")h=t.closest("[lang]"),h&&h.getAttribute&&(i.language=h.getAttribute("lang"));else for(s=t;s&&s.nodeType===1;){if(ri(s).hasOwnProperty("lang")){i.language=s.getAttribute("lang");break}s=s.parentNode}if(o=e(this,n.call(this,null,i,u)),o.isPosterFromTech_=!1,o.queuedCallbacks_=[],o.isReady_=!1,o.hasStarted_=!1,o.userActive_=!1,!o.options_||!o.options_.techOrder||!o.options_.techOrder.length)throw new Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?");o.tag=t;o.tagAttributes=t&&ri(t);o.language(o.options_.language);i.languages?(c={},Object.getOwnPropertyNames(i.languages).forEach(function(n){c[n.toLowerCase()]=i.languages[n]}),o.languages_=c):o.languages_=r.prototype.options_.languages;o.cache_={};o.poster_=i.poster||"";o.controls_=!!i.controls;o.cache_.lastVolume=1;t.controls=!1;t.removeAttribute("controls");t.hasAttribute("autoplay")?o.options_.autoplay=!0:o.autoplay(o.options_.autoplay);o.scrubbing_=!1;o.el_=o.createEl();o.cache_.lastPlaybackRate=o.defaultPlaybackRate();hh(o,{eventBusKey:"el_"});v=a(o.options_);i.plugins&&(l=i.plugins,Object.keys(l).forEach(function(n){if(typeof this[n]=="function")this[n](l[n]);else throw new Error('plugin "'+n+'" does not exist');},o));o.options_.playerOptions=v;o.middleware_=[];o.initChildren();o.isAudio(t.nodeName.toLowerCase()==="audio");o.controls()?o.addClass("vjs-controls-enabled"):o.addClass("vjs-controls-disabled");o.el_.setAttribute("role","region");o.isAudio()?o.el_.setAttribute("aria-label",o.localize("Audio Player")):o.el_.setAttribute("aria-label",o.localize("Video Player"));o.isAudio()&&o.addClass("vjs-audio");o.flexNotSupported_()&&o.addClass("vjs-no-flex");ui||o.addClass("vjs-workinghover");r.players[o.id_]=o;p=sv.split(".")[0];o.addClass("vjs-v"+p);o.userActive(!0);o.reportUserActivity();o.one("play",o.listenForUserActivity_);o.on("fullscreenchange",o.handleFullscreenChange_);o.on("stageclick",o.handleStageClick_);return o.stopThePlayerHPIC(),o.changingSrc_=!1,o.playWaitingForReady_=!1,o.playOnLoadstart_=null,o.isRunningForConstruct=!1,o}return o(r,n),r.prototype.stopThePlayerHPIC=function(){var n=this;this.on("play",function(){gts.$(".m-carousel").hasClass("expander-is-open")?n.pause():""})},r.prototype.dispose=function(){this.trigger("dispose");this.off("dispose");this.styleEl_&&this.styleEl_.parentNode&&(this.styleEl_.parentNode.removeChild(this.styleEl_),this.styleEl_=null);r.players[this.id_]=null;this.tag&&this.tag.player&&(this.tag.player=null);this.el_&&this.el_.player&&(this.el_.player=null);this.tech_&&(this.tech_.dispose(),this.isPosterFromTech_=!1,this.poster_="");this.playerElIngest_&&(this.playerElIngest_=null);this.tag&&(this.tag=null);but(this);n.prototype.dispose.call(this)},r.prototype.createEl=function(){var i=this.tag,r=void 0,s=this.playerElIngest_=i.parentNode&&i.parentNode.hasAttribute&&i.parentNode.hasAttribute("data-vjs-player"),f=this.tag.tagName.toLowerCase()==="video-js",e,l,a,h,o,c;if(s?r=this.el_=i.parentNode:f||(r=this.el_=n.prototype.createEl.call(this,"div")),e=ri(i),f){for(r=this.el_=i,i=this.tag=u.createElement("video");r.children.length;)i.appendChild(r.firstChild);ar(r,"video-js")||bi(r,"video-js");r.appendChild(i);s=this.playerElIngest_=r;Object.keys(r).forEach(function(n){i[n]=r[n]})}for(i.setAttribute("tabindex","-1"),up&&i.setAttribute("role","application"),i.removeAttribute("width"),i.removeAttribute("height"),Object.getOwnPropertyNames(e).forEach(function(n){f&&n==="class"||r.setAttribute(n,e[n]);f&&i.setAttribute(n,e[n])}),i.playerId=i.id,i.id+="_html5_api",i.className="vjs-tech",i.player=r.player=this,this.addClass("vjs-paused"),t.VIDEOJS_NO_DYNAMIC_STYLE!==!0&&(this.styleEl_=vy("vjs-styles-dimensions"),l=hi(".vjs-styles-defaults"),a=hi("head")),this.width(this.options_.width),this.height(this.options_.height),this.fluid(this.options_.fluid),this.aspectRatio(this.options_.aspectRatio),h=i.getElementsByTagName("a"),o=0;o<h.length;o++)c=h.item(o),bi(c,"vjs-hidden"),c.setAttribute("hidden","hidden");return i.initNetworkState_=i.networkState,i.parentNode&&!s&&i.parentNode.insertBefore(r,i),se(i,r),this.children_.unshift(i),this.el_.setAttribute("lang",this.language_),this.el_=r,r},r.prototype.width=function(n){return this.dimension("width",n)},r.prototype.height=function(n){return this.dimension("height",n)},r.prototype.dimension=function(n,t){var i=n+"_",r;if(t===undefined)return this[i]||0;if(t===""){this[i]=undefined;this.updateStyleEl_();return}if(r=parseFloat(t),isNaN(r)){h.error('Improper value "'+t+'" supplied for for '+n);return}this[i]=r;this.updateStyleEl_()},r.prototype.fluid=function(n){if(n===undefined)return!!this.fluid_;this.fluid_=!!n;n?this.addClass("vjs-fluid"):this.removeClass("vjs-fluid");this.updateStyleEl_()},r.prototype.aspectRatio=function(n){if(n===undefined)return this.aspectRatio_;if(!/^\d+\:\d+$/.test(n))throw new Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.");this.aspectRatio_=n;this.fluid(!0);this.updateStyleEl_()},r.prototype.updateStyleEl_=function(){var f,i;if(t.VIDEOJS_NO_DYNAMIC_STYLE===!0){var e=typeof this.width_=="number"?this.width_:this.options_.width,o=typeof this.height_=="number"?this.height_:this.options_.height,r=this.tech_&&this.tech_.el();r&&(e>=0&&(r.width=e),o>=0&&(r.height=o));return}var u=void 0,s=void 0,h=void 0,n=void 0;h=this.aspectRatio_!==undefined&&this.aspectRatio_!=="auto"?this.aspectRatio_:this.videoWidth()>0?this.videoWidth()+":"+this.videoHeight():"16:9";f=h.split(":");i=f[1]/f[0];u=this.width_!==undefined?this.width_:this.height_!==undefined?this.height_/i:this.videoWidth()||300;s=this.height_!==undefined?this.height_:u*i;n=/^[^a-zA-Z]/.test(this.id())?"dimensions-"+this.id():this.id()+"-dimensions";this.addClass(n);ctt(this.styleEl_,"\n      ."+n+" {\n        width: "+u+"px;\n        height: "+s+"px;\n      }\n\n      ."+n+".vjs-fluid {\n        padding-top: "+i*100+"%;\n      }\n    ")},r.prototype.loadTech_=function(n,t){var i=this,r,e,o,u,f;if(this.tech_&&this.unloadTech_(),r=v(n),e=n.charAt(0).toLowerCase()+n.slice(1),r!=="Html5"&&this.tag&&(l.getTech("Html5").disposeMediaElement(this.tag),this.tag.player=null,this.tag=null),this.techName_=r,this.isReady_=!1,o=typeof this.autoplay()=="string"?!1:this.autoplay(),u={source:t,autoplay:o,nativeControlsForTouch:this.options_.nativeControlsForTouch,playerId:this.id(),techId:this.id()+"_"+r+"_api",playsinline:this.options_.playsinline,preload:this.options_.preload,loop:this.options_.loop,muted:this.options_.muted,poster:this.poster(),language:this.language(),playerElIngest:this.playerElIngest_||!1,"vtt.js":this.options_["vtt.js"],canOverridePoster:!!this.options_.techCanOverridePoster,enableSourceset:this.options_.enableSourceset,controls:this.options_.controls},ut.names.forEach(function(n){var t=ut[n];u[t.getterName]=i[t.privateName]}),y(u,this.options_[r]),y(u,this.options_[e]),y(u,this.options_[n.toLowerCase()]),this.tag&&(u.tag=this.tag),t&&t.src===this.cache_.src&&this.cache_.currentTime>0&&(u.startTime=this.cache_.currentTime),f=l.getTech(n),!f)throw new Error("No Tech named '"+r+"' exists! '"+r+"' should be registered using videojs.registerTech()'");this.tech_=new f(u);this.tech_.ready(s(this,this.handleTechReady_),!0);lp.jsonToTextTracks(this.textTracksJson_||[],this.tech_);lk.forEach(function(n){i.on(i.tech_,n,i["handleTech"+v(n)+"_"])});Object.keys(kl).forEach(function(n){i.on(i.tech_,n,function(t){if(i.tech_.playbackRate&&i.tech_.playbackRate()===0&&i.tech_.seeking()){i.queuedCallbacks_.push({callback:i["handleTech"+kl[n]+"_"].bind(i),event:t});return}i["handleTech"+kl[n]+"_"](t)})});this.on(this.tech_,"loadstart",this.handleTechLoadStart_);this.on(this.tech_,"sourceset",this.handleTechSourceset_);this.on(this.tech_,"waiting",this.handleTechWaiting_);this.on(this.tech_,"ended",this.handleTechEnded_);this.on(this.tech_,"seeking",this.handleTechSeeking_);this.on(this.tech_,"play",this.handleTechPlay_);this.on(this.tech_,"firstplay",this.handleTechFirstPlay_);this.on(this.tech_,"pause",this.handleTechPause_);this.on(this.tech_,"durationchange",this.handleTechDurationChange_);this.on(this.tech_,"fullscreenchange",this.handleTechFullscreenChange_);this.on(this.tech_,"error",this.handleTechError_);this.on(this.tech_,"loadedmetadata",this.updateStyleEl_);this.on(this.tech_,"posterchange",this.handleTechPosterChange_);this.on(this.tech_,"textdata",this.handleTechTextData_);this.on(this.tech_,"ratechange",this.handleTechRateChange_);this.usingNativeControls(this.techGet_("controls"));this.controls()&&!this.usingNativeControls()&&this.addTechControlsListeners_();this.tech_.el().parentNode===this.el()||r==="Html5"&&this.tag||se(this.tech_.el(),this.el());this.tag&&(this.tag.player=null,this.tag=null)},r.prototype.unloadTech_=function(){var n=this;ut.names.forEach(function(t){var i=ut[t];n[i.privateName]=n[i.getterName]()});this.textTracksJson_=lp.textTracksToJson(this.tech_);this.isReady_=!1;this.tech_.dispose();this.tech_=!1;this.isPosterFromTech_&&(this.poster_="",this.trigger("posterchange"));this.isPosterFromTech_=!1},r.prototype.tech=function(n){return n===undefined&&h.warn(ks(lft)),this.tech_},r.prototype.addTechControlsListeners_=function(){this.removeTechControlsListeners_();this.on(this.tech_,"mousedown",this.handleTechClick_);this.on(this.tech_,"dblclick",this.handleTechDoubleClick_);this.on(this.tech_,"touchstart",this.handleTechTouchStart_);this.on(this.tech_,"touchmove",this.handleTechTouchMove_);this.on(this.tech_,"touchend",this.handleTechTouchEnd_);this.on(this.tech_,"tap",this.handleTechTap_)},r.prototype.removeTechControlsListeners_=function(){this.off(this.tech_,"tap",this.handleTechTap_);this.off(this.tech_,"touchstart",this.handleTechTouchStart_);this.off(this.tech_,"touchmove",this.handleTechTouchMove_);this.off(this.tech_,"touchend",this.handleTechTouchEnd_);this.off(this.tech_,"mousedown",this.handleTechClick_);this.off(this.tech_,"dblclick",this.handleTechDoubleClick_)},r.prototype.handleTechReady_=function(){this.triggerReady();gts.$(window).trigger("videoPlayerIsReady.RENO");this.cache_.volume&&this.techCall_("setVolume",this.cache_.volume);this.handleTechPosterChange_();this.handleTechDurationChange_()},r.prototype.handleTechLoadStart_=function(){this.removeClass("vjs-ended");this.removeClass("vjs-seeking");this.error(null);this.paused()?(this.hasStarted(!1),this.trigger("loadstart")):(this.trigger("loadstart"),this.trigger("firstplay"));this.manualAutoplay_(this.autoplay())},r.prototype.manualAutoplay_=function(n){var i=this,r,t;if(this.tech_&&typeof n=="string")return(r=function(){var t=i.muted(),n;if(i.muted(!0),n=i.play(),n&&n.then&&n.catch)return n.catch(function(){i.muted(t)})},t=void 0,n==="any"?(t=this.play(),t&&t.then&&t.catch&&t.catch(function(){return r()})):t=n==="muted"?r():this.play(),!t||!t.then||!t.catch)?void 0:t.then(function(){i.trigger({type:"autoplay-success",autoplay:n})}).catch(function(){i.trigger({type:"autoplay-failure",autoplay:n})})},r.prototype.updateSourceCaches_=function(){var i=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"",n=i,r="",u,t;typeof n!="string"&&(n=i.src,r=i.type);this.cache_.source=this.cache_.source||{};this.cache_.sources=this.cache_.sources||[];n&&!r&&(r=gut(this,n));this.cache_.source=a({},i,{src:n,type:r});var f=this.cache_.sources.filter(function(t){return t.src&&t.src===n}),e=[],o=this.$$("source"),s=[];for(u=0;u<o.length;u++)t=ri(o[u]),e.push(t),t.src&&t.src===n&&s.push(t.src);s.length&&!f.length?this.cache_.sources=e:f.length||(this.cache_.sources=[this.cache_.source]);this.cache_.src=n},r.prototype.handleTechSourceset_=function(n){var t=this,i;if(!this.changingSrc_&&(this.updateSourceCaches_(n.src),!n.src)){i=function i(n){n.type!=="sourceset"&&t.updateSourceCaches_(t.techGet_("currentSrc"));t.tech_.off(["sourceset","loadstart"],i)};this.tech_.one(["sourceset","loadstart"],i)}this.trigger({src:n.src,type:"sourceset"})},r.prototype.hasStarted=function(n){if(n===undefined)return this.hasStarted_;n!==this.hasStarted_&&(this.hasStarted_=n,this.hasStarted_?(this.addClass("vjs-has-started"),this.trigger("firstplay"),gts.$(window).trigger("videoPlayerHasStarted.RENO")):this.removeClass("vjs-has-started"))},r.prototype.handleTechPlay_=function(){this.removeClass("vjs-ended");this.removeClass("vjs-paused");this.addClass("vjs-playing");this.hasStarted(!0);this.trigger("play")},r.prototype.handleTechRateChange_=function(){this.tech_.playbackRate()>0&&this.cache_.lastPlaybackRate===0&&(this.queuedCallbacks_.forEach(function(n){return n.callback(n.event)}),this.queuedCallbacks_=[]);this.cache_.lastPlaybackRate=this.tech_.playbackRate();this.trigger("ratechange")},r.prototype.handleTechWaiting_=function(){var n=this;this.addClass("vjs-waiting");this.trigger("waiting");this.one("timeupdate",function(){return n.removeClass("vjs-waiting")})},r.prototype.handleTechCanPlay_=function(){this.removeClass("vjs-waiting");this.trigger("canplay")},r.prototype.handleTechCanPlayThrough_=function(){this.removeClass("vjs-waiting");this.trigger("canplaythrough")},r.prototype.handleTechPlaying_=function(){this.removeClass("vjs-waiting");this.trigger("playing")},r.prototype.handleTechSeeking_=function(){this.addClass("vjs-seeking");this.trigger("seeking")},r.prototype.handleTechSeeked_=function(){this.removeClass("vjs-seeking");this.trigger("seeked")},r.prototype.handleTechFirstPlay_=function(){this.options_.starttime&&(h.warn("Passing the `starttime` option to the player will be deprecated in 6.0"),this.currentTime(this.options_.starttime));this.addClass("vjs-has-started");this.trigger("firstplay")},r.prototype.handleTechPause_=function(){this.removeClass("vjs-playing");this.addClass("vjs-paused");this.trigger("pause")},r.prototype.handleTechEnded_=function(){this.addClass("vjs-ended");this.options_.loop?(this.currentTime(0),this.play()):this.paused()||this.pause();this.trigger("ended")},r.prototype.handleTechDurationChange_=function(){this.duration(this.techGet_("duration"))},r.prototype.handleTechClick_=function(n){vr(n)&&this.controls_&&(this.paused()?br(this.play()):this.pause())},r.prototype.handleTechDoubleClick_=function(n){if(this.controls_){var t=Array.prototype.some.call(this.$$(".vjs-control-bar, .vjs-modal-dialog"),function(t){return t.contains(n.target)});t||(this.isFullscreen()?this.exitFullscreen():this.requestFullscreen())}},r.prototype.handleTechTap_=function(){this.userActive(!this.userActive())},r.prototype.handleTechTouchStart_=function(){this.userWasActive=this.userActive()},r.prototype.handleTechTouchMove_=function(){this.userWasActive&&this.reportUserActivity()},r.prototype.handleTechTouchEnd_=function(n){n.preventDefault()},r.prototype.handleFullscreenChange_=function(){this.isFullscreen()?this.addClass("vjs-fullscreen"):this.removeClass("vjs-fullscreen")},r.prototype.handleStageClick_=function(){this.reportUserActivity()},r.prototype.handleTechFullscreenChange_=function(n,t){t&&this.isFullscreen(t.isFullscreen);this.trigger("fullscreenchange")},r.prototype.handleTechError_=function(){var n=this.tech_.error();this.error(n)},r.prototype.handleTechTextData_=function(){var n=null;arguments.length>1&&(n=arguments[1]);this.trigger("textdata",n)},r.prototype.getCache=function(){return this.cache_},r.prototype.techCall_=function(n,t){this.ready(function(){if(n in put)return vut(this.middleware_,this.tech_,n,t);if(n in kw)return bw(this.middleware_,this.tech_,n,t);try{this.tech_&&this.tech_[n](t)}catch(i){h(i);throw i;}},!0)},r.prototype.techGet_=function(n){if(this.tech_&&this.tech_.isReady_){if(n in yut)return aut(this.middleware_,this.tech_,n);if(n in kw)return bw(this.middleware_,this.tech_,n);try{return this.tech_[n]()}catch(t){if(this.tech_[n]===undefined){h("Video.js: "+n+" method not defined for "+this.techName_+" playback technology.",t);throw t;}if(t.name==="TypeError"){h("Video.js: "+n+" unavailable on "+this.techName_+" playback technology element.",t);this.tech_.isReady_=!1;throw t;}h(t);throw t;}}},r.prototype.play=function(){var n=this;if(this.playOnLoadstart_&&this.off("loadstart",this.playOnLoadstart_),this.isReady_){if(!this.changingSrc_&&(this.src()||this.currentSrc()))return this.techGet_("play");this.playOnLoadstart_=function(){n.playOnLoadstart_=null;br(n.play())};gts.$(window).trigger("playerJSLoadStart");this.one("loadstart",this.playOnLoadstart_)}else{if(this.playWaitingForReady_)return;this.playWaitingForReady_=!0;this.ready(function(){n.playWaitingForReady_=!1;br(n.play())})}},r.prototype.pause=function(){this.techCall_("pause")},r.prototype.paused=function(){return this.techGet_("paused")===!1?!1:!0},r.prototype.played=function(){return this.techGet_("played")||gi(0,0)},r.prototype.scrubbing=function(n){if(typeof n=="undefined")return this.scrubbing_;this.scrubbing_=!!n;n?this.addClass("vjs-scrubbing"):this.removeClass("vjs-scrubbing")},r.prototype.currentTime=function(n){if(typeof n!="undefined"){n<0&&(n=0);this.techCall_("setCurrentTime",n);return}return this.cache_.currentTime=this.techGet_("currentTime")||0,this.cache_.currentTime},r.prototype.duration=function(n){if(n===undefined)return this.cache_.duration!==undefined?this.cache_.duration:NaN;n=parseFloat(n);n<0&&(n=Infinity);n!==this.cache_.duration&&(this.cache_.duration=n,n===Infinity?this.addClass("vjs-live"):this.removeClass("vjs-live"),this.trigger("durationchange"))},r.prototype.remainingTime=function(){return this.duration()-this.currentTime()},r.prototype.remainingTimeDisplay=function(){return Math.floor(this.duration())-Math.floor(this.currentTime())},r.prototype.buffered=function(){var n=this.techGet_("buffered");return n&&n.length||(n=gi(0,0)),n},r.prototype.bufferedPercent=function(){return sp(this.buffered(),this.duration())},r.prototype.bufferedEnd=function(){var t=this.buffered(),i=this.duration(),n=t.end(t.length-1);return n>i&&(n=i),n},r.prototype.volume=function(n){var t=void 0;if(n!==undefined){t=Math.max(0,Math.min(1,parseFloat(n)));this.cache_.volume=t;this.techCall_("setVolume",t);t>0&&this.lastVolume_(t);return}return t=parseFloat(this.techGet_("volume")),isNaN(t)?1:t},r.prototype.muted=function(n){if(n!==undefined){this.techCall_("setMuted",n);return}return this.techGet_("muted")||!1},r.prototype.defaultMuted=function(n){return n!==undefined?this.techCall_("setDefaultMuted",n):this.techGet_("defaultMuted")||!1},r.prototype.lastVolume_=function(n){if(n!==undefined&&n!==0){this.cache_.lastVolume=n;return}return this.cache_.lastVolume},r.prototype.supportsFullScreen=function(){return this.techGet_("supportsFullScreen")||!1},r.prototype.isFullscreen=function(n){if(n!==undefined){this.isFullscreen_=!!n;return}return!!this.isFullscreen_},r.prototype.requestFullscreen=function(){var n=ve;this.isFullscreen(!0);n.requestFullscreen?(bt(u,n.fullscreenchange,s(this,function t(){this.isFullscreen(u[n.fullscreenElement]);this.isFullscreen()===!1&&st(u,n.fullscreenchange,t);this.trigger("fullscreenchange")})),this.el_[n.requestFullscreen]()):this.tech_.supportsFullScreen()?this.techCall_("enterFullScreen"):(this.enterFullWindow(),this.trigger("fullscreenchange"))},r.prototype.exitFullscreen=function(){var n=ve;this.isFullscreen(!1);n.requestFullscreen?u[n.exitFullscreen]():this.tech_.supportsFullScreen()?this.techCall_("exitFullScreen"):(this.exitFullWindow(),this.trigger("fullscreenchange"))},r.prototype.enterFullWindow=function(){this.isFullWindow=!0;this.docOrigOverflow=u.documentElement.style.overflow;bt(u,"keydown",s(this,this.fullWindowOnEscKey));u.documentElement.style.overflow="hidden";bi(u.body,"vjs-full-window");this.trigger("enterFullWindow")},r.prototype.fullWindowOnEscKey=function(n){n.keyCode===27&&(this.isFullscreen()===!0?this.exitFullscreen():this.exitFullWindow())},r.prototype.exitFullWindow=function(){this.isFullWindow=!1;st(u,"keydown",this.fullWindowOnEscKey);u.documentElement.style.overflow=this.docOrigOverflow;du(u.body,"vjs-full-window");this.trigger("exitFullWindow")},r.prototype.canPlayType=function(n){for(var r,t,u=void 0,f=0,e=this.options_.techOrder;f<e.length;f++){if(r=e[f],t=l.getTech(r),t||(t=i.getComponent(r)),!t){h.error('The "'+r+'" tech is undefined. Skipped browser support check for that tech.');continue}if(t.isSupported()&&(u=t.canPlayType(n),u))return u}return""},r.prototype.selectSource=function(n){var f=this,t=this.options_.techOrder.map(function(n){return[n,l.getTech(n)]}).filter(function(n){var i=n[0],t=n[1];return t?t.isSupported():(h.error('The "'+i+'" tech is undefined. Skipped browser support check for that tech.'),!1)}),i=function(n,t,i){var r=void 0;return n.some(function(n){return t.some(function(t){return r=i(n,t),r?!0:void 0})}),r},r=void 0,e=function(n){return function(t,i){return n(i,t)}},u=function(n,t){var i=n[0],r=n[1];if(r.canPlaySource(t,f.options_[i.toLowerCase()]))return{source:t,tech:i}};return r=this.options_.sourceOrder?i(n,t,e(u)):i(t,n,u),r||!1},r.prototype.src=function(n){var t=this,i;if(typeof n=="undefined")return this.cache_.src||"";if(i=gw(n),!i.length){this.setTimeout(function(){this.error({code:4,message:this.localize(this.options_.notSupportedMessage)})},0);return}this.changingSrc_=!0;this.cache_.sources=i;this.updateSourceCaches_(i[0]);cut(this,i[0],function(n,r){t.middleware_=r;t.cache_.sources=i;t.updateSourceCaches_(n);var u=t.src_(n);if(u){if(i.length>1)return t.src(i.slice(1));t.changingSrc_=!1;t.setTimeout(function(){this.error({code:4,message:this.localize(this.options_.notSupportedMessage)})},0);t.triggerReady();return}lut(r,t.tech_)})},r.prototype.src_=function(n){var i=this,t=this.selectSource([n]);return t?vtt(t.tech,this.techName_)?(this.ready(function(){this.tech_.constructor.prototype.hasOwnProperty("setSource")?this.techCall_("setSource",n):this.techCall_("src",n.src);this.changingSrc_=!1},!0),!1):(this.changingSrc_=!0,this.loadTech_(t.tech,t.source),this.tech_.ready(function(){i.changingSrc_=!1}),!1):!0},r.prototype.load=function(){this.techCall_("load")},r.prototype.reset=function(){this.loadTech_(this.options_.techOrder[0],null);this.techCall_("reset")},r.prototype.currentSources=function(){var n=this.currentSource(),t=[];return Object.keys(n).length!==0&&t.push(n),this.cache_.sources||t},r.prototype.currentSource=function(){return this.cache_.source||{}},r.prototype.currentSrc=function(){return this.currentSource()&&this.currentSource().src||""},r.prototype.currentType=function(){return this.currentSource()&&this.currentSource().type||""},r.prototype.preload=function(n){if(n!==undefined){this.techCall_("setPreload",n);this.options_.preload=n;return}return this.techGet_("preload")},r.prototype.autoplay=function(n){if(n===undefined)return this.options_.autoplay||!1;var t=void 0;typeof n=="string"&&/(any|play|muted)/.test(n)?(this.options_.autoplay=n,this.manualAutoplay_(n),t=!1):this.options_.autoplay=n?!0:!1;t=t||this.options_.autoplay;this.tech_&&this.techCall_("setAutoplay",t)},r.prototype.playsinline=function(n){return n!==undefined?(this.techCall_("setPlaysinline",n),this.options_.playsinline=n,this):this.techGet_("playsinline")},r.prototype.loop=function(n){if(n!==undefined){this.techCall_("setLoop",n);this.options_.loop=n;return}return this.techGet_("loop")},r.prototype.poster=function(n){if(n===undefined)return this.poster_;(n||(n=""),n!==this.poster_)&&(this.poster_=n,this.techCall_("setPoster",n),this.isPosterFromTech_=!1,this.trigger("posterchange"))},r.prototype.handleTechPosterChange_=function(){if((!this.poster_||this.options_.techCanOverridePoster)&&this.tech_&&this.tech_.poster){var n=this.tech_.poster()||"";n!==this.poster_&&(this.poster_=n,this.isPosterFromTech_=!0,this.trigger("posterchange"))}},r.prototype.controls=function(n){if(n===undefined)return!!this.controls_;(n=!!n,this.controls_!==n)&&(this.controls_=n,this.usingNativeControls()&&this.techCall_("setControls",n),this.controls_?(this.removeClass("vjs-controls-disabled"),this.addClass("vjs-controls-enabled"),this.trigger("controlsenabled"),this.usingNativeControls()||this.addTechControlsListeners_()):(this.removeClass("vjs-controls-enabled"),this.addClass("vjs-controls-disabled"),this.trigger("controlsdisabled"),this.usingNativeControls()||this.removeTechControlsListeners_()))},r.prototype.usingNativeControls=function(n){if(n===undefined)return!!this.usingNativeControls_;(n=!!n,this.usingNativeControls_!==n)&&(this.usingNativeControls_=n,this.usingNativeControls_?(this.addClass("vjs-using-native-controls"),this.trigger("usingnativecontrols")):(this.removeClass("vjs-using-native-controls"),this.trigger("usingcustomcontrols")))},r.prototype.error=function(n){if(n===undefined)return this.error_||null;if(n===null){this.error_=n;this.removeClass("vjs-error");this.errorDisplay&&this.errorDisplay.close();return}this.error_=new nt(n);this.addClass("vjs-error");h.error("(CODE:"+this.error_.code+" "+nt.errorTypes[this.error_.code]+")",this.error_.message,this.error_);this.trigger("error");return},r.prototype.reportUserActivity=function(){this.userActivity_=!0},r.prototype.userActive=function(n){if(n===undefined)return this.userActive_;if(n=!!n,n!==this.userActive_){if(this.userActive_=n,this.userActive_){this.userActivity_=!0;this.removeClass("vjs-user-inactive");this.addClass("vjs-user-active");this.trigger("useractive");return}if(this.tech_)this.tech_.one("mousemove",function(n){n.stopPropagation();n.preventDefault()});this.userActivity_=!1;this.removeClass("vjs-user-active");this.addClass("vjs-user-inactive");this.trigger("userinactive")}},r.prototype.listenForUserActivity_=function(){var t=void 0,r=void 0,u=void 0,n=s(this,this.reportUserActivity),f=function(t){(t.screenX!==r||t.screenY!==u)&&(r=t.screenX,u=t.screenY,n())},e=function(){n();this.clearInterval(t);t=this.setInterval(n,250)},o=function(){n();this.clearInterval(t)},i;this.on("mousedown",e);this.on("mousemove",f);this.on("mouseup",o);this.on("keydown",n);this.on("keyup",n);i=void 0;this.setInterval(function(){if(this.userActivity_){this.userActivity_=!1;this.userActive(!0);this.clearTimeout(i);var n=this.options_.inactivityTimeout;n<=0||(i=this.setTimeout(function(){this.userActivity_||this.userActive(!1)},n))}},250)},r.prototype.playbackRate=function(n){if(n!==undefined){this.techCall_("setPlaybackRate",n);return}return this.tech_&&this.tech_.featuresPlaybackRate?this.cache_.lastPlaybackRate||this.techGet_("playbackRate"):1},r.prototype.defaultPlaybackRate=function(n){return n!==undefined?this.techCall_("setDefaultPlaybackRate",n):this.tech_&&this.tech_.featuresPlaybackRate?this.techGet_("defaultPlaybackRate"):1},r.prototype.isAudio=function(n){if(n!==undefined){this.isAudio_=!!n;return}return!!this.isAudio_},r.prototype.addTextTrack=function(n,t,i){if(this.tech_)return this.tech_.addTextTrack(n,t,i)},r.prototype.addRemoteTextTrack=function(n,t){if(this.tech_)return this.tech_.addRemoteTextTrack(n,t)},r.prototype.removeRemoteTextTrack=function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},n=t.track,i=n===undefined?arguments[0]:n;if(this.tech_)return this.tech_.removeRemoteTextTrack(i)},r.prototype.getVideoPlaybackQuality=function(){return this.techGet_("getVideoPlaybackQuality")},r.prototype.videoWidth=function(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0},r.prototype.videoHeight=function(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0},r.prototype.language=function(n){if(n===undefined)return this.language_;this.language_=String(n).toLowerCase()},r.prototype.languages=function(){return a(r.prototype.options_.languages,this.languages_)},r.prototype.toJSON=function(){var i=a(this.options_),r=i.tracks,n,t;for(i.tracks=[],n=0;n<r.length;n++)t=r[n],t=a(t),t.player=undefined,i.tracks[n]=t;return i},r.prototype.createModal=function(n,t){var r=this,i;t=t||{};t.content=n||"";i=new kr(this,t);this.addChild(i);i.on("dispose",function(){r.removeChild(i)});return i.open(),i},r.getTagSettings=function(n){var t={sources:[],tracks:[]},i=ri(n),o=i["data-setup"],f,r,l,u,e;if(ar(n,"vjs-fluid")&&(i.fluid=!0),o!==null){var s=hp(o||"{}"),c=s[0],a=s[1];c&&h.error(c);y(i,a)}if(y(t,i),n.hasChildNodes())for(f=n.childNodes,r=0,l=f.length;r<l;r++)u=f[r],e=u.nodeName.toLowerCase(),e==="source"?t.sources.push(ri(u)):e==="track"&&t.tracks.push(ri(u));return t},r.prototype.flexNotSupported_=function(){var n=u.createElement("i");return!("flexBasis"in n.style||"webkitFlexBasis"in n.style||"mozFlexBasis"in n.style||"msFlexBasis"in n.style||"msFlexOrder"in n.style)},r}(i);ut.names.forEach(function(n){var t=ut[n];w.prototype[t.getterName]=function(){return this.tech_?this.tech_[t.getterName]():(this[t.privateName]=this[t.privateName]||new t.ListClass,this[t.privateName])}});w.players={};uu=t.navigator;w.prototype.options_={techOrder:l.defaultTechOrder_,html5:{},flash:{},inactivityTimeout:2e3,playbackRates:[],children:["mediaLoader","posterImage","textTrackDisplay","loadingSpinner","bigPlayButton","controlBar","errorDisplay","textTrackSettings","resizeManager"],language:uu&&(uu.languages&&uu.languages[0]||uu.userLanguage||uu.language)||"en",languages:{},notSupportedMessage:"No compatible source was found for this media."};["ended","seeking","seekable","networkState","readyState"].forEach(function(n){w.prototype[n]=function(){return this.techGet_(n)}});lk.forEach(function(n){w.prototype["handleTech"+v(n)+"_"]=function(){return this.trigger(n)}});i.registerComponent("Player",w);var ko="plugin",fu="activePlugins_",eu={},go=function(n){return eu.hasOwnProperty(n)},ns=function(n){return go(n)?eu[n]:undefined},ak=function(n,t){n[fu]=n[fu]||{};n[fu][t]=!0},ts=function(n,t,i){var r=(i?"before":"")+"pluginsetup";n.trigger(r,t);n.trigger(r+":"+t.name,t)},aft=function(n,t){var i=function(){ts(this,{name:n,plugin:t,instance:null},!0);var i=t.apply(this,arguments);return ak(this,n),ts(this,{name:n,plugin:t,instance:i}),i};return Object.keys(t).forEach(function(n){i[n]=t[n]}),i},vk=function(n,t){return t.prototype.name=n,function(){var r;ts(this,{name:n,plugin:t,instance:null},!0);for(var u=arguments.length,f=Array(u),i=0;i<u;i++)f[i]=arguments[i];return r=new(Function.prototype.bind.apply(t,[null].concat([this].concat(f)))),this[n]=function(){return r},ts(this,r.getEventHash()),r}},fi=function(){function n(t){if(f(this,n),this.constructor===n)throw new Error("Plugin must be sub-classed; not directly instantiated.");this.player=t;hh(this);delete this.trigger;dy(this,this.constructor.defaultState);ak(t,this.name);this.dispose=s(this,this.dispose);t.on("dispose",this.dispose)}return n.prototype.version=function(){return this.constructor.VERSION},n.prototype.getEventHash=function(){var n=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};return n.name=this.name,n.plugin=this.constructor,n.instance=this,n},n.prototype.trigger=function(n){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};return pr(this.eventBusEl_,n,this.getEventHash(t))},n.prototype.handleStateChanged=function(){},n.prototype.dispose=function(){var n=this.name,t=this.player;this.trigger("dispose");this.off();t.off("dispose",this.dispose);t[fu][n]=!1;this.player=this.state=null;t[n]=vk(n,eu[n])},n.isBasic=function(t){var i=typeof t=="string"?ns(t):t;return typeof i=="function"&&!n.prototype.isPrototypeOf(i.prototype)},n.registerPlugin=function(t,i){if(typeof t!="string")throw new Error('Illegal plugin name, "'+t+'", must be a string, was '+(typeof t=="undefined"?"undefined":k(t))+".");if(go(t))h.warn('A plugin named "'+t+'" already exists. You may want to avoid re-registering plugins!');else if(w.prototype.hasOwnProperty(t))throw new Error('Illegal plugin name, "'+t+'", cannot share a name with an existing player method!');if(typeof i!="function")throw new Error('Illegal plugin for "'+t+'", must be a function, was '+(typeof i=="undefined"?"undefined":k(i))+".");return eu[t]=i,t!==ko&&(w.prototype[t]=n.isBasic(i)?aft(t,i):vk(t,i)),i},n.deregisterPlugin=function(n){if(n===ko)throw new Error("Cannot de-register base plugin.");go(n)&&(delete eu[n],delete w.prototype[n])},n.getPlugins=function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:Object.keys(eu),n=void 0;return t.forEach(function(t){var i=ns(t);i&&(n=n||{},n[t]=i)}),n},n.getPluginVersion=function(n){var t=ns(n);return t&&t.VERSION||""},n}();fi.getPlugin=ns;fi.BASE_PLUGIN_NAME=ko;fi.registerPlugin(ko,fi);w.prototype.usingPlugin=function(n){return!!this[fu]&&this[fu][n]===!0};w.prototype.hasPlugin=function(n){return!!go(n)};var vft=function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+(typeof t=="undefined"?"undefined":k(t)));n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}});t&&(n.super_=t)},yft=function(n){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},i=function(){n.apply(this,arguments)},r={},u;(typeof t=="undefined"?"undefined":k(t))==="object"?(t.constructor!==Object.prototype.constructor&&(i=t.constructor),r=t):typeof t=="function"&&(i=t);vft(i,n);for(u in r)r.hasOwnProperty(u)&&(i.prototype[u]=r[u]);return i},yk=function(n){return n.indexOf("#")===0?n.slice(1):n};n.hooks_={};n.hooks=function(t,i){return n.hooks_[t]=n.hooks_[t]||[],i&&(n.hooks_[t]=n.hooks_[t].concat(i)),n.hooks_[t]};n.hook=function(t,i){n.hooks(t,i)};n.hookOnce=function(t,i){n.hooks(t,[].concat(i).map(function(i){var r=function r(){return n.removeHook(t,r),i.apply(undefined,arguments)};return r}))};n.removeHook=function(t,i){var r=n.hooks(t).indexOf(i);return r<=-1?!1:(n.hooks_[t]=n.hooks_[t].slice(),n.hooks_[t].splice(r,1),!0)};t.VIDEOJS_NO_DYNAMIC_STYLE!==!0&&lr()&&(dl=hi(".vjs-styles-defaults"),dl||(dl=vy("vjs-styles-defaults"),pft=hi("head")));oh(1,n);n.VERSION=sv;n.options=w.prototype.options_;n.getPlayers=function(){return w.players};n.getPlayer=function(n){var i=w.players,t=void 0,r,u;if(typeof n=="string"){if(r=yk(n),u=i[r],u)return u;t=hi("#"+r)}else t=n;if(bu(t)){var f=t,e=f.player,o=f.playerId;if(e||i[o])return e||i[o]}};n.getAllPlayers=function(){return Object.keys(w.players).map(function(n){return w.players[n]}).filter(Boolean)};n.players=w.players;n.getComponent=i.getComponent;n.registerComponent=function(n,t){l.isTech(t)&&h.warn("The "+n+" tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)");i.registerComponent.call(i,n,t)};n.getTech=l.getTech;n.registerTech=l.registerTech;n.use=hut;Object.defineProperty(n,"middleware",{value:{},writeable:!1,enumerable:!0});Object.defineProperty(n.middleware,"TERMINATOR",{value:ge,writeable:!1,enumerable:!0});n.browser=wtt;n.TOUCH_ENABLED=ae;n.extend=yft;n.mergeOptions=a;n.bind=s;n.registerPlugin=fi.registerPlugin;n.plugin=function(n,t){return h.warn("videojs.plugin() is deprecated; use videojs.registerPlugin() instead"),fi.registerPlugin(n,t)};n.getPlugins=fi.getPlugins;n.getPlugin=fi.getPlugin;n.getPluginVersion=fi.getPluginVersion;n.addLanguage=function(t,i){var r;return t=(""+t).toLowerCase(),n.options.languages=a(n.options.languages,(r={},r[t]=i,r)),n.options.languages[t]};n.log=h;n.createTimeRange=n.createTimeRanges=gi;n.formatTime=tu;n.setFormatTime=tft;n.resetFormatTime=ift;n.parseUrl=gh;n.isCrossOrigin=we;n.EventTarget=d;n.on=bt;n.one=rf;n.off=st;n.trigger=pr;n.xhr=rw;n.TextTrack=sf;n.AudioTrack=ow;n.VideoTrack=sw;["isEl","isTextNode","createEl","hasClass","addClass","removeClass","toggleClass","setAttributes","getAttributes","emptyEl","appendContent","insertContent"].forEach(function(t){n[t]=function(){return h.warn("videojs."+t+"() is deprecated; use videojs.dom."+t+"() instead"),sy[t].apply(null,arguments)}});n.computedStyle=gs;n.dom=sy;n.url=sit;var is=bs(function(n){(function(){var i=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/\;?#]*)?(.*?)??(;.*?)?(\?.*?)?(#.*?)?$/,r=/^([^\/;?#]*)(.*)$/,u=/(?:\/|^)\.(?=\/)/g,f=/(?:\/|^)\.\.\/(?!\.\.\/).*?(?=\/)/g,t={buildAbsoluteURL:function(n,i,u){var s,f,e,h,o,c,l;if(u=u||{},n=n.trim(),i=i.trim(),!i){if(!u.alwaysNormalize)return n;if(s=t.parseURL(n),!s)throw new Error("Error trying to parse base URL.");return s.path=t.normalizePath(s.path),t.buildURLFromParts(s)}if(f=t.parseURL(i),!f)throw new Error("Error trying to parse relative URL.");if(f.scheme)return u.alwaysNormalize?(f.path=t.normalizePath(f.path),t.buildURLFromParts(f)):i;if(e=t.parseURL(n),!e)throw new Error("Error trying to parse base URL.");return!e.netLoc&&e.path&&e.path[0]!=="/"&&(h=r.exec(e.path),e.netLoc=h[1],e.path=h[2]),e.netLoc&&!e.path&&(e.path="/"),o={scheme:e.scheme,netLoc:f.netLoc,path:null,params:f.params,query:f.query,fragment:f.fragment},f.netLoc||(o.netLoc=e.netLoc,f.path[0]!=="/"&&(f.path?(c=e.path,l=c.substring(0,c.lastIndexOf("/")+1)+f.path,o.path=t.normalizePath(l)):(o.path=e.path,f.params||(o.params=e.params,f.query||(o.query=e.query))))),o.path===null&&(o.path=u.alwaysNormalize?t.normalizePath(f.path):f.path),t.buildURLFromParts(o)},parseURL:function(n){var t=i.exec(n);return t?{scheme:t[1]||"",netLoc:t[2]||"",path:t[3]||"",params:t[4]||"",query:t[5]||"",fragment:t[6]||""}:null},normalizePath:function(n){for(n=n.split("").reverse().join("").replace(u,"");n.length!==(n=n.replace(f,"")).length;);return n.split("").reverse().join("")},buildURLFromParts:function(n){return n.scheme+n.netLoc+n.path+n.params+n.query+n.fragment}};n.exports=t})(yu)}),rs=function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");},wft=Object.assign||function(n){for(var i,r,t=1;t<arguments.length;t++){i=arguments[t];for(r in i)Object.prototype.hasOwnProperty.call(i,r)&&(n[r]=i[r])}return n},gl=function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+(typeof t=="undefined"?"undefined":k(t)));n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(n,t):n.__proto__=t)},na=function(n,t){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&((typeof t=="undefined"?"undefined":k(t))==="object"||typeof t=="function")?t:n},ta=function(){function n(){rs(this,n);this.listeners={}}return n.prototype.on=function(n,t){this.listeners[n]||(this.listeners[n]=[]);this.listeners[n].push(t)},n.prototype.off=function(n,t){if(!this.listeners[n])return!1;var i=this.listeners[n].indexOf(t);return this.listeners[n].splice(i,1),i>-1},n.prototype.trigger=function(n){var i=this.listeners[n],t=void 0,r=void 0,u=void 0;if(i)if(arguments.length===2)for(r=i.length,t=0;t<r;++t)i[t].call(this,arguments[1]);else for(u=Array.prototype.slice.call(arguments,1),r=i.length,t=0;t<r;++t)i[t].apply(this,u)},n.prototype.dispose=function(){this.listeners={}},n.prototype.pipe=function(n){this.on("data",function(t){n.push(t)})},n}(),bft=function(n){function t(){rs(this,t);var i=na(this,n.call(this));return i.buffer="",i}return gl(t,n),t.prototype.push=function(n){var t=void 0;for(this.buffer+=n,t=this.buffer.indexOf("\n");t>-1;t=this.buffer.indexOf("\n"))this.trigger("data",this.buffer.substring(0,t)),this.buffer=this.buffer.substring(t+1)},t}(ta),kft=function(){return new RegExp('(?:^|,)((?:[^=]*)=(?:"[^"]*"|[^,]*))')},pf=function(n){for(var i=n.split(kft()),u={},r=i.length,t=void 0;r--;)i[r]!==""&&(t=/([^=]*)=(.*)/.exec(i[r]).slice(1),t[0]=t[0].replace(/^\s+|\s+$/g,""),t[1]=t[1].replace(/^\s+|\s+$/g,""),t[1]=t[1].replace(/^['"](.*)['"]$/g,"$1"),u[t[0]]=t[1]);return u},dft=function(n){function t(){rs(this,t);var i=na(this,n.call(this));return i.customParsers=[],i}return gl(t,n),t.prototype.push=function(n){var i=void 0,t=void 0,f,r,u,e;if(n=n.replace(/^[\u0000\s]+|[\u0000\s]+$/g,""),n.length!==0){if(n[0]!=="#"){this.trigger("data",{type:"uri",uri:n});return}for(f=0;f<this.customParsers.length;f++)if(this.customParsers[f].call(this,n))return;if(n.indexOf("#EXT")!==0){this.trigger("data",{type:"comment",text:n.slice(1)});return}if(n=n.replace("\r",""),i=/^#EXTM3U/.exec(n),i){this.trigger("data",{type:"tag",tagType:"m3u"});return}if(i=/^#EXTINF:?([0-9\.]*)?,?(.*)?$/.exec(n),i){t={type:"tag",tagType:"inf"};i[1]&&(t.duration=parseFloat(i[1]));i[2]&&(t.title=i[2]);this.trigger("data",t);return}if(i=/^#EXT-X-TARGETDURATION:?([0-9.]*)?/.exec(n),i){t={type:"tag",tagType:"targetduration"};i[1]&&(t.duration=parseInt(i[1],10));this.trigger("data",t);return}if(i=/^#ZEN-TOTAL-DURATION:?([0-9.]*)?/.exec(n),i){t={type:"tag",tagType:"totalduration"};i[1]&&(t.duration=parseInt(i[1],10));this.trigger("data",t);return}if(i=/^#EXT-X-VERSION:?([0-9.]*)?/.exec(n),i){t={type:"tag",tagType:"version"};i[1]&&(t.version=parseInt(i[1],10));this.trigger("data",t);return}if(i=/^#EXT-X-MEDIA-SEQUENCE:?(\-?[0-9.]*)?/.exec(n),i){t={type:"tag",tagType:"media-sequence"};i[1]&&(t.number=parseInt(i[1],10));this.trigger("data",t);return}if(i=/^#EXT-X-DISCONTINUITY-SEQUENCE:?(\-?[0-9.]*)?/.exec(n),i){t={type:"tag",tagType:"discontinuity-sequence"};i[1]&&(t.number=parseInt(i[1],10));this.trigger("data",t);return}if(i=/^#EXT-X-PLAYLIST-TYPE:?(.*)?$/.exec(n),i){t={type:"tag",tagType:"playlist-type"};i[1]&&(t.playlistType=i[1]);this.trigger("data",t);return}if(i=/^#EXT-X-BYTERANGE:?([0-9.]*)?@?([0-9.]*)?/.exec(n),i){t={type:"tag",tagType:"byterange"};i[1]&&(t.length=parseInt(i[1],10));i[2]&&(t.offset=parseInt(i[2],10));this.trigger("data",t);return}if(i=/^#EXT-X-ALLOW-CACHE:?(YES|NO)?/.exec(n),i){t={type:"tag",tagType:"allow-cache"};i[1]&&(t.allowed=!/NO/.test(i[1]));this.trigger("data",t);return}if(i=/^#EXT-X-MAP:?(.*)$/.exec(n),i){if(t={type:"tag",tagType:"map"},i[1]&&(r=pf(i[1]),r.URI&&(t.uri=r.URI),r.BYTERANGE)){var o=r.BYTERANGE.split("@"),s=o[0],h=o[1];t.byterange={};s&&(t.byterange.length=parseInt(s,10));h&&(t.byterange.offset=parseInt(h,10))}this.trigger("data",t);return}if(i=/^#EXT-X-STREAM-INF:?(.*)$/.exec(n),i){t={type:"tag",tagType:"stream-inf"};i[1]&&(t.attributes=pf(i[1]),t.attributes.RESOLUTION&&(u=t.attributes.RESOLUTION.split("x"),e={},u[0]&&(e.width=parseInt(u[0],10)),u[1]&&(e.height=parseInt(u[1],10)),t.attributes.RESOLUTION=e),t.attributes.BANDWIDTH&&(t.attributes.BANDWIDTH=parseInt(t.attributes.BANDWIDTH,10)),t.attributes["PROGRAM-ID"]&&(t.attributes["PROGRAM-ID"]=parseInt(t.attributes["PROGRAM-ID"],10)));this.trigger("data",t);return}if(i=/^#EXT-X-MEDIA:?(.*)$/.exec(n),i){t={type:"tag",tagType:"media"};i[1]&&(t.attributes=pf(i[1]));this.trigger("data",t);return}if(i=/^#EXT-X-ENDLIST/.exec(n),i){this.trigger("data",{type:"tag",tagType:"endlist"});return}if(i=/^#EXT-X-DISCONTINUITY/.exec(n),i){this.trigger("data",{type:"tag",tagType:"discontinuity"});return}if(i=/^#EXT-X-PROGRAM-DATE-TIME:?(.*)$/.exec(n),i){t={type:"tag",tagType:"program-date-time"};i[1]&&(t.dateTimeString=i[1],t.dateTimeObject=new Date(i[1]));this.trigger("data",t);return}if(i=/^#EXT-X-KEY:?(.*)$/.exec(n),i){t={type:"tag",tagType:"key"};i[1]&&(t.attributes=pf(i[1]),t.attributes.IV&&(t.attributes.IV.substring(0,2).toLowerCase()==="0x"&&(t.attributes.IV=t.attributes.IV.substring(2)),t.attributes.IV=t.attributes.IV.match(/.{8}/g),t.attributes.IV[0]=parseInt(t.attributes.IV[0],16),t.attributes.IV[1]=parseInt(t.attributes.IV[1],16),t.attributes.IV[2]=parseInt(t.attributes.IV[2],16),t.attributes.IV[3]=parseInt(t.attributes.IV[3],16),t.attributes.IV=new Uint32Array(t.attributes.IV)));this.trigger("data",t);return}if(i=/^#EXT-X-START:?(.*)$/.exec(n),i){t={type:"tag",tagType:"start"};i[1]&&(t.attributes=pf(i[1]),t.attributes["TIME-OFFSET"]=parseFloat(t.attributes["TIME-OFFSET"]),t.attributes.PRECISE=/YES/.test(t.attributes.PRECISE));this.trigger("data",t);return}if(i=/^#EXT-X-CUE-OUT-CONT:?(.*)?$/.exec(n),i){t={type:"tag",tagType:"cue-out-cont"};t.data=i[1]?i[1]:"";this.trigger("data",t);return}if(i=/^#EXT-X-CUE-OUT:?(.*)?$/.exec(n),i){t={type:"tag",tagType:"cue-out"};t.data=i[1]?i[1]:"";this.trigger("data",t);return}if(i=/^#EXT-X-CUE-IN:?(.*)?$/.exec(n),i){t={type:"tag",tagType:"cue-in"};t.data=i[1]?i[1]:"";this.trigger("data",t);return}this.trigger("data",{type:"tag",data:n.slice(4)})}},t.prototype.addParser=function(n){var i=this,r=n.expression,u=n.customType,t=n.dataParser,f=n.segment;typeof t!="function"&&(t=function(n){return n});this.customParsers.push(function(n){var e=r.exec(n);if(e)return i.trigger("data",{type:"custom",data:t(n),customType:u,segment:f}),!0})},t}(ta),pk=function(n){function t(){var r;rs(this,t);r=na(this,n.call(this));r.lineStream=new bft;r.parseStream=new dft;r.lineStream.pipe(r.parseStream);var s=r,e=[],i={},u=void 0,f=void 0,c=function(){},h={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},o=0;r.manifest={allowCache:!0,discontinuityStarts:[],segments:[]};r.parseStream.on("data",function(n){var r=void 0,t=void 0;({tag:function(){({"allow-cache":function(){this.manifest.allowCache=n.allowed;"allowed"in n||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange:function(){var t={};"length"in n&&(i.byterange=t,t.length=n.length,"offset"in n||(this.trigger("info",{message:"defaulting offset to zero"}),n.offset=0));"offset"in n&&(i.byterange=t,t.offset=n.offset)},endlist:function(){this.manifest.endList=!0},inf:function(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"}));"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"}));n.duration>0&&(i.duration=n.duration);n.duration===0&&(i.duration=.01,this.trigger("info",{message:"updating zero segment duration to a small value"}));this.manifest.segments=e},key:function(){if(!n.attributes){this.trigger("warn",{message:"ignoring key declaration without attribute list"});return}if(n.attributes.METHOD==="NONE"){f=null;return}if(!n.attributes.URI){this.trigger("warn",{message:"ignoring key declaration without URI"});return}n.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"});f={method:n.attributes.METHOD||"AES-128",uri:n.attributes.URI};typeof n.attributes.IV!="undefined"&&(f.iv=n.attributes.IV)},"media-sequence":function(){if(!isFinite(n.number)){this.trigger("warn",{message:"ignoring invalid media sequence: "+n.number});return}this.manifest.mediaSequence=n.number},"discontinuity-sequence":function(){if(!isFinite(n.number)){this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+n.number});return}this.manifest.discontinuitySequence=n.number;o=n.number},"playlist-type":function(){if(!/VOD|EVENT/.test(n.playlistType)){this.trigger("warn",{message:"ignoring unknown playlist type: "+n.playlist});return}this.manifest.playlistType=n.playlistType},map:function(){u={};n.uri&&(u.uri=n.uri);n.byterange&&(u.byterange=n.byterange)},"stream-inf":function(){if(this.manifest.playlists=e,this.manifest.mediaGroups=this.manifest.mediaGroups||h,!n.attributes){this.trigger("warn",{message:"ignoring empty stream-inf attributes"});return}i.attributes||(i.attributes={});wft(i.attributes,n.attributes)},media:function(){if(this.manifest.mediaGroups=this.manifest.mediaGroups||h,!(n.attributes&&n.attributes.TYPE&&n.attributes["GROUP-ID"]&&n.attributes.NAME)){this.trigger("warn",{message:"ignoring incomplete or missing media group"});return}var i=this.manifest.mediaGroups[n.attributes.TYPE];i[n.attributes["GROUP-ID"]]=i[n.attributes["GROUP-ID"]]||{};r=i[n.attributes["GROUP-ID"]];t={"default":/yes/i.test(n.attributes.DEFAULT)};t.autoselect=t["default"]?!0:/yes/i.test(n.attributes.AUTOSELECT);n.attributes.LANGUAGE&&(t.language=n.attributes.LANGUAGE);n.attributes.URI&&(t.uri=n.attributes.URI);n.attributes["INSTREAM-ID"]&&(t.instreamId=n.attributes["INSTREAM-ID"]);n.attributes.CHARACTERISTICS&&(t.characteristics=n.attributes.CHARACTERISTICS);n.attributes.FORCED&&(t.forced=/yes/i.test(n.attributes.FORCED));r[n.attributes.NAME]=t},discontinuity:function(){o+=1;i.discontinuity=!0;this.manifest.discontinuityStarts.push(e.length)},"program-date-time":function(){typeof this.manifest.dateTimeString=="undefined"&&(this.manifest.dateTimeString=n.dateTimeString,this.manifest.dateTimeObject=n.dateTimeObject);i.dateTimeString=n.dateTimeString;i.dateTimeObject=n.dateTimeObject},targetduration:function(){if(!isFinite(n.duration)||n.duration<0){this.trigger("warn",{message:"ignoring invalid target duration: "+n.duration});return}this.manifest.targetDuration=n.duration},totalduration:function(){if(!isFinite(n.duration)||n.duration<0){this.trigger("warn",{message:"ignoring invalid total duration: "+n.duration});return}this.manifest.totalDuration=n.duration},start:function(){if(!n.attributes||isNaN(n.attributes["TIME-OFFSET"])){this.trigger("warn",{message:"ignoring start declaration without appropriate attribute list"});return}this.manifest.start={timeOffset:n.attributes["TIME-OFFSET"],precise:n.attributes.PRECISE}},"cue-out":function(){i.cueOut=n.data},"cue-out-cont":function(){i.cueOutCont=n.data},"cue-in":function(){i.cueIn=n.data}}[n.tagType]||c).call(s)},uri:function(){i.uri=n.uri;e.push(i);!this.manifest.targetDuration||"duration"in i||(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),i.duration=this.manifest.targetDuration);f&&(i.key=f);i.timeline=o;u&&(i.map=u);i={}},comment:function(){},custom:function(){n.segment?(i.custom=i.custom||{},i.custom[n.customType]=n.data):(this.manifest.custom=this.manifest.custom||{},this.manifest.custom[n.customType]=n.data)}})[n.type].call(s)});return r}return gl(t,n),t.prototype.push=function(n){this.lineStream.push(n)},t.prototype.end=function(){this.lineStream.push("\n")},t.prototype.addParser=function(n){this.parseStream.addParser(n)},t}(ta);
/**
   * mpd-parser
   * @version 0.6.1
   * @copyright 2018 Brightcove, Inc
   * @license Apache-2.0
   */
var gft=function(n){var i,t=n.attributes,r=n.segments,u={attributes:(i={NAME:t.id,BANDWIDTH:t.bandwidth,CODECS:t.codecs},i["PROGRAM-ID"]=1,i),uri:"",endList:(t.type||"static")==="static",timeline:t.periodIndex,resolvedUri:"",targetDuration:t.duration,segments:r,mediaSequence:r.length?r[0].number:1};return t.contentProtection&&(u.contentProtection=t.contentProtection),u},net=function(n){var r,t=n.attributes,i=n.segments;return typeof i=="undefined"&&(i=[{uri:t.baseUrl,timeline:t.periodIndex,resolvedUri:t.baseUrl||"",duration:t.sourceDuration,number:0}],t.duration=t.sourceDuration),{attributes:(r={NAME:t.id,BANDWIDTH:t.bandwidth},r["PROGRAM-ID"]=1,r),uri:"",endList:(t.type||"static")==="static",timeline:t.periodIndex,resolvedUri:t.baseUrl||"",targetDuration:t.duration,segments:i,mediaSequence:i.length?i[0].number:1}},tet=function(n){return n.reduce(function(n,t){var r=t.attributes.role&&t.attributes.role.value||"main",u=t.attributes.lang||"",i="main";return(u&&(i=t.attributes.lang+" ("+r+")"),n[i]&&n[i].playlists[0].attributes.BANDWIDTH>t.attributes.bandwidth)?n:(n[i]={language:u,autoselect:!0,"default":r==="main",playlists:[gft(t)],uri:""},n)},{})},iet=function(n){return n.reduce(function(n,t){var i=t.attributes.lang||"text";return n[i]?n:(n[i]={language:i,"default":!1,autoselect:!1,playlists:[net(t)],uri:""},n)},{})},ret=function(n){var i,t=n.attributes,r=n.segments,u={attributes:(i={NAME:t.id,AUDIO:"audio",SUBTITLES:"subs",RESOLUTION:{width:t.width,height:t.height},CODECS:t.codecs,BANDWIDTH:t.bandwidth},i["PROGRAM-ID"]=1,i),uri:"",endList:(t.type||"static")==="static",timeline:t.periodIndex,resolvedUri:"",targetDuration:t.duration,segments:r,mediaSequence:r.length?r[0].number:1};return t.contentProtection&&(u.contentProtection=t.contentProtection),u},uet=function(n){var t;if(!n.length)return{};var r=n[0].attributes,o=r.sourceDuration,u=r.minimumUpdatePeriod,s=u===undefined?0:u,h=function(n){var t=n.attributes;return t.mimeType==="video/mp4"||t.contentType==="video"},c=function(n){var t=n.attributes;return t.mimeType==="audio/mp4"||t.contentType==="audio"},l=function(n){var t=n.attributes;return t.mimeType==="text/vtt"||t.contentType==="text"},a=n.filter(h).map(ret),f=n.filter(c),e=n.filter(l),i={allowCache:!0,discontinuityStarts:[],segments:[],endList:!0,mediaGroups:(t={AUDIO:{},VIDEO:{}},t["CLOSED-CAPTIONS"]={},t.SUBTITLES={},t),uri:"",duration:o,playlists:a,minimumUpdatePeriod:s*1e3};return f.length&&(i.mediaGroups.AUDIO.audio=tet(f)),e.length&&(i.mediaGroups.SUBTITLES.subs=iet(e)),i},fet=typeof Symbol=="function"&&k(Symbol.iterator)==="symbol"?function(n){return typeof n=="undefined"?"undefined":k(n)}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n=="undefined"?"undefined":k(n)},wk=function(n){return!!n&&(typeof n=="undefined"?"undefined":fet(n))==="object"},ft=function ft(){for(var t=arguments.length,i=Array(t),n=0;n<t;n++)i[n]=arguments[n];return i.reduce(function(n,t){return Object.keys(t).forEach(function(i){n[i]=Array.isArray(n[i])&&Array.isArray(t[i])?n[i].concat(t[i]):wk(n[i])&&wk(t[i])?ft(n[i],t[i]):t[i]}),n},{})},ia=function(n,i){return/^[a-z]+:/i.test(i)?i:(/\/\//i.test(n)||(n=is.buildAbsoluteURL(t.location.href,n)),is.buildAbsoluteURL(n,i))},wf=function(n){var t=n.baseUrl,h=t===undefined?"":t,i=n.source,r=i===undefined?"":i,u=n.range,f=u===undefined?"":u,e={uri:r,resolvedUri:ia(h||"",r)};if(f){var o=f.split("-"),s=parseInt(o[0],10),c=parseInt(o[1],10);e.byterange={length:c-s,offset:s}}return e},eet=function(n,t,i){var e=n.NOW,o=n.clientOffset,s=n.availabilityStartTime,r=n.timescale,h=r===undefined?1:r,u=n.start,c=u===undefined?0:u,f=n.minimumUpdatePeriod,l=f===undefined?0:f,a=(e+o)/1e3,v=s+c,y=a+l,p=y-v;return Math.ceil((p*h-t)/i)},bk=function(n,t){for(var o,c,d,s,l=n.type,g=l===undefined?"static":l,a=n.minimumUpdatePeriod,nt=a===undefined?0:a,v=n.media,tt=v===undefined?"":v,it=n.sourceDuration,y=n.timescale,p=y===undefined?1:y,w=n.startNumber,b=w===undefined?1:w,rt=n.periodIndex,u=[],i=-1,f=0;f<t.length;f++){var h=t[f],r=h.d,k=h.r||0,e=h.t||0;for(i<0&&(i=e),e&&e>i&&(i=e),o=void 0,k<0?(c=f+1,o=c===t.length?g==="dynamic"&&nt>0&&tt.indexOf("$Number$")>0?eet(n,i,r):(it*p-i)/r:(t[c].t-i)/r):o=k+1,d=b+u.length+o,s=b+u.length;s<d;)u.push({number:s,duration:r/p,time:i,timeline:rt}),i+=r,s++}return u},oet=function(n,t){for(var r=[],i=n;i<t;i++)r.push(i);return r},us=function(n){return n.reduce(function(n,t){return n.concat(t)},[])},kk=function(n){var i,t;if(!n.length)return[];for(i=[],t=0;t<n.length;t++)i.push(n[t]);return i},set={static:function(n){var i=n.duration,t=n.timescale,r=t===undefined?1:t,u=n.sourceDuration;return{start:0,end:Math.ceil(u/(i/r))}},dynamic:function(n){var h=n.NOW,c=n.clientOffset,l=n.availabilityStartTime,f=n.timescale,t=f===undefined?1:f,i=n.duration,e=n.start,a=e===undefined?0:e,o=n.minimumUpdatePeriod,v=o===undefined?0:o,s=n.timeShiftBufferDepth,y=s===undefined?Infinity:s,r=(h+c)/1e3,u=l+a,p=r+v,w=p-u,b=Math.ceil(w*t/i),k=Math.floor((r-u-y)*t/i),d=Math.floor((r-u)*t/i);return{start:Math.max(0,k),end:Math.min(b,d)}}},het=function(n){return function(t,i){var r=n.duration,u=n.timescale,e=u===undefined?1:u,o=n.periodIndex,f=n.startNumber,s=f===undefined?1:f;return{number:s+t,duration:r/e,timeline:o,time:i*r}}},ra=function(n){var r=n.type,u=r===undefined?"static":r,o=n.duration,f=n.timescale,s=f===undefined?1:f,h=n.sourceDuration,e=set[u](n),c=e.start,l=e.end,t=oet(c,l).map(het(n)),i;return u==="static"&&(i=t.length-1,t[i].duration=h-o/s*i),t},cet=/\$([A-z]*)(?:(%0)([0-9]+)d)?\$/g,aet=function(n){return function(t,i,r,u){if(t==="$$")return"$";if(typeof n[i]=="undefined")return t;var f=""+n[i];return i==="RepresentationID"?f:(u=r?parseInt(u,10):1,f.length>=u)?f:""+new Array(u-f.length+1).join("0")+f}},dk=function(n,t){return n.replace(cet,aet(t))},vet=function(n,t){return!n.duration&&!t?[{number:n.startNumber||1,duration:n.sourceDuration,time:0,timeline:n.periodIndex}]:n.duration?ra(n):bk(n,t)},yet=function(n,t){var i={RepresentationID:n.id,Bandwidth:n.bandwidth||0},r=n.initialization,u=r===undefined?{sourceURL:"",range:""}:r,f=wf({baseUrl:n.baseUrl,source:dk(u.sourceURL,i),range:u.range}),e=vet(n,t);return e.map(function(t){i.Number=t.number;i.Time=t.time;var r=dk(n.media||"",i);return{uri:r,timeline:t.timeline,duration:t.duration,resolvedUri:ia(n.baseUrl||"",r),map:f,number:t.number}})},ou={INVALID_NUMBER_OF_PERIOD:"INVALID_NUMBER_OF_PERIOD",DASH_EMPTY_MANIFEST:"DASH_EMPTY_MANIFEST",DASH_INVALID_XML:"DASH_INVALID_XML",NO_BASE_URL:"NO_BASE_URL",MISSING_SEGMENT_INFORMATION:"MISSING_SEGMENT_INFORMATION",SEGMENT_TIME_UNSPECIFIED:"SEGMENT_TIME_UNSPECIFIED",UNSUPPORTED_UTC_TIMING_SCHEME:"UNSUPPORTED_UTC_TIMING_SCHEME"},pet=function(n,t){var i=n.baseUrl,r=n.initialization,u=r===undefined?{}:r,e=wf({baseUrl:i,source:u.sourceURL,range:u.range}),f=wf({baseUrl:i,source:t.media,range:t.mediaRange});return f.map=e,f},wet=function(n,t){var r=n.duration,f=n.segmentUrls,e=f===undefined?[]:f,u,i;if(!r&&!t||r&&t)throw new Error(ou.SEGMENT_TIME_UNSPECIFIED);return u=e.map(function(t){return pet(n,t)}),i=void 0,r&&(i=ra(n)),t&&(i=bk(n,t)),i.map(function(n,t){if(u[t]){var i=u[t];return i.timeline=n.timeline,i.duration=n.duration,i.number=n.number,i}}).filter(function(n){return n})},bet=function(n){var i=n.baseUrl,u=n.initialization,f=u===undefined?{}:u,e=n.sourceDuration,o=n.timescale,c=o===undefined?1:o,s=n.indexRange,l=s===undefined?"":s,a=n.duration,h,t,r;if(!i)throw new Error(ou.NO_BASE_URL);return h=wf({baseUrl:i,source:f.sourceURL,range:f.range}),t=wf({baseUrl:i,source:i,range:l}),t.map=h,a?(r=ra(n),r.length&&(t.duration=r[0].duration,t.timeline=r[0].timeline)):e&&(t.duration=e/c,t.timeline=0),t.number=0,[t]},ket=function(n){var u=n.attributes,i=n.segmentInfo,t=void 0,r=void 0,f;if(i.template?(r=yet,t=ft(u,i.template)):i.base?(r=bet,t=ft(u,i.base)):i.list&&(r=wet,t=ft(u,i.list)),!r)return{attributes:u};if(f=r(t,i.timeline),t.duration){var e=t,s=e.duration,o=e.timescale,h=o===undefined?1:o;t.duration=s/h}else t.duration=f.length?f.reduce(function(n,t){return Math.max(n,Math.ceil(t.duration))},0):0;return{attributes:t,segments:f}},det=function(n){return n.map(ket)},b=function(n,t){return kk(n.childNodes).filter(function(n){var i=n.tagName;return i===t})},gk=function(n){return n.textContent.trim()},bf=function(n){var i=/P(?:(\d*)Y)?(?:(\d*)M)?(?:(\d*)D)?(?:T(?:(\d*)H)?(?:(\d*)M)?(?:([\d.]*)S)?)?/.exec(n);if(!i)return 0;var t=i.slice(1),r=t[0],u=t[1],f=t[2],e=t[3],o=t[4],s=t[5];return parseFloat(r||0)*31536e3+parseFloat(u||0)*2592e3+parseFloat(f||0)*86400+parseFloat(e||0)*3600+parseFloat(o||0)*60+parseFloat(s||0)},get=function(n){return/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(n)&&(n+="Z"),Date.parse(n)},nd={mediaPresentationDuration:function(n){return bf(n)},availabilityStartTime:function(n){return get(n)/1e3},minimumUpdatePeriod:function(n){return bf(n)},timeShiftBufferDepth:function(n){return bf(n)},start:function(n){return bf(n)},width:function(n){return parseInt(n,10)},height:function(n){return parseInt(n,10)},bandwidth:function(n){return parseInt(n,10)},startNumber:function(n){return parseInt(n,10)},timescale:function(n){return parseInt(n,10)},duration:function(n){var t=parseInt(n,10);return isNaN(t)?bf(n):t},d:function(n){return parseInt(n,10)},t:function(n){return parseInt(n,10)},r:function(n){return parseInt(n,10)},DEFAULT:function(n){return n}},it=function(n){return(n&&n.attributes)?kk(n.attributes).reduce(function(n,t){var i=nd[t.name]||nd.DEFAULT;return n[t.name]=i(t.value),n},{}):{}};var tot={"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime"},fs=function(n,t){return t.length?us(n.map(function(n){return t.map(function(t){return ia(n,gk(t))})})):n},ua=function(n){var f=b(n,"SegmentTemplate")[0],i=b(n,"SegmentList")[0],c=i&&b(i,"SegmentURL").map(function(n){return ft({tag:"SegmentURL"},it(n))}),e=b(n,"SegmentBase")[0],o=i||f,s=o&&b(o,"SegmentTimeline")[0],h=i||e||f,r=h&&b(h,"Initialization")[0],t=f&&it(f),u;return t&&r?t.initialization=r&&it(r):t&&t.initialization&&(t.initialization={sourceURL:t.initialization}),u={template:t,timeline:s&&b(s,"S").map(function(n){return it(n)}),list:i&&ft(it(i),{segmentUrls:c,initialization:it(r)}),base:e&&ft(it(e),{initialization:it(r)})},Object.keys(u).forEach(function(n){u[n]||delete u[n]}),u},iot=function(n,t,i){return function(r){var u=b(r,"BaseURL"),f=fs(t,u),e=ft(n,it(r)),o=ua(r);return f.map(function(n){return{segmentInfo:ft(i,o),attributes:ft(e,{baseUrl:n})}})}},rot=function(n){return n.reduce(function(n,t){var f=it(t),i=tot[f.schemeIdUri],r,u,e;return i&&(n[i]={attributes:f},r=b(t,"cenc:pssh")[0],r&&(u=gk(r),e=u&&not(u),n[i].pssh=e)),n},{})},uot=function(n,t,i){return function(r){var e=it(r),o=fs(t,b(r,"BaseURL")),s=b(r,"Role")[0],h={role:it(s)},u=ft(n,e,h),f=rot(b(r,"ContentProtection"));Object.keys(f).length&&(u=ft(u,{contentProtection:f}));var c=ua(r),l=b(r,"Representation"),a=ft(i,c);return us(l.map(iot(u,o,a)))}},fot=function(n,t){return function(i,r){var u=fs(t,b(i,"BaseURL")),f=it(i),e=ft(n,f,{periodIndex:r}),o=b(i,"AdaptationSet"),s=ua(i);return us(o.map(uot(e,u,s)))}},eot=function(n){var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},r=i.manifestUri,s=r===undefined?"":r,u=i.NOW,h=u===undefined?Date.now():u,f=i.clientOffset,c=f===undefined?0:f,e=b(n,"Period"),t,o;if(e.length!==1)throw new Error(ou.INVALID_NUMBER_OF_PERIOD);return t=it(n),o=fs([s],b(n,"BaseURL")),t.sourceDuration=t.mediaPresentationDuration||0,t.NOW=h,t.clientOffset=c,us(e.map(fot(t,o)))},td=function(n){if(n==="")throw new Error(ou.DASH_EMPTY_MANIFEST);var u=new t.DOMParser,r=u.parseFromString(n,"application/xml"),i=r&&r.documentElement.tagName==="MPD"?r.documentElement:null;if(!i||i&&i.getElementsByTagName("parsererror").length>0)throw new Error(ou.DASH_INVALID_XML);return i},oot=function(n){var i=b(n,"UTCTiming")[0],t;if(!i)return null;t=it(i);switch(t.schemeIdUri){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":t.method="HEAD";break;case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":t.method="GET";break;case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":t.method="DIRECT";t.value=Date.parse(t.value);break;case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":default:throw new Error(ou.UNSUPPORTED_UTC_TIMING_SCHEME);}return t},sot=function(n,t){return uet(det(eot(td(n),t)))},hot=function(n){return oot(td(n))},cot=function(n){return n>>>0},es={toUnsigned:cot},lot=es.toUnsigned,id=Object.freeze({"default":es,__moduleExports:es,toUnsigned:lot}),aot=id&&es||id,su=aot.toUnsigned,vi,fa,rd,ud;vi=function(n,t){var r=[],i,f,o,u,e;if(!t.length)return null;for(i=0;i<n.byteLength;)f=su(n[i]<<24|n[i+1]<<16|n[i+2]<<8|n[i+3]),o=fa(n.subarray(i+4,i+8)),u=f>1?i+f:n.byteLength,o===t[0]&&(t.length===1?r.push(n.subarray(i+8,u)):(e=vi(n.subarray(i+8,u),t.slice(1)),e.length&&(r=r.concat(e)))),i=u;return r};fa=function(n){var t="";return t+=String.fromCharCode(n[0]),t+=String.fromCharCode(n[1]),t+=String.fromCharCode(n[2]),t+String.fromCharCode(n[3])};rd=function(n){var t=vi(n,["moov","trak"]);return t.reduce(function(n,t){var r,f,i,e,u;return(r=vi(t,["tkhd"])[0],!r)?null:(f=r[0],i=f===0?12:20,e=su(r[i]<<24|r[i+1]<<16|r[i+2]<<8|r[i+3]),u=vi(t,["mdia","mdhd"])[0],!u)?null:(f=u[0],i=f===0?12:20,n[e]=su(u[i]<<24|u[i+1]<<16|u[i+2]<<8|u[i+3]),n)},{})};ud=function(n,t){var r,u,i;return r=vi(t,["moof","traf"]),u=[].concat.apply([],r.map(function(t){return vi(t,["tfhd"]).map(function(i){var u,f,r;return u=su(i[4]<<24|i[5]<<16|i[6]<<8|i[7]),f=n[u]||9e4,r=vi(t,["tfdt"]).map(function(n){var i,t;return i=n[0],t=su(n[4]<<24|n[5]<<16|n[6]<<8|n[7]),i===1&&(t*=Math.pow(2,32),t+=su(n[8]<<24|n[9]<<16|n[10]<<8|n[11])),t})[0],r=r||Infinity,r/f})})),i=Math.min.apply(null,u),isFinite(i)?i:0};var fd={parseType:fa,timescale:rd,startTime:ud},hu={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21},vot=hu.H264_STREAM_TYPE,yot=hu.ADTS_STREAM_TYPE,pot=hu.METADATA_STREAM_TYPE,ed=Object.freeze({"default":hu,__moduleExports:hu,H264_STREAM_TYPE:vot,ADTS_STREAM_TYPE:yot,METADATA_STREAM_TYPE:pot}),os=function(){this.init=function(){var n={};this.on=function(t,i){n[t]||(n[t]=[]);n[t]=n[t].concat(i)};this.off=function(t,i){var r;return n[t]?(r=n[t].indexOf(i),n[t]=n[t].slice(),n[t].splice(r,1),r>-1):!1};this.trigger=function(t){var r,i,u,f;if(r=n[t],r)if(arguments.length===2)for(u=r.length,i=0;i<u;++i)r[i].call(this,arguments[1]);else{for(f=[],i=arguments.length,i=1;i<arguments.length;++i)f.push(arguments[i]);for(u=r.length,i=0;i<u;++i)r[i].apply(this,f)}};this.dispose=function(){n={}}}};os.prototype.pipe=function(n){this.on("data",function(t){n.push(t)});this.on("done",function(t){n.flush(t)});return n};os.prototype.push=function(n){this.trigger("data",n)};os.prototype.flush=function(n){this.trigger("done",n)};var ea=os,od=Object.freeze({"default":ea,__moduleExports:ea}),wot=od&&ea||od,bot=8589934592,kot=4294967296,oa=function(n,t){var i=1;for(n>t&&(i=-1);Math.abs(t-n)>kot;)n+=i*bot;return n},sa=function sa(n){var i,t;sa.prototype.init.call(this);this.type_=n;this.push=function(n){n.type===this.type_&&(t===undefined&&(t=n.dts),n.dts=oa(n.dts,t),n.pts=oa(n.pts,t),i=n.dts,this.trigger("data",n))};this.flush=function(){t=i;this.trigger("done")};this.discontinuity=function(){t=void 0;i=void 0}};sa.prototype=new wot;var kf={TimestampRolloverStream:sa,handleRollover:oa},dot=kf.TimestampRolloverStream,got=kf.handleRollover,sd=Object.freeze({"default":kf,__moduleExports:kf,TimestampRolloverStream:dot,handleRollover:got}),df=ed&&hu||ed,hd=function(n){var t=n[1]&31;return t<<=8,t|n[2]},ss=function(n){return!!(n[1]&64)},hs=function(n){var t=0;return(n[3]&48)>>>4>1&&(t+=n[4]+1),t},nst=function(n,t){var i=hd(n);return i===0?"pat":i===t?"pmt":t?"pes":null},tst=function(n){var i=ss(n),t=4+hs(n);return i&&(t+=n[t]+1),(n[t+10]&31)<<8|n[t+11]},ist=function(n){var u={},s=ss(n),t=4+hs(n),f,e,o,r,i;if(s&&(t+=n[t]+1),n[t+5]&1){for(f=(n[t+1]&15)<<8|n[t+2],e=3+f-4,o=(n[t+10]&15)<<8|n[t+11],r=12+o;r<e;)i=t+r,u[(n[i+1]&31)<<8|n[i+2]]=n[i],r+=((n[i+3]&15)<<8|n[i+4])+5;return u}},rst=function(n,t){var i=hd(n),r=t[i];switch(r){case df.H264_STREAM_TYPE:return"video";case df.ADTS_STREAM_TYPE:return"audio";case df.METADATA_STREAM_TYPE:return"timed-metadata";default:return null}},ust=function(n){var u=ss(n),t,i,r;return u?(t=4+hs(n),t>=n.byteLength)?null:(i=null,r=n[t+7],r&192&&(i={},i.pts=(n[t+9]&14)<<27|(n[t+10]&255)<<20|(n[t+11]&254)<<12|(n[t+12]&255)<<5|(n[t+13]&254)>>>3,i.pts*=4,i.pts+=(n[t+13]&6)>>>1,i.dts=i.pts,r&64&&(i.dts=(n[t+14]&14)<<27|(n[t+15]&255)<<20|(n[t+16]&254)<<12|(n[t+17]&255)<<5|(n[t+18]&254)>>>3,i.dts*=4,i.dts+=(n[t+18]&6)>>>1)),i):null},ha=function(n){switch(n){case 5:return"slice_layer_without_partitioning_rbsp_idr";case 6:return"sei_rbsp";case 7:return"seq_parameter_set_rbsp";case 8:return"pic_parameter_set_rbsp";case 9:return"access_unit_delimiter_rbsp";default:return null}},fst=function(n){for(var e=4+hs(n),i=n.subarray(e),t=0,r=0,f=!1,u;r<i.byteLength-3;r++)if(i[r+2]===1){t=r+5;break}while(t<i.byteLength)switch(i[t]){case 0:if(i[t-1]!==0){t+=2;break}else if(i[t-2]!==0){t++;break}r+3!==t-2&&(u=ha(i[r+3]&31),u==="slice_layer_without_partitioning_rbsp_idr"&&(f=!0));do t++;while(i[t]!==1&&t<i.length);r=t-2;t+=3;break;case 1:if(i[t-1]!==0||i[t-2]!==0){t+=3;break}u=ha(i[r+3]&31);u==="slice_layer_without_partitioning_rbsp_idr"&&(f=!0);r=t-2;t+=3;break;default:t+=3}return i=i.subarray(r),t-=r,r=0,i&&i.byteLength>3&&(u=ha(i[r+3]&31),u==="slice_layer_without_partitioning_rbsp_idr"&&(f=!0)),f},ni={parseType:nst,parsePat:tst,parsePmt:ist,parsePayloadUnitStartIndicator:ss,parsePesType:rst,parsePesTime:ust,videoPacketContainsKeyFrame:fst},est=ni.parseType,ost=ni.parsePat,sst=ni.parsePmt,hst=ni.parsePayloadUnitStartIndicator,cst=ni.parsePesType,lst=ni.parsePesTime,ast=ni.videoPacketContainsKeyFrame,cd=Object.freeze({"default":ni,__moduleExports:ni,parseType:est,parsePat:ost,parsePmt:sst,parsePayloadUnitStartIndicator:hst,parsePesType:cst,parsePesTime:lst,videoPacketContainsKeyFrame:ast}),vst=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],ld=function(n){return n[0]<<21|n[1]<<14|n[2]<<7|n[3]},yst=function(n,t,i){for(var u="",r=t;r<i;r++)u+="%"+("00"+n[r].toString(16)).slice(-2);return u},pst=function(n,t,i){return unescape(yst(n,t,i))},wst=function(n,t){var i=n[t+6]<<21|n[t+7]<<14|n[t+8]<<7|n[t+9],r=n[t+5],u=(r&16)>>4;return u?i+20:i+10},bst=function(n,t){var i=(n[t+5]&224)>>5,r=n[t+4]<<3,u=n[t+3]&6144;return u|r|i},kst=function(n,t){return n[t]==="I".charCodeAt(0)&&n[t+1]==="D".charCodeAt(0)&&n[t+2]==="3".charCodeAt(0)?"timed-metadata":n[t]&!0&&(n[t+1]&240)==240?"audio":null},dst=function(n){for(var t=0;t+5<n.length;){if(n[t]!==255||(n[t+1]&246)!=240){t++;continue}return vst[(n[t+2]&60)>>>2]}return null},gst=function(n){var t,f,u,o,r,s,i,e;t=10;n[5]&64&&(t+=4,t+=ld(n.subarray(10,14)));do{if(f=ld(n.subarray(t+4,t+8)),f<1)return null;if(o=String.fromCharCode(n[t],n[t+1],n[t+2],n[t+3]),o==="PRIV")for(u=n.subarray(t+10,t+f+10),r=0;r<u.byteLength;r++)if(u[r]===0){if(s=pst(u,0,r),s==="com.apple.streaming.transportStreamTimestamp")return i=u.subarray(r+1),e=(i[3]&1)<<30|i[4]<<22|i[5]<<14|i[6]<<6|i[7]>>>2,e*=4,e+(i[7]&3);break}t+=10;t+=f}while(t<n.byteLength);return null},yi={parseId3TagSize:wst,parseAdtsSize:bst,parseType:kst,parseSampleRate:dst,parseAacTimestamp:gst},nht=yi.parseId3TagSize,tht=yi.parseAdtsSize,iht=yi.parseType,rht=yi.parseSampleRate,uht=yi.parseAacTimestamp,ad=Object.freeze({"default":yi,__moduleExports:yi,parseId3TagSize:nht,parseAdtsSize:tht,parseType:iht,parseSampleRate:rht,parseAacTimestamp:uht}),fht=sd&&kf||sd,eht=cd&&ni||cd,oht=ad&&yi||ad,cu=fht.handleRollover,c={};c.ts=eht;c.aac=oht;var or=9e4,rt=188,ti=71,sht=function(n){return n[0]==="I".charCodeAt(0)&&n[1]==="D".charCodeAt(0)&&n[2]==="3".charCodeAt(0)?!0:!1},hht=function(n,t){for(var r=0,i=rt,u,f;i<n.byteLength;){if(n[r]===ti&&n[i]===ti){u=n.subarray(r,i);f=c.ts.parseType(u,t.pid);switch(f){case"pat":t.pid||(t.pid=c.ts.parsePat(u));break;case"pmt":t.table||(t.table=c.ts.parsePmt(u))}if(t.pid&&t.table)return;r+=rt;i+=rt;continue}r++;i++}},cht=function(n,t,i){for(var u=0,r=rt,f,s,h,l,e,o=!1;r<n.byteLength;){if(n[u]===ti&&n[r]===ti){f=n.subarray(u,r);s=c.ts.parseType(f,t.pid);switch(s){case"pes":h=c.ts.parsePesType(f,t.table);l=c.ts.parsePayloadUnitStartIndicator(f);h==="audio"&&l&&(e=c.ts.parsePesTime(f),e&&(e.type="audio",i.audio.push(e),o=!0))}if(o)break;u+=rt;r+=rt;continue}u++;r++}for(r=n.byteLength,u=r-rt,o=!1;u>=0;){if(n[u]===ti&&n[r]===ti){f=n.subarray(u,r);s=c.ts.parseType(f,t.pid);switch(s){case"pes":h=c.ts.parsePesType(f,t.table);l=c.ts.parsePayloadUnitStartIndicator(f);h==="audio"&&l&&(e=c.ts.parsePesTime(f),e&&(e.type="audio",i.audio.push(e),o=!0))}if(o)break;u-=rt;r-=rt;continue}u--;r--}},lht=function(n,t,i){for(var f=0,u=rt,r,l,a,h,e,v,y,p,s=!1,o={data:[],size:0};u<n.byteLength;){if(n[f]===ti&&n[u]===ti){r=n.subarray(f,u);l=c.ts.parseType(r,t.pid);switch(l){case"pes":if(a=c.ts.parsePesType(r,t.table),h=c.ts.parsePayloadUnitStartIndicator(r),a==="video"&&(h&&!s&&(e=c.ts.parsePesTime(r),e&&(e.type="video",i.video.push(e),s=!0)),!i.firstKeyFrame)){if(h&&o.size!==0){for(v=new Uint8Array(o.size),y=0;o.data.length;)p=o.data.shift(),v.set(p,y),y+=p.byteLength;c.ts.videoPacketContainsKeyFrame(v)&&(i.firstKeyFrame=c.ts.parsePesTime(v),i.firstKeyFrame.type="video");o.size=0}o.data.push(r);o.size+=r.byteLength}}if(s&&i.firstKeyFrame)break;f+=rt;u+=rt;continue}f++;u++}for(u=n.byteLength,f=u-rt,s=!1;f>=0;){if(n[f]===ti&&n[u]===ti){r=n.subarray(f,u);l=c.ts.parseType(r,t.pid);switch(l){case"pes":a=c.ts.parsePesType(r,t.table);h=c.ts.parsePayloadUnitStartIndicator(r);a==="video"&&h&&(e=c.ts.parsePesTime(r),e&&(e.type="video",i.video.push(e),s=!0))}if(s)break;f-=rt;u-=rt;continue}f--;u--}},aht=function(n,t){var u,r,i;n.audio&&n.audio.length&&(u=t,typeof u=="undefined"&&(u=n.audio[0].dts),n.audio.forEach(function(n){n.dts=cu(n.dts,u);n.pts=cu(n.pts,u);n.dtsTime=n.dts/or;n.ptsTime=n.pts/or}));n.video&&n.video.length&&(r=t,typeof r=="undefined"&&(r=n.video[0].dts),n.video.forEach(function(n){n.dts=cu(n.dts,r);n.pts=cu(n.pts,r);n.dtsTime=n.dts/or;n.ptsTime=n.pts/or}),n.firstKeyFrame&&(i=n.firstKeyFrame,i.dts=cu(i.dts,r),i.pts=cu(i.pts,r),i.dtsTime=i.dts/or,i.ptsTime=i.dts/or))},vht=function(n){for(var u=!1,o=0,f=null,r=null,i=0,t=0,e,h,s,l;n.length-t>=3;){h=c.aac.parseType(n,t);switch(h){case"timed-metadata":if(n.length-t<10){u=!0;break}if(i=c.aac.parseId3TagSize(n,t),i>n.length){u=!0;break}r===null&&(e=n.subarray(t,t+i),r=c.aac.parseAacTimestamp(e));t+=i;break;case"audio":if(n.length-t<7){u=!0;break}if(i=c.aac.parseAdtsSize(n,t),i>n.length){u=!0;break}f===null&&(e=n.subarray(t,t+i),f=c.aac.parseSampleRate(e));o++;t+=i;break;default:t++}if(u)return null}return f===null||r===null?null:(s=or/f,l={audio:[{type:"audio",dts:r,pts:r},{type:"audio",dts:r+o*1024*s,pts:r+o*1024*s}]},l)},yht=function(n){var i={pid:null,table:null},t={},r,u;hht(n,i);for(r in i.table)if(i.table.hasOwnProperty(r)){u=i.table[r];switch(u){case df.H264_STREAM_TYPE:t.video=[];lht(n,i,t);t.video.length===0&&delete t.video;break;case df.ADTS_STREAM_TYPE:t.audio=[];cht(n,i,t);t.audio.length===0&&delete t.audio}}return t},pht=function(n,t){var r=sht(n),i;return(i=r?vht(n):yht(n),!i||!i.audio&&!i.video)?null:(aht(i,t),i)},wht={inspect:pht};var cs=function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");},kht=function(){function n(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}return function(t,i,r){return i&&n(t.prototype,i),r&&n(t,r),t}}(),dht=function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+(typeof t=="undefined"?"undefined":k(t)));n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(n,t):n.__proto__=t)},ght=function(n,t){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&((typeof t=="undefined"?"undefined":k(t))==="object"||typeof t=="function")?t:n},nct=function(){for(var h=[[[],[],[],[],[]],[[],[],[],[],[]]],f=h[0],e=h[1],l=f[4],p=e[4],n=void 0,i=void 0,r=void 0,u=[],a=[],c=void 0,v=void 0,y=void 0,t=void 0,o=void 0,s=void 0,n=0;n<256;n++)a[(u[n]=n<<1^(n>>7)*283)^n]=n;for(i=r=0;!l[i];i^=c||1,r=a[r]||1)for(t=r^r<<1^r<<2^r<<3^r<<4,t=t>>8^t&255^99,l[i]=t,p[t]=i,y=u[v=u[c=u[i]]],s=y*16843009^v*65537^c*257^i*16843008,o=u[t]*257^t*16843008,n=0;n<4;n++)f[n][i]=o=o<<24^o>>>8,e[n][t]=s=s<<24^s>>>8;for(n=0;n<5;n++)f[n]=f[n].slice(0),e[n]=e[n].slice(0);return h},vt=null,tct=function(){function n(t){cs(this,n);vt||(vt=nct());this._tables=[[vt[0][0].slice(),vt[0][1].slice(),vt[0][2].slice(),vt[0][3].slice(),vt[0][4].slice()],[vt[1][0].slice(),vt[1][1].slice(),vt[1][2].slice(),vt[1][3].slice(),vt[1][4].slice()]];var r=void 0,o=void 0,i=void 0,e=void 0,c=void 0,f=this._tables[0][4],s=this._tables[1],u=t.length,h=1;if(u!==4&&u!==6&&u!==8)throw new Error("Invalid aes key size");for(e=t.slice(0),c=[],this._key=[e,c],r=u;r<4*u+28;r++)i=e[r-1],(r%u==0||u===8&&r%u==4)&&(i=f[i>>>24]<<24^f[i>>16&255]<<16^f[i>>8&255]<<8^f[i&255],r%u==0&&(i=i<<8^i>>>24^h<<24,h=h<<1^(h>>7)*283)),e[r]=e[r-u]^i;for(o=0;r;o++,r--)i=e[o&3?r:r-4],c[o]=r<=4||o<4?i:s[0][f[i>>>24]]^s[1][f[i>>16&255]]^s[2][f[i>>8&255]]^s[3][f[i&255]]}return n.prototype.decrypt=function(n,t,i,r,u,f){for(var e=this._key[1],o=n^e[0],s=r^e[1],h=i^e[2],c=t^e[3],y=void 0,g=void 0,nt=void 0,tt=e.length/4-2,l=void 0,a=4,v=this._tables[1],p=v[0],w=v[1],b=v[2],k=v[3],d=v[4],l=0;l<tt;l++)y=p[o>>>24]^w[s>>16&255]^b[h>>8&255]^k[c&255]^e[a],g=p[s>>>24]^w[h>>16&255]^b[c>>8&255]^k[o&255]^e[a+1],nt=p[h>>>24]^w[c>>16&255]^b[o>>8&255]^k[s&255]^e[a+2],c=p[c>>>24]^w[o>>16&255]^b[s>>8&255]^k[h&255]^e[a+3],a+=4,o=y,s=g,h=nt;for(l=0;l<4;l++)u[(3&-l)+f]=d[o>>>24]<<24^d[s>>16&255]<<16^d[h>>8&255]<<8^d[c&255]^e[a++],y=o,o=s,s=h,h=c,c=y},n}(),vd=function(){function n(){cs(this,n);this.listeners={}}return n.prototype.on=function(n,t){this.listeners[n]||(this.listeners[n]=[]);this.listeners[n].push(t)},n.prototype.off=function(n,t){if(!this.listeners[n])return!1;var i=this.listeners[n].indexOf(t);return this.listeners[n].splice(i,1),i>-1},n.prototype.trigger=function(n){var t=this.listeners[n],u,i,f,e,r;if(t)if(arguments.length===2)for(u=t.length,i=0;i<u;++i)t[i].call(this,arguments[1]);else for(f=Array.prototype.slice.call(arguments,1),e=t.length,r=0;r<e;++r)t[r].apply(this,f)},n.prototype.dispose=function(){this.listeners={}},n.prototype.pipe=function(n){this.on("data",function(t){n.push(t)})},n}(),yd=function(n){function t(){cs(this,t);var i=ght(this,n.call(this,vd));return i.jobs=[],i.delay=1,i.timeout_=null,i}return dht(t,n),t.prototype.processJob_=function(){this.jobs.shift()();this.timeout_=this.jobs.length?setTimeout(this.processJob_.bind(this),this.delay):null},t.prototype.push=function(n){this.jobs.push(n);this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))},t}(vd),yt=function(n){return n<<24|(n&65280)<<8|(n&16711680)>>8|n>>>24},pd=function(n,t,i){var f=new Int32Array(n.buffer,n.byteOffset,n.byteLength>>2),p=new tct(Array.prototype.slice.call(t)),y=new Uint8Array(n.byteLength),u=new Int32Array(y.buffer),e=void 0,o=void 0,s=void 0,h=void 0,c=void 0,l=void 0,a=void 0,v=void 0,r=void 0;for(e=i[0],o=i[1],s=i[2],h=i[3],r=0;r<f.length;r+=4)c=yt(f[r]),l=yt(f[r+1]),a=yt(f[r+2]),v=yt(f[r+3]),p.decrypt(c,l,a,v,u,r),u[r]=yt(u[r]^e),u[r+1]=yt(u[r+1]^o),u[r+2]=yt(u[r+2]^s),u[r+3]=yt(u[r+3]^h),e=c,o=l,s=a,h=v;return y},ict=function(){function n(t,i,r,u){cs(this,n);var o=n.STEP,e=new Int32Array(t.buffer),s=new Uint8Array(t.byteLength),f=0;for(this.asyncStream_=new yd,this.asyncStream_.push(this.decryptChunk_(e.subarray(f,f+o),i,r,s)),f=o;f<e.length;f+=o)r=new Uint32Array([yt(e[f-4]),yt(e[f-3]),yt(e[f-2]),yt(e[f-1])]),this.asyncStream_.push(this.decryptChunk_(e.subarray(f,f+o),i,r,s));this.asyncStream_.push(function(){u(null,bht(s))})}return n.prototype.decryptChunk_=function(n,t,i,r){return function(){var u=pd(n,t,i);r.set(u,n.byteOffset)}},kht(n,null,[{key:"STEP",get:function(){return 32e3}}]),n}();
/**
   * @videojs/http-streaming
   * @version 1.1.0
   * @copyright 2018 Brightcove, Inc
   * @license Apache-2.0
   */
var ei=function(n,i){return/^[a-z]+:/i.test(i)?i:(/\/\//i.test(n)||(n=is.buildAbsoluteURL(t.location.href,n)),is.buildAbsoluteURL(n,i))},pt=function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");},kt=function(){function n(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}return function(t,i,r){return i&&n(t.prototype,i),r&&n(t,r),t}}(),rct=function uct(n,t,i){var r,u,f;return n===null&&(n=Function.prototype),r=Object.getOwnPropertyDescriptor(n,t),r===undefined?(u=Object.getPrototypeOf(n),u===null?undefined:uct(u,t,i)):"value"in r?r.value:(f=r.get,f===undefined)?undefined:f.call(i)},oi=function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+(typeof t=="undefined"?"undefined":k(t)));n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(n,t):n.__proto__=t)},ii=function(n,t){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&((typeof t=="undefined"?"undefined":k(t))==="object"||typeof t=="function")?t:n},fct=function(){function n(n,t){var r=[],u=!0,f=!1,e=undefined,i,o;try{for(i=n[Symbol.iterator]();!(u=(o=i.next()).done);u=!0)if(r.push(o.value),t&&r.length===t)break}catch(s){f=!0;e=s}finally{try{!u&&i["return"]&&i["return"]()}finally{if(f)throw e;}}return r}return function(t,i){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return n(t,i);throw new TypeError("Invalid attempt to destructure non-iterable instance");}}(),ca=n.mergeOptions,ect=n.EventTarget,oct=n.log,la=function(n,t){["AUDIO","SUBTITLES"].forEach(function(i){var r,u,f;for(r in n.mediaGroups[i])for(u in n.mediaGroups[i][r])f=n.mediaGroups[i][r][u],t(f,i,r,u)})},sct=function(n,t,i){var u=t.slice(),f,r;for(i=i||0,f=Math.min(n.length,t.length+i),r=i;r<f;r++)u[r-i]=ca(n[r],u[r-i]);return u},hct=function(n,t){n.resolvedUri||(n.resolvedUri=ei(t,n.uri));n.key&&!n.key.resolvedUri&&(n.key.resolvedUri=ei(t,n.key.uri));n.map&&!n.map.resolvedUri&&(n.map.resolvedUri=ei(t,n.map.uri))},aa=function(n,t){var r=ca(n,{}),i=r.playlists[t.uri],u,f;if(!i||i.segments&&t.segments&&i.segments.length===t.segments.length&&i.mediaSequence===t.mediaSequence)return null;for(u=ca(i,t),i.segments&&(u.segments=sct(i.segments,t.segments,t.mediaSequence-i.mediaSequence)),u.segments.forEach(function(n){hct(n,u.resolvedUri)}),f=0;f<r.playlists.length;f++)r.playlists[f].uri===t.uri&&(r.playlists[f]=u);return r.playlists[t.uri]=u,r},wd=function(n){for(var i=n.playlists.length,t;i--;)t=n.playlists[i],n.playlists[t.uri]=t,t.resolvedUri=ei(n.uri,t.uri),t.id=i,t.attributes||(t.attributes={},oct.warn("Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute."))},bd=function(n){la(n,function(t){t.uri&&(t.resolvedUri=ei(n.uri,t.uri))})},kd=function(n,t){var i=n.segments[n.segments.length-1];return t&&i&&i.duration?i.duration*1e3:(n.targetDuration||10)*500},ls=function(n){function i(n,t,r){pt(this,i);var u=ii(this,(i.__proto__||Object.getPrototypeOf(i)).call(this));if(u.srcUrl=n,u.hls_=t,u.withCredentials=r,!u.srcUrl)throw new Error("A non-empty playlist URL is required");u.state="HAVE_NOTHING";u.on("mediaupdatetimeout",function(){u.state==="HAVE_METADATA"&&(u.state="HAVE_CURRENT_METADATA",u.request=u.hls_.xhr({uri:ei(u.master.uri,u.media().uri),withCredentials:u.withCredentials},function(n){if(u.request){if(n)return u.playlistRequestError(u.request,u.media().uri,"HAVE_METADATA");u.haveMetadata(u.request,u.media().uri)}}))});return u}return oi(i,n),kt(i,[{key:"playlistRequestError",value:function(n,t,i){this.request=null;i&&(this.state=i);this.error={playlist:this.master.playlists[t],status:n.status,message:"HLS playlist request error at URL: "+t,responseText:n.responseText,code:n.status>=500?4:2};this.trigger("error")}},{key:"haveMetadata",value:function(n,i){var f=this,r,u;this.request=null;this.state="HAVE_METADATA";r=new pk;r.push(n.responseText);r.end();r.manifest.uri=i;r.manifest.attributes=r.manifest.attributes||{};u=aa(this.master,r.manifest);this.targetDuration=r.manifest.targetDuration;u?(this.master=u,this.media_=this.master.playlists[r.manifest.uri]):this.trigger("playlistunchanged");this.media().endList||(t.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=t.setTimeout(function(){f.trigger("mediaupdatetimeout")},kd(this.media(),!!u)));this.trigger("loadedplaylist")}},{key:"dispose",value:function(){this.stopRequest();t.clearTimeout(this.mediaUpdateTimeout)}},{key:"stopRequest",value:function(){if(this.request){var n=this.request;this.request=null;n.onreadystatechange=null;n.abort()}}},{key:"media",value:function(n){var t=this,i,r;if(!n)return this.media_;if(this.state==="HAVE_NOTHING")throw new Error("Cannot switch media playlist from "+this.state);if(i=this.state,typeof n=="string"){if(!this.master.playlists[n])throw new Error("Unknown playlist URI: "+n);n=this.master.playlists[n]}if(r=!this.media_||n.uri!==this.media_.uri,this.master.playlists[n.uri].endList){this.request&&(this.request.onreadystatechange=null,this.request.abort(),this.request=null);this.state="HAVE_METADATA";this.media_=n;r&&(this.trigger("mediachanging"),this.trigger("mediachange"));return}if(r){if(this.state="SWITCHING_MEDIA",this.request){if(ei(this.master.uri,n.uri)===this.request.url)return;this.request.onreadystatechange=null;this.request.abort();this.request=null}this.media_&&this.trigger("mediachanging");this.request=this.hls_.xhr({uri:ei(this.master.uri,n.uri),withCredentials:this.withCredentials},function(r,u){if(t.request){if(r)return t.playlistRequestError(t.request,n.uri,i);t.haveMetadata(u,n.uri);i==="HAVE_MASTER"?t.trigger("loadedmetadata"):t.trigger("mediachange")}})}}},{key:"pause",value:function(){this.stopRequest();t.clearTimeout(this.mediaUpdateTimeout);this.state==="HAVE_NOTHING"&&(this.started=!1);this.state==="SWITCHING_MEDIA"?this.state=this.media_?"HAVE_METADATA":"HAVE_MASTER":this.state==="HAVE_CURRENT_METADATA"&&(this.state="HAVE_METADATA")}},{key:"load",value:function(n){var u=this,i,r;if(t.clearTimeout(this.mediaUpdateTimeout),i=this.media(),n){r=i?i.targetDuration*500:5e3;this.mediaUpdateTimeout=t.setTimeout(function(){return u.load()},r);return}if(!this.started){this.start();return}i&&!i.endList?this.trigger("mediaupdatetimeout"):this.trigger("loadedplaylist")}},{key:"start",value:function(){var n=this;this.started=!0;this.request=this.hls_.xhr({uri:this.srcUrl,withCredentials:this.withCredentials},function(i,r){if(n.request){if(n.request=null,i)return n.error={status:r.status,message:"HLS playlist request error at URL: "+n.srcUrl,responseText:r.responseText,code:2},n.state==="HAVE_NOTHING"&&(n.started=!1),n.trigger("error");var u=new pk;if(u.push(r.responseText),u.end(),n.state="HAVE_MASTER",u.manifest.uri=n.srcUrl,u.manifest.playlists){n.master=u.manifest;wd(n.master);bd(n.master);n.trigger("loadedplaylist");n.request||n.media(u.manifest.playlists[0]);return}return n.master={mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:t.location.href,playlists:[{uri:n.srcUrl,id:0}]},n.master.playlists[n.srcUrl]=n.master.playlists[0],n.master.playlists[0].resolvedUri=n.srcUrl,n.master.playlists[0].attributes=n.master.playlists[0].attributes||{},n.haveMetadata(r,n.srcUrl),n.trigger("loadedmetadata")}})}}]),i}(ect),dd=n.createTimeRange,cct=function(n,t){var r=0,u=t-n.mediaSequence,i=n.segments[u];if(i){if(typeof i.start!="undefined")return{result:i.start,precise:!0};if(typeof i.end!="undefined")return{result:i.end-i.duration,precise:!0}}while(u--){if(i=n.segments[u],typeof i.end!="undefined")return{result:r+i.end,precise:!0};if(r+=i.duration,typeof i.start!="undefined")return{result:r+i.start,precise:!0}}return{result:r,precise:!1}},lct=function(n,t){for(var r=0,i=void 0,u=t-n.mediaSequence;u<n.segments.length;u++){if(i=n.segments[u],typeof i.start!="undefined")return{result:i.start-r,precise:!0};if(r+=i.duration,typeof i.end!="undefined")return{result:i.end-r,precise:!0}}return{result:-1,precise:!1}},gd=function(n,t,i){var r=void 0,u=void 0;return(typeof t=="undefined"&&(t=n.mediaSequence+n.segments.length),t<n.mediaSequence)?0:(r=cct(n,t),r.precise)?r.result:(u=lct(n,t),u.precise)?u.result:r.result+i},ng=function(n,i,r){if(!n)return 0;if(typeof r!="number"&&(r=0),typeof i=="undefined"){if(n.totalDuration)return n.totalDuration;if(!n.endList)return t.Infinity}return gd(n,i,r)},gf=function(n,t,i){var u=0,f,e,r;if(t>i&&(f=[i,t],t=f[0],i=f[1]),t<0){for(e=t;e<Math.min(0,i);e++)u+=n.targetDuration;t=0}for(r=t;r<i;r++)u+=n.segments[r].duration;return u},tg=function(n){if(!n.segments.length)return 0;for(var t=n.segments.length-1,i=n.segments[t].duration||n.targetDuration,r=i+n.targetDuration*2;t--;)if(i+=n.segments[t].duration,i>=r)break;return Math.max(0,t)},ig=function(n,t,i){if(!n||!n.segments)return null;if(n.endList)return ng(n);if(t===null)return null;t=t||0;var r=i?tg(n):n.segments.length;return gd(n,n.mediaSequence+r,t)},act=function(n,t){var r=t||0,i=ig(n,t,!0);return i===null?dd():dd(r,i)},rg=function(n){return n-Math.floor(n)==0},ug=function(n,t){var r,i,u,f;if(rg(t))return t+n*.1;for(r=t.toString().split(".")[1].length,i=1;i<=r;i++)if(u=Math.pow(10,i),f=t*u,rg(f)||i===r)return(f+n)/u},vct=ug.bind(null,1),yct=ug.bind(null,-1),pct=function(n,t,i,r){var u=void 0,e=void 0,o=n.segments.length,f=t-r;if(f<0){if(i>0)for(u=i-1;u>=0;u--)if(e=n.segments[u],f+=yct(e.duration),f>0)return{mediaIndex:u,startTime:r-gf(n,i,u)};return{mediaIndex:0,startTime:t}}if(i<0){for(u=i;u<0;u++)if(f-=n.targetDuration,f<0)return{mediaIndex:0,startTime:t};i=0}for(u=i;u<o;u++)if(e=n.segments[u],f-=vct(e.duration),f<0)return{mediaIndex:u,startTime:r+gf(n,i,u)};return{mediaIndex:o-1,startTime:t}},fg=function(n){return n.excludeUntil&&n.excludeUntil>Date.now()},va=function(n){return n.excludeUntil&&n.excludeUntil===Infinity},as=function(n){var t=fg(n);return!n.disabled&&!t},wct=function(n){return n.disabled},bct=function(n){for(var t=0;t<n.segments.length;t++)if(n.segments[t].key)return!0;return!1},kct=function(n){for(var t=0;t<n.segments.length;t++)if(n.segments[t].map)return!0;return!1},eg=function(n,t){return t.attributes&&t.attributes[n]},dct=function(n,t,i){var u=arguments.length>3&&arguments[3]!==undefined?arguments[3]:0,r;return eg("BANDWIDTH",i)?(r=n*i.attributes.BANDWIDTH,(r-u*8)/t):NaN},ya=function(n,t){if(n.playlists.length===1)return!0;var i=t.attributes.BANDWIDTH||Number.MAX_VALUE;return n.playlists.filter(function(n){return as(n)?(n.attributes.BANDWIDTH||0)<i:!1}).length===0},lt={duration:ng,seekable:act,safeLiveIndex:tg,getMediaInfoForTime:pct,isEnabled:as,isDisabled:wct,isBlacklisted:fg,isIncompatible:va,playlistEnd:ig,isAes:bct,isFmp4:kct,hasAttribute:eg,estimateSegmentRequestTime:dct,isLowestEnabledRendition:ya},gct=n.xhr,nlt=n.mergeOptions,og=function(){return function t(i,r){var f,e,u,o;return i=nlt({timeout:45e3},i),f=t.beforeRequest||n.Hls.xhr.beforeRequest,f&&typeof f=="function"&&(e=f(i),e&&(i=e)),u=gct(i,function(n,t){var i=u.response;!n&&i&&(u.responseTime=Date.now(),u.roundTripTime=u.responseTime-u.requestTime,u.bytesReceived=i.byteLength||i.length,u.bandwidth||(u.bandwidth=Math.floor(u.bytesReceived/u.roundTripTime*8e3)));t.headers&&(u.responseHeaders=t.headers);n&&n.code==="ETIMEDOUT"&&(u.timedout=!0);n||u.aborted||t.statusCode===200||t.statusCode===206||t.statusCode===0||(n=new Error("XHR Failed with a response of: "+(u&&(i||u.responseText))));r(n,u)}),o=u.abort,u.abort=function(){return u.aborted=!0,o.apply(u,arguments)},u.uri=i.uri,u.requestTime=Date.now(),u}},tlt=function(n,t){return n.start(t)+"-"+n.end(t)},ilt=function(n,t){var i=n.toString(16);return"00".substring(0,2-i.length)+i+(t%2?" ":"")},rlt=function(n){return n>=32&&n<126?String.fromCharCode(n):"."},sg=function(n){var t={};return Object.keys(n).forEach(function(i){var r=n[i];t[i]=ArrayBuffer.isView(r)?{bytes:r.buffer,byteOffset:r.byteOffset,byteLength:r.byteLength}:r}),t},vs=function(n){var t=n.byterange||{length:Infinity,offset:0};return[t.length,t.offset,n.resolvedUri].join(",")},hg=function(n){for(var r=Array.prototype.slice.call(n),t=16,u="",f=void 0,e=void 0,i=0;i<r.length/t;i++)f=r.slice(i*t,i*t+t).map(ilt).join(""),e=r.slice(i*t,i*t+t).map(rlt).join(""),u+=f+" "+e+"\n";return u},ult=function(n){var t=n.bytes;return hg(t)},flt=function(n){for(var i="",t=void 0,t=0;t<n.length;t++)i+=tlt(n,t)+" ";return i},elt=Object.freeze({createTransferableMessage:sg,initSegmentId:vs,hexDump:hg,tagDump:ult,textRanges:flt}),lu=1/30,sr=lu*3,cg=function(t,i){var u=[],r=void 0;if(t&&t.length)for(r=0;r<t.length;r++)i(t.start(r),t.end(r))&&u.push([t.start(r),t.end(r)]);return n.createTimeRanges(u)},lg=function(n,t){return cg(n,function(n,i){return n-lu<=t&&i+lu>=t})},ag=function(n,t){return cg(n,function(n){return n-lu>=t})},olt=function(t){var r,i,u,f;if(t.length<2)return n.createTimeRanges();for(r=[],i=1;i<t.length;i++)u=t.end(i-1),f=t.start(i),r.push([u,f]);return n.createTimeRanges(r)},pa=function(n){var i=[],t;if(!n||!n.length)return"";for(t=0;t<n.length;t++)i.push(n.start(t)+" => "+n.end(t));return i.join(", ")},slt=function(n,t){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:1,r=n.length?n.end(n.length-1):0;return(r-t)/i},vg=function(n){for(var i=[],t=0;t<n.length;t++)i.push({start:n.start(t),end:n.end(t)});return i},hlt=function(n,t,i){var u=t.player_,r,f;if(i.captions&&i.captions.length){n.inbandTextTracks_||(n.inbandTextTracks_={});for(r in i.captionStreams)n.inbandTextTracks_[r]||(u.tech_.trigger({type:"usage",name:"hls-608"}),f=u.textTracks().getTrackById(r),n.inbandTextTracks_[r]=f?f:u.addRemoteTextTrack({kind:"captions",id:r,label:r},!1).track)}i.metadata&&i.metadata.length&&!n.metadataTrack_&&(n.metadataTrack_=u.addRemoteTextTrack({kind:"metadata",label:"Timed Metadata"},!1).track,n.metadataTrack_.inBandMetadataTrackDispatchType=i.metadata.dispatchType)},ne=function(n,t,i){var u=void 0,r=void 0;if(i&&i.cues)for(u=i.cues.length;u--;)r=i.cues[u],r.startTime<=t&&r.endTime>=n&&i.removeCue(r)},clt=function(t){Object.defineProperties(t.frame,{id:{get:function(){return n.log.warn("cue.frame.id is deprecated. Use cue.value.key instead."),t.value.key}},value:{get:function(){return n.log.warn("cue.frame.value is deprecated. Use cue.value.data instead."),t.value.data}},privateData:{get:function(){return n.log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead."),t.value.data}}})},yg=function(n){return isNaN(n)||Math.abs(n)===Infinity?Number.MAX_VALUE:n},llt=function(n,i,r){var h=t.WebKitDataCue||t.VTTCue,c,f,e,u,o,s;if(i&&i.forEach(function(n){var t=n.stream;this.inbandTextTracks_[t].addCue(new h(n.startTime+this.timestampOffset,n.endTime+this.timestampOffset,n.text))},n),r&&(c=yg(n.mediaSource_.duration),r.forEach(function(n){var t=n.cueTime+this.timestampOffset;n.frames.forEach(function(n){var i=new h(t,t,n.value||n.url||n.data||"");i.frame=n;i.value=n;clt(i);this.metadataTrack_.addCue(i)},this)},n),n.metadataTrack_&&n.metadataTrack_.cues&&n.metadataTrack_.cues.length)){for(f=n.metadataTrack_.cues,e=[],u=0;u<f.length;u++)f[u]&&e.push(f[u]);o=e.reduce(function(n,t){var i=n[t.startTime]||[];return i.push(t),n[t.startTime]=i,n},{});s=Object.keys(o).sort(function(n,t){return Number(n)-Number(t)});s.forEach(function(n,t){var i=o[n],r=Number(s[t+1])||c;i.forEach(function(n){n.endTime=r})})}},hr=typeof window!="undefined"?window:{},wa=typeof Symbol=="undefined"?"__target":Symbol(),alt="application/javascript",vlt=hr.BlobBuilder||hr.WebKitBlobBuilder||hr.MozBlobBuilder||hr.MSBlobBuilder,au=hr.URL||hr.webkitURL||au&&au.msURL,vu=hr.Worker;if(vu){ba=wg("self.onmessage = function () {}");ka=new Uint8Array(1);try{ys=new vu(ba);ys.postMessage(ka,[ka.buffer])}catch(owt){vu=null}finally{au.revokeObjectURL(ba);ys&&ys.terminate()}}var plt=new pg("./transmuxer-worker.worker.js",function(n){var t=this,i=function(){var wi=typeof n!="undefined"?n:typeof global!="undefined"?global:typeof t!="undefined"?t:{},bi,b,pt,r,ki,di,wt,gi,nr,tr,ir,bt,rr,ur,fr,er,or,sr,hr,cr,lr,ar,vr,yr,kt,i,dt,pr,wr,br,kr,dr,gr,nu,tu,tt,iu,ru,uu,a,k,ii,ht,h,ct,ri,ui,hu,cu,lt,g,lu,au,at;bi=typeof n!="undefined"?n:typeof wi!="undefined"?wi:typeof t!="undefined"?t:{};b=bi;pt=Math.pow(2,32)-1,function(){var n;if(i={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]},typeof Uint8Array!="undefined"){for(n in i)i.hasOwnProperty(n)&&(i[n]=[n.charCodeAt(0),n.charCodeAt(1),n.charCodeAt(2),n.charCodeAt(3)]);dt=new Uint8Array(["i".charCodeAt(0),"s".charCodeAt(0),"o".charCodeAt(0),"m".charCodeAt(0)]);wr=new Uint8Array(["a".charCodeAt(0),"v".charCodeAt(0),"c".charCodeAt(0),"1".charCodeAt(0)]);pr=new Uint8Array([0,0,0,1]);br=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]);kr=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);dr={video:br,audio:kr};tu=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]);nu=new Uint8Array([0,0,0,0,0,0,0,0]);tt=new Uint8Array([0,0,0,0,0,0,0,0]);iu=tt;ru=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]);uu=tt;gr=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}}();r=function(n){for(var r=[],u=0,i,f,t=1;t<arguments.length;t++)r.push(arguments[t]);for(t=r.length;t--;)u+=r[t].byteLength;for(i=new Uint8Array(u+8),f=new DataView(i.buffer,i.byteOffset,i.byteLength),f.setUint32(0,i.byteLength),i.set(n,4),t=0,u=8;t<r.length;t++)i.set(r[t],u),u+=r[t].byteLength;return i};ki=function(){return r(i.dinf,r(i.dref,tu))};di=function(n){return r(i.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,n.audioobjecttype<<3|n.samplingfrequencyindex>>>1,n.samplingfrequencyindex<<7|n.channelcount<<3,6,1,2]))};wt=function(){return r(i.ftyp,dt,pr,dt,wr)};hr=function(n){return r(i.hdlr,dr[n])};gi=function(n){return r(i.mdat,n)};sr=function(n){var t=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,n.duration>>>24&255,n.duration>>>16&255,n.duration>>>8&255,n.duration&255,85,196,0,0]);return n.samplerate&&(t[12]=n.samplerate>>>24&255,t[13]=n.samplerate>>>16&255,t[14]=n.samplerate>>>8&255,t[15]=n.samplerate&255),r(i.mdhd,t)};or=function(n){return r(i.mdia,sr(n),hr(n.type),tr(n))};nr=function(n){return r(i.mfhd,new Uint8Array([0,0,0,0,(n&4278190080)>>24,(n&16711680)>>16,(n&65280)>>8,n&255]))};tr=function(n){return r(i.minf,n.type==="video"?r(i.vmhd,gr):r(i.smhd,nu),ki(),lr(n))};ir=function(n,t){for(var f=[],u=t.length;u--;)f[u]=vr(t[u]);return r.apply(null,[i.moof,nr(n)].concat(f))};bt=function(n){for(var t=n.length,u=[];t--;)u[t]=fr(n[t]);return r.apply(null,[i.moov,ur(4294967295)].concat(u).concat(rr(n)))};rr=function(n){for(var t=n.length,u=[];t--;)u[t]=yr(n[t]);return r.apply(null,[i.mvex].concat(u))};ur=function(n){var t=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(n&4278190080)>>24,(n&16711680)>>16,(n&65280)>>8,n&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return r(i.mvhd,t)};cr=function(n){for(var f=n.samples||[],e=new Uint8Array(4+f.length),u,t=0;t<f.length;t++)u=f[t].flags,e[t+4]=u.dependsOn<<4|u.isDependedOn<<2|u.hasRedundancy;return r(i.sdtp,e)};lr=function(n){return r(i.stbl,ar(n),r(i.stts,uu),r(i.stsc,iu),r(i.stsz,ru),r(i.stco,tt))},function(){var n,t;ar=function(u){return r(i.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),u.type==="video"?n(u):t(u))};n=function(n){for(var u=n.sps||[],f=n.pps||[],e=[],o=[],t=0;t<u.length;t++)e.push((u[t].byteLength&65280)>>>8),e.push(u[t].byteLength&255),e=e.concat(Array.prototype.slice.call(u[t]));for(t=0;t<f.length;t++)o.push((f[t].byteLength&65280)>>>8),o.push(f[t].byteLength&255),o=o.concat(Array.prototype.slice.call(f[t]));return r(i.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(n.width&65280)>>8,n.width&255,(n.height&65280)>>8,n.height&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),r(i.avcC,new Uint8Array([1,n.profileIdc,n.profileCompatibility,n.levelIdc,255].concat([u.length]).concat(e).concat([f.length]).concat(o))),r(i.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])))};t=function(n){return r(i.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(n.channelcount&65280)>>8,n.channelcount&255,(n.samplesize&65280)>>8,n.samplesize&255,0,0,0,0,(n.samplerate&65280)>>8,n.samplerate&255,0,0]),di(n))}}();er=function(n){var t=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(n.id&4278190080)>>24,(n.id&16711680)>>16,(n.id&65280)>>8,n.id&255,0,0,0,0,(n.duration&4278190080)>>24,(n.duration&16711680)>>16,(n.duration&65280)>>8,n.duration&255,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(n.width&65280)>>8,n.width&255,0,0,(n.height&65280)>>8,n.height&255,0,0]);return r(i.tkhd,t)};vr=function(n){var e,o,f,s,h,t,u;return(e=r(i.tfhd,new Uint8Array([0,0,0,58,(n.id&4278190080)>>24,(n.id&16711680)>>16,(n.id&65280)>>8,n.id&255,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),t=Math.floor(n.baseMediaDecodeTime/(pt+1)),u=Math.floor(n.baseMediaDecodeTime%(pt+1)),o=r(i.tfdt,new Uint8Array([1,0,0,0,t>>>24&255,t>>>16&255,t>>>8&255,t&255,u>>>24&255,u>>>16&255,u>>>8&255,u&255])),h=92,n.type==="audio")?(f=kt(n,h),r(i.traf,e,o,f)):(s=cr(n),f=kt(n,s.length+h),r(i.traf,e,o,f,s))};fr=function(n){return n.duration=n.duration||4294967295,r(i.trak,er(n),or(n))};yr=function(n){var t=new Uint8Array([0,0,0,0,(n.id&4278190080)>>24,(n.id&16711680)>>16,(n.id&65280)>>8,n.id&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return n.type!=="video"&&(t[t.length-1]=0),r(i.trex,t)},function(){var t,u,n;n=function(n,t){var i=0,r=0,u=0,f=0;return n.length&&(n[0].duration!==undefined&&(i=1),n[0].size!==undefined&&(r=2),n[0].flags!==undefined&&(u=4),n[0].compositionTimeOffset!==undefined&&(f=8)),[0,0,i|r|u|f,1,(n.length&4278190080)>>>24,(n.length&16711680)>>>16,(n.length&65280)>>>8,n.length&255,(t&4278190080)>>>24,(t&16711680)>>>16,(t&65280)>>>8,t&255]};u=function(t,u){var o,e,f,s;for(e=t.samples||[],u+=20+16*e.length,o=n(e,u),s=0;s<e.length;s++)f=e[s],o=o.concat([(f.duration&4278190080)>>>24,(f.duration&16711680)>>>16,(f.duration&65280)>>>8,f.duration&255,(f.size&4278190080)>>>24,(f.size&16711680)>>>16,(f.size&65280)>>>8,f.size&255,f.flags.isLeading<<2|f.flags.dependsOn,f.flags.isDependedOn<<6|f.flags.hasRedundancy<<4|f.flags.paddingValue<<1|f.flags.isNonSyncSample,f.flags.degradationPriority&61440,f.flags.degradationPriority&15,(f.compositionTimeOffset&4278190080)>>>24,(f.compositionTimeOffset&16711680)>>>16,(f.compositionTimeOffset&65280)>>>8,f.compositionTimeOffset&255]);return r(i.trun,new Uint8Array(o))};t=function(t,u){var o,e,f,s;for(e=t.samples||[],u+=20+8*e.length,o=n(e,u),s=0;s<e.length;s++)f=e[s],o=o.concat([(f.duration&4278190080)>>>24,(f.duration&16711680)>>>16,(f.duration&65280)>>>8,f.duration&255,(f.size&4278190080)>>>24,(f.size&16711680)>>>16,(f.size&65280)>>>8,f.size&255]);return r(i.trun,new Uint8Array(o))};kt=function(n,i){return n.type==="audio"?t(n,i):u(n,i)}}();a={ftyp:wt,mdat:gi,moof:ir,moov:bt,initSegment:function(n){var i=wt(),r=bt(n),t;return t=new Uint8Array(i.byteLength+r.byteLength),t.set(i),t.set(r,i.byteLength),t}};k=function(){this.init=function(){var n={};this.on=function(t,i){n[t]||(n[t]=[]);n[t]=n[t].concat(i)};this.off=function(t,i){var r;return n[t]?(r=n[t].indexOf(i),n[t]=n[t].slice(),n[t].splice(r,1),r>-1):!1};this.trigger=function(t){var r,i,u,f;if(r=n[t],r)if(arguments.length===2)for(u=r.length,i=0;i<u;++i)r[i].call(this,arguments[1]);else{for(f=[],i=arguments.length,i=1;i<arguments.length;++i)f.push(arguments[i]);for(u=r.length,i=0;i<u;++i)r[i].apply(this,f)}};this.dispose=function(){n={}}}};k.prototype.pipe=function(n){this.on("data",function(t){n.push(t)});this.on("done",function(t){n.flush(t)});return n};k.prototype.push=function(n){this.trigger("data",n)};k.prototype.flush=function(n){this.trigger("done",n)};var e=k,fu=4,nf=128,tf=function(n){for(var t=0,r={payloadType:-1,payloadSize:0},u=0,i=0;t<n.byteLength;){if(n[t]===nf)break;while(n[t]===255)u+=255,t++;for(u+=n[t++];n[t]===255;)i+=255,t++;if(i+=n[t++],!r.payload&&u===fu){r.payloadType=u;r.payloadSize=i;r.payload=n.subarray(t,t+i);break}t+=i;u=0;i=0}return r},rf=function(n){return n.payload[0]!==181?null:(n.payload[1]<<8|n.payload[2])!=49?null:String.fromCharCode(n.payload[3],n.payload[4],n.payload[5],n.payload[6])!=="GA94"?null:n.payload[7]!==3?null:n.payload.subarray(8,n.payload.length-1)},uf=function(n,t){var u=[],r,e,i,f;if(!(t[0]&64))return u;for(e=t[0]&31,r=0;r<e;r++)i=r*3,f={type:t[i+2]&3,pts:n},t[i+2]&4&&(f.ccData=t[i+3]<<8|t[i+4],u.push(f));return u},c=function c(){c.prototype.init.call(this);this.captionPackets_=[];this.ccStreams_=[new f(0,0),new f(0,1),new f(1,0),new f(1,1)];this.reset();this.ccStreams_.forEach(function(n){n.on("data",this.trigger.bind(this,"data"));n.on("done",this.trigger.bind(this,"done"))},this)};c.prototype=new e;c.prototype.push=function(n){var t,i;if(n.nalUnitType==="sei_rbsp"&&(t=tf(n.escapedRBSP),t.payloadType===fu)&&(i=rf(t),i)){if(n.dts<this.latestDts_){this.ignoreNextEqualDts_=!0;return}if(n.dts===this.latestDts_&&this.ignoreNextEqualDts_){this.numSameDts_--;this.numSameDts_||(this.ignoreNextEqualDts_=!1);return}this.captionPackets_=this.captionPackets_.concat(uf(n.pts,i));this.latestDts_!==n.dts&&(this.numSameDts_=0);this.numSameDts_++;this.latestDts_=n.dts}};c.prototype.flush=function(){if(!this.captionPackets_.length){this.ccStreams_.forEach(function(n){n.flush()},this);return}this.captionPackets_.forEach(function(n,t){n.presortIndex=t});this.captionPackets_.sort(function(n,t){return n.pts===t.pts?n.presortIndex-t.presortIndex:n.pts-t.pts});this.captionPackets_.forEach(function(n){n.type<2&&this.dispatchCea608Packet(n)},this);this.captionPackets_.length=0;this.ccStreams_.forEach(function(n){n.flush()},this);return};c.prototype.reset=function(){this.latestDts_=null;this.ignoreNextEqualDts_=!1;this.numSameDts_=0;this.activeCea608Channel_=[null,null];this.ccStreams_.forEach(function(n){n.reset()})};c.prototype.dispatchCea608Packet=function(n){(this.setsChannel1Active(n)?this.activeCea608Channel_[n.type]=0:this.setsChannel2Active(n)&&(this.activeCea608Channel_[n.type]=1),this.activeCea608Channel_[n.type]!==null)&&this.ccStreams_[(n.type<<1)+this.activeCea608Channel_[n.type]].push(n)};c.prototype.setsChannel1Active=function(n){return(n.ccData&30720)==4096};c.prototype.setsChannel2Active=function(n){return(n.ccData&30720)==6144};var ff={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},it=function(n){return n===null?"":(n=ff[n]||n,String.fromCharCode(n))},o=14,ef=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],rt=function(){for(var n=[],t=o+1;t--;)n.push("");return n},f=function f(n,t){f.prototype.init.call(this);this.field_=n||0;this.dataChannel_=t||0;this.name_="CC"+((this.field_<<1|this.dataChannel_)+1);this.setConstants();this.reset();this.push=function(n){var t,e,r,i,u,f;if(t=n.ccData&32639,t===this.lastControlCode_){this.lastControlCode_=null;return}((t&61440)==4096?this.lastControlCode_=t:t!==this.PADDING_&&(this.lastControlCode_=null),r=t>>>8,i=t&255,t!==this.PADDING_)&&(t===this.RESUME_CAPTION_LOADING_?this.mode_="popOn":t===this.END_OF_CAPTION_?(this.clearFormatting(n.pts),this.flushDisplayed(n.pts),e=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=e,this.startPts_=n.pts):t===this.ROLL_UP_2_ROWS_?(this.topRow_=o-1,this.mode_="rollUp"):t===this.ROLL_UP_3_ROWS_?(this.topRow_=o-2,this.mode_="rollUp"):t===this.ROLL_UP_4_ROWS_?(this.topRow_=o-3,this.mode_="rollUp"):t===this.CARRIAGE_RETURN_?(this.clearFormatting(n.pts),this.flushDisplayed(n.pts),this.shiftRowsUp_(),this.startPts_=n.pts):t===this.BACKSPACE_?this.mode_==="popOn"?this.nonDisplayed_[o]=this.nonDisplayed_[o].slice(0,-1):this.displayed_[o]=this.displayed_[o].slice(0,-1):t===this.ERASE_DISPLAYED_MEMORY_?(this.flushDisplayed(n.pts),this.displayed_=rt()):t===this.ERASE_NON_DISPLAYED_MEMORY_?this.nonDisplayed_=rt():t===this.RESUME_DIRECT_CAPTIONING_?this.mode_="paintOn":this.isSpecialCharacter(r,i)?(r=(r&3)<<8,u=it(r|i),this[this.mode_](n.pts,u),this.column_++):this.isExtCharacter(r,i)?(this.mode_==="popOn"?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[o]=this.displayed_[o].slice(0,-1),r=(r&3)<<8,u=it(r|i),this[this.mode_](n.pts,u),this.column_++):this.isMidRowCode(r,i)?(this.clearFormatting(n.pts),this[this.mode_](n.pts," "),this.column_++,(i&14)==14&&this.addFormatting(n.pts,["i"]),(i&1)==1&&this.addFormatting(n.pts,["u"])):this.isOffsetControlCode(r,i)?this.column_+=i&3:this.isPAC(r,i)?(f=ef.indexOf(t&7968),f!==this.row_&&(this.clearFormatting(n.pts),this.row_=f),i&1&&this.formatting_.indexOf("u")===-1&&this.addFormatting(n.pts,["u"]),(t&16)==16&&(this.column_=((t&14)>>1)*4),this.isColorPAC(i)&&(i&14)==14&&this.addFormatting(n.pts,["i"])):this.isNormalChar(r)&&(i===0&&(i=null),u=it(r),u+=it(i),this[this.mode_](n.pts,u),this.column_+=u.length))}};f.prototype=new e;f.prototype.flushDisplayed=function(n){var t=this.displayed_.map(function(n){return n.trim()}).join("\n").replace(/^\n+|\n+$/g,"");t.length&&this.trigger("data",{startPts:this.startPts_,endPts:n,text:t,stream:this.name_})};f.prototype.reset=function(){this.mode_="popOn";this.topRow_=0;this.startPts_=0;this.displayed_=rt();this.nonDisplayed_=rt();this.lastControlCode_=null;this.column_=0;this.row_=o;this.formatting_=[]};f.prototype.setConstants=function(){this.dataChannel_===0?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):this.dataChannel_===1&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31);this.PADDING_=0;this.RESUME_CAPTION_LOADING_=this.CONTROL_|32;this.END_OF_CAPTION_=this.CONTROL_|47;this.ROLL_UP_2_ROWS_=this.CONTROL_|37;this.ROLL_UP_3_ROWS_=this.CONTROL_|38;this.ROLL_UP_4_ROWS_=this.CONTROL_|39;this.CARRIAGE_RETURN_=this.CONTROL_|45;this.RESUME_DIRECT_CAPTIONING_=this.CONTROL_|41;this.BACKSPACE_=this.CONTROL_|33;this.ERASE_DISPLAYED_MEMORY_=this.CONTROL_|44;this.ERASE_NON_DISPLAYED_MEMORY_=this.CONTROL_|46};f.prototype.isSpecialCharacter=function(n,t){return n===this.EXT_&&t>=48&&t<=63};f.prototype.isExtCharacter=function(n,t){return(n===this.EXT_+1||n===this.EXT_+2)&&t>=32&&t<=63};f.prototype.isMidRowCode=function(n,t){return n===this.EXT_&&t>=32&&t<=47};f.prototype.isOffsetControlCode=function(n,t){return n===this.OFFSET_&&t>=33&&t<=35};f.prototype.isPAC=function(n,t){return n>=this.BASE_&&n<this.BASE_+8&&t>=64&&t<=127};f.prototype.isColorPAC=function(n){return n>=64&&n<=79||n>=96&&n<=127};f.prototype.isNormalChar=function(n){return n>=32&&n<=127};f.prototype.addFormatting=function(n,t){this.formatting_=this.formatting_.concat(t);var i=t.reduce(function(n,t){return n+"<"+t+">"},"");this[this.mode_](n,i)};f.prototype.clearFormatting=function(n){if(this.formatting_.length){var t=this.formatting_.reverse().reduce(function(n,t){return n+"<\/"+t+">"},"");this.formatting_=[];this[this.mode_](n,t)}};f.prototype.popOn=function(n,t){var i=this.nonDisplayed_[this.row_];i+=t;this.nonDisplayed_[this.row_]=i};f.prototype.rollUp=function(n,t){var i=this.displayed_[o];i+=t;this.displayed_[o]=i};f.prototype.shiftRowsUp_=function(){for(var n=0;n<this.topRow_;n++)this.displayed_[n]="";for(n=this.topRow_;n<o;n++)this.displayed_[n]=this.displayed_[n+1];this.displayed_[o]=""};f.prototype.paintOn=function(){};var eu={CaptionStream:c,Cea608Stream:f},s={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21},of=8589934592,sf=4294967296,gt=function(n,t){var i=1;for(n>t&&(i=-1);Math.abs(t-n)>sf;)n+=i*of;return n},ni=function ni(n){var i,t;ni.prototype.init.call(this);this.type_=n;this.push=function(n){n.type===this.type_&&(t===undefined&&(t=n.dts),n.dts=gt(n.dts,t),n.pts=gt(n.pts,t),i=n.dts,this.trigger("data",n))};this.flush=function(){t=i;this.trigger("done")};this.discontinuity=function(){t=void 0;i=void 0}};ni.prototype=new e;var hf={TimestampRolloverStream:ni,handleRollover:gt},ou=function(n,t,i){for(var u="",r=t;r<i;r++)u+="%"+("00"+n[r].toString(16)).slice(-2);return u},ut=function(n,t,i){return decodeURIComponent(ou(n,t,i))},cf=function(n,t,i){return unescape(ou(n,t,i))},ft=function(n){return n[0]<<21|n[1]<<14|n[2]<<7|n[3]},su={TXXX:function(n){var t;if(n.data[0]===3){for(t=1;t<n.data.length;t++)if(n.data[t]===0){n.description=ut(n.data,1,t);n.value=ut(n.data,t+1,n.data.length).replace(/\0*$/,"");break}n.data=n.value}},WXXX:function(n){var t;if(n.data[0]===3)for(t=1;t<n.data.length;t++)if(n.data[t]===0){n.description=ut(n.data,1,t);n.url=ut(n.data,t+1,n.data.length);break}},PRIV:function(n){for(var t=0;t<n.data.length;t++)if(n.data[t]===0){n.owner=cf(n.data,0,t);break}n.privateData=n.data.subarray(t+1);n.data=n.privateData}},et;et=function(n){var r={debug:!!(n&&n.debug),descriptor:n&&n.descriptor},i=0,t=[],u=0,f;if(et.prototype.init.call(this),this.dispatchType=s.METADATA_STREAM_TYPE.toString(16),r.descriptor)for(f=0;f<r.descriptor.length;f++)this.dispatchType+=("00"+r.descriptor[f].toString(16)).slice(-2);this.push=function(n){var f,e,c,o,h,a,s,l;if(n.type==="timed-metadata"){if(n.dataAlignmentIndicator&&(u=0,t.length=0),t.length===0&&(n.data.length<10||n.data[0]!=="I".charCodeAt(0)||n.data[1]!=="D".charCodeAt(0)||n.data[2]!=="3".charCodeAt(0))){r.debug&&console.log("Skipping unrecognized metadata packet");return}if(t.push(n),u+=n.data.byteLength,t.length===1&&(i=ft(n.data.subarray(6,10))+10),!(u<i)){for(f={data:new Uint8Array(i),frames:[],pts:t[0].pts,dts:t[0].dts},h=0;h<i;)f.data.set(t[0].data.subarray(0,i-h),h),h+=t[0].data.byteLength,u-=t[0].data.byteLength,t.shift();e=10;f.data[5]&64&&(e+=4,e+=ft(f.data.subarray(10,14)),i-=ft(f.data.subarray(16,20)));do{if(c=ft(f.data.subarray(e+4,e+8)),c<1)return console.log("Malformed ID3 frame encountered. Skipping metadata parsing.");a=String.fromCharCode(f.data[e],f.data[e+1],f.data[e+2],f.data[e+3]);o={id:a,data:f.data.subarray(e+10,e+c+10)};o.key=o.id;su[o.id]&&(su[o.id](o),o.owner==="com.apple.streaming.transportStreamTimestamp"&&(s=o.data,l=(s[3]&1)<<30|s[4]<<22|s[5]<<14|s[6]<<6|s[7]>>>2,l*=4,l+=s[7]&3,o.timeStamp=l,f.pts===undefined&&f.dts===undefined&&(f.pts=o.timeStamp,f.dts=o.timeStamp),this.trigger("timestamp",o)));f.frames.push(o);e+=10;e+=c}while(e<i);this.trigger("data",f)}}}};et.prototype=new e;var lf=et,af=hf.TimestampRolloverStream,ot,d,st,v=188,ti=71;ot=function(){var t=new Uint8Array(v),n=0;ot.prototype.init.call(this);this.push=function(i){var u=0,f=v,r;for(n?(r=new Uint8Array(i.byteLength+n),r.set(t.subarray(0,n)),r.set(i,n),n=0):r=i;f<r.byteLength;){if(r[u]===ti&&r[f]===ti){this.trigger("data",r.subarray(u,f));u+=v;f+=v;continue}u++;f++}u<r.byteLength&&(t.set(r.subarray(u),0),n=r.byteLength-u)};this.flush=function(){n===v&&t[0]===ti&&(this.trigger("data",t),n=0);this.trigger("done")}};ot.prototype=new e;d=function(){var t,i,r,n;d.prototype.init.call(this);n=this;this.packetsWaitingForPmt=[];this.programMapTable=undefined;t=function(n,t){var u=0;t.payloadUnitStartIndicator&&(u+=n[u]+1);t.type==="pat"?i(n.subarray(u),t):r(n.subarray(u),t)};i=function(t,i){i.section_number=t[7];i.last_section_number=t[8];n.pmtPid=(t[10]&31)<<8|t[11];i.pmtPid=n.pmtPid};r=function(t,i){var e,o,h,r,u,f;if(t[5]&1){for(n.programMapTable={video:null,audio:null,"timed-metadata":{}},e=(t[1]&15)<<8|t[2],o=3+e-4,h=(t[10]&15)<<8|t[11],r=12+h;r<o;)u=t[r],f=(t[r+1]&31)<<8|t[r+2],u===s.H264_STREAM_TYPE&&n.programMapTable.video===null?n.programMapTable.video=f:u===s.ADTS_STREAM_TYPE&&n.programMapTable.audio===null?n.programMapTable.audio=f:u===s.METADATA_STREAM_TYPE&&(n.programMapTable["timed-metadata"][f]=u),r+=((t[r+3]&15)<<8|t[r+4])+5;i.programMapTable=n.programMapTable}};this.push=function(n){var i={},r=4;if(i.payloadUnitStartIndicator=!!(n[1]&64),i.pid=n[1]&31,i.pid<<=8,i.pid|=n[2],(n[3]&48)>>>4>1&&(r+=n[r]+1),i.pid===0)i.type="pat",t(n.subarray(r),i),this.trigger("data",i);else if(i.pid===this.pmtPid)for(i.type="pmt",t(n.subarray(r),i),this.trigger("data",i);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,this.packetsWaitingForPmt.shift());else this.programMapTable===undefined?this.packetsWaitingForPmt.push([n,r,i]):this.processPes_(n,r,i)};this.processPes_=function(n,t,i){i.streamType=i.pid===this.programMapTable.video?s.H264_STREAM_TYPE:i.pid===this.programMapTable.audio?s.ADTS_STREAM_TYPE:this.programMapTable["timed-metadata"][i.pid];i.type="pes";i.data=n.subarray(t);this.trigger("data",i)}};d.prototype=new e;d.STREAM_TYPES={h264:27,adts:15};st=function(){var t=this,i={data:[],size:0},r={data:[],size:0},u={data:[],size:0},f=function(n,t){var i;t.packetLength=6+(n[4]<<8|n[5]);t.dataAlignmentIndicator=(n[6]&4)!=0;i=n[7];i&192&&(t.pts=(n[9]&14)<<27|(n[10]&255)<<20|(n[11]&254)<<12|(n[12]&255)<<5|(n[13]&254)>>>3,t.pts*=4,t.pts+=(n[13]&6)>>>1,t.dts=t.pts,i&64&&(t.dts=(n[14]&14)<<27|(n[15]&255)<<20|(n[16]&254)<<12|(n[17]&255)<<5|(n[18]&254)>>>3,t.dts*=4,t.dts+=(n[18]&6)>>>1));t.data=n.subarray(9+n[8])},n=function(n,i,r){var h=new Uint8Array(n.size),u={type:i},e=0,c=0,o=!1,s;if(n.data.length&&!(n.size<9)){for(u.trackId=n.data[0].pid,e=0;e<n.data.length;e++)s=n.data[e],h.set(s.data,c),c+=s.data.byteLength;f(h,u);o=i==="video"||u.packetLength<=n.size;(r||o)&&(n.size=0,n.data.length=0);o&&t.trigger("data",u)}};st.prototype.init.call(this);this.push=function(f){({pat:function(){},pes:function(){var t,e;switch(f.streamType){case s.H264_STREAM_TYPE:case s.H264_STREAM_TYPE:t=i;e="video";break;case s.ADTS_STREAM_TYPE:t=r;e="audio";break;case s.METADATA_STREAM_TYPE:t=u;e="timed-metadata";break;default:return}f.payloadUnitStartIndicator&&n(t,e,!0);t.data.push(f);t.size+=f.data.byteLength},pmt:function(){var i={type:"metadata",tracks:[]},n=f.programMapTable;n.video!==null&&i.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+n.video,codec:"avc",type:"video"});n.audio!==null&&i.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+n.audio,codec:"adts",type:"audio"});t.trigger("data",i)}})[f.type]()};this.flush=function(){n(i,"video");n(r,"audio");n(u,"timed-metadata");this.trigger("done")}};st.prototype=new e;ii={PAT_PID:0,MP2T_PACKET_LENGTH:v,TransportPacketStream:ot,TransportParseStream:d,ElementaryStream:st,TimestampRolloverStream:af,CaptionStream:eu.CaptionStream,Cea608Stream:eu.Cea608Stream,MetadataStream:lf};for(ht in s)s.hasOwnProperty(ht)&&(ii[ht]=s[ht]);h=ii;ri=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];ct=function(){var n;ct.prototype.init.call(this);this.push=function(t){var i=0,f=0,s,h,r,u,e,o;if(t.type==="audio")for(n?(u=n,n=new Uint8Array(u.byteLength+t.data.byteLength),n.set(u),n.set(t.data,u.byteLength)):n=t.data;i+5<n.length;){if(n[i]!==255||(n[i+1]&246)!=240){i++;continue}if(h=(~n[i+1]&1)*2,s=(n[i+3]&3)<<11|n[i+4]<<3|(n[i+5]&224)>>5,e=((n[i+6]&3)+1)*1024,o=e*9e4/ri[(n[i+2]&60)>>>2],r=i+s,n.byteLength<r)return;if(this.trigger("data",{pts:t.pts+f*o,dts:t.dts+f*o,sampleCount:e,audioobjecttype:(n[i+2]>>>6&3)+1,channelcount:(n[i+2]&1)<<2|(n[i+3]&192)>>>6,samplerate:ri[(n[i+2]&60)>>>2],samplingfrequencyindex:(n[i+2]&60)>>>2,samplesize:16,data:n.subarray(i+7+h,r)}),n.byteLength===r){n=undefined;return}f++;n=n.subarray(r)}};this.flush=function(){this.trigger("done")}};ct.prototype=new e;ui=ct;hu=function(n){var i=n.byteLength,r=0,t=0;this.length=function(){return 8*i};this.bitsAvailable=function(){return 8*i+t};this.loadWord=function(){var f=n.byteLength-i,e=new Uint8Array(4),u=Math.min(4,i);if(u===0)throw new Error("no bytes available");e.set(n.subarray(f,f+u));r=new DataView(e.buffer).getUint32(0);t=u*8;i-=u};this.skipBits=function(n){var u;t>n?(r<<=n,t-=n):(n-=t,u=Math.floor(n/8),n-=u*8,i-=u,this.loadWord(),r<<=n,t-=n)};this.readBits=function(n){var u=Math.min(t,n),f=r>>>32-u;return(t-=u,t>0?r<<=u:i>0&&this.loadWord(),u=n-u,u>0)?f<<u|this.readBits(u):f};this.skipLeadingZeros=function(){for(var n=0;n<t;++n)if((r&2147483648>>>n)!=0)return r<<=n,t-=n,n;return this.loadWord(),n+this.skipLeadingZeros()};this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())};this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())};this.readUnsignedExpGolomb=function(){var n=this.skipLeadingZeros();return this.readBits(n+1)-1};this.readExpGolomb=function(){var n=this.readUnsignedExpGolomb();return 1&n?1+n>>>1:-1*(n>>>1)};this.readBoolean=function(){return this.readBits(1)===1};this.readUnsignedByte=function(){return this.readBits(8)};this.loadWord()};cu=hu;g=function(){var i=0,t,n;g.prototype.init.call(this);this.push=function(r){var u;for(n?(u=new Uint8Array(n.byteLength+r.data.byteLength),u.set(n),u.set(r.data,n.byteLength),n=u):n=r.data;i<n.byteLength-3;i++)if(n[i+2]===1){t=i+5;break}while(t<n.byteLength)switch(n[t]){case 0:if(n[t-1]!==0){t+=2;break}else if(n[t-2]!==0){t++;break}i+3!==t-2&&this.trigger("data",n.subarray(i+3,t-2));do t++;while(n[t]!==1&&t<n.length);i=t-2;t+=3;break;case 1:if(n[t-1]!==0||n[t-2]!==0){t+=3;break}this.trigger("data",n.subarray(i+3,t-2));i=t-2;t+=3;break;default:t+=3}n=n.subarray(i);t-=i;i=0};this.flush=function(){n&&n.byteLength>3&&this.trigger("data",n.subarray(i+3));n=null;i=0;this.trigger("done")}};g.prototype=new e;lu={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0};lt=function(){var n=new g,t,u,f,e,i,o,r;lt.prototype.init.call(this);t=this;this.push=function(t){t.type==="video"&&(u=t.trackId,f=t.pts,e=t.dts,n.push(t))};n.on("data",function(n){var r={trackId:u,pts:f,dts:e,data:n};switch(n[0]&31){case 5:r.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:r.nalUnitType="sei_rbsp";r.escapedRBSP=i(n.subarray(1));break;case 7:r.nalUnitType="seq_parameter_set_rbsp";r.escapedRBSP=i(n.subarray(1));r.config=o(r.escapedRBSP);break;case 8:r.nalUnitType="pic_parameter_set_rbsp";break;case 9:r.nalUnitType="access_unit_delimiter_rbsp"}t.trigger("data",r)});n.on("done",function(){t.trigger("done")});this.flush=function(){n.flush()};r=function(n,t){for(var r=8,i=8,f,u=0;u<n;u++)i!==0&&(f=t.readExpGolomb(),i=(r+f+256)%256),r=i===0?r:i};i=function(n){for(var e=n.byteLength,i=[],t=1,u,f,r;t<e-2;)n[t]===0&&n[t+1]===0&&n[t+2]===3?(i.push(t+2),t+=2):t++;if(i.length===0)return n;for(u=e-i.length,f=new Uint8Array(u),r=0,t=0;t<u;r++,t++)r===i[0]&&(r++,i.shift()),f[t]=n[r];return f};o=function(n){var h=0,c=0,l=0,a=0,v=1,t,f,y,p,e,o,w,b,k,s,d,i,g,u;if(t=new cu(n),f=t.readUnsignedByte(),p=t.readUnsignedByte(),y=t.readUnsignedByte(),t.skipUnsignedExpGolomb(),lu[f]&&(e=t.readUnsignedExpGolomb(),e===3&&t.skipBits(1),t.skipUnsignedExpGolomb(),t.skipUnsignedExpGolomb(),t.skipBits(1),t.readBoolean()))for(d=e!==3?8:12,u=0;u<d;u++)t.readBoolean()&&(u<6?r(16,t):r(64,t));if(t.skipUnsignedExpGolomb(),o=t.readUnsignedExpGolomb(),o===0)t.readUnsignedExpGolomb();else if(o===1)for(t.skipBits(1),t.skipExpGolomb(),t.skipExpGolomb(),w=t.readUnsignedExpGolomb(),u=0;u<w;u++)t.skipExpGolomb();if(t.skipUnsignedExpGolomb(),t.skipBits(1),b=t.readUnsignedExpGolomb(),k=t.readUnsignedExpGolomb(),s=t.readBits(1),s===0&&t.skipBits(1),t.skipBits(1),t.readBoolean()&&(h=t.readUnsignedExpGolomb(),c=t.readUnsignedExpGolomb(),l=t.readUnsignedExpGolomb(),a=t.readUnsignedExpGolomb()),t.readBoolean()&&t.readBoolean()){g=t.readUnsignedByte();switch(g){case 1:i=[1,1];break;case 2:i=[12,11];break;case 3:i=[10,11];break;case 4:i=[16,11];break;case 5:i=[40,33];break;case 6:i=[24,11];break;case 7:i=[20,11];break;case 8:i=[32,11];break;case 9:i=[80,33];break;case 10:i=[18,11];break;case 11:i=[15,11];break;case 12:i=[64,33];break;case 13:i=[160,99];break;case 14:i=[4,3];break;case 15:i=[3,2];break;case 16:i=[2,1];break;case 255:i=[t.readUnsignedByte()<<8|t.readUnsignedByte(),t.readUnsignedByte()<<8|t.readUnsignedByte()]}i&&(v=i[0]/i[1])}return{profileIdc:f,levelIdc:y,profileCompatibility:p,width:Math.ceil(((b+1)*16-h*2-c*2)*v),height:(2-s)*(k+1)*16-l*2-a*2}}};lt.prototype=new e;au={H264Stream:lt,NalByteStream:g};at=function(){var n=new Uint8Array,t=0;at.prototype.init.call(this);this.setTimestamp=function(n){t=n};this.parseId3TagSize=function(n,t){var i=n[t+6]<<21|n[t+7]<<14|n[t+8]<<7|n[t+9],r=n[t+5],u=(r&16)>>4;return u?i+20:i+10};this.parseAdtsSize=function(n,t){var i=(n[t+5]&224)>>5,r=n[t+4]<<3,u=n[t+3]&6144;return u|r|i};this.push=function(i){var u=0,r=0,e,o,s,f;for(n.length?(f=n.length,n=new Uint8Array(i.byteLength+f),n.set(n.subarray(0,f)),n.set(i,f)):n=i;n.length-r>=3;){if(n[r]==="I".charCodeAt(0)&&n[r+1]==="D".charCodeAt(0)&&n[r+2]==="3".charCodeAt(0)){if(n.length-r<10)break;if(u=this.parseId3TagSize(n,r),u>n.length)break;o={type:"timed-metadata",data:n.subarray(r,r+u)};this.trigger("data",o);r+=u;continue}else if(n[r]&!0&&(n[r+1]&240)==240){if(n.length-r<7)break;if(u=this.parseAdtsSize(n,r),u>n.length)break;s={type:"audio",data:n.subarray(r,r+u),pts:t,dts:t};this.trigger("data",s);r+=u;continue}r++}e=n.length-r;n=e>0?n.subarray(r):new Uint8Array}};at.prototype=new e;var vf=at,l=[33,16,5,32,164,27],fi=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],u=function(n){for(var t=[];n--;)t.push(0);return t},yf=function(n){return Object.keys(n).reduce(function(t,i){return t[i]=new Uint8Array(n[i].reduce(function(n,t){return n.concat(t)},[])),t},{})},pf={96e3:[l,[227,64],u(154),[56]],88200:[l,[231],u(170),[56]],64e3:[l,[248,192],u(240),[56]],48e3:[l,[255,192],u(268),[55,148,128],u(54),[112]],44100:[l,[255,192],u(268),[55,163,128],u(84),[112]],32e3:[l,[255,192],u(268),[55,234],u(226),[112]],24e3:[l,[255,192],u(268),[55,255,128],u(268),[111,112],u(126),[224]],16e3:[l,[255,192],u(268),[55,255,128],u(268),[111,255],u(269),[223,108],u(195),[1,192]],12e3:[fi,u(268),[3,127,248],u(268),[6,255,240],u(268),[13,255,224],u(268),[27,253,128],u(259),[56]],11025:[fi,u(268),[3,127,248],u(268),[6,255,240],u(268),[13,255,224],u(268),[27,255,192],u(268),[55,175,128],u(108),[112]],8e3:[fi,u(268),[3,121,16],u(47),[7]]},wf=yf(pf),vu=9e4,ei,oi,si,hi,yu,pu;ei=function(n){return n*vu};oi=function(n,t){return n*t};si=function(n){return n/vu};hi=function(n,t){return n/t};yu=function(n,t){return ei(hi(n,t))};pu=function(n,t){return oi(si(n),t)};var wu={secondsToVideoTs:ei,secondsToAudioTs:oi,videoTsToSeconds:si,audioTsToSeconds:hi,audioTsToVideoTs:yu,videoTsToAudioTs:pu},bf=au.H264Stream,ci=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],li=["width","height","profileIdc","levelIdc","profileCompatibility"],ai=9e4,nt,y,vt,p,bu,ku,yt,w,vi,yi,du;bu=function(){return{size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0}}};ku=function(n){return n[0]==="I".charCodeAt(0)&&n[1]==="D".charCodeAt(0)&&n[2]==="3".charCodeAt(0)?!0:!1};yi=function(n,t){var i;if(n.length!==t.length)return!1;for(i=0;i<n.length;i++)if(n[i]!==t[i])return!1;return!0};du=function(n){for(var i,r=0,t=0;t<n.length;t++)i=n[t],r+=i.data.byteLength;return r};y=function(n,t){var i=[],e=0,r=0,u=0,f=Infinity;t=t||{};y.prototype.init.call(this);this.push=function(t){yt(n,t);n&&ci.forEach(function(i){n[i]=t[i]});i.push(t)};this.setEarliestDts=function(t){r=t-n.timelineStartInfo.baseMediaDecodeTime};this.setVideoBaseMediaDecodeTime=function(n){f=n};this.setAudioAppendStart=function(n){u=n};this.flush=function(){var r,u,o,f;if(i.length===0){this.trigger("done","AudioSegmentStream");return}r=this.trimAdtsFramesByEarliestDts_(i);n.baseMediaDecodeTime=vi(n,t.keepOriginalTimestamps);this.prefixWithSilence_(n,r);n.samples=this.generateSampleTable_(r);o=a.mdat(this.concatenateFrameData_(r));i=[];u=a.moof(e,[n]);f=new Uint8Array(u.byteLength+o.byteLength);e++;f.set(u);f.set(o,u.byteLength);w(n);this.trigger("data",{track:n,boxes:f});this.trigger("done","AudioSegmentStream")};this.prefixWithSilence_=function(n,t){var h,o=0,c=0,i=0,s=0,r,e;if(t.length&&(h=wu.audioTsToVideoTs(n.baseMediaDecodeTime,n.samplerate),o=Math.ceil(ai/(n.samplerate/1024)),u&&f&&(c=h-Math.max(u,f),i=Math.floor(c/o),s=i*o),!(i<1)&&!(s>ai/2))){for(r=wf[n.samplerate],r||(r=t[0].data),e=0;e<i;e++)t.splice(e,0,{data:r});n.baseMediaDecodeTime-=Math.floor(wu.videoTsToAudioTs(s,n.samplerate))}};this.trimAdtsFramesByEarliestDts_=function(t){return n.minSegmentDts>=r?t:(n.minSegmentDts=Infinity,t.filter(function(t){return t.dts>=r?(n.minSegmentDts=Math.min(n.minSegmentDts,t.dts),n.minSegmentPts=n.minSegmentDts,!0):!1}))};this.generateSampleTable_=function(n){for(var i,r=[],t=0;t<n.length;t++)i=n[t],r.push({size:i.data.byteLength,duration:1024});return r};this.concatenateFrameData_=function(n){for(var i,r=0,u=new Uint8Array(du(n)),t=0;t<n.length;t++)i=n[t],u.set(i.data,r),r+=i.data.byteLength;return u}};y.prototype=new e;nt=function(n,t){var e=0,i=[],r=[],u,f;t=t||{};nt.prototype.init.call(this);delete n.minPTS;this.gopCache_=[];this.push=function(t){yt(n,t);t.nalUnitType!=="seq_parameter_set_rbsp"||u||(u=t.config,n.sps=[t.data],li.forEach(function(t){n[t]=u[t]},this));t.nalUnitType!=="pic_parameter_set_rbsp"||f||(f=t.data,n.pps=[t.data]);i.push(t)};this.flush=function(){for(var l,f,u,o,h,s,c;i.length;){if(i[0].nalUnitType==="access_unit_delimiter_rbsp")break;i.shift()}if(i.length===0){this.resetStream_();this.trigger("done","VideoSegmentStream");return}if(l=this.groupNalsIntoFrames_(i),u=this.groupFramesIntoGops_(l),u[0][0].keyFrame||(f=this.getGopForFusion_(i[0],n),f?(u.unshift(f),u.byteLength+=f.byteLength,u.nalCount+=f.nalCount,u.pts=f.pts,u.dts=f.dts,u.duration+=f.duration):u=this.extendFirstKeyFrame_(u)),r.length){if(c=t.alignGopsAtEnd?this.alignGopsAtEnd_(u):this.alignGopsAtStart_(u),!c){this.gopCache_.unshift({gop:u.pop(),pps:n.pps,sps:n.sps});this.gopCache_.length=Math.min(6,this.gopCache_.length);i=[];this.resetStream_();this.trigger("done","VideoSegmentStream");return}w(n);u=c}yt(n,u);n.samples=this.generateSampleTable_(u);h=a.mdat(this.concatenateNalData_(u));n.baseMediaDecodeTime=vi(n,t.keepOriginalTimestamps);this.trigger("processedGopsInfo",u.map(function(n){return{pts:n.pts,dts:n.dts,byteLength:n.byteLength}}));this.gopCache_.unshift({gop:u.pop(),pps:n.pps,sps:n.sps});this.gopCache_.length=Math.min(6,this.gopCache_.length);i=[];this.trigger("baseMediaDecodeTime",n.baseMediaDecodeTime);this.trigger("timelineStartInfo",n.timelineStartInfo);o=a.moof(e,[n]);s=new Uint8Array(o.byteLength+h.byteLength);e++;s.set(o);s.set(h,o.byteLength);this.trigger("data",{track:n,boxes:s});this.resetStream_();this.trigger("done","VideoSegmentStream")};this.resetStream_=function(){w(n);u=undefined;f=undefined};this.getGopForFusion_=function(t){for(var o=Infinity,i,u,f,r,e=0;e<this.gopCache_.length;e++)(r=this.gopCache_[e],f=r.gop,n.pps&&yi(n.pps[0],r.pps[0])&&n.sps&&yi(n.sps[0],r.sps[0]))&&(f.dts<n.timelineStartInfo.dts||(i=t.dts-f.dts-f.duration,i>=-1e4&&i<=45e3&&(!u||o>i)&&(u=r,o=i)));return u?u.gop:null};this.extendFirstKeyFrame_=function(n){var t;return!n[0][0].keyFrame&&n.length>1&&(t=n.shift(),n.byteLength-=t.byteLength,n.nalCount-=t.nalCount,n[0][0].dts=t.dts,n[0][0].pts=t.pts,n[0][0].duration+=t.duration),n};this.groupNalsIntoFrames_=function(n){var u,i,t=[],r=[];for(t.byteLength=0,u=0;u<n.length;u++)i=n[u],i.nalUnitType==="access_unit_delimiter_rbsp"?(t.length&&(t.duration=i.dts-t.dts,r.push(t)),t=[i],t.byteLength=i.data.byteLength,t.pts=i.pts,t.dts=i.dts):(i.nalUnitType==="slice_layer_without_partitioning_rbsp_idr"&&(t.keyFrame=!0),t.duration=i.dts-t.dts,t.byteLength+=i.data.byteLength,t.push(i));return r.length&&(!t.duration||t.duration<=0)&&(t.duration=r[r.length-1].duration),r.push(t),r};this.groupFramesIntoGops_=function(n){var u,r,t=[],i=[];for(t.byteLength=0,t.nalCount=0,t.duration=0,t.pts=n[0].pts,t.dts=n[0].dts,i.byteLength=0,i.nalCount=0,i.duration=0,i.pts=n[0].pts,i.dts=n[0].dts,u=0;u<n.length;u++)r=n[u],r.keyFrame?(t.length&&(i.push(t),i.byteLength+=t.byteLength,i.nalCount+=t.nalCount,i.duration+=t.duration),t=[r],t.nalCount=r.length,t.byteLength=r.byteLength,t.pts=r.pts,t.dts=r.dts,t.duration=r.duration):(t.duration+=r.duration,t.nalCount+=r.length,t.byteLength+=r.byteLength,t.push(r));return i.length&&t.duration<=0&&(t.duration=i[i.length-1].duration),i.byteLength+=t.byteLength,i.nalCount+=t.nalCount,i.duration+=t.duration,i.push(t),i};this.generateSampleTable_=function(n,t){for(var f,i,e,r,o=t||0,s=[],u=0;u<n.length;u++)for(e=n[u],f=0;f<e.length;f++)r=e[f],i=bu(),i.dataOffset=o,i.compositionTimeOffset=r.pts-r.dts,i.duration=r.duration,i.size=4*r.length,i.size+=r.byteLength,r.keyFrame&&(i.flags.dependsOn=2),o+=i.size,s.push(i);return s};this.concatenateNalData_=function(n){for(var i,r,e,o,u,f=0,h=n.byteLength,c=n.nalCount,l=h+4*c,s=new Uint8Array(l),a=new DataView(s.buffer),t=0;t<n.length;t++)for(e=n[t],i=0;i<e.length;i++)for(o=e[i],r=0;r<o.length;r++)u=o[r],a.setUint32(f,u.data.byteLength),f+=4,s.set(u.data,f),f+=u.data.byteLength;return s};this.alignGopsAtStart_=function(n){var f,i,e,u,o,s,h,t;for(o=n.byteLength,s=n.nalCount,h=n.duration,f=i=0;f<r.length&&i<n.length;){if(e=r[f],u=n[i],e.pts===u.pts)break;if(u.pts>e.pts){f++;continue}i++;o-=u.byteLength;s-=u.nalCount;h-=u.duration}return i===0?n:i===n.length?null:(t=n.slice(i),t.byteLength=o,t.duration=h,t.nalCount=s,t.pts=t[0].pts,t.dts=t[0].dts,t)};this.alignGopsAtEnd_=function(n){var u,i,s,h,f,e,c,t,o;for(u=r.length-1,i=n.length-1,f=null,e=!1;u>=0&&i>=0;){if(s=r[u],h=n[i],s.pts===h.pts){e=!0;break}if(s.pts>h.pts){u--;continue}u===r.length-1&&(f=i);i--}return!e&&f===null?null:(c=e?i:f,c===0)?n:(t=n.slice(c),o=t.reduce(function(n,t){return n.byteLength+=t.byteLength,n.duration+=t.duration,n.nalCount+=t.nalCount,n},{byteLength:0,duration:0,nalCount:0}),t.byteLength=o.byteLength,t.duration=o.duration,t.nalCount=o.nalCount,t.pts=t[0].pts,t.dts=t[0].dts,t)};this.alignGopsWith=function(n){r=n}};nt.prototype=new e;yt=function(n,t){typeof t.pts=="number"&&(n.timelineStartInfo.pts===undefined&&(n.timelineStartInfo.pts=t.pts),n.minSegmentPts=n.minSegmentPts===undefined?t.pts:Math.min(n.minSegmentPts,t.pts),n.maxSegmentPts=n.maxSegmentPts===undefined?t.pts:Math.max(n.maxSegmentPts,t.pts));typeof t.dts=="number"&&(n.timelineStartInfo.dts===undefined&&(n.timelineStartInfo.dts=t.dts),n.minSegmentDts=n.minSegmentDts===undefined?t.dts:Math.min(n.minSegmentDts,t.dts),n.maxSegmentDts=n.maxSegmentDts===undefined?t.dts:Math.max(n.maxSegmentDts,t.dts))};w=function(n){delete n.minSegmentDts;delete n.maxSegmentDts;delete n.minSegmentPts;delete n.maxSegmentPts};vi=function(n,t){var i,r,u=n.minSegmentDts;return t||(u-=n.timelineStartInfo.dts),i=n.timelineStartInfo.baseMediaDecodeTime,i+=u,i=Math.max(0,i),n.type==="audio"&&(r=n.samplerate/ai,i*=r,i=Math.floor(i)),i};p=function(n,t){this.numberOfTracks=0;this.metadataStream=t;this.remuxTracks=typeof n.remux!="undefined"?!!n.remux:!0;this.pendingTracks=[];this.videoTrack=null;this.pendingBoxes=[];this.pendingCaptions=[];this.pendingMetadata=[];this.pendingBytes=0;this.emittedTracks=0;p.prototype.init.call(this);this.push=function(n){if(n.text)return this.pendingCaptions.push(n);if(n.frames)return this.pendingMetadata.push(n);this.pendingTracks.push(n.track);this.pendingBoxes.push(n.boxes);this.pendingBytes+=n.boxes.byteLength;n.track.type==="video"&&(this.videoTrack=n.track);n.track.type==="audio"&&(this.audioTrack=n.track)}};p.prototype=new e;p.prototype.flush=function(n){var o=0,i={captions:[],captionStreams:{},metadata:[],info:{}},r,u,e,f=0,t;if(this.pendingTracks.length<this.numberOfTracks){if(n!=="VideoSegmentStream"&&n!=="AudioSegmentStream")return;if(this.remuxTracks)return;if(this.pendingTracks.length===0){this.emittedTracks++;this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0);return}}for(this.videoTrack?(f=this.videoTrack.timelineStartInfo.pts,li.forEach(function(n){i.info[n]=this.videoTrack[n]},this)):this.audioTrack&&(f=this.audioTrack.timelineStartInfo.pts,ci.forEach(function(n){i.info[n]=this.audioTrack[n]},this)),i.type=this.pendingTracks.length===1?this.pendingTracks[0].type:"combined",this.emittedTracks+=this.pendingTracks.length,e=a.initSegment(this.pendingTracks),i.initSegment=new Uint8Array(e.byteLength),i.initSegment.set(e),i.data=new Uint8Array(this.pendingBytes),t=0;t<this.pendingBoxes.length;t++)i.data.set(this.pendingBoxes[t],o),o+=this.pendingBoxes[t].byteLength;for(t=0;t<this.pendingCaptions.length;t++)r=this.pendingCaptions[t],r.startTime=r.startPts-f,r.startTime/=9e4,r.endTime=r.endPts-f,r.endTime/=9e4,i.captionStreams[r.stream]=!0,i.captions.push(r);for(t=0;t<this.pendingMetadata.length;t++)u=this.pendingMetadata[t],u.cueTime=u.pts-f,u.cueTime/=9e4,i.metadata.push(u);i.metadata.dispatchType=this.metadataStream.dispatchType;this.pendingTracks.length=0;this.videoTrack=null;this.pendingBoxes.length=0;this.pendingCaptions.length=0;this.pendingBytes=0;this.pendingMetadata.length=0;this.trigger("data",i);this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)};vt=function(n){var r=this,u=!0,i,t;vt.prototype.init.call(this);n=n||{};this.baseMediaDecodeTime=n.baseMediaDecodeTime||0;this.transmuxPipeline_={};this.setupAacPipeline=function(){var i={};this.transmuxPipeline_=i;i.type="aac";i.metadataStream=new h.MetadataStream;i.aacStream=new vf;i.audioTimestampRolloverStream=new h.TimestampRolloverStream("audio");i.timedMetadataTimestampRolloverStream=new h.TimestampRolloverStream("timed-metadata");i.adtsStream=new ui;i.coalesceStream=new p(n,i.metadataStream);i.headOfPipeline=i.aacStream;i.aacStream.pipe(i.audioTimestampRolloverStream).pipe(i.adtsStream);i.aacStream.pipe(i.timedMetadataTimestampRolloverStream).pipe(i.metadataStream).pipe(i.coalesceStream);i.metadataStream.on("timestamp",function(n){i.aacStream.setTimestamp(n.timeStamp)});i.aacStream.on("data",function(u){u.type!=="timed-metadata"||i.audioSegmentStream||(t=t||{timelineStartInfo:{baseMediaDecodeTime:r.baseMediaDecodeTime},codec:"adts",type:"audio"},i.coalesceStream.numberOfTracks++,i.audioSegmentStream=new y(t,n),i.adtsStream.pipe(i.audioSegmentStream).pipe(i.coalesceStream))});i.coalesceStream.on("data",this.trigger.bind(this,"data"));i.coalesceStream.on("done",this.trigger.bind(this,"done"))};this.setupTsPipeline=function(){var u={};this.transmuxPipeline_=u;u.type="ts";u.metadataStream=new h.MetadataStream;u.packetStream=new h.TransportPacketStream;u.parseStream=new h.TransportParseStream;u.elementaryStream=new h.ElementaryStream;u.videoTimestampRolloverStream=new h.TimestampRolloverStream("video");u.audioTimestampRolloverStream=new h.TimestampRolloverStream("audio");u.timedMetadataTimestampRolloverStream=new h.TimestampRolloverStream("timed-metadata");u.adtsStream=new ui;u.h264Stream=new bf;u.captionStream=new h.CaptionStream;u.coalesceStream=new p(n,u.metadataStream);u.headOfPipeline=u.packetStream;u.packetStream.pipe(u.parseStream).pipe(u.elementaryStream);u.elementaryStream.pipe(u.videoTimestampRolloverStream).pipe(u.h264Stream);u.elementaryStream.pipe(u.audioTimestampRolloverStream).pipe(u.adtsStream);u.elementaryStream.pipe(u.timedMetadataTimestampRolloverStream).pipe(u.metadataStream).pipe(u.coalesceStream);u.h264Stream.pipe(u.captionStream).pipe(u.coalesceStream);u.elementaryStream.on("data",function(f){var e;if(f.type==="metadata"){for(e=f.tracks.length;e--;)i||f.tracks[e].type!=="video"?t||f.tracks[e].type!=="audio"||(t=f.tracks[e],t.timelineStartInfo.baseMediaDecodeTime=r.baseMediaDecodeTime):(i=f.tracks[e],i.timelineStartInfo.baseMediaDecodeTime=r.baseMediaDecodeTime);if(i&&!u.videoSegmentStream){u.coalesceStream.numberOfTracks++;u.videoSegmentStream=new nt(i,n);u.videoSegmentStream.on("timelineStartInfo",function(n){t&&(t.timelineStartInfo=n,u.audioSegmentStream.setEarliestDts(n.dts))});u.videoSegmentStream.on("processedGopsInfo",r.trigger.bind(r,"gopInfo"));u.videoSegmentStream.on("baseMediaDecodeTime",function(n){t&&u.audioSegmentStream.setVideoBaseMediaDecodeTime(n)});u.h264Stream.pipe(u.videoSegmentStream).pipe(u.coalesceStream)}t&&!u.audioSegmentStream&&(u.coalesceStream.numberOfTracks++,u.audioSegmentStream=new y(t,n),u.adtsStream.pipe(u.audioSegmentStream).pipe(u.coalesceStream))}});u.coalesceStream.on("data",this.trigger.bind(this,"data"));u.coalesceStream.on("done",this.trigger.bind(this,"done"))};this.setBaseMediaDecodeTime=function(n){var r=this.transmuxPipeline_;this.baseMediaDecodeTime=n;t&&(t.timelineStartInfo.dts=undefined,t.timelineStartInfo.pts=undefined,w(t),t.timelineStartInfo.baseMediaDecodeTime=n,r.audioTimestampRolloverStream&&r.audioTimestampRolloverStream.discontinuity());i&&(r.videoSegmentStream&&(r.videoSegmentStream.gopCache_=[],r.videoTimestampRolloverStream.discontinuity()),i.timelineStartInfo.dts=undefined,i.timelineStartInfo.pts=undefined,w(i),r.captionStream.reset(),i.timelineStartInfo.baseMediaDecodeTime=n);r.timedMetadataTimestampRolloverStream&&r.timedMetadataTimestampRolloverStream.discontinuity()};this.setAudioAppendStart=function(n){t&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(n)};this.alignGopsWith=function(n){i&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(n)};this.push=function(n){if(u){var t=ku(n);t&&this.transmuxPipeline_.type!=="aac"?this.setupAacPipeline():t||this.transmuxPipeline_.type==="ts"||this.setupTsPipeline();u=!1}this.transmuxPipeline_.headOfPipeline.push(n)};this.flush=function(){u=!0;this.transmuxPipeline_.headOfPipeline.flush()};this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}};vt.prototype=new e;var pi={Transmuxer:vt,VideoSegmentStream:nt,AudioSegmentStream:y,AUDIO_PROPERTIES:ci,VIDEO_PROPERTIES:li},kf={generator:a,Transmuxer:pi.Transmuxer,AudioSegmentStream:pi.AudioSegmentStream,VideoSegmentStream:pi.VideoSegmentStream},df=function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");},gf=function(){function n(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}return function(t,i,r){return i&&n(t.prototype,i),r&&n(t,r),t}}(),ne=function(n){n.on("data",function(n){var i=n.initSegment,t;n.initSegment={data:i.buffer,byteOffset:i.byteOffset,byteLength:i.byteLength};t=n.data;n.data=t.buffer;b.postMessage({action:"data",segment:n,byteOffset:t.byteOffset,byteLength:t.byteLength},[n.data])});if(n.captionStream)n.captionStream.on("data",function(n){b.postMessage({action:"caption",data:n})});n.on("done",function(){b.postMessage({action:"done"})});n.on("gopInfo",function(n){b.postMessage({action:"gopInfo",gopInfo:n})})},gu=function(){function n(t){df(this,n);this.options=t||{};this.init()}return gf(n,[{key:"init",value:function(){this.transmuxer&&this.transmuxer.dispose();this.transmuxer=new kf.Transmuxer(this.options);ne(this.transmuxer)}},{key:"push",value:function(n){var t=new Uint8Array(n.data,n.byteOffset,n.byteLength);this.transmuxer.push(t)}},{key:"reset",value:function(){this.init()}},{key:"setTimestampOffset",value:function(n){var t=n.timestampOffset||0;this.transmuxer.setBaseMediaDecodeTime(Math.round(t*9e4))}},{key:"setAudioAppendStart",value:function(n){this.transmuxer.setAudioAppendStart(Math.ceil(n.appendStart*9e4))}},{key:"flush",value:function(){this.transmuxer.flush()}},{key:"resetCaptions",value:function(){this.transmuxer.resetCaptions()}},{key:"alignGopsWith",value:function(n){this.transmuxer.alignGopsWith(n.gopsToAlignWith.slice())}}]),n}(),te=function(n){n.onmessage=function(n){if(n.data.action==="init"&&n.data.options){this.messageHandlers=new gu(n.data.options);return}this.messageHandlers||(this.messageHandlers=new gu);n.data&&n.data.action&&n.data.action!=="init"&&this.messageHandlers[n.data.action]&&this.messageHandlers[n.data.action](n.data)}};return new te(t)}()}),bg=function(n){return/mp4a\.\d+.\d+/i.test(n)},kg=function(n){return/avc1\.[\da-f]+/i.test(n)},wlt=function(n){var t={type:"",parameters:{}},i=n.trim().split(";");return t.type=i.shift().trim(),i.forEach(function(n){var i=n.trim().split("="),r,u;i.length>1&&(r=i[0].replace(/"/g,"").trim(),u=i[1].replace(/"/g,"").trim(),t.parameters[r]=u)}),t},dg=function(n){return n.map(function(n){return n.replace(/avc1\.(\d+)\.(\d+)/i,function(n,t,i){var r=("00"+Number(t).toString(16)).slice(-2),u=("00"+Number(i).toString(16)).slice(-2);return"avc1."+r+"00"+u})})},blt=function(n,t){var i=n.addSourceBuffer(t),r=Object.create(null),u,f;r.updating=!1;r.realBuffer_=i;u=function(n){typeof i[n]=="function"?r[n]=function(){return i[n].apply(i,arguments)}:typeof r[n]=="undefined"&&Object.defineProperty(r,n,{get:function(){return i[n]},set:function(t){return i[n]=t}})};for(f in i)u(f);return r},klt=function(n,t,i){if(!t||!n.length)return[];for(var u=Math.ceil((t.currentTime()-i+3)*9e4),r=void 0,r=0;r<n.length;r++)if(n[r].pts>u)break;return n.slice(r)},dlt=function(n,t,i){if(!t.length)return n;if(i)return t.slice();var u=t[0].pts,r=0;for(r;r<n.length;r++)if(n[r].pts>=u)break;return n.slice(0,r).concat(t)},glt=function(n,t,i,r){for(var o=Math.ceil((t-r)*9e4),s=Math.ceil((i-r)*9e4),e=n.slice(),f=n.length,u;f--;)if(n[f].pts<=s)break;if(f===-1)return e;for(u=f+1;u--;)if(n[u].pts<=o)break;return u=Math.max(u,0),e.splice(u,f-u+1),e},nat=function(t){function i(t,r){var u,f;return pt(this,i),u=ii(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,n.EventTarget)),u.timestampOffset_=0,u.pendingBuffers_=[],u.bufferUpdating_=!1,u.mediaSource_=t,u.codecs_=r,u.audioCodec_=null,u.videoCodec_=null,u.audioDisabled_=!1,u.appendAudioInitSegment_=!0,u.gopBuffer_=[],u.timeMapping_=0,u.safeAppend_=n.browser.IE_VERSION>=11,f={remux:!1,alignGopsAtEnd:u.safeAppend_},u.codecs_.forEach(function(n){bg(n)?u.audioCodec_=n:kg(n)&&(u.videoCodec_=n)}),u.transmuxer_=new plt,u.transmuxer_.postMessage({action:"init",options:f}),u.transmuxer_.onmessage=function(n){return n.data.action==="data"?u.data_(n):n.data.action==="done"?u.done_(n):n.data.action==="gopInfo"?u.appendGopInfo_(n):void 0},Object.defineProperty(u,"timestampOffset",{get:function(){return this.timestampOffset_},set:function(n){typeof n=="number"&&n>=0&&(this.timestampOffset_=n,this.appendAudioInitSegment_=!0,this.gopBuffer_.length=0,this.timeMapping_=0,this.transmuxer_.postMessage({action:"setTimestampOffset",timestampOffset:n}))}}),Object.defineProperty(u,"appendWindowStart",{get:function(){return(this.videoBuffer_||this.audioBuffer_).appendWindowStart},set:function(n){this.videoBuffer_&&(this.videoBuffer_.appendWindowStart=n);this.audioBuffer_&&(this.audioBuffer_.appendWindowStart=n)}}),Object.defineProperty(u,"updating",{get:function(){return!!(this.bufferUpdating_||!this.audioDisabled_&&this.audioBuffer_&&this.audioBuffer_.updating||this.videoBuffer_&&this.videoBuffer_.updating)}}),Object.defineProperty(u,"buffered",{get:function(){var r=null,u=null,f=0,i=[],s=[];if(!this.videoBuffer_&&!this.audioBuffer_)return n.createTimeRange();if(!this.videoBuffer_)return this.audioBuffer_.buffered;if(!this.audioBuffer_||this.audioDisabled_)return this.videoBuffer_.buffered;if(this.videoBuffer_.buffered.length===0&&this.audioBuffer_.buffered.length===0)return n.createTimeRange();for(var e=this.videoBuffer_.buffered,o=this.audioBuffer_.buffered,t=e.length;t--;)i.push({time:e.start(t),type:"start"}),i.push({time:e.end(t),type:"end"});for(t=o.length;t--;)i.push({time:o.start(t),type:"start"}),i.push({time:o.end(t),type:"end"});for(i.sort(function(n,t){return n.time-t.time}),t=0;t<i.length;t++)i[t].type==="start"?(f++,f===2&&(r=i[t].time)):i[t].type==="end"&&(f--,f===1&&(u=i[t].time)),r!==null&&u!==null&&(s.push([r,u]),r=null,u=null);return n.createTimeRanges(s)}}),u}return oi(i,t),kt(i,[{key:"data_",value:function(n){var t=n.data.segment;t.data=new Uint8Array(t.data,n.data.byteOffset,n.data.byteLength);t.initSegment=new Uint8Array(t.initSegment.data,t.initSegment.byteOffset,t.initSegment.byteLength);hlt(this,this.mediaSource_,t);this.pendingBuffers_.push(t);return}},{key:"done_",value:function(){if(this.mediaSource_.readyState==="closed"){this.pendingBuffers_.length=0;return}this.processPendingSegments_();return}},{key:"createRealSourceBuffers_",value:function(){var n=this,t=["audio","video"];t.forEach(function(i){var r,u,f;n[i+"Codec_"]&&(n[i+"Buffer_"]||(r=null,n.mediaSource_[i+"Buffer_"]?(r=n.mediaSource_[i+"Buffer_"],r.updating=!1):(u=i+"Codec_",f=i+'/mp4;codecs="'+n[u]+'"',r=blt(n.mediaSource_.nativeMediaSource_,f),n.mediaSource_[i+"Buffer_"]=r),n[i+"Buffer_"]=r,["update","updatestart","updateend"].forEach(function(u){r.addEventListener(u,function(){if(i!=="audio"||!n.audioDisabled_){u==="updateend"&&(n[i+"Buffer_"].updating=!1);var r=t.every(function(t){return t==="audio"&&n.audioDisabled_?!0:i!==t&&n[t+"Buffer_"]&&n[t+"Buffer_"].updating?!1:!0});if(r)return n.trigger(u)}})})))})}},{key:"appendBuffer",value:function(n){if(this.bufferUpdating_=!0,this.audioBuffer_&&this.audioBuffer_.buffered.length){var t=this.audioBuffer_.buffered;this.transmuxer_.postMessage({action:"setAudioAppendStart",appendStart:t.end(t.length-1)})}this.videoBuffer_&&this.transmuxer_.postMessage({action:"alignGopsWith",gopsToAlignWith:klt(this.gopBuffer_,this.mediaSource_.player_,this.timeMapping_)});this.transmuxer_.postMessage({action:"push",data:n.buffer,byteOffset:n.byteOffset,byteLength:n.byteLength},[n.buffer]);this.transmuxer_.postMessage({action:"flush"})}},{key:"appendGopInfo_",value:function(n){this.gopBuffer_=dlt(this.gopBuffer_,n.data.gopInfo,this.safeAppend_)}},{key:"remove",value:function(n,t){if(this.videoBuffer_&&(this.videoBuffer_.updating=!0,this.videoBuffer_.remove(n,t),this.gopBuffer_=glt(this.gopBuffer_,n,t,this.timeMapping_)),!this.audioDisabled_&&this.audioBuffer_&&(this.audioBuffer_.updating=!0,this.audioBuffer_.remove(n,t)),ne(n,t,this.metadataTrack_),this.inbandTextTracks_)for(var i in this.inbandTextTracks_)ne(n,t,this.inbandTextTracks_[i])}},{key:"processPendingSegments_",value:function(){var n={video:{segments:[],bytes:0},audio:{segments:[],bytes:0},captions:[],metadata:[]},t;n=this.pendingBuffers_.reduce(function(n,t){var i=t.type,r=t.data,u=t.initSegment;return n[i].segments.push(r),n[i].bytes+=r.byteLength,n[i].initSegment=u,t.captions&&(n.captions=n.captions.concat(t.captions)),t.info&&(n[i].info=t.info),t.metadata&&(n.metadata=n.metadata.concat(t.metadata)),n},n);this.videoBuffer_||this.audioBuffer_||(n.video.bytes===0&&(this.videoCodec_=null),n.audio.bytes===0&&(this.audioCodec_=null),this.createRealSourceBuffers_());n.audio.info&&this.mediaSource_.trigger({type:"audioinfo",info:n.audio.info});n.video.info&&this.mediaSource_.trigger({type:"videoinfo",info:n.video.info});this.appendAudioInitSegment_&&(!this.audioDisabled_&&this.audioBuffer_&&(n.audio.segments.unshift(n.audio.initSegment),n.audio.bytes+=n.audio.initSegment.byteLength),this.appendAudioInitSegment_=!1);t=!1;this.videoBuffer_&&n.video.bytes?(n.video.segments.unshift(n.video.initSegment),n.video.bytes+=n.video.initSegment.byteLength,this.concatAndAppendSegments_(n.video,this.videoBuffer_),llt(this,n.captions,n.metadata)):this.videoBuffer_&&(this.audioDisabled_||!this.audioBuffer_)&&(t=!0);!this.audioDisabled_&&this.audioBuffer_&&this.concatAndAppendSegments_(n.audio,this.audioBuffer_);this.pendingBuffers_.length=0;t&&this.trigger("updateend");this.bufferUpdating_=!1}},{key:"concatAndAppendSegments_",value:function(n,t){var r=0,i=void 0;if(n.bytes){i=new Uint8Array(n.bytes);n.segments.forEach(function(n){i.set(n,r);r+=n.byteLength});try{t.updating=!0;t.appendBuffer(i)}catch(u){this.mediaSource_.player_&&this.mediaSource_.player_.error({code:-3,type:"APPEND_BUFFER_ERR",message:u.message,originalError:u})}}}},{key:"abort",value:function(){this.videoBuffer_&&this.videoBuffer_.abort();!this.audioDisabled_&&this.audioBuffer_&&this.audioBuffer_.abort();this.transmuxer_&&this.transmuxer_.postMessage({action:"reset"});this.pendingBuffers_.length=0;this.bufferUpdating_=!1}}]),i}(n.EventTarget),da=function(i){function r(){pt(this,r);var i=ii(this,(r.__proto__||Object.getPrototypeOf(r)).call(this)),f=void 0;i.nativeMediaSource_=new t.MediaSource;for(f in i.nativeMediaSource_)f in r.prototype||typeof i.nativeMediaSource_[f]!="function"||(i[f]=i.nativeMediaSource_[f].bind(i.nativeMediaSource_));i.duration_=NaN;Object.defineProperty(i,"duration",{get:function(){return this.duration_===Infinity?this.duration_:this.nativeMediaSource_.duration},set:function(n){if(this.duration_=n,n!==Infinity){this.nativeMediaSource_.duration=n;return}}});Object.defineProperty(i,"seekable",{get:function(){return this.duration_===Infinity?n.createTimeRanges([[0,this.nativeMediaSource_.duration]]):this.nativeMediaSource_.seekable}});Object.defineProperty(i,"readyState",{get:function(){return this.nativeMediaSource_.readyState}});Object.defineProperty(i,"activeSourceBuffers",{get:function(){return this.activeSourceBuffers_}});i.sourceBuffers=[];i.activeSourceBuffers_=[];i.updateActiveSourceBuffers_=function(){var n,u,t,r,f;if(i.activeSourceBuffers_.length=0,i.sourceBuffers.length===1){n=i.sourceBuffers[0];n.appendAudioInitSegment_=!0;n.audioDisabled_=!n.audioCodec_;i.activeSourceBuffers_.push(n);return}for(u=!1,t=!0,r=0;r<i.player_.audioTracks().length;r++)if(f=i.player_.audioTracks()[r],f.enabled&&f.kind!=="main"){u=!0;t=!1;break}i.sourceBuffers.forEach(function(n,r){if(n.appendAudioInitSegment_=!0,n.videoCodec_&&n.audioCodec_)n.audioDisabled_=u;else if(n.videoCodec_&&!n.audioCodec_)n.audioDisabled_=!0,t=!1;else if(!n.videoCodec_&&n.audioCodec_&&(n.audioDisabled_=r?t:!t,n.audioDisabled_))return;i.activeSourceBuffers_.push(n)})};i.onPlayerMediachange_=function(){i.sourceBuffers.forEach(function(n){n.appendAudioInitSegment_=!0})};i.onHlsReset_=function(){i.sourceBuffers.forEach(function(n){n.transmuxer_&&n.transmuxer_.postMessage({action:"resetCaptions"})})};i.onHlsSegmentTimeMapping_=function(n){i.sourceBuffers.forEach(function(t){return t.timeMapping_=n.mapping})};["sourceopen","sourceclose","sourceended"].forEach(function(n){this.nativeMediaSource_.addEventListener(n,this.trigger.bind(this))},i);i.on("sourceopen",function(){var t=u.querySelector('[src="'+i.url_+'"]');if(t){i.player_=n(t.parentNode);i.player_.tech_.on("hls-reset",i.onHlsReset_);i.player_.tech_.on("hls-segment-time-mapping",i.onHlsSegmentTimeMapping_);if(i.player_.audioTracks&&i.player_.audioTracks()){i.player_.audioTracks().on("change",i.updateActiveSourceBuffers_);i.player_.audioTracks().on("addtrack",i.updateActiveSourceBuffers_);i.player_.audioTracks().on("removetrack",i.updateActiveSourceBuffers_)}i.player_.on("mediachange",i.onPlayerMediachange_)}});i.on("sourceended",function(){for(var r,n,u=yg(i.duration),t=0;t<i.sourceBuffers.length;t++)r=i.sourceBuffers[t],n=r.metadataTrack_&&r.metadataTrack_.cues,n&&n.length&&(n[n.length-1].endTime=u)});i.on("sourceclose",function(){(this.sourceBuffers.forEach(function(n){n.transmuxer_&&n.transmuxer_.terminate()}),this.sourceBuffers.length=0,this.player_)&&(this.player_.audioTracks&&this.player_.audioTracks()&&(this.player_.audioTracks().off("change",this.updateActiveSourceBuffers_),this.player_.audioTracks().off("addtrack",this.updateActiveSourceBuffers_),this.player_.audioTracks().off("removetrack",this.updateActiveSourceBuffers_)),this.player_.el_&&(this.player_.off("mediachange",this.onPlayerMediachange_),this.player_.tech_.off("hls-reset",this.onHlsReset_),this.player_.tech_.off("hls-segment-time-mapping",this.onHlsSegmentTimeMapping_)))});return i}return oi(r,i),kt(r,[{key:"addSeekableRange_",value:function(n,t){var i=void 0;if(this.duration!==Infinity){i=new Error("MediaSource.addSeekableRange() can only be invoked when the duration is Infinity");i.name="InvalidStateError";i.code=11;throw i;}(t>this.nativeMediaSource_.duration||isNaN(this.nativeMediaSource_.duration))&&(this.nativeMediaSource_.duration=t)}},{key:"addSourceBuffer",value:function(n){var i=void 0,r=wlt(n),t;return/^(video|audio)\/mp2t$/i.test(r.type)?(t=[],r.parameters&&r.parameters.codecs&&(t=r.parameters.codecs.split(","),t=dg(t),t=t.filter(function(n){return bg(n)||kg(n)})),t.length===0&&(t=["avc1.4d400d","mp4a.40.2"]),i=new nat(this,t),this.sourceBuffers.length!==0&&(this.sourceBuffers[0].createRealSourceBuffers_(),i.createRealSourceBuffers_(),this.sourceBuffers[0].audioDisabled_=!0)):i=this.nativeMediaSource_.addSourceBuffer(n),this.sourceBuffers.push(i),i}}]),r}(n.EventTarget),gg=0;n.mediaSources={};var nn=function(t,i){var r=n.mediaSources[t];if(r)r.trigger({type:"sourceopen",swfId:i});else throw new Error("Media Source not found (Video.js)");},ga=function(){return!!t.MediaSource&&!!t.MediaSource.isTypeSupported&&t.MediaSource.isTypeSupported('video/mp4;codecs="avc1.4d400d,mp4a.40.2"')},te=function(){if(this.MediaSource={open:nn,supportsNativeMediaSources:ga},ga())return new da;throw new Error("Cannot use create a virtual MediaSource for this video");};te.open=nn;te.supportsNativeMediaSources=ga;nv={createObjectURL:function(i){var r=void 0;return i instanceof da?(r=t.URL.createObjectURL(i.nativeMediaSource_),i.url_=r,r):(i instanceof da)?(r="blob:vjs-media-source/"+gg,gg++,n.mediaSources[r]=i,r):(r=t.URL.createObjectURL(i),i.url_=r,r)}};n.MediaSource=te;n.URL=nv;var tat=n.EventTarget,iat=n.mergeOptions,tn=function(n,t){for(var u,i=iat(n,{duration:t.duration,minimumUpdatePeriod:t.minimumUpdatePeriod}),r=0;r<t.playlists.length;r++)u=aa(i,t.playlists[r]),u&&(i=u);return la(t,function(n,t,r,u){if(n.playlists&&n.playlists.length){var e=n.playlists[0].uri,f=aa(i,n.playlists[0]);f&&(i=f,i.mediaGroups[t][r][u].playlists[0]=i.playlists[e])}}),i},tv=function(n){function i(n,r,u,f){pt(this,i);var e=ii(this,(i.__proto__||Object.getPrototypeOf(i)).call(this));if(e.hls_=r,e.withCredentials=u,!n)throw new Error("A non-empty playlist URL or playlist is required");e.on("minimumUpdatePeriod",function(){e.refreshXml_()});e.on("mediaupdatetimeout",function(){e.refreshMedia_()});return typeof n=="string"?(e.srcUrl=n,e.state="HAVE_NOTHING",ii(e)):(e.masterPlaylistLoader_=f,e.state="HAVE_METADATA",e.started=!0,e.media(n),t.setTimeout(function(){e.trigger("loadedmetadata")},0),e)}return oi(i,n),kt(i,[{key:"dispose",value:function(){this.stopRequest();t.clearTimeout(this.mediaUpdateTimeout)}},{key:"stopRequest",value:function(){if(this.request){var n=this.request;this.request=null;n.onreadystatechange=null;n.abort()}}},{key:"media",value:function(n){var t,i;if(!n)return this.media_;if(this.state==="HAVE_NOTHING")throw new Error("Cannot switch media playlist from "+this.state);if(t=this.state,typeof n=="string"){if(!this.master.playlists[n])throw new Error("Unknown playlist URI: "+n);n=this.master.playlists[n]}(i=!this.media_||n.uri!==this.media_.uri,this.state="HAVE_METADATA",i)&&(this.media_&&this.trigger("mediachanging"),this.media_=n,this.refreshMedia_(),t!=="HAVE_MASTER"&&this.trigger("mediachange"))}},{key:"pause",value:function(){this.stopRequest();this.state==="HAVE_NOTHING"&&(this.started=!1)}},{key:"load",value:function(){if(!this.started){this.start();return}this.trigger("loadedplaylist")}},{key:"parseMasterXml",value:function(){var n=sot(this.masterXml_,{manifestUri:this.srcUrl,clientOffset:this.clientOffset_}),t,i;for(n.uri=this.srcUrl,t=0;t<n.playlists.length;t++)i="placeholder-uri-"+t,n.playlists[t].uri=i,n.playlists[i]=n.playlists[t];return la(n,function(t,i,r,u){if(t.playlists&&t.playlists.length){var f="placeholder-uri-"+i+"-"+r+"-"+u;t.playlists[0].uri=f;n.playlists[f]=t.playlists[0]}}),wd(n),bd(n),n}},{key:"start",value:function(){var n=this;this.started=!0;this.request=this.hls_.xhr({uri:this.srcUrl,withCredentials:this.withCredentials},function(t,i){if(n.request){if(n.request=null,t)return n.error={status:i.status,message:"DASH playlist request error at URL: "+n.srcUrl,responseText:i.responseText,code:2},n.state==="HAVE_NOTHING"&&(n.started=!1),n.trigger("error");n.masterXml_=i.responseText;n.masterLoaded_=i.responseHeaders&&i.responseHeaders.date?Date.parse(i.responseHeaders.date):Date.now();n.syncClientServerClock_(n.onClientServerClockSync_.bind(n))}})}},{key:"syncClientServerClock_",value:function(n){var i=this,t=hot(this.masterXml_);if(t===null)return this.clientOffset_=this.masterLoaded_-Date.now(),n();if(t.method==="DIRECT")return this.clientOffset_=t.value-Date.now(),n();this.request=this.hls_.xhr({uri:ei(this.srcUrl,t.value),method:t.method,withCredentials:this.withCredentials},function(r,u){if(i.request){if(r)return i.clientOffset_=i.masterLoaded_-Date.now(),n();var f=void 0;f=t.method==="HEAD"?u.responseHeaders&&u.responseHeaders.date?Date.parse(u.responseHeaders.date):i.masterLoaded_:Date.parse(u.responseText);i.clientOffset_=f-Date.now();n()}})}},{key:"onClientServerClockSync_",value:function(){var n=this;this.master=this.parseMasterXml();this.state="HAVE_MASTER";this.trigger("loadedplaylist");this.media_||this.media(this.master.playlists[0]);t.setTimeout(function(){n.trigger("loadedmetadata")},0);this.master.minimumUpdatePeriod&&t.setTimeout(function(){n.trigger("minimumUpdatePeriod")},this.master.minimumUpdatePeriod)}},{key:"refreshXml_",value:function(){var n=this;this.request=this.hls_.xhr({uri:this.srcUrl,withCredentials:this.withCredentials},function(i,r){if(n.request){if(n.request=null,i)return n.error={status:r.status,message:"DASH playlist request error at URL: "+n.srcUrl,responseText:r.responseText,code:2},n.state==="HAVE_NOTHING"&&(n.started=!1),n.trigger("error");n.masterXml_=r.responseText;var u=n.parseMasterXml();n.master=tn(n.master,u);t.setTimeout(function(){n.trigger("minimumUpdatePeriod")},n.master.minimumUpdatePeriod)}})}},{key:"refreshMedia_",value:function(){var u=this,i=void 0,r=void 0,n;this.masterPlaylistLoader_?(i=this.masterPlaylistLoader_.master,r=this.masterPlaylistLoader_.parseMasterXml()):(i=this.master,r=this.parseMasterXml());n=tn(i,r);n?(this.masterPlaylistLoader_?this.masterPlaylistLoader_.master=n:this.master=n,this.media_=n.playlists[this.media_.uri]):this.trigger("playlistunchanged");this.media().endList||(this.mediaUpdateTimeout=t.setTimeout(function(){u.trigger("mediaupdatetimeout")},kd(this.media(),!!n)));this.trigger("loadedplaylist")}}]),i}(tat),ie=function(t){return n.log.debug?n.log.debug.bind(n,"VHS:",t+" >"):function(){}};var rat=function(){function t(n,i,r,u){pt(this,t);this.callbacks_=[];this.pendingCallback_=null;this.timestampOffset_=0;this.mediaSource=n;this.processedAppend_=!1;this.type_=r;this.mimeType_=i;this.logger_=ie("SourceUpdater["+r+"]["+i+"]");n.readyState==="closed"?n.addEventListener("sourceopen",this.createSourceBuffer_.bind(this,i,u)):this.createSourceBuffer_(i,u)}return kt(t,[{key:"createSourceBuffer_",value:function(n,t){var i=this;if(this.sourceBuffer_=this.mediaSource.addSourceBuffer(n),this.logger_("created SourceBuffer"),t&&(t.trigger("sourcebufferadded"),this.mediaSource.sourceBuffers.length<2)){t.on("sourcebufferadded",function(){i.start_()});return}this.start_()}},{key:"start_",value:function(){var n=this;this.started_=!0;this.onUpdateendCallback_=function(){var t=n.pendingCallback_;n.pendingCallback_=null;n.logger_("buffered ["+pa(n.buffered())+"]");t&&t();n.runCallback_()};this.sourceBuffer_.addEventListener("updateend",this.onUpdateendCallback_);this.runCallback_()}},{key:"abort",value:function(n){var t=this;this.processedAppend_&&this.queueCallback_(function(){t.sourceBuffer_.abort()},n)}},{key:"appendBuffer",value:function(n,t){var i=this;this.processedAppend_=!0;this.queueCallback_(function(){i.sourceBuffer_.appendBuffer(n)},t)}},{key:"buffered",value:function(){return this.sourceBuffer_?this.sourceBuffer_.buffered:n.createTimeRanges()}},{key:"remove",value:function(n,t){var i=this;this.processedAppend_&&this.queueCallback_(function(){i.logger_("remove ["+n+" => "+t+"]");i.sourceBuffer_.remove(n,t)},re)}},{key:"updating",value:function(){return!this.sourceBuffer_||this.sourceBuffer_.updating||this.pendingCallback_}},{key:"timestampOffset",value:function(n){var t=this;return typeof n!="undefined"&&(this.queueCallback_(function(){t.sourceBuffer_.timestampOffset=n}),this.timestampOffset_=n),this.timestampOffset_}},{key:"queueCallback_",value:function(n,t){this.callbacks_.push([n.bind(this),t]);this.runCallback_()}},{key:"runCallback_",value:function(){var n=void 0;!this.updating()&&this.callbacks_.length&&this.started_&&(n=this.callbacks_.shift(),this.pendingCallback_=n[1],n[0]())}},{key:"dispose",value:function(){this.sourceBuffer_.removeEventListener("updateend",this.onUpdateendCallback_);this.sourceBuffer_&&this.mediaSource.readyState==="open"&&this.sourceBuffer_.abort()}}]),t}(),dt={GOAL_BUFFER_LENGTH:30,MAX_GOAL_BUFFER_LENGTH:60,GOAL_BUFFER_LENGTH_RATE:1,BANDWIDTH_VARIANCE:1.2,BUFFER_LOW_WATER_LINE:0,MAX_BUFFER_LOW_WATER_LINE:30,BUFFER_LOW_WATER_LINE_RATE:1},pi={FAILURE:2,TIMEOUT:-101,ABORTED:-102},uat=function(n){var t=void 0,i=void 0;return i=n.offset+n.length-1,t=n.offset,"bytes="+t+"-"+i},rn=function(n){var t={};return n.byterange&&(t.Range=uat(n.byterange)),t},un=function(n){n.forEach(function(n){n.abort()})},fat=function(n){return{bandwidth:n.bandwidth,bytesReceived:n.bytesReceived||0,roundTripTime:n.roundTripTime||0}},eat=function(n){var i=n.target,r=Date.now()-i.requestTime,t={bandwidth:Infinity,bytesReceived:0,roundTripTime:r||0};return t.bytesReceived=n.loaded,t.bandwidth=Math.floor(t.bytesReceived/t.roundTripTime*8e3),t},iv=function(n,t){return t.timedout?{status:t.status,message:"HLS request timed-out at URL: "+t.uri,code:pi.TIMEOUT,xhr:t}:t.aborted?{status:t.status,message:"HLS request aborted at URL: "+t.uri,code:pi.ABORTED,xhr:t}:n?{status:t.status,message:"HLS request errored at URL: "+t.uri,code:pi.FAILURE,xhr:t}:null},oat=function(n,t){return function(i,r){var f=r.response,e=iv(i,r),u;return e?t(e,n):f.byteLength!==16?t({status:r.status,message:"Invalid HLS key at URL: "+r.uri,code:pi.FAILURE,xhr:r},n):(u=new DataView(f),n.key.bytes=new Uint32Array([u.getUint32(0),u.getUint32(4),u.getUint32(8),u.getUint32(12)]),t(null,n))}},sat=function(n,t){return function(i,r){var f=r.response,u=iv(i,r);return u?t(u,n):f.byteLength===0?t({status:r.status,message:"Empty HLS segment content at URL: "+r.uri,code:pi.FAILURE,xhr:r},n):(n.map.bytes=new Uint8Array(r.response),t(null,n))}},hat=function(n,t){return function(i,r){var f=r.response,u=iv(i,r);return u?t(u,n):f.byteLength===0?t({status:r.status,message:"Empty HLS segment content at URL: "+r.uri,code:pi.FAILURE,xhr:r},n):(n.stats=fat(r),n.key?n.encryptedBytes=new Uint8Array(r.response):n.bytes=new Uint8Array(r.response),t(null,n))}},cat=function(n,t,i){var r=function r(u){if(u.data.source===t.requestId){n.removeEventListener("message",r);var f=u.data.decrypted;return t.bytes=new Uint8Array(f.bytes,f.byteOffset,f.byteLength),i(null,t)}};n.addEventListener("message",r);n.postMessage(sg({source:t.requestId,encrypted:t.encryptedBytes,key:t.key.bytes,iv:t.key.iv}),[t.encryptedBytes.buffer,t.key.bytes.buffer])},lat=function(n){return n.reduce(function(n,t){return t.code>n.code?t:n})},aat=function(n,t,i){var r=[],u=0;return function(f,e){if(f&&(un(n),r.push(f)),u+=1,u===n.length){if(e.endOfAllRequests=Date.now(),r.length>0){var o=lat(r);return i(o,e)}return e.encryptedBytes?cat(t,e,i):i(null,e)}}},vat=function(t,i){return function(r){return t.stats=n.mergeOptions(t.stats,eat(r)),!t.stats.firstBytesReceivedAt&&t.stats.bytesReceived&&(t.stats.firstBytesReceivedAt=Date.now()),i(r,t)}},yat=function(t,i,r,u,f,e){var o=[],s=aat(o,r,e);if(u.key){var c=n.mergeOptions(i,{uri:u.key.resolvedUri,responseType:"arraybuffer"}),l=oat(u,s),a=t(c,l);o.push(a)}if(u.map&&!u.map.bytes){var v=n.mergeOptions(i,{uri:u.map.resolvedUri,responseType:"arraybuffer",headers:rn(u.map)}),y=sat(u,s),p=t(v,y);o.push(p)}var w=n.mergeOptions(i,{uri:u.resolvedUri,responseType:"arraybuffer",headers:rn(u)}),b=hat(u,s),h=t(w,b);return h.addEventListener("progress",vat(u,f)),o.push(h),function(){return un(o)}},fn={videoCodec:"avc1",videoObjectTypeIndicator:".4d400d",audioProfile:"2"},ue=function(){var i=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"",n={codecCount:0},t=void 0;return n.codecCount=i.split(",").length,n.codecCount=n.codecCount||2,t=/(^|\s|,)+(avc[13])([^ ,]*)/i.exec(i),t&&(n.videoCodec=t[2],n.videoObjectTypeIndicator=t[3]),n.audioProfile=/(^|\s|,)+mp4a.[0-9A-Fa-f]+\.([0-9A-Fa-f]+)/i.exec(i),n.audioProfile=n.audioProfile&&n.audioProfile[2],n},pat=function(n){return n.replace(/avc1\.(\d+)\.(\d+)/i,function(n){return dg([n])[0]})},rv=function(n,t,i){return n+"/"+t+'; codecs="'+i.filter(function(n){return!!n}).join(", ")+'"'},wat=function(n){return n.segments&&n.segments.length&&n.segments[0].map?"mp4":"mp2t"},bat=function(n){var t=n.attributes||{};return t.CODECS?ue(t.CODECS):fn},kat=function(n,t){var i,u,r;if(!n.mediaGroups.AUDIO||!t||(i=n.mediaGroups.AUDIO[t],!i))return null;for(u in i)if(r=i[u],r.default&&r.playlists)return ue(r.playlists[0].attributes.CODECS).audioProfile;return null},dat=function(t,i){var s=wat(i),u=bat(i),h=i.attributes||{},f=!0,c=!1,e,l,r;if(!i)return[];if(t.mediaGroups.AUDIO&&h.AUDIO&&(e=t.mediaGroups.AUDIO[h.AUDIO],e)){c=!0;f=!1;for(l in e)if(!e[l].uri&&!e[l].playlists){f=!0;break}}c&&!u.audioProfile&&(f||(u.audioProfile=kat(t,h.AUDIO)),u.audioProfile||(n.log.warn("Multiple audio tracks present but no audio codec string is specified. Attempting to use the default audio codec (mp4a.40.2)"),u.audioProfile=fn.audioProfile));r={};u.videoCodec&&(r.video=""+u.videoCodec+u.videoObjectTypeIndicator);u.audioProfile&&(r.audio="mp4a.40."+u.audioProfile);var o=rv("audio",s,[r.audio]),v=rv("video",s,[r.video]),a=rv("video",s,[r.video,r.audio]);return c?!f&&r.video?[v,o]:!f&&!r.video?[o,o]:[a,o]:r.video?[a]:[o]},en=function(n,i){var r=void 0;return n?(r=t.getComputedStyle(n),!r)?"":r[i]:""},fe=function(n,t){var i=n.slice();n.sort(function(n,r){var u=t(n,r);return u===0?i.indexOf(n)-i.indexOf(r):u})},uv=function(n,i){var r=void 0,u=void 0;return n.attributes.BANDWIDTH&&(r=n.attributes.BANDWIDTH),r=r||t.Number.MAX_VALUE,i.attributes.BANDWIDTH&&(u=i.attributes.BANDWIDTH),u=u||t.Number.MAX_VALUE,r-u},gat=function(n,i){var r=void 0,u=void 0;return(n.attributes.RESOLUTION&&n.attributes.RESOLUTION.width&&(r=n.attributes.RESOLUTION.width),r=r||t.Number.MAX_VALUE,i.attributes.RESOLUTION&&i.attributes.RESOLUTION.width&&(u=i.attributes.RESOLUTION.width),u=u||t.Number.MAX_VALUE,r===u&&n.attributes.BANDWIDTH&&i.attributes.BANDWIDTH)?n.attributes.BANDWIDTH-i.attributes.BANDWIDTH:r-u},nvt=function(n,i,r,u){var f=n.playlists.map(function(n){var r=void 0,u=void 0,i=void 0;return r=n.attributes.RESOLUTION&&n.attributes.RESOLUTION.width,u=n.attributes.RESOLUTION&&n.attributes.RESOLUTION.height,i=n.attributes.BANDWIDTH,i=i||t.Number.MAX_VALUE,{bandwidth:i,width:r,height:u,playlist:n}}),e,h,v;fe(f,function(n,t){return n.bandwidth-t.bandwidth});f=f.filter(function(n){return!lt.isIncompatible(n.playlist)});e=f.filter(function(n){return lt.isEnabled(n.playlist)});e.length||(e=f.filter(function(n){return!lt.isDisabled(n.playlist)}));var s=e.filter(function(n){return n.bandwidth*dt.BANDWIDTH_VARIANCE<i}),o=s[s.length-1],w=s.filter(function(n){return n.bandwidth===o.bandwidth})[0],a=s.filter(function(n){return n.width&&n.height});fe(a,function(n,t){return n.width-t.width});h=a.filter(function(n){return n.width===r&&n.height===u});o=h[h.length-1];var y=h.filter(function(n){return n.bandwidth===o.bandwidth})[0],c=void 0,l=void 0,p=void 0;return y||(c=a.filter(function(n){return n.width>r||n.height>u}),l=c.filter(function(n){return n.width===c[0].width&&n.height===c[0].height}),o=l[l.length-1],p=l.filter(function(n){return n.bandwidth===o.bandwidth})[0]),v=p||y||w||e[0]||f[0],v?v.playlist:null},tvt=function(){return nvt(this.playlists.master,this.systemBandwidth,parseInt(en(this.tech_.el(),"width"),10),parseInt(en(this.tech_.el(),"height"),10))},ivt=function(n){var f=n.master,e=n.currentTime,o=n.bandwidth,s=n.duration,h=n.segmentDuration,c=n.timeUntilRebuffer,l=n.currentTimeline,a=n.syncController,u=f.playlists.filter(function(n){return!lt.isIncompatible(n)}),t=u.filter(lt.isEnabled);t.length||(t=u.filter(function(n){return!lt.isDisabled(n)}));var v=t.filter(lt.hasAttribute.bind(null,"BANDWIDTH")),i=v.map(function(n){var t=a.getSyncPoint(n,s,l,e),i=t?1:2,r=lt.estimateSegmentRequestTime(h,o,n),u=r*i-c;return{playlist:n,rebufferingImpact:u}}),r=i.filter(function(n){return n.rebufferingImpact<=0});return(fe(r,function(n,t){return uv(t.playlist,n.playlist)}),r.length)?r[0]:(fe(i,function(n,t){return n.rebufferingImpact-t.rebufferingImpact}),i[0]||null)},rvt=function(){var n=this.playlists.master.playlists.filter(lt.isEnabled),t;return fe(n,function(n,t){return uv(n,t)}),t=n.filter(function(n){return ue(n.attributes.CODECS).videoCodec}),t[0]||null},uvt=500,on=function(n,t,i){if(!n||!t)return!1;var r=n.segments,u=i===r.length;return n.endList&&t.readyState==="open"&&u},sn=function(n){return typeof n=="number"&&isFinite(n)},fvt=function(n,t,i){return n!=="main"||!t||!i?null:!i.containsAudio&&!i.containsVideo?"Neither audio nor video found in segment.":t.containsVideo&&!i.containsVideo?"Only audio found in segment when we expected video. We can't switch to audio only from a stream that had video. To get rid of this message, please add codec information to the manifest.":!t.containsVideo&&i.containsVideo?"Video found in segment when we expected only audio. We can't switch to a stream with video from an audio only stream. To get rid of this message, please add codec information to the manifest.":null},evt=function(n,t,i){var r=void 0;return r=n.length&&n.start(0)>0&&n.start(0)<t?n.start(0):t-30,Math.min(r,t-i)},ovt=function(n){var i=n.segment,f=i.start,e=i.end,t=n.playlist,r=t.mediaSequence,o=t.id,u=t.segments,s=u===undefined?[]:u,h=n.mediaIndex,c=n.timeline;return["appending ["+h+"] of ["+r+", "+(r+s.length)+"] from playlist ["+o+"]","["+f+" => "+e+"] in timeline ["+c+"]"].join(" ")},fv=function(i){function r(n){pt(this,r);var t=ii(this,(r.__proto__||Object.getPrototypeOf(r)).call(this));if(!n)throw new TypeError("Initialization settings are required");if(typeof n.currentTime!="function")throw new TypeError("No currentTime getter specified");if(!n.mediaSource)throw new TypeError("No MediaSource specified");t.bandwidth=n.bandwidth;t.throughput={rate:0,count:0};t.roundTrip=NaN;t.resetStats_();t.mediaIndex=null;t.hasPlayed_=n.hasPlayed;t.currentTime_=n.currentTime;t.seekable_=n.seekable;t.seeking_=n.seeking;t.duration_=n.duration;t.mediaSource_=n.mediaSource;t.hls_=n.hls;t.loaderType_=n.loaderType;t.startingMedia_=void 0;t.segmentMetadataTrack_=n.segmentMetadataTrack;t.goalBufferLength_=n.goalBufferLength;t.sourceType_=n.sourceType;t.state_="INIT";t.checkBufferTimeout_=null;t.error_=void 0;t.currentTimeline_=-1;t.pendingSegment_=null;t.mimeType_=null;t.sourceUpdater_=null;t.xhrOptions_=null;t.activeInitSegmentId_=null;t.initSegments_={};t.decrypter_=n.decrypter;t.syncController_=n.syncController;t.syncPoint_={segmentIndex:0,time:0};t.syncController_.on("syncinfoupdate",function(){return t.trigger("syncinfoupdate")});return t.mediaSource_.addEventListener("sourceopen",function(){return t.ended_=!1}),t.fetchAtBuffer_=!1,t.logger_=ie("SegmentLoader["+t.loaderType_+"]"),Object.defineProperty(t,"state",{get:function(){return this.state_},set:function(n){n!==this.state_&&(this.logger_(this.state_+" -> "+n),this.state_=n)}}),t}return oi(r,i),kt(r,[{key:"resetStats_",value:function(){this.mediaBytesTransferred=0;this.mediaRequests=0;this.mediaRequestsAborted=0;this.mediaRequestsTimedout=0;this.mediaRequestsErrored=0;this.mediaTransferDuration=0;this.mediaSecondsLoaded=0}},{key:"dispose",value:function(){this.state="DISPOSED";this.pause();this.abort_();this.sourceUpdater_&&this.sourceUpdater_.dispose();this.resetStats_()}},{key:"abort",value:function(){if(this.state!=="WAITING"){this.pendingSegment_&&(this.pendingSegment_=null);return}this.abort_();this.state="READY";this.paused()||this.monitorBuffer_()}},{key:"abort_",value:function(){this.pendingSegment_&&this.pendingSegment_.abortRequests();this.pendingSegment_=null}},{key:"error",value:function(n){return typeof n!="undefined"&&(this.error_=n),this.pendingSegment_=null,this.error_}},{key:"endOfStream",value:function(){this.ended_=!0;this.pause();this.trigger("ended")}},{key:"buffered_",value:function(){return this.sourceUpdater_?this.sourceUpdater_.buffered():n.createTimeRanges()}},{key:"initSegment",value:function(n){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:!1,i,t;return n?(i=vs(n),t=this.initSegments_[i],r&&!t&&n.bytes&&(this.initSegments_[i]=t={resolvedUri:n.resolvedUri,byterange:n.byterange,bytes:n.bytes}),t||n):null}},{key:"couldBeginLoading_",value:function(){return this.playlist_&&(this.sourceUpdater_||this.mimeType_&&this.state==="INIT")&&!this.paused()}},{key:"load",value:function(){if(this.monitorBuffer_(),this.playlist_){if(this.syncController_.setDateTimeMapping(this.playlist_),this.state==="INIT"&&this.couldBeginLoading_())return this.init_();this.couldBeginLoading_()&&(this.state==="READY"||this.state==="INIT")&&(this.state="READY")}}},{key:"init_",value:function(){return this.state="READY",this.sourceUpdater_=new rat(this.mediaSource_,this.mimeType_,this.loaderType_,this.sourceBufferEmitter_),this.resetEverything(),this.monitorBuffer_()}},{key:"playlist",value:function(n){var f=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},t,i,u,r;if(n){if(t=this.playlist_,i=this.pendingSegment_,this.playlist_=n,this.xhrOptions_=f,this.hasPlayed_()||(n.syncInfo={mediaSequence:n.mediaSequence,time:0}),u=t?t.id:null,this.logger_("playlist update ["+u+" => "+n.id+"]"),this.trigger("syncinfoupdate"),this.state==="INIT"&&this.couldBeginLoading_())return this.init_();if(!t||t.uri!==n.uri){this.mediaIndex!==null&&this.resyncLoader();return}r=n.mediaSequence-t.mediaSequence;this.logger_("live window shift ["+r+"]");this.mediaIndex!==null&&(this.mediaIndex-=r);i&&(i.mediaIndex-=r,i.mediaIndex>=0&&(i.segment=n.segments[i.mediaIndex]));this.syncController_.saveExpiredSegmentInfo(t,n)}}},{key:"pause",value:function(){this.checkBufferTimeout_&&(t.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=null)}},{key:"paused",value:function(){return this.checkBufferTimeout_===null}},{key:"mimeType",value:function(n,t){this.mimeType_||(this.mimeType_=n,this.sourceBufferEmitter_=t,this.state==="INIT"&&this.couldBeginLoading_()&&this.init_())}},{key:"resetEverything",value:function(){this.ended_=!1;this.resetLoader();this.remove(0,this.duration_());this.trigger("reseteverything")}},{key:"resetLoader",value:function(){this.fetchAtBuffer_=!1;this.resyncLoader()}},{key:"resyncLoader",value:function(){this.mediaIndex=null;this.syncPoint_=null;this.abort()}},{key:"remove",value:function(n,t){this.sourceUpdater_&&this.sourceUpdater_.remove(n,t);ne(n,t,this.segmentMetadataTrack_)}},{key:"monitorBuffer_",value:function(){this.checkBufferTimeout_&&t.clearTimeout(this.checkBufferTimeout_);this.checkBufferTimeout_=t.setTimeout(this.monitorBufferTick_.bind(this),1)}},{key:"monitorBufferTick_",value:function(){this.state==="READY"&&this.fillBuffer_();this.checkBufferTimeout_&&t.clearTimeout(this.checkBufferTimeout_);this.checkBufferTimeout_=t.setTimeout(this.monitorBufferTick_.bind(this),uvt)}},{key:"fillBuffer_",value:function(){var n,t;if(!this.sourceUpdater_.updating()&&(this.syncPoint_||(this.syncPoint_=this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_())),n=this.checkBuffer_(this.buffered_(),this.playlist_,this.mediaIndex,this.hasPlayed_(),this.currentTime_(),this.syncPoint_),n)){if(t=on(this.playlist_,this.mediaSource_,n.mediaIndex),t){this.endOfStream();return}(n.mediaIndex!==this.playlist_.segments.length-1||this.mediaSource_.readyState!=="ended"||this.seeking_())&&((n.timeline!==this.currentTimeline_||n.startOfSegment!==null&&n.startOfSegment<this.sourceUpdater_.timestampOffset())&&(this.syncController_.reset(),n.timestampOffset=n.startOfSegment),this.loadSegment_(n))}}},{key:"checkBuffer_",value:function(n,t,i,r,u,f){var o=0,e=void 0,h,s,c,l;return(n.length&&(o=n.end(n.length-1)),h=Math.max(0,o-u),!t.segments.length)?null:h>=this.goalBufferLength_()?null:!r&&h>=1?null:f===null?(i=this.getSyncSegmentCandidate_(t),this.generateSegmentInfo_(t,i,null,!0)):i!==null?(s=t.segments[i],e=s&&s.end?s.end:o,this.generateSegmentInfo_(t,i+1,e,!1)):(this.fetchAtBuffer_?(c=lt.getMediaInfoForTime(t,o,f.segmentIndex,f.time),i=c.mediaIndex,e=c.startTime):(l=lt.getMediaInfoForTime(t,u,f.segmentIndex,f.time),i=l.mediaIndex,e=l.startTime),this.generateSegmentInfo_(t,i,e,!1))}},{key:"getSyncSegmentCandidate_",value:function(n){var i=this,t;return this.currentTimeline_===-1?0:(t=n.segments.map(function(n,t){return{timeline:n.timeline,segmentIndex:t}}).filter(function(n){return n.timeline===i.currentTimeline_}),t.length)?t[Math.min(t.length-1,1)].segmentIndex:Math.max(n.segments.length-1,0)}},{key:"generateSegmentInfo_",value:function(n,t,i,r){if(t<0||t>=n.segments.length)return null;var u=n.segments[t];return{requestId:"segment-loader-"+Math.random(),uri:u.resolvedUri,mediaIndex:t,isSyncRequest:r,startOfSegment:i,playlist:n,bytes:null,encryptedBytes:null,timestampOffset:null,timeline:u.timeline,duration:u.duration,segment:u}}},{key:"abortRequestEarly_",value:function(n){var t;if(this.hls_.tech_.paused()||!this.xhrOptions_.timeout||!this.playlist_.attributes.BANDWIDTH||Date.now()-(n.firstBytesReceivedAt||Date.now())<1e3)return!1;var r=this.currentTime_(),u=n.bandwidth,f=this.pendingSegment_.duration,e=lt.estimateSegmentRequestTime(f,u,this.playlist_,n.bytesReceived),i=slt(this.buffered_(),r,this.hls_.tech_.playbackRate())-1;if(e<=i)return!1;if(t=ivt({master:this.hls_.playlists.master,currentTime:r,bandwidth:u,duration:this.duration_(),segmentDuration:f,timeUntilRebuffer:i,currentTimeline:this.currentTimeline_,syncController:this.syncController_}),t){var s=e-i,h=s-t.rebufferingImpact,o=.5;return(i<=lu&&(o=1),!t.playlist||t.playlist.uri===this.playlist_.uri||h<o)?!1:(this.bandwidth=t.playlist.attributes.BANDWIDTH*dt.BANDWIDTH_VARIANCE+1,this.abort(),this.trigger("earlyabort"),!0)}}},{key:"handleProgress_",value:function(n,t){!this.pendingSegment_||t.requestId!==this.pendingSegment_.requestId||this.abortRequestEarly_(t.stats)}},{key:"loadSegment_",value:function(n){this.state="WAITING";this.pendingSegment_=n;this.trimBackBuffer_(n);n.abortRequests=yat(this.hls_.xhr,this.xhrOptions_,this.decrypter_,this.createSimplifiedSegmentObj_(n),this.handleProgress_.bind(this),this.segmentRequestFinished_.bind(this))}},{key:"trimBackBuffer_",value:function(){var n=evt(this.seekable_(),this.currentTime_(),this.playlist_.targetDuration||10);n>0&&this.remove(0,n)}},{key:"createSimplifiedSegmentObj_",value:function(n){var t=n.segment,i={resolvedUri:t.resolvedUri,byterange:t.byterange,requestId:n.requestId},r;return t.key&&(r=t.key.iv||new Uint32Array([0,0,0,n.mediaIndex+n.playlist.mediaSequence]),i.key={resolvedUri:t.key.resolvedUri,iv:r}),t.map&&(i.map=this.initSegment(t.map)),i}},{key:"segmentRequestFinished_",value:function(n,t){if(this.mediaRequests+=1,t.stats&&(this.mediaBytesTransferred+=t.stats.bytesReceived,this.mediaTransferDuration+=t.stats.roundTripTime),!this.pendingSegment_){this.mediaRequestsAborted+=1;return}if(t.requestId===this.pendingSegment_.requestId){if(n){if(this.pendingSegment_=null,this.state="READY",n.code===pi.ABORTED){this.mediaRequestsAborted+=1;return}if(this.pause(),n.code===pi.TIMEOUT){this.mediaRequestsTimedout+=1;this.bandwidth=1;this.roundTrip=NaN;this.trigger("bandwidthupdate");return}this.mediaRequestsErrored+=1;this.error(n);this.trigger("error");return}this.bandwidth=t.stats.bandwidth;this.roundTrip=t.stats.roundTripTime;t.map&&(t.map=this.initSegment(t.map,!0));this.processSegmentResponse_(t)}}},{key:"processSegmentResponse_",value:function(n){var t=this.pendingSegment_;t.bytes=n.bytes;n.map&&(t.segment.map.bytes=n.map.bytes);t.endOfAllRequests=n.endOfAllRequests;this.handleSegment_()}},{key:"handleSegment_",value:function(){var o=this,r,u,f,e;if(!this.pendingSegment_){this.state="READY";return}var n=this.pendingSegment_,t=n.segment,i=this.syncController_.probeSegmentInfo(n);if(typeof this.startingMedia_=="undefined"&&i&&(i.containsAudio||i.containsVideo)&&(this.startingMedia_={containsAudio:i.containsAudio,containsVideo:i.containsVideo}),r=fvt(this.loaderType_,this.startingMedia_,i),r){this.error({message:r,blacklistDuration:Infinity});this.trigger("error");return}if(n.isSyncRequest){this.trigger("syncinfoupdate");this.pendingSegment_=null;this.state="READY";return}n.timestampOffset!==null&&n.timestampOffset!==this.sourceUpdater_.timestampOffset()&&(this.sourceUpdater_.timestampOffset(n.timestampOffset),this.trigger("timestampoffset"));u=this.syncController_.mappingForTimeline(n.timeline);u!==null&&this.trigger({type:"segmenttimemapping",mapping:u});this.state="APPENDING";t.map&&(f=vs(t.map),this.activeInitSegmentId_&&this.activeInitSegmentId_===f||(e=this.initSegment(t.map),this.sourceUpdater_.appendBuffer(e.bytes,function(){o.activeInitSegmentId_=f})));n.byteLength=n.bytes.byteLength;this.mediaSecondsLoaded+=typeof t.start=="number"&&typeof t.end=="number"?t.end-t.start:t.duration;this.logger_(ovt(n));this.sourceUpdater_.appendBuffer(n.bytes,this.handleUpdateEnd_.bind(this))}},{key:"handleUpdateEnd_",value:function(){var i;if(!this.pendingSegment_){this.state="READY";this.paused()||this.monitorBuffer_();return}var n=this.pendingSegment_,t=n.segment,r=this.mediaIndex!==null;if(this.pendingSegment_=null,this.recordThroughput_(n),this.addSegmentMetadataCue_(n),this.state="READY",this.mediaIndex=n.mediaIndex,this.fetchAtBuffer_=!0,this.currentTimeline_=n.timeline,this.trigger("syncinfoupdate"),t.end&&this.currentTime_()-t.end>n.playlist.targetDuration*3){this.resetEverything();return}r&&this.trigger("bandwidthupdate");this.trigger("progress");i=on(n.playlist,this.mediaSource_,n.mediaIndex+1);i&&this.endOfStream();this.paused()||this.monitorBuffer_()}},{key:"recordThroughput_",value:function(n){var t=this.throughput.rate,i=Date.now()-n.endOfAllRequests+1,r=Math.floor(n.byteLength/i*8e3);this.throughput.rate+=(r-t)/++this.throughput.count}},{key:"addSegmentMetadataCue_",value:function(n){if(this.segmentMetadataTrack_){var u=n.segment,i=u.start,r=u.end;if(sn(i)&&sn(r)){ne(i,r,this.segmentMetadataTrack_);var o=t.WebKitDataCue||t.VTTCue,f={bandwidth:n.playlist.attributes.BANDWIDTH,resolution:n.playlist.attributes.RESOLUTION,codecs:n.playlist.attributes.CODECS,byteLength:n.byteLength,uri:n.uri,timeline:n.timeline,playlist:n.playlist.uri,start:i,end:r},s=JSON.stringify(f),e=new o(i,r,s);e.value=f;this.segmentMetadataTrack_.addCue(e)}}}}]),r}(n.EventTarget),hn=new Uint8Array("\n\n".split("").map(function(n){return n.charCodeAt(0)})),cn=function(n){return String.fromCharCode.apply(null,n)},svt=function(i){function r(n){var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},t;return pt(this,r),t=ii(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,n,i)),t.mediaSource_=null,t.subtitlesTrack_=null,t}return oi(r,i),kt(r,[{key:"buffered_",value:function(){if(!this.subtitlesTrack_||!this.subtitlesTrack_.cues.length)return n.createTimeRanges();var t=this.subtitlesTrack_.cues,i=t[0].startTime,r=t[t.length-1].startTime;return n.createTimeRanges([[i,r]])}},{key:"initSegment",value:function(n){var f=arguments.length>1&&arguments[1]!==undefined?arguments[1]:!1,r,t,u,i;return n?(r=vs(n),t=this.initSegments_[r],f&&!t&&n.bytes&&(u=hn.byteLength+n.bytes.byteLength,i=new Uint8Array(u),i.set(n.bytes),i.set(hn,n.bytes.byteLength),this.initSegments_[r]=t={resolvedUri:n.resolvedUri,byterange:n.byterange,bytes:i}),t||n):null}},{key:"couldBeginLoading_",value:function(){return this.playlist_&&this.subtitlesTrack_&&!this.paused()}},{key:"init_",value:function(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()}},{key:"track",value:function(n){return typeof n=="undefined"?this.subtitlesTrack_:(this.subtitlesTrack_=n,this.state==="INIT"&&this.couldBeginLoading_()&&this.init_(),this.subtitlesTrack_)}},{key:"remove",value:function(n,t){ne(n,t,this.subtitlesTrack_)}},{key:"fillBuffer_",value:function(){var t=this,n,i;if(this.syncPoint_||(this.syncPoint_=this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_())),n=this.checkBuffer_(this.buffered_(),this.playlist_,this.mediaIndex,this.hasPlayed_(),this.currentTime_(),this.syncPoint_),n=this.skipEmptySegments_(n),n){if(this.syncController_.timestampOffsetForTimeline(n.timeline)===null){i=function(){t.state="READY";t.paused()||t.monitorBuffer_()};this.syncController_.one("timestampoffset",i);this.state="WAITING_ON_TIMELINE";return}this.loadSegment_(n)}}},{key:"skipEmptySegments_",value:function(n){while(n&&n.segment.empty)n=this.generateSegmentInfo_(n.playlist,n.mediaIndex+1,n.startOfSegment+n.duration,n.isSyncRequest);return n}},{key:"handleSegment_",value:function(){var i=this,n,r,u;if(!this.pendingSegment_||!this.subtitlesTrack_){this.state="READY";return}if(this.state="APPENDING",n=this.pendingSegment_,r=n.segment,typeof t.WebVTT!="function"&&this.subtitlesTrack_&&this.subtitlesTrack_.tech_){u=function(){i.handleSegment_()};this.state="WAITING_ON_VTTJS";this.subtitlesTrack_.tech_.one("vttjsloaded",u);this.subtitlesTrack_.tech_.one("vttjserror",function(){i.subtitlesTrack_.tech_.off("vttjsloaded",u);i.error({message:"Error loading vtt.js"});i.state="READY";i.pause();i.trigger("error")});return}r.requested=!0;try{this.parseVTTCues_(n)}catch(f){return this.error({message:f.message}),this.state="READY",this.pause(),this.trigger("error")}if(this.updateTimeMapping_(n,this.syncController_.timelines[n.timeline],this.playlist_),n.isSyncRequest){this.trigger("syncinfoupdate");this.pendingSegment_=null;this.state="READY";return}n.byteLength=n.bytes.byteLength;this.mediaSecondsLoaded+=r.duration;n.cues.length&&this.remove(n.cues[0].endTime,n.cues[n.cues.length-1].endTime);n.cues.forEach(function(n){i.subtitlesTrack_.addCue(n)});this.handleUpdateEnd_()}},{key:"parseVTTCues_",value:function(i){var e=void 0,o=!1,r,u,f;typeof t.TextDecoder=="function"?e=new t.TextDecoder("utf8"):(e=t.WebVTT.StringDecoder(),o=!0);r=new t.WebVTT.Parser(t,t.vttjs,e);i.cues=[];i.timestampmap={MPEGTS:0,LOCAL:0};r.oncue=i.cues.push.bind(i.cues);r.ontimestampmap=function(n){return i.timestampmap=n};r.onparsingerror=function(t){n.log.warn("Error encountered when parsing cues: "+t.message)};i.segment.map&&(u=i.segment.map.bytes,o&&(u=cn(u)),r.parse(u));f=i.bytes;o&&(f=cn(f));r.parse(f);r.flush()}},{key:"updateTimeMapping_",value:function(n,t,i){var f=n.segment,r,u,e,o;if(t){if(!n.cues.length){f.empty=!0;return}r=n.timestampmap;u=r.MPEGTS/9e4-r.LOCAL+t.mapping;n.cues.forEach(function(n){n.startTime+=u;n.endTime+=u});i.syncInfo||(e=n.cues[0].startTime,o=n.cues[n.cues.length-1].startTime,i.syncInfo={mediaSequence:i.mediaSequence+n.mediaIndex,time:Math.min(e,o-f.duration)})}}}]),r}(fv),hvt=function(n,t){for(var i,u=n.cues,r=0;r<u.length;r++)if(i=u[r],t>=i.adStartTime&&t<=i.adEndTime)return i;return null},cvt=function(n,i){var c=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0,u,r,e,f;if(n.segments)for(u=c,r=void 0,e=0;e<n.segments.length;e++){if(f=n.segments[e],r||(r=hvt(i,u+f.duration/2)),r){if("cueIn"in f){r.endTime=u;r.adEndTime=u;u+=f.duration;r=null;continue}if(u<r.endTime){u+=f.duration;continue}r.endTime+=f.duration}else if("cueOut"in f&&(r=new t.VTTCue(u,u+f.duration,f.cueOut),r.adStartTime=u,r.adEndTime=u+parseFloat(f.cueOut),i.addCue(r)),"cueOutCont"in f){var o=void 0,s=void 0,l=f.cueOutCont.split("/").map(parseFloat),h=fct(l,2);o=h[0];s=h[1];r=new t.VTTCue(u,u+f.duration,"");r.adStartTime=u-o;r.adEndTime=r.adStartTime+s;i.addCue(r)}u+=f.duration}},lvt=wht.inspect,ln=[{name:"VOD",run:function(n,t,i){return i!==Infinity?{time:0,segmentIndex:0}:null}},{name:"ProgramDateTime",run:function(n,t,i,r,u){var f,o;if(!n.datetimeToDisplayTime)return null;var s=t.segments||[],h=null,e=null;for(u=u||0,f=0;f<s.length;f++)if(o=s[f],o.dateTimeObject){var a=o.dateTimeObject.getTime()/1e3,c=a+n.datetimeToDisplayTime,l=Math.abs(u-c);if(e!==null&&e<l)break;e=l;h={time:c,segmentIndex:f}}return h}},{name:"Segment",run:function(n,t,i,r,u){var c=t.segments||[],h=null,f=null,e,o,s;for(u=u||0,e=0;e<c.length;e++)if(o=c[e],o.timeline===r&&typeof o.start!="undefined"){if(s=Math.abs(u-o.start),f!==null&&f<s)break;(!h||f===null||f>=s)&&(f=s,h={time:o.start,segmentIndex:e})}return h}},{name:"Discontinuity",run:function(n,t,i,r,u){var s=null,f,e,o;if(u=u||0,t.discontinuityStarts&&t.discontinuityStarts.length)for(f=null,e=0;e<t.discontinuityStarts.length;e++){var c=t.discontinuityStarts[e],l=t.discontinuitySequence+e+1,h=n.discontinuities[l];if(h){if(o=Math.abs(u-h.time),f!==null&&f<o)break;(!s||f===null||f>=o)&&(f=o,s={time:h.time,segmentIndex:c})}}return s}},{name:"Playlist",run:function(n,t){return t.syncInfo?{time:t.syncInfo.time,segmentIndex:t.syncInfo.mediaSequence-t.mediaSequence}:null}}],avt=function(n){function t(){pt(this,t);var n=ii(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.inspectCache_=undefined,n.timelines=[],n.discontinuities=[],n.datetimeToDisplayTime=null,n.logger_=ie("SyncController"),n}return oi(t,n),kt(t,[{key:"getSyncPoint",value:function(n,t,i,r){var u=this.runStrategies_(n,t,i,r);return u.length?this.selectSyncPoint_(u,{key:"time",value:r}):null}},{key:"getExpiredTime",value:function(n,t){var r,i;return!n||!n.segments?null:(r=this.runStrategies_(n,t,n.discontinuitySequence,0),!r.length)?null:(i=this.selectSyncPoint_(r,{key:"segmentIndex",value:0}),i.segmentIndex>0&&(i.time*=-1),Math.abs(i.time+gf(n,i.segmentIndex,0)))}},{key:"runStrategies_",value:function(n,t,i,r){for(var u,f,o=[],e=0;e<ln.length;e++)u=ln[e],f=u.run(this,n,t,i,r),f&&(f.strategy=u.name,o.push({strategy:u.name,syncPoint:f}));return o}},{key:"selectSyncPoint_",value:function(n,t){for(var u,r=n[0].syncPoint,f=Math.abs(n[0].syncPoint[t.key]-t.value),e=n[0].strategy,i=1;i<n.length;i++)u=Math.abs(n[i].syncPoint[t.key]-t.value),u<f&&(f=u,r=n[i].syncPoint,e=n[i].strategy);return this.logger_("syncPoint for ["+t.key+": "+t.value+"] chosen with strategy"+(" ["+e+"]: [time:"+r.time+",")+(" segmentIndex:"+r.segmentIndex+"]")),r}},{key:"saveExpiredSegmentInfo",value:function(n,t){for(var r,u=t.mediaSequence-n.mediaSequence,i=u-1;i>=0;i--)if(r=n.segments[i],r&&typeof r.start!="undefined"){t.syncInfo={mediaSequence:n.mediaSequence+i,time:r.start};this.logger_("playlist refresh sync: [time:"+t.syncInfo.time+","+(" mediaSequence: "+t.syncInfo.mediaSequence+"]"));this.trigger("syncinfoupdate");break}}},{key:"setDateTimeMapping",value:function(n){if(!this.datetimeToDisplayTime&&n.segments&&n.segments.length&&n.segments[0].dateTimeObject){var t=n.segments[0].dateTimeObject.getTime()/1e3;this.datetimeToDisplayTime=-t}}},{key:"reset",value:function(){this.inspectCache_=undefined}},{key:"probeSegmentInfo",value:function(n){var r=n.segment,i=n.playlist,t=void 0;return t=r.map?this.probeMp4Segment_(n):this.probeTsSegment_(n),t&&this.calculateSegmentTimeMapping_(n,t)&&(this.saveDiscontinuitySyncInfo_(n),i.syncInfo||(i.syncInfo={mediaSequence:i.mediaSequence+n.mediaIndex,time:r.start})),t}},{key:"probeMp4Segment_",value:function(n){var i=n.segment,r=fd.timescale(i.map.bytes),t=fd.startTime(r,n.bytes);return n.timestampOffset!==null&&(n.timestampOffset-=t),{start:t,end:t+i.duration}}},{key:"probeTsSegment_",value:function(n){var t=lvt(n.bytes,this.inspectCache_),i=void 0,r=void 0;return t?(t.video&&t.video.length===2?(this.inspectCache_=t.video[1].dts,i=t.video[0].dtsTime,r=t.video[1].dtsTime):t.audio&&t.audio.length===2&&(this.inspectCache_=t.audio[1].dts,i=t.audio[0].dtsTime,r=t.audio[1].dtsTime),{start:i,end:r,containsVideo:t.video&&t.video.length===2,containsAudio:t.audio&&t.audio.length===2}):null}},{key:"timestampOffsetForTimeline",value:function(n){return typeof this.timelines[n]=="undefined"?null:this.timelines[n].time}},{key:"mappingForTimeline",value:function(n){return typeof this.timelines[n]=="undefined"?null:this.timelines[n].mapping}},{key:"calculateSegmentTimeMapping_",value:function(n,t){var r=n.segment,i=this.timelines[n.timeline];if(n.timestampOffset!==null)i={time:n.startOfSegment,mapping:n.startOfSegment-t.start},this.timelines[n.timeline]=i,this.trigger("timestampoffset"),this.logger_("time mapping for timeline "+n.timeline+": "+("[time: "+i.time+"] [mapping: "+i.mapping+"]")),r.start=n.startOfSegment,r.end=t.end+i.mapping;else if(i)r.start=t.start+i.mapping,r.end=t.end+i.mapping;else return!1;return!0}},{key:"saveDiscontinuitySyncInfo_",value:function(n){var t=n.playlist,i=n.segment,r,e;if(i.discontinuity)this.discontinuities[i.timeline]={time:i.start,accuracy:0};else if(t.discontinuityStarts&&t.discontinuityStarts.length)for(r=0;r<t.discontinuityStarts.length;r++){var u=t.discontinuityStarts[r],f=t.discontinuitySequence+r+1,o=u-n.mediaIndex,s=Math.abs(o);(!this.discontinuities[f]||this.discontinuities[f].accuracy>s)&&(e=void 0,e=o<0?i.start-gf(t,n.mediaIndex,u):i.end+gf(t,n.mediaIndex+1,u),this.discontinuities[f]={time:e,accuracy:s})}}}]),t}(n.EventTarget),vvt=new pg("./decrypter-worker.worker.js",function(n){var t=this,i=function(){function h(n){return n.subarray(0,n.byteLength-n[n.byteLength-1])}var f=typeof n!="undefined"?n:typeof global!="undefined"?global:typeof t!="undefined"?t:{},e,o;e=typeof n!="undefined"?n:typeof f!="undefined"?f:typeof t!="undefined"?t:{};o=e;var u=function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");},c=function(){function n(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}return function(t,i,r){return i&&n(t.prototype,i),r&&n(t,r),t}}(),l=function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+(typeof t=="undefined"?"undefined":k(t)));n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(n,t):n.__proto__=t)},a=function(n,t){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&((typeof t=="undefined"?"undefined":k(t))==="object"||typeof t=="function")?t:n},v=function(){for(var h=[[[],[],[],[],[]],[[],[],[],[],[]]],f=h[0],e=h[1],l=f[4],p=e[4],n=void 0,i=void 0,r=void 0,u=[],a=[],c=void 0,v=void 0,y=void 0,t=void 0,o=void 0,s=void 0,n=0;n<256;n++)a[(u[n]=n<<1^(n>>7)*283)^n]=n;for(i=r=0;!l[i];i^=c||1,r=a[r]||1)for(t=r^r<<1^r<<2^r<<3^r<<4,t=t>>8^t&255^99,l[i]=t,p[t]=i,y=u[v=u[c=u[i]]],s=y*16843009^v*65537^c*257^i*16843008,o=u[t]*257^t*16843008,n=0;n<4;n++)f[n][i]=o=o<<24^o>>>8,e[n][t]=s=s<<24^s>>>8;for(n=0;n<5;n++)f[n]=f[n].slice(0),e[n]=e[n].slice(0);return h},i=null,y=function(){function n(t){u(this,n);i||(i=v());this._tables=[[i[0][0].slice(),i[0][1].slice(),i[0][2].slice(),i[0][3].slice(),i[0][4].slice()],[i[1][0].slice(),i[1][1].slice(),i[1][2].slice(),i[1][3].slice(),i[1][4].slice()]];var f=void 0,h=void 0,r=void 0,s=void 0,a=void 0,o=this._tables[0][4],c=this._tables[1],e=t.length,l=1;if(e!==4&&e!==6&&e!==8)throw new Error("Invalid aes key size");for(s=t.slice(0),a=[],this._key=[s,a],f=e;f<4*e+28;f++)r=s[f-1],(f%e==0||e===8&&f%e==4)&&(r=o[r>>>24]<<24^o[r>>16&255]<<16^o[r>>8&255]<<8^o[r&255],f%e==0&&(r=r<<8^r>>>24^l<<24,l=l<<1^(l>>7)*283)),s[f]=s[f-e]^r;for(h=0;f;h++,f--)r=s[h&3?f:f-4],a[h]=f<=4||h<4?r:c[0][o[r>>>24]]^c[1][o[r>>16&255]]^c[2][o[r>>8&255]]^c[3][o[r&255]]}return n.prototype.decrypt=function(n,t,i,r,u,f){for(var e=this._key[1],o=n^e[0],s=r^e[1],h=i^e[2],c=t^e[3],y=void 0,g=void 0,nt=void 0,tt=e.length/4-2,l=void 0,a=4,v=this._tables[1],p=v[0],w=v[1],b=v[2],k=v[3],d=v[4],l=0;l<tt;l++)y=p[o>>>24]^w[s>>16&255]^b[h>>8&255]^k[c&255]^e[a],g=p[s>>>24]^w[h>>16&255]^b[c>>8&255]^k[o&255]^e[a+1],nt=p[h>>>24]^w[c>>16&255]^b[o>>8&255]^k[s&255]^e[a+2],c=p[c>>>24]^w[o>>16&255]^b[s>>8&255]^k[h&255]^e[a+3],a+=4,o=y,s=g,h=nt;for(l=0;l<4;l++)u[(3&-l)+f]=d[o>>>24]<<24^d[s>>16&255]<<16^d[h>>8&255]<<8^d[c&255]^e[a++],y=o,o=s,s=h,h=c,c=y},n}(),s=function(){function n(){u(this,n);this.listeners={}}return n.prototype.on=function(n,t){this.listeners[n]||(this.listeners[n]=[]);this.listeners[n].push(t)},n.prototype.off=function(n,t){if(!this.listeners[n])return!1;var i=this.listeners[n].indexOf(t);return this.listeners[n].splice(i,1),i>-1},n.prototype.trigger=function(n){var t=this.listeners[n],u,i,f,e,r;if(t)if(arguments.length===2)for(u=t.length,i=0;i<u;++i)t[i].call(this,arguments[1]);else for(f=Array.prototype.slice.call(arguments,1),e=t.length,r=0;r<e;++r)t[r].apply(this,f)},n.prototype.dispose=function(){this.listeners={}},n.prototype.pipe=function(n){this.on("data",function(t){n.push(t)})},n}(),p=function(n){function t(){u(this,t);var i=a(this,n.call(this,s));return i.jobs=[],i.delay=1,i.timeout_=null,i}return l(t,n),t.prototype.processJob_=function(){this.jobs.shift()();this.timeout_=this.jobs.length?setTimeout(this.processJob_.bind(this),this.delay):null},t.prototype.push=function(n){this.jobs.push(n);this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))},t}(s),r=function(n){return n<<24|(n&65280)<<8|(n&16711680)>>8|n>>>24},w=function(n,t,i){var e=new Int32Array(n.buffer,n.byteOffset,n.byteLength>>2),b=new y(Array.prototype.slice.call(t)),w=new Uint8Array(n.byteLength),f=new Int32Array(w.buffer),o=void 0,s=void 0,h=void 0,c=void 0,l=void 0,a=void 0,v=void 0,p=void 0,u=void 0;for(o=i[0],s=i[1],h=i[2],c=i[3],u=0;u<e.length;u+=4)l=r(e[u]),a=r(e[u+1]),v=r(e[u+2]),p=r(e[u+3]),b.decrypt(l,a,v,p,f,u),f[u]=r(f[u]^o),f[u+1]=r(f[u+1]^s),f[u+2]=r(f[u+2]^h),f[u+3]=r(f[u+3]^c),o=l,s=a,h=v,c=p;return w},b=function(){function n(t,i,f,e){u(this,n);var c=n.STEP,s=new Int32Array(t.buffer),l=new Uint8Array(t.byteLength),o=0;for(this.asyncStream_=new p,this.asyncStream_.push(this.decryptChunk_(s.subarray(o,o+c),i,f,l)),o=c;o<s.length;o+=c)f=new Uint32Array([r(s[o-4]),r(s[o-3]),r(s[o-2]),r(s[o-1])]),this.asyncStream_.push(this.decryptChunk_(s.subarray(o,o+c),i,f,l));this.asyncStream_.push(function(){e(null,h(l))})}return n.prototype.decryptChunk_=function(n,t,i,r){return function(){var u=w(n,t,i);r.set(u,n.byteOffset)}},c(n,null,[{key:"STEP",get:function(){return 32e3}}]),n}(),d=function(n){var t={};return Object.keys(n).forEach(function(i){var r=n[i];t[i]=ArrayBuffer.isView(r)?{bytes:r.buffer,byteOffset:r.byteOffset,byteLength:r.byteLength}:r}),t},g=function(n){n.onmessage=function(n){var t=n.data,i=new Uint8Array(t.encrypted.bytes,t.encrypted.byteOffset,t.encrypted.byteLength),r=new Uint32Array(t.key.bytes,t.key.byteOffset,t.key.byteLength/4),u=new Uint32Array(t.iv.bytes,t.iv.byteOffset,t.iv.byteLength/4);new b(i,r,u,function(n,i){o.postMessage(d({source:t.source,decrypted:i}),[i.buffer])})}};return new g(t)}()}),yvt=function(n){var t=n.default?"main":"alternative";return n.characteristics&&n.characteristics.indexOf("public.accessibility.describes-video")>=0&&(t="main-desc"),t},ps=function(n,t){n.abort();n.pause();t&&t.activePlaylistLoader&&(t.activePlaylistLoader.pause(),t.activePlaylistLoader=null)},ev=function(n,t){t.activePlaylistLoader=n;n.load()},pvt=function(n,t){return function(){var u=t.segmentLoaders,f=u[n],e=u.main,i=t.mediaTypes[n],o=i.activeTrack(),r=i.activeGroup(o),s=i.activePlaylistLoader;if(ps(f,i),r){if(!r.playlistLoader){s&&e.resetEverything();return}f.resyncLoader();ev(r.playlistLoader,i)}}},wvt=function(n,t){return function(){var f=t.segmentLoaders,u=f[n],o=f.main,i=t.mediaTypes[n],e=i.activeTrack(),r=i.activeGroup(e),s=i.activePlaylistLoader;if(ps(u,i),r){if(!r.playlistLoader){o.resetEverything();return}if(s===r.playlistLoader){ev(r.playlistLoader,i);return}u.track&&u.track(e);u.resetEverything();ev(r.playlistLoader,i)}}},ws={AUDIO:function(t,i){return function(){var o=i.segmentLoaders[t],r=i.mediaTypes[t],s=i.blacklistCurrentPlaylist,u;ps(o,r);var h=r.activeTrack(),f=r.activeGroup(),c=(f.filter(function(n){return n.default})[0]||f[0]).id,e=r.tracks[c];if(h===e){s({message:"Problem encountered loading the default audio track."});return}n.log.warn("Problem encountered loading the alternate audio track.Switching back to default.");for(u in r.tracks)r.tracks[u].enabled=r.tracks[u]===e;r.onTrackChanged()}},SUBTITLES:function(t,i){return function(){var f=i.segmentLoaders[t],r=i.mediaTypes[t],u;n.log.warn("Problem encountered loading the subtitle track.Disabling subtitle track.");ps(f,r);u=r.activeTrack();u&&(u.mode="disabled");r.onTrackChanged()}}},an={AUDIO:function(n,t,i){if(t){var u=i.tech,f=i.requestOptions,r=i.segmentLoaders[n];t.on("loadedmetadata",function(){var n=t.media();r.playlist(n,f);(!u.paused()||n.endList&&u.preload()!=="none")&&r.load()});t.on("loadedplaylist",function(){r.playlist(t.media(),f);u.paused()||r.load()});t.on("error",ws[n](n,i))}},SUBTITLES:function(n,t,i){var u=i.tech,f=i.requestOptions,r=i.segmentLoaders[n],e=i.mediaTypes[n];t.on("loadedmetadata",function(){var n=t.media();r.playlist(n,f);r.track(e.activeTrack());(!u.paused()||n.endList&&u.preload()!=="none")&&r.load()});t.on("loadedplaylist",function(){r.playlist(t.media(),f);u.paused()||r.load()});t.on("error",ws[n](n,i))}},bvt=function(n,t){return function(i){return i.attributes[n]===t}},kvt=function(n){return function(t){return t.resolvedUri===n}},dvt={AUDIO:function(t,i){var h=i.hls,b=i.sourceType,k=i.segmentLoaders[t],c=i.requestOptions.withCredentials,l=i.master,e=l.mediaGroups,d=l.playlists,a=i.mediaTypes[t],o=a.groups,v=a.tracks,g=i.masterPlaylistLoader,u,y,f,r,p,s,w;e[t]&&Object.keys(e[t]).length!==0||(e[t]={main:{"default":{"default":!0}}});for(u in e[t]){o[u]||(o[u]=[]);y=d.filter(bvt(t,u));for(f in e[t][u])r=e[t][u][f],p=y.filter(kvt(r.resolvedUri)),p.length&&delete r.resolvedUri,s=void 0,s=r.resolvedUri?new ls(r.resolvedUri,h,c):r.playlists&&b==="dash"?new tv(r.playlists[0],h,c,g):null,r=n.mergeOptions({id:f,playlistLoader:s},r),an[t](t,r.playlistLoader,i),o[u].push(r),typeof v[f]=="undefined"&&(w=new n.AudioTrack({id:f,kind:yvt(r),enabled:!1,language:r.language,"default":r.default,label:f}),v[f]=w)}k.on("error",ws[t](t,i))},SUBTITLES:function(t,i){var p=i.tech,h=i.hls,c=i.sourceType,w=i.segmentLoaders[t],l=i.requestOptions.withCredentials,e=i.master.mediaGroups,a=i.mediaTypes[t],s=a.groups,v=a.tracks,b=i.masterPlaylistLoader,f,r,u,o,y;for(f in e[t]){s[f]||(s[f]=[]);for(r in e[t][f])e[t][f][r].forced||(u=e[t][f][r],o=void 0,c==="hls"?o=new ls(u.resolvedUri,h,l):c==="dash"&&(o=new tv(u.playlists[0],h,l,b)),u=n.mergeOptions({id:r,playlistLoader:o},u),an[t](t,u.playlistLoader,i),s[f].push(u),typeof v[r]=="undefined"&&(y=p.addRemoteTextTrack({id:r,kind:"subtitles",enabled:!1,language:u.language,label:r},!1).track,v[r]=y))}w.on("error",ws[t](t,i))},"CLOSED-CAPTIONS":function(t,i){var l=i.tech,e=i.master.mediaGroups,s=i.mediaTypes[t],o=s.groups,h=s.tracks,r,u,f,c;for(r in e[t]){o[r]||(o[r]=[]);for(u in e[t][r])(f=e[t][r][u],f.instreamId.match(/CC\d/))&&(o[r].push(n.mergeOptions({id:u},f)),typeof h[u]=="undefined"&&(c=l.addRemoteTextTrack({id:f.instreamId,kind:"captions",enabled:!1,language:f.language,label:u},!1).track,h[u]=c))}}},gvt=function(n,t){return function(i){var e=t.masterPlaylistLoader,f=t.mediaTypes[n].groups,u=e.media(),r;return u?(r=null,u.attributes[n]&&(r=f[u.attributes[n]]),r=r||f.main,typeof i=="undefined")?r:i===null?null:r.filter(function(n){return n.id===i.id})[0]||null:null}},nyt={AUDIO:function(n,t){return function(){var i=t.mediaTypes[n].tracks;for(var r in i)if(i[r].enabled)return i[r];return null}},SUBTITLES:function(n,t){return function(){var i=t.mediaTypes[n].tracks;for(var r in i)if(i[r].mode==="showing")return i[r];return null}}},tyt=function(n){var r,f,u,e;["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(function(t){dvt[t](t,n)});var t=n.mediaTypes,o=n.masterPlaylistLoader,i=n.tech,s=n.hls;["AUDIO","SUBTITLES"].forEach(function(i){t[i].activeGroup=gvt(i,n);t[i].activeTrack=nyt[i](i,n);t[i].onGroupChanged=pvt(i,n);t[i].onTrackChanged=wvt(i,n)});r=t.AUDIO.activeGroup();f=(r.filter(function(n){return n.default})[0]||r[0]).id;t.AUDIO.tracks[f].enabled=!0;t.AUDIO.onTrackChanged();o.on("mediachange",function(){["AUDIO","SUBTITLES"].forEach(function(n){return t[n].onGroupChanged()})});u=function(){t.AUDIO.onTrackChanged();i.trigger({type:"usage",name:"hls-audio-change"})};i.audioTracks().addEventListener("change",u);i.remoteTextTracks().addEventListener("change",t.SUBTITLES.onTrackChanged);s.on("dispose",function(){i.audioTracks().removeEventListener("change",u);i.remoteTextTracks().removeEventListener("change",t.SUBTITLES.onTrackChanged)});i.clearTracks("audio");for(e in t.AUDIO.tracks)i.audioTracks().addTrack(t.AUDIO.tracks[e])},iyt=function(){var n={};return["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(function(t){n[t]={groups:{},tracks:{},activePlaylistLoader:null,activeGroup:re,activeTrack:re,onGroupChanged:re,onTrackChanged:re}}),n},ryt=120,wi=void 0,uyt=["mediaRequests","mediaRequestsAborted","mediaRequestsTimedout","mediaRequestsErrored","mediaTransferDuration","mediaBytesTransferred"],fyt=function(n){return this.audioSegmentLoader_[n]+this.mainSegmentLoader_[n]},eyt=function(i){function r(t){var u;pt(this,r);var i=ii(this,(r.__proto__||Object.getPrototypeOf(r)).call(this)),f=t.url,o=t.withCredentials,e=t.tech,s=t.bandwidth,h=t.externHls,c=t.useCueTags,l=t.blacklistDuration,a=t.enableLowInitialPlaylist,v=t.sourceType;if(!f)throw new Error("A non-empty playlist URL is required");return wi=h,i.withCredentials=o,i.tech_=e,i.hls_=e.hls,i.sourceType_=v,i.useCueTags_=c,i.blacklistDuration=l,i.enableLowInitialPlaylist=a,i.useCueTags_&&(i.cueTagsTrack_=i.tech_.addTextTrack("metadata","ad-cues"),i.cueTagsTrack_.inBandMetadataTrackDispatchType=""),i.requestOptions_={withCredentials:i.withCredentials,timeout:null},i.mediaTypes_=iyt(),i.mediaSource=new n.MediaSource,i.mediaSource.addEventListener("sourceopen",i.handleSourceOpen_.bind(i)),i.seekable_=n.createTimeRanges(),i.hasPlayed_=function(){return!1},i.syncController_=new avt(t),i.segmentMetadataTrack_=e.addRemoteTextTrack({kind:"metadata",label:"segment-metadata"},!1).track,i.decrypter_=new vvt,u={hls:i.hls_,mediaSource:i.mediaSource,currentTime:i.tech_.currentTime.bind(i.tech_),seekable:function(){return i.seekable()},seeking:function(){return i.tech_.seeking()},duration:function(){return i.mediaSource.duration},hasPlayed:function(){return i.hasPlayed_()},goalBufferLength:function(){return i.goalBufferLength()},bandwidth:s,syncController:i.syncController_,decrypter:i.decrypter_,sourceType:i.sourceType_},i.masterPlaylistLoader_=i.sourceType_==="dash"?new tv(f,i.hls_,i.withCredentials):new ls(f,i.hls_,i.withCredentials),i.setupMasterPlaylistLoaderListeners_(),i.mainSegmentLoader_=new fv(n.mergeOptions(u,{segmentMetadataTrack:i.segmentMetadataTrack_,loaderType:"main"}),t),i.audioSegmentLoader_=new fv(n.mergeOptions(u,{loaderType:"audio"}),t),i.subtitleSegmentLoader_=new svt(n.mergeOptions(u,{loaderType:"vtt"}),t),i.setupSegmentLoaderListeners_(),uyt.forEach(function(n){i[n+"_"]=fyt.bind(i,n)}),i.logger_=ie("MPC"),i.masterPlaylistLoader_.load(),i}return oi(r,i),kt(r,[{key:"setupMasterPlaylistLoaderListeners_",value:function(){var t=this;this.masterPlaylistLoader_.on("loadedmetadata",function(){var i=t.masterPlaylistLoader_.media(),r=t.masterPlaylistLoader_.targetDuration*1.5*1e3;t.requestOptions_.timeout=ya(t.masterPlaylistLoader_.master,t.masterPlaylistLoader_.media())?0:r;i.endList&&t.tech_.preload()!=="none"&&(t.mainSegmentLoader_.playlist(i,t.requestOptions_),t.mainSegmentLoader_.load());tyt({sourceType:t.sourceType_,segmentLoaders:{AUDIO:t.audioSegmentLoader_,SUBTITLES:t.subtitleSegmentLoader_,main:t.mainSegmentLoader_},tech:t.tech_,requestOptions:t.requestOptions_,masterPlaylistLoader:t.masterPlaylistLoader_,hls:t.hls_,master:t.master(),mediaTypes:t.mediaTypes_,blacklistCurrentPlaylist:t.blacklistCurrentPlaylist.bind(t)});t.triggerPresenceUsage_(t.master(),i);try{t.setupSourceBuffers_()}catch(u){return n.log.warn("Failed to create SourceBuffers",u),t.mediaSource.endOfStream("decode")}t.setupFirstPlay();t.trigger("selectedinitialmedia")});this.masterPlaylistLoader_.on("loadedplaylist",function(){var i=t.masterPlaylistLoader_.media(),n,r,u;if(!i){t.excludeUnsupportedVariants_();n=void 0;t.enableLowInitialPlaylist&&(n=t.selectInitialPlaylist());n||(n=t.selectPlaylist());t.initialMedia_=n;t.masterPlaylistLoader_.media(t.initialMedia_);return}if(t.useCueTags_&&t.updateAdCues_(i),t.mainSegmentLoader_.playlist(i,t.requestOptions_),t.updateDuration(),t.tech_.paused()||t.mainSegmentLoader_.load(),!i.endList)if(r=function(){var n=t.seekable();n.length!==0&&t.mediaSource.addSeekableRange_(n.start(0),n.end(0))},t.duration()!==Infinity){u=function u(){if(t.duration()===Infinity)r();else t.tech_.one("durationchange",u)};t.tech_.one("durationchange",u)}else r()});this.masterPlaylistLoader_.on("error",function(){t.blacklistCurrentPlaylist(t.masterPlaylistLoader_.error)});this.masterPlaylistLoader_.on("mediachanging",function(){t.mainSegmentLoader_.abort();t.mainSegmentLoader_.pause()});this.masterPlaylistLoader_.on("mediachange",function(){var n=t.masterPlaylistLoader_.media(),i=t.masterPlaylistLoader_.targetDuration*1.5*1e3;t.requestOptions_.timeout=ya(t.masterPlaylistLoader_.master,t.masterPlaylistLoader_.media())?0:i;t.mainSegmentLoader_.playlist(n,t.requestOptions_);t.mainSegmentLoader_.load();t.tech_.trigger({type:"mediachange",bubbles:!0})});this.masterPlaylistLoader_.on("playlistunchanged",function(){var n=t.masterPlaylistLoader_.media(),i=t.stuckAtPlaylistEnd_(n);i&&(t.blacklistCurrentPlaylist({message:"Playlist no longer updating."}),t.tech_.trigger("playliststuck"))});this.masterPlaylistLoader_.on("renditiondisabled",function(){t.tech_.trigger({type:"usage",name:"hls-rendition-disabled"})});this.masterPlaylistLoader_.on("renditionenabled",function(){t.tech_.trigger({type:"usage",name:"hls-rendition-enabled"})})}},{key:"triggerPresenceUsage_",value:function(n,t){var i=n.mediaGroups||{},u=!0,f=Object.keys(i.AUDIO),r,e,o;for(r in i.AUDIO)for(e in i.AUDIO[r])o=i.AUDIO[r][e],o.uri||(u=!1);u&&this.tech_.trigger({type:"usage",name:"hls-demuxed"});Object.keys(i.SUBTITLES).length&&this.tech_.trigger({type:"usage",name:"hls-webvtt"});wi.Playlist.isAes(t)&&this.tech_.trigger({type:"usage",name:"hls-aes"});wi.Playlist.isFmp4(t)&&this.tech_.trigger({type:"usage",name:"hls-fmp4"});f.length&&Object.keys(i.AUDIO[f[0]]).length>1&&this.tech_.trigger({type:"usage",name:"hls-alternate-audio"});this.useCueTags_&&this.tech_.trigger({type:"usage",name:"hls-playlist-cue-tags"})}},{key:"setupSegmentLoaderListeners_",value:function(){var n=this;this.mainSegmentLoader_.on("bandwidthupdate",function(){var i=n.selectPlaylist(),r=n.masterPlaylistLoader_.media(),t=n.tech_.buffered(),u=t.length?t.end(t.length-1)-n.tech_.currentTime():0,f=n.bufferLowWaterLine();(!r.endList||n.duration()<dt.MAX_BUFFER_LOW_WATER_LINE||i.attributes.BANDWIDTH<r.attributes.BANDWIDTH||u>=f)&&n.masterPlaylistLoader_.media(i);n.tech_.trigger("bandwidthupdate")});this.mainSegmentLoader_.on("progress",function(){n.trigger("progress")});this.mainSegmentLoader_.on("error",function(){n.blacklistCurrentPlaylist(n.mainSegmentLoader_.error())});this.mainSegmentLoader_.on("syncinfoupdate",function(){n.onSyncInfoUpdate_()});this.mainSegmentLoader_.on("timestampoffset",function(){n.tech_.trigger({type:"usage",name:"hls-timestamp-offset"})});this.audioSegmentLoader_.on("syncinfoupdate",function(){n.onSyncInfoUpdate_()});this.mainSegmentLoader_.on("ended",function(){n.onEndOfStream()});this.mainSegmentLoader_.on("earlyabort",function(){n.blacklistCurrentPlaylist({message:"Aborted early because there isn't enough bandwidth to complete the request without rebuffering."},ryt)});this.mainSegmentLoader_.on("reseteverything",function(){n.tech_.trigger("hls-reset")});this.mainSegmentLoader_.on("segmenttimemapping",function(t){n.tech_.trigger({type:"hls-segment-time-mapping",mapping:t.mapping})});this.audioSegmentLoader_.on("ended",function(){n.onEndOfStream()})}},{key:"mediaSecondsLoaded_",value:function(){return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded+this.mainSegmentLoader_.mediaSecondsLoaded)}},{key:"load",value:function(){this.mainSegmentLoader_.load();this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.load();this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.load()}},{key:"fastQualityChange_",value:function(){var n=this.selectPlaylist();n!==this.masterPlaylistLoader_.media()&&(this.masterPlaylistLoader_.media(n),this.mainSegmentLoader_.resetLoader())}},{key:"play",value:function(){if(!this.setupFirstPlay()){this.tech_.ended()&&this.tech_.setCurrentTime(0);this.hasPlayed_()&&this.load();var n=this.tech_.seekable();if(this.tech_.duration()===Infinity&&this.tech_.currentTime()<n.start(0))return this.tech_.setCurrentTime(n.end(n.length-1))}}},{key:"setupFirstPlay",value:function(){var i=this,r=this.masterPlaylistLoader_.media(),t;if(!r||this.tech_.paused()||this.hasPlayed_())return!1;if(!r.endList){if(t=this.seekable(),!t.length)return!1;if(n.browser.IE_VERSION&&this.tech_.readyState()===0){this.tech_.one("loadedmetadata",function(){i.trigger("firstplay");i.tech_.setCurrentTime(t.end(0));i.hasPlayed_=function(){return!0}});return!1}this.trigger("firstplay");this.tech_.setCurrentTime(t.end(0))}return this.hasPlayed_=function(){return!0},this.load(),!0}},{key:"handleSourceOpen_",value:function(){try{this.setupSourceBuffers_()}catch(i){return n.log.warn("Failed to create Source Buffers",i),this.mediaSource.endOfStream("decode")}if(this.tech_.autoplay()){var t=this.tech_.play();typeof t!="undefined"&&typeof t.then=="function"&&t.then(null,function(){})}this.trigger("sourceopen")}},{key:"onEndOfStream",value:function(){var n=this.mainSegmentLoader_.ended_;this.mediaTypes_.AUDIO.activePlaylistLoader&&(n=!this.mainSegmentLoader_.startingMedia_||this.mainSegmentLoader_.startingMedia_.containsVideo?n&&this.audioSegmentLoader_.ended_:this.audioSegmentLoader_.ended_);n&&this.mediaSource.endOfStream()}},{key:"stuckAtPlaylistEnd_",value:function(n){var e=this.seekable(),t,r;if(!e.length||(t=this.syncController_.getExpiredTime(n,this.mediaSource.duration),t===null))return!1;var u=wi.Playlist.playlistEnd(n,t),f=this.tech_.currentTime(),i=this.tech_.buffered();return i.length?(r=i.end(i.length-1),r-f<=sr&&u-r<=sr):u-f<=sr}},{key:"blacklistCurrentPlaylist",value:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},i=arguments[1],r=void 0,f=void 0,u;if(r=t.playlist||this.masterPlaylistLoader_.media(),i=i||t.blacklistDuration||this.blacklistDuration,!r){this.error=t;try{return this.mediaSource.endOfStream("network")}catch(e){return this.trigger("error")}}return(u=this.masterPlaylistLoader_.master.playlists.filter(as).length===1,u)?(n.log.warn("Problem encountered with the current HLS playlist. Trying again since it is the final playlist."),this.tech_.trigger("retryplaylist"),this.masterPlaylistLoader_.load(u)):(r.excludeUntil=Date.now()+i*1e3,this.tech_.trigger("blacklistplaylist"),this.tech_.trigger({type:"usage",name:"hls-rendition-blacklisted"}),f=this.selectPlaylist(),n.log.warn("Problem encountered with the current HLS playlist."+(t.message?" "+t.message:"")+" Switching to another playlist."),this.masterPlaylistLoader_.media(f))}},{key:"pauseLoading",value:function(){this.mainSegmentLoader_.pause();this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.pause();this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.pause()}},{key:"setCurrentTime",value:function(n){var t=lg(this.tech_.buffered(),n);if(!(this.masterPlaylistLoader_&&this.masterPlaylistLoader_.media())||!this.masterPlaylistLoader_.media().segments)return 0;if(t&&t.length)return n;this.mainSegmentLoader_.resetEverything();this.mainSegmentLoader_.abort();this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.resetEverything(),this.audioSegmentLoader_.abort());this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.resetEverything(),this.subtitleSegmentLoader_.abort());this.load()}},{key:"duration",value:function(){return this.masterPlaylistLoader_?this.mediaSource?this.mediaSource.duration:wi.Playlist.duration(this.masterPlaylistLoader_.media()):0}},{key:"seekable",value:function(){return this.seekable_}},{key:"onSyncInfoUpdate_",value:function(){var t=void 0,i=void 0,r,u;if(this.masterPlaylistLoader_&&(r=this.masterPlaylistLoader_.media(),r)&&(u=this.syncController_.getExpiredTime(r,this.mediaSource.duration),u!==null)&&(t=wi.Playlist.seekable(r,u),t.length!==0)){if(this.mediaTypes_.AUDIO.activePlaylistLoader){if(r=this.mediaTypes_.AUDIO.activePlaylistLoader.media(),u=this.syncController_.getExpiredTime(r,this.mediaSource.duration),u===null)return;if(i=wi.Playlist.seekable(r,u),i.length===0)return}this.seekable_=i?i.start(0)>t.end(0)||t.start(0)>i.end(0)?t:n.createTimeRanges([[i.start(0)>t.start(0)?i.start(0):t.start(0),i.end(0)<t.end(0)?i.end(0):t.end(0)]]):t;this.logger_("seekable updated ["+pa(this.seekable_)+"]");this.tech_.trigger("seekablechanged")}}},{key:"updateDuration",value:function(){var t=this,u=this.mediaSource.duration,n=wi.Playlist.duration(this.masterPlaylistLoader_.media()),i=this.tech_.buffered(),r=function r(){t.mediaSource.duration=n;t.tech_.trigger("durationchange");t.mediaSource.removeEventListener("sourceopen",r)};i.length>0&&(n=Math.max(n,i.end(i.length-1)));u!==n&&(this.mediaSource.readyState!=="open"?this.mediaSource.addEventListener("sourceopen",r):r())}},{key:"dispose",value:function(){var n=this;this.decrypter_.terminate();this.masterPlaylistLoader_.dispose();this.mainSegmentLoader_.dispose();["AUDIO","SUBTITLES"].forEach(function(t){var i=n.mediaTypes_[t].groups;for(var r in i)i[r].forEach(function(n){n.playlistLoader&&n.playlistLoader.dispose()})});this.audioSegmentLoader_.dispose();this.subtitleSegmentLoader_.dispose()}},{key:"master",value:function(){return this.masterPlaylistLoader_.master}},{key:"media",value:function(){return this.masterPlaylistLoader_.media()||this.initialMedia_}},{key:"setupSourceBuffers_",value:function(){var n=this.masterPlaylistLoader_.media(),t=void 0;if(n&&this.mediaSource.readyState==="open"){if(t=dat(this.masterPlaylistLoader_.master,n),t.length<1)return this.error="No compatible SourceBuffer configuration for the variant stream:"+n.resolvedUri,this.mediaSource.endOfStream("decode");this.configureLoaderMimeTypes_(t);this.excludeIncompatibleVariants_(n)}}},{key:"configureLoaderMimeTypes_",value:function(t){var i=t.length>1&&t[0].indexOf(",")===-1&&t[0]!==t[1]?new n.EventTarget:null;this.mainSegmentLoader_.mimeType(t[0],i);t[1]&&this.audioSegmentLoader_.mimeType(t[1],i)}},{key:"excludeUnsupportedVariants_",value:function(){this.master().playlists.forEach(function(n){n.attributes.CODECS&&t.MediaSource&&t.MediaSource.isTypeSupported&&!t.MediaSource.isTypeSupported('video/mp4; codecs="'+pat(n.attributes.CODECS)+'"')&&(n.excludeUntil=Infinity)})}},{key:"excludeIncompatibleVariants_",value:function(n){var i=2,r=null,t=void 0;n.attributes.CODECS&&(t=ue(n.attributes.CODECS),r=t.videoCodec,i=t.codecCount);this.master().playlists.forEach(function(n){var t={codecCount:2,videoCodec:null};n.attributes.CODECS&&(t=ue(n.attributes.CODECS));t.codecCount!==i&&(n.excludeUntil=Infinity);t.videoCodec!==r&&(n.excludeUntil=Infinity)})}},{key:"updateAdCues_",value:function(n){var t=0,i=this.seekable();i.length&&(t=i.start(0));cvt(n,this.cueTagsTrack_,t)}},{key:"goalBufferLength",value:function(){var t=this.tech_.currentTime(),n=dt.GOAL_BUFFER_LENGTH,i=dt.GOAL_BUFFER_LENGTH_RATE,r=Math.max(n,dt.MAX_GOAL_BUFFER_LENGTH);return Math.min(n+t*i,r)}},{key:"bufferLowWaterLine",value:function(){var t=this.tech_.currentTime(),n=dt.BUFFER_LOW_WATER_LINE,i=dt.BUFFER_LOW_WATER_LINE_RATE,r=Math.max(n,dt.MAX_BUFFER_LOW_WATER_LINE);return Math.min(n+t*i,r)}}]),r}(n.EventTarget),oyt=function(n,t,i){return function(r){var u=n.master.playlists[t],e=va(u),f=as(u);return typeof r=="undefined"?f:(r?delete u.disabled:u.disabled=!0,r===f||e||(i(),r?n.trigger("renditionenabled"):n.trigger("renditiondisabled")),r)}},vn=function vn(n,t,i){var u,r;pt(this,vn);u=n.masterPlaylistController_.fastQualityChange_.bind(n.masterPlaylistController_);t.attributes.RESOLUTION&&(r=t.attributes.RESOLUTION,this.width=r.width,this.height=r.height);this.bandwidth=t.attributes.BANDWIDTH;this.id=i;this.enabled=oyt(n.playlists,t.uri,u)},syt=function(n){var t=n.playlists;n.representations=function(){return t.master.playlists.filter(function(n){return!va(n)}).map(function(t){return new vn(n,t,t.uri)})}},yn=["seeking","seeked","pause","playing","error"],hyt=function(){function n(i){var r=this;pt(this,n);this.tech_=i.tech;this.seekable=i.seekable;this.consecutiveUpdates=0;this.lastRecordedTime=null;this.timer_=null;this.checkCurrentTimeTimeout_=null;this.logger_=ie("PlaybackWatcher");this.logger_("initialize");var u=function(){return r.monitorCurrentTime_()},f=function(){return r.techWaiting_()},e=function(){return r.cancelTimer_()},o=function(){return r.fixesBadSeeks_()};this.tech_.on("seekablechanged",o);this.tech_.on("waiting",f);this.tech_.on(yn,e);this.tech_.on("canplay",u);this.dispose=function(){r.logger_("dispose");r.tech_.off("seekablechanged",o);r.tech_.off("waiting",f);r.tech_.off(yn,e);r.tech_.off("canplay",u);r.checkCurrentTimeTimeout_&&t.clearTimeout(r.checkCurrentTimeTimeout_);r.cancelTimer_()}}return kt(n,[{key:"monitorCurrentTime_",value:function(){this.checkCurrentTime_();this.checkCurrentTimeTimeout_&&t.clearTimeout(this.checkCurrentTimeTimeout_);this.checkCurrentTimeTimeout_=t.setTimeout(this.monitorCurrentTime_.bind(this),250)}},{key:"checkCurrentTime_",value:function(){if(this.tech_.seeking()&&this.fixesBadSeeks_()){this.consecutiveUpdates=0;this.lastRecordedTime=this.tech_.currentTime();return}if(!this.tech_.paused()&&!this.tech_.seeking()){var n=this.tech_.currentTime(),t=this.tech_.buffered();if(this.lastRecordedTime===n&&(!t.length||n+sr>=t.end(t.length-1)))return this.techWaiting_();this.consecutiveUpdates>=5&&n===this.lastRecordedTime?(this.consecutiveUpdates++,this.waiting_()):n===this.lastRecordedTime?this.consecutiveUpdates++:(this.consecutiveUpdates=0,this.lastRecordedTime=n)}}},{key:"cancelTimer_",value:function(){this.consecutiveUpdates=0;this.timer_&&(this.logger_("cancelTimer_"),clearTimeout(this.timer_));this.timer_=null}},{key:"fixesBadSeeks_",value:function(){var r=this.tech_.seeking(),n=this.seekable(),i=this.tech_.currentTime(),t=void 0,u,f;return(r&&this.afterSeekableWindow_(n,i)&&(u=n.end(n.length-1),t=u),r&&this.beforeSeekableWindow_(n,i)&&(f=n.start(0),t=f+sr),typeof t!="undefined")?(this.logger_("Trying to seek outside of seekable at time "+i+" with "+("seekable range "+pa(n)+". Seeking to ")+(t+".")),this.tech_.setCurrentTime(t),!0):!1}},{key:"waiting_",value:function(){if(!this.techWaiting_()){var n=this.tech_.currentTime(),i=this.tech_.buffered(),t=lg(i,n);if(t.length&&n+3<=t.end(0)){this.cancelTimer_();this.tech_.setCurrentTime(n);this.logger_("Stopped at "+n+" while inside a buffered region "+("["+t.start(0)+" -> "+t.end(0)+"]. Attempting to resume ")+"playback by seeking to the current time.");this.tech_.trigger({type:"usage",name:"hls-unknown-waiting"});return}}}},{key:"techWaiting_",value:function(){var i=this.seekable(),n=this.tech_.currentTime(),r,u,t,f;return this.tech_.seeking()&&this.fixesBadSeeks_()?!0:this.tech_.seeking()||this.timer_!==null?!0:this.beforeSeekableWindow_(i,n)?(r=i.end(i.length-1),this.logger_("Fell out of live window at time "+n+". Seeking to "+("live point (seekable end) "+r)),this.cancelTimer_(),this.tech_.setCurrentTime(r),this.tech_.trigger({type:"usage",name:"hls-live-resync"}),!0):(u=this.tech_.buffered(),t=ag(u,n),this.videoUnderflow_(t,u,n))?(this.cancelTimer_(),this.tech_.setCurrentTime(n),this.tech_.trigger({type:"usage",name:"hls-video-underflow"}),!0):t.length>0?(f=t.start(0)-n,this.logger_("Stopped at "+n+", setting timer for "+f+", seeking "+("to "+t.start(0))),this.timer_=setTimeout(this.skipTheGap_.bind(this),f*1e3,n),!0):!1}},{key:"afterSeekableWindow_",value:function(n,t){return n.length?t>n.end(n.length-1)+sr?!0:!1:!1}},{key:"beforeSeekableWindow_",value:function(n,t){return n.length&&n.start(0)>0&&t<n.start(0)-sr?!0:!1}},{key:"videoUnderflow_",value:function(n,t,i){if(n.length===0){var r=this.gapFromVideoUnderflow_(t,i);if(r)return this.logger_("Encountered a gap in video from "+r.start+" to "+r.end+". "+("Seeking to current time "+i)),!0}return!1}},{key:"skipTheGap_",value:function(n){var r=this.tech_.buffered(),t=this.tech_.currentTime(),i=ag(r,t);(this.cancelTimer_(),i.length!==0&&t===n)&&(this.logger_("skipTheGap_:","currentTime:",t,"scheduled currentTime:",n,"nextRange start:",i.start(0)),this.tech_.setCurrentTime(i.start(0)+lu),this.tech_.trigger({type:"usage",name:"hls-gap-skip"}))}},{key:"gapFromVideoUnderflow_",value:function(n,t){for(var r,f,u=olt(n),i=0;i<u.length;i++)if(r=u.start(i),f=u.end(i),t-r<4&&t-r>2)return{start:r,end:f};return null}}]),n}(),cyt={errorInterval:30,getSource:function(n){var t=this.tech({IWillNotUseThisInPlugins:!0}),i=t.currentSource_;return n(i)}},pn=function pn(t,i){var e=0,u=0,r=n.mergeOptions(cyt,i);t.ready(function(){t.trigger({type:"usage",name:"hls-error-reload-initialized"})});var o=function(){u&&t.currentTime(u)},h=function(n){if(n!==null&&n!==undefined){u=t.duration()!==Infinity&&t.currentTime()||0;t.one("loadedmetadata",o);t.src(n);t.trigger({type:"usage",name:"hls-error-reload"});t.play()}},s=function(){if(Date.now()-e<r.errorInterval*1e3){t.trigger({type:"usage",name:"hls-error-reload-canceled"});return}if(!r.getSource||typeof r.getSource!="function"){n.log.error("ERROR: reloadSourceOnError - The option getSource must be a function!");return}return e=Date.now(),r.getSource.call(t,h)},f=function f(){t.off("loadedmetadata",o);t.off("error",s);t.off("dispose",f)},c=function(n){f();pn(t,n)};t.on("error",s);t.on("dispose",f);t.reloadSourceOnError=c},wn=function(n){pn(this,n)},et={PlaylistLoader:ls,Playlist:lt,Decrypter:ict,AsyncStream:yd,decrypt:pd,utils:elt,STANDARD_PLAYLIST_SELECTOR:tvt,INITIAL_PLAYLIST_SELECTOR:rvt,comparePlaylistBandwidth:uv,comparePlaylistResolution:gat,xhr:og()},bn=4194304;["GOAL_BUFFER_LENGTH","MAX_GOAL_BUFFER_LENGTH","GOAL_BUFFER_LENGTH_RATE","BUFFER_LOW_WATER_LINE","MAX_BUFFER_LOW_WATER_LINE","BUFFER_LOW_WATER_LINE_RATE","BANDWIDTH_VARIANCE"].forEach(function(t){Object.defineProperty(et,t,{get:function(){return n.log.warn("using Hls."+t+" is UNSAFE be sure you know what you are doing"),dt[t]},set:function(i){if(n.log.warn("using Hls."+t+" is UNSAFE be sure you know what you are doing"),typeof i!="number"||i<0){n.log.warn("value of Hls."+t+" must be greater than or equal to 0");return}dt[t]=i}})});var kn=function(n){var t;return/^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i.test(n)?"hls":(t=/^application\/dash\+xml/i,t.test(n))?"dash":null},dn=function(n,t){for(var u=t.media(),r=-1,i=0;i<n.length;i++)if(n[i].id===u.uri){r=i;break}n.selectedIndex_=r;n.trigger({selectedIndex:r,type:"change"})},lyt=function(n,t){t.representations().forEach(function(t){n.addQualityLevel(t)});dn(n,t.playlists)};et.canPlaySource=function(){return n.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};gn=function(t,i,r){var f,u;if(!t)return t;f={};for(u in t)f[u]={audioContentType:'audio/mp4; codecs="'+r.attributes.CODECS+'"',videoContentType:'video/mp4; codecs="'+i.attributes.CODECS+'"'},i.contentProtection&&i.contentProtection[u]&&i.contentProtection[u].pssh&&(f[u].pssh=i.contentProtection[u].pssh),typeof t[u]=="string"&&(f[u].url=t[u]);return n.mergeOptions(t,f)};ntt=function(t){var i,r;t.options_.sourceType==="dash"&&(i=n.players[t.tech_.options_.playerId],i.eme&&(r=gn(t.source_.keySystems,t.playlists.media(),t.masterPlaylistController_.mediaTypes_.AUDIO.activePlaylistLoader.media()),r&&(i.currentSource().keySystems=r)))};et.supportsNativeHls=function(){var i=u.createElement("video"),t;return n.getTech("Html5").isSupported()?(t=["application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"],t.some(function(n){return/maybe|probably/i.test(i.canPlayType(n))})):!1}();et.supportsNativeDash=function(){return n.getTech("Html5").isSupported()?/maybe|probably/i.test(u.createElement("video").canPlayType("application/dash+xml")):!1}();et.supportsTypeNatively=function(n){return n==="hls"?et.supportsNativeHls:n==="dash"?et.supportsNativeDash:!1};et.isSupported=function(){return n.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};var ayt=n.getComponent("Component"),ttt=function(t){function i(t,r,f){var e,o;if(pt(this,i),e=ii(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,r,f.hls)),r.options_&&r.options_.playerId&&(o=n(r.options_.playerId),o.hasOwnProperty("hls")||Object.defineProperty(o,"hls",{get:function(){return n.log.warn("player.hls is deprecated. Use player.tech_.hls instead."),r.trigger({type:"usage",name:"hls-player-access"}),e}}),o.vhs=e,o.dash=e),e.tech_=r,e.source_=t,e.stats={},e.ignoreNextSeekingEvent_=!1,e.setOptions_(),e.options_.overrideNative&&r.overrideNativeAudioTracks&&r.overrideNativeVideoTracks)r.overrideNativeAudioTracks(!0),r.overrideNativeVideoTracks(!0);else if(e.options_.overrideNative&&(r.featuresNativeVideoTracks||r.featuresNativeAudioTracks))throw new Error("Overriding native HLS requires emulated tracks. See https://git.io/vMpjB");e.on(u,["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],function(){var n=u.fullscreenElement||u.webkitFullscreenElement||u.mozFullScreenElement||u.msFullscreenElement;n&&n.contains(e.tech_.el())&&e.masterPlaylistController_.fastQualityChange_()});e.on(e.tech_,"seeking",function(){if(this.ignoreNextSeekingEvent_){this.ignoreNextSeekingEvent_=!1;return}this.setCurrentTime(this.tech_.currentTime())});e.on(e.tech_,"error",function(){this.masterPlaylistController_&&this.masterPlaylistController_.pauseLoading()});e.on(e.tech_,"play",e.play);return e}return oi(i,t),kt(i,[{key:"setOptions_",value:function(){var n=this;this.options_.withCredentials=this.options_.withCredentials||!1;typeof this.options_.blacklistDuration!="number"&&(this.options_.blacklistDuration=300);typeof this.options_.bandwidth!="number"&&(this.options_.bandwidth=bn);this.options_.enableLowInitialPlaylist=this.options_.enableLowInitialPlaylist&&this.options_.bandwidth===bn;["withCredentials","bandwidth"].forEach(function(t){typeof n.source_[t]!="undefined"&&(n.options_[t]=n.source_[t])});this.bandwidth=this.options_.bandwidth}},{key:"src",value:function(t,i){var r=this;if(t){this.setOptions_();this.options_.url=this.source_.src;this.options_.tech=this.tech_;this.options_.externHls=et;this.options_.sourceType=kn(i);this.masterPlaylistController_=new eyt(this.options_);this.playbackWatcher_=new hyt(n.mergeOptions(this.options_,{seekable:function(){return r.seekable()}}));this.masterPlaylistController_.on("error",function(){var t=n.players[r.tech_.options_.playerId];t.error(r.masterPlaylistController_.error)});this.masterPlaylistController_.selectPlaylist=this.selectPlaylist?this.selectPlaylist.bind(this):et.STANDARD_PLAYLIST_SELECTOR.bind(this);this.masterPlaylistController_.selectInitialPlaylist=et.INITIAL_PLAYLIST_SELECTOR.bind(this);this.playlists=this.masterPlaylistController_.masterPlaylistLoader_;this.mediaSource=this.masterPlaylistController_.mediaSource;Object.defineProperties(this,{selectPlaylist:{get:function(){return this.masterPlaylistController_.selectPlaylist},set:function(n){this.masterPlaylistController_.selectPlaylist=n.bind(this)}},throughput:{get:function(){return this.masterPlaylistController_.mainSegmentLoader_.throughput.rate},set:function(n){this.masterPlaylistController_.mainSegmentLoader_.throughput.rate=n;this.masterPlaylistController_.mainSegmentLoader_.throughput.count=1}},bandwidth:{get:function(){return this.masterPlaylistController_.mainSegmentLoader_.bandwidth},set:function(n){this.masterPlaylistController_.mainSegmentLoader_.bandwidth=n;this.masterPlaylistController_.mainSegmentLoader_.throughput={rate:0,count:0}}},systemBandwidth:{get:function(){var t=1/(this.bandwidth||1),n=void 0;return n=this.throughput>0?1/this.throughput:0,Math.floor(1/(t+n))},set:function(){n.log.error('The "systemBandwidth" property is read-only')}}});Object.defineProperties(this.stats,{bandwidth:{get:function(){return r.bandwidth||0},enumerable:!0},mediaRequests:{get:function(){return r.masterPlaylistController_.mediaRequests_()||0},enumerable:!0},mediaRequestsAborted:{get:function(){return r.masterPlaylistController_.mediaRequestsAborted_()||0},enumerable:!0},mediaRequestsTimedout:{get:function(){return r.masterPlaylistController_.mediaRequestsTimedout_()||0},enumerable:!0},mediaRequestsErrored:{get:function(){return r.masterPlaylistController_.mediaRequestsErrored_()||0},enumerable:!0},mediaTransferDuration:{get:function(){return r.masterPlaylistController_.mediaTransferDuration_()||0},enumerable:!0},mediaBytesTransferred:{get:function(){return r.masterPlaylistController_.mediaBytesTransferred_()||0},enumerable:!0},mediaSecondsLoaded:{get:function(){return r.masterPlaylistController_.mediaSecondsLoaded_()||0},enumerable:!0},buffered:{get:function(){return vg(r.tech_.buffered())},enumerable:!0},currentTime:{get:function(){return r.tech_.currentTime()},enumerable:!0},currentSource:{get:function(){return r.tech_.currentSource_},enumerable:!0},currentTech:{get:function(){return r.tech_.name_},enumerable:!0},duration:{get:function(){return r.tech_.duration()},enumerable:!0},master:{get:function(){return r.playlists.master},enumerable:!0},playerDimensions:{get:function(){return r.tech_.currentDimensions()},enumerable:!0},seekable:{get:function(){return vg(r.tech_.seekable())},enumerable:!0},timestamp:{get:function(){return Date.now()},enumerable:!0},videoPlaybackQuality:{get:function(){return r.tech_.getVideoPlaybackQuality()},enumerable:!0}});this.tech_.one("canplay",this.masterPlaylistController_.setupFirstPlay.bind(this.masterPlaylistController_));this.masterPlaylistController_.on("selectedinitialmedia",function(){syt(r);ntt(r)});this.on(this.masterPlaylistController_,"progress",function(){this.tech_.trigger("progress")});this.on(this.masterPlaylistController_,"firstplay",function(){this.ignoreNextSeekingEvent_=!0});(this.tech_.ready(function(){return r.setupQualityLevels_()}),this.tech_.el())&&this.tech_.src(n.URL.createObjectURL(this.masterPlaylistController_.mediaSource))}}},{key:"setupQualityLevels_",value:function(){var t=this,i=n.players[this.tech_.options_.playerId];if(i&&i.qualityLevels){this.qualityLevels_=i.qualityLevels();this.masterPlaylistController_.on("selectedinitialmedia",function(){lyt(t.qualityLevels_,t)});this.playlists.on("mediachange",function(){dn(t.qualityLevels_,t.playlists)})}}},{key:"play",value:function(){this.masterPlaylistController_.play()}},{key:"setCurrentTime",value:function(n){this.masterPlaylistController_.setCurrentTime(n)}},{key:"duration",value:function(){return this.masterPlaylistController_.duration()}},{key:"seekable",value:function(){return this.masterPlaylistController_.seekable()}},{key:"dispose",value:function(){this.playbackWatcher_&&this.playbackWatcher_.dispose();this.masterPlaylistController_&&this.masterPlaylistController_.dispose();this.qualityLevels_&&this.qualityLevels_.dispose();rct(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"dispose",this).call(this)}}]),i}(ayt),ov={name:"videojs-http-streaming",VERSION:"1.1.0",canHandleSource:function(t){var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},r=n.mergeOptions(n.options,i);return ov.canPlayType(t.type,r)},handleSource:function(t,i){var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{},u=n.mergeOptions(n.options,r);return i.hls=new ttt(t,i,u),i.hls.xhr=og(),i.hls.src(t.src,t.type),i.hls},canPlayType:function(t){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},u=n.mergeOptions(n.options,r),f=u.hls.overrideNative,i=kn(t),e=i&&(!et.supportsTypeNatively(i)||f);return e?"maybe":""}};return(typeof n.MediaSource=="undefined"||typeof n.URL=="undefined")&&(n.MediaSource=te,n.URL=nv),te.supportsNativeMediaSources()&&n.getTech("Html5").registerSourceHandler(ov,0),n.HlsHandler=ttt,n.HlsSourceHandler=ov,n.Hls=et,n.use||n.registerComponent("Hls",et),n.options.hls=n.options.hls||{},n.registerPlugin?n.registerPlugin("reloadSourceOnError",wn):n.plugin("reloadSourceOnError",wn),n});!function(){!function(n){var t=n&&n.videojs;t&&(t.CDN_VERSION="7.1.0")}(window)}();;;;(function(n,t){typeof exports=="object"&&typeof module!="undefined"?module.exports=t(require("video.js")):typeof define=="function"&&define.amd?define(["videojs"],function(i){return n.Youtube=t(i)}):n.Youtube=t(n.videojs)})(this,function(n){"use strict";function u(){YT.ready(function(){t.isApiReady=!0;for(var n=0;n<t.apiReadyQueue.length;++n)t.apiReadyQueue[n].initYTPlayer()})}function f(n,t){var i=!1,r=document.createElement("script"),u=document.getElementsByTagName("body")[0]||document.getElementsByTagName("script")[0].parentNode;u.appendChild(r);r.onload=function(){i||(i=!0,t())};r.onreadystatechange=function(){i||this.readyState!=="complete"&&this.readyState!=="loaded"||(i=!0,t())};r.src=n}var i=n.browser.IS_IOS||n.browser.IS_NATIVE_ANDROID,r=n.getTech("Tech"),t=n.extend(r,{constructor:function(n,u){r.call(this,n,u);this.setPoster(n.poster);this.setSrc(this.options_.source,!0);this.setTimeout(function(){this.el_&&(this.el_.parentNode.className+=" vjs-youtube",i&&(this.el_.parentNode.className+=" vjs-youtube-mobile"),t.isApiReady?this.initYTPlayer():t.apiReadyQueue.push(this))}.bind(this))},dispose:function(){if(this.ytPlayer)this.ytPlayer.stopVideo&&this.ytPlayer.stopVideo(),this.ytPlayer.destroy&&this.ytPlayer.destroy();else{var n=t.apiReadyQueue.indexOf(this);n!==-1&&t.apiReadyQueue.splice(n,1)}this.ytPlayer=null;this.el_.parentNode.className=this.el_.parentNode.className.replace(" vjs-youtube","").replace(" vjs-youtube-mobile","");this.el_.parentNode.removeChild(this.el_);r.prototype.dispose.call(this)},createEl:function(){var r=document.createElement("div"),t,n;return r.setAttribute("class","vjs-youtube-iframe  vjs-tech"),t=document.createElement("div"),t.appendChild(r),i||this.options_.ytControls||(n=document.createElement("div"),n.setAttribute("class","vjs-iframe-blocker"),n.setAttribute("style","position:absolute;top:0;left:0;width:100%;height:100%"),n.onclick=function(){this.pause()}.bind(this),t.appendChild(n)),t},initYTPlayer:function(){var n={controls:0,modestbranding:1,rel:0,showinfo:0,loop:this.options_.loop?1:0,wmode:"transparent"},t,i;typeof this.options_.autohide!="undefined"&&(n.autohide=this.options_.autohide);typeof this.options_.cc_load_policy!="undefined"&&(n.cc_load_policy=this.options_.cc_load_policy);typeof this.options_.ytControls!="undefined"&&(n.controls=this.options_.ytControls);typeof this.options_.disablekb!="undefined"&&(n.disablekb=this.options_.disablekb);typeof this.options_.end!="undefined"&&(n.end=this.options_.end);typeof this.options_.color!="undefined"&&(n.color=this.options_.color);n.controls?typeof this.options_.fs!="undefined"&&(n.fs=this.options_.fs):n.fs=0;typeof this.options_.end!="undefined"&&(n.end=this.options_.end);typeof this.options_.hl!="undefined"?n.hl=this.options_.hl:typeof this.options_.language!="undefined"&&(n.hl=this.options_.language.substr(0,2));typeof this.options_.iv_load_policy!="undefined"&&(n.iv_load_policy=this.options_.iv_load_policy);typeof this.options_.list!="undefined"?n.list=this.options_.list:this.url&&typeof this.url.listId!="undefined"&&(n.list=this.url.listId);typeof this.options_.listType!="undefined"&&(n.listType=this.options_.listType);typeof this.options_.modestbranding!="undefined"&&(n.modestbranding=this.options_.modestbranding);typeof this.options_.playlist!="undefined"&&(n.playlist=this.options_.playlist);typeof this.options_.playsinline!="undefined"&&(n.playsinline=this.options_.playsinline);typeof this.options_.rel!="undefined"&&(n.rel=this.options_.rel);typeof this.options_.showinfo!="undefined"&&(n.showinfo=this.options_.showinfo);typeof this.options_.start!="undefined"&&(n.start=this.options_.start);typeof this.options_.theme!="undefined"&&(n.theme=this.options_.theme);typeof this.options_.customVars!="undefined"&&(t=this.options_.customVars,Object.keys(t).forEach(function(i){n[i]=t[i]}));this.activeVideoId=this.url?this.url.videoId:null;this.activeList=n.list;i={videoId:this.activeVideoId,playerVars:n,events:{onReady:this.onPlayerReady.bind(this),onPlaybackQualityChange:this.onPlayerPlaybackQualityChange.bind(this),onPlaybackRateChange:this.onPlayerPlaybackRateChange.bind(this),onStateChange:this.onPlayerStateChange.bind(this),onVolumeChange:this.onPlayerVolumeChange.bind(this),onError:this.onPlayerError.bind(this)}};typeof this.options_.enablePrivacyEnhancedMode!="undefined"&&this.options_.enablePrivacyEnhancedMode&&(i.host="https://www.youtube-nocookie.com");this.ytPlayer=new YT.Player(this.$(".vjs-youtube-iframe"),i)},onPlayerReady:function(){this.options_.muted&&this.ytPlayer.mute();this.options_.autoplay&&this.ytPlayer.playVideo();var n=this.ytPlayer.getAvailablePlaybackRates();n.length>1&&(this.featuresPlaybackRate=!0);this.playerReady_=!0;this.triggerReady();gts.$(window).trigger("ytPlayerReady");this.playOnReady?this.play():this.cueOnReady&&(this.cueVideoById_(this.url.videoId),this.activeVideoId=this.url.videoId)},onPlayerPlaybackQualityChange:function(){},onPlayerPlaybackRateChange:function(){this.trigger("ratechange")},onPlayerStateChange:function(n){var t=n.data;if(t!==this.lastState&&!this.errorNumber){this.lastState=t;switch(t){case-1:this.trigger("loadstart");this.trigger("loadedmetadata");this.trigger("durationchange");this.trigger("ratechange");break;case YT.PlayerState.ENDED:this.trigger("ended");break;case YT.PlayerState.PLAYING:this.trigger("timeupdate");this.trigger("durationchange");this.trigger("playing");this.trigger("play");this.isSeeking&&this.onSeeked();break;case YT.PlayerState.PAUSED:this.trigger("canplay");this.isSeeking?this.onSeeked():this.trigger("pause");break;case YT.PlayerState.BUFFERING:this.player_.trigger("timeupdate");this.player_.trigger("waiting")}}},onPlayerVolumeChange:function(){this.trigger("volumechange")},onPlayerError:function(n){this.errorNumber=n.data;this.trigger("pause");this.trigger("error")},error:function(){var n=1e3+this.errorNumber;switch(this.errorNumber){case 5:return{code:n,message:"Error while trying to play the video"};case 2:case 100:return{code:n,message:"Unable to find the video"};case 101:case 150:return{code:n,message:"Playback on other Websites has been disabled by the video owner."}}return{code:n,message:"YouTube unknown error ("+this.errorNumber+")"}},loadVideoById_:function(n){var t={videoId:n};this.options_.start&&(t.startSeconds=this.options_.start);this.options_.end&&(t.endEnd=this.options_.end);this.ytPlayer.loadVideoById(t)},cueVideoById_:function(n){var t={videoId:n};this.options_.start&&(t.startSeconds=this.options_.start);this.options_.end&&(t.endEnd=this.options_.end);this.ytPlayer.cueVideoById(t)},src:function(n){return n&&this.setSrc({src:n}),this.source},poster:function(){return i?null:this.poster_},setPoster:function(n){this.poster_=n},setSrc:function(n){n&&n.src&&(delete this.errorNumber,this.source=n,this.url=t.parseUrl(n.src),this.options_.poster||this.url.videoId&&(this.poster_="https://img.youtube.com/vi/"+this.url.videoId+"/0.jpg",this.trigger("posterchange"),this.checkHighResPoster()),this.options_.autoplay&&!i?this.isReady_?this.play():this.playOnReady=!0:this.activeVideoId!==this.url.videoId&&(this.isReady_?(this.cueVideoById_(this.url.videoId),this.activeVideoId=this.url.videoId):this.cueOnReady=!0))},autoplay:function(){return this.options_.autoplay},setAutoplay:function(n){this.options_.autoplay=n},loop:function(){return this.options_.loop},setLoop:function(n){this.options_.loop=n},play:function(){if(this.url&&this.url.videoId)if(this.wasPausedBeforeSeek=!1,this.isReady_)if(this.url.listId&&(this.activeList===this.url.listId?(this.ytPlayer.playVideo(),this.trigger("play")):(this.ytPlayer.loadPlaylist(this.url.listId),this.activeList=this.url.listId)),this.activeVideoId===this.url.videoId){var n=!1;if(this.ytPlayer.h!==undefined&&(n=!0,this.ytPlayer.h.src===undefined&&(n=!1)),n){const n=this.ytPlayer.h.src.split("?"),t=n[0].split("https://www.youtube.com/embed/");t[1]==="null"&&this.loadVideoById_(this.url.videoId)}this.trigger("play");this.ytPlayer.playVideo()}else this.loadVideoById_(this.url.videoId),this.activeVideoId=this.url.videoId;else this.trigger("waiting"),this.playOnReady=!0},pause:function(){this.ytPlayer&&(this.paused()||this.ytPlayer.pauseVideo(),this.trigger("pause"))},paused:function(){return this.ytPlayer?this.lastState!==YT.PlayerState.PLAYING&&this.lastState!==YT.PlayerState.BUFFERING:!0},currentTime:function(){return this.ytPlayer?this.ytPlayer.getCurrentTime():0},setCurrentTime:function(n){this.lastState===YT.PlayerState.PAUSED&&(this.timeBeforeSeek=this.currentTime());this.isSeeking||(this.wasPausedBeforeSeek=this.paused());this.ytPlayer.seekTo(n,!0);this.trigger("timeupdate");this.trigger("seeking");this.isSeeking=!0;this.lastState===YT.PlayerState.PAUSED&&this.timeBeforeSeek!==n&&(clearInterval(this.checkSeekedInPauseInterval),this.checkSeekedInPauseInterval=setInterval(function(){this.lastState===YT.PlayerState.PAUSED&&this.isSeeking?this.currentTime()!==this.timeBeforeSeek&&(this.trigger("timeupdate"),this.onSeeked()):clearInterval(this.checkSeekedInPauseInterval)}.bind(this),250))},seeking:function(){return this.isSeeking},seekable:function(){return this.ytPlayer?n.createTimeRange(0,this.ytPlayer.getDuration()):n.createTimeRange()},onSeeked:function(){clearInterval(this.checkSeekedInPauseInterval);this.isSeeking=!1;this.wasPausedBeforeSeek&&this.pause();this.trigger("seeked")},playbackRate:function(){return this.ytPlayer?this.ytPlayer.getPlaybackRate():1},setPlaybackRate:function(n){this.ytPlayer&&this.ytPlayer.setPlaybackRate(n)},duration:function(){return this.ytPlayer?this.ytPlayer.getDuration():0},currentSrc:function(){return this.source&&this.source.src},ended:function(){return this.ytPlayer?this.lastState===YT.PlayerState.ENDED:!1},volume:function(){return this.ytPlayer?this.ytPlayer.getVolume()/100:1},setVolume:function(n){this.ytPlayer&&this.ytPlayer.setVolume(n*100)},muted:function(){return this.ytPlayer?this.ytPlayer.isMuted():!1},setMuted:function(n){if(this.ytPlayer)this.muted(!0);else return;n?this.ytPlayer.mute():this.ytPlayer.unMute();this.setTimeout(function(){this.trigger("volumechange")},50)},buffered:function(){if(!this.ytPlayer||!this.ytPlayer.getVideoLoadedFraction)return n.createTimeRange();var t=this.ytPlayer.getVideoLoadedFraction()*this.ytPlayer.getDuration();return n.createTimeRange(0,t)},preload:function(){},load:function(){},reset:function(){},networkState:function(){if(!this.ytPlayer)return 0;switch(this.ytPlayer.getPlayerState()){case-1:return 0;case 3:return 2;default:return 1}},readyState:function(){if(!this.ytPlayer)return 0;switch(this.ytPlayer.getPlayerState()){case-1:return 0;case 5:return 1;case 3:return 2;default:return 4}},supportsFullScreen:function(){return!0},checkHighResPoster:function(){var t="https://img.youtube.com/vi/"+this.url.videoId+"/maxresdefault.jpg",n;try{n=new Image;n.onload=function(){if("naturalHeight"in n){if(n.naturalHeight<=90||n.naturalWidth<=120)return}else if(n.height<=90||n.width<=120)return;this.poster_=t;this.trigger("posterchange")}.bind(this);n.onerror=function(){};n.src=t}catch(i){}}});t.isSupported=function(){return!0};t.canPlaySource=function(n){return t.canPlayType(n.type)};t.canPlayType=function(n){return n==="video/youtube"};t.parseUrl=function(n){var i={videoId:null},t=n.match(/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/),r;return t&&t[2].length===11&&(i.videoId=t[2]),r=/[?&]list=([^#\&\?]+)/,t=n.match(r),t&&t[1]&&(i.listId=t[1]),i};t.apiReadyQueue=[];typeof document!="undefined"&&f("https://www.youtube.com/iframe_api",u);typeof n.registerTech!="undefined"?n.registerTech("Youtube",t):n.registerComponent("Youtube",t)});;;;/**
 * videojs-vimeo
 * @version 3.0.0
 * @copyright 2016 Benoit Tremblay <trembl.ben@gmail.com>
 * @license MIT
 */
(function(n){if(typeof exports=="object"&&typeof module!="undefined")module.exports=n();else if(typeof define=="function"&&define.amd)define([],n);else{var t;t=typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:this;t.videojsVimeo=n()}})(function(){var n;return function t(n,i,r){function u(f,o){var h,c,s;if(!i[f]){if(!n[f]){if(h=typeof require=="function"&&require,!o&&h)return h(f,!0);if(e)return e(f,!0);c=new Error("Cannot find module '"+f+"'");throw c.code="MODULE_NOT_FOUND",c;}s=i[f]={exports:{}};n[f][0].call(s.exports,function(t){var i=n[f][1][t];return u(i?i:t)},s,s.exports,t,n,i,r)}return i[f].exports}for(var e=typeof require=="function"&&require,f=0;f<r.length;f++)u(r[f]);return u}({1:[function(t,i,r){(function(t){
/*! @vimeo/player v1.0.6 | (c) 2016 Vimeo | MIT License | https://github.com/vimeo/player.js */
!function(t,u){"object"==typeof r&&"undefined"!=typeof i?i.exports=u():"function"==typeof n&&n.amd?n(u):(t.Vimeo=t.Vimeo||{},t.Vimeo.Player=u())}(this,function(){"use strict";function a(n,t){return t={exports:{}},n(t,t.exports),t.exports}function e(n,t,r){var u=i.get(n.element)||{};t in u||(u[t]=[]);u[t].push(r);i.set(n.element,u)}function o(n,t){var r=i.get(n.element)||{};return r[t]||[]}function c(n,t,r){var u=i.get(n.element)||{},f;return u[t]?r?(f=u[t].indexOf(r),f!==-1&&u[t].splice(f,1),i.set(n.element,u),u[t]&&0===u[t].length):(u[t]=[],i.set(n.element,u),!0):!0}function g(n,t){var r=i.get(n);i.set(t,r);i.delete(n)}function v(n,t){return 0===n.indexOf(t.toLowerCase())?n:""+t.toLowerCase()+n.substr(0,1).toUpperCase()+n.substr(1)}function nt(n){return n instanceof window.HTMLElement}function tt(n){return!isNaN(parseFloat(n))&&isFinite(n)&&Math.floor(n)==n}function s(n){return/^(https?:)?\/\/(player.)?vimeo.com(?=$|\/)/.test(n)}function y(){var i=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],t=i.id,r=i.url,n=t||r;if(!n)throw new Error("An id or url must be passed, either in an options object or as a data-vimeo-id or data-vimeo-url attribute.");if(tt(n))return"https://vimeo.com/"+n;if(s(n))return n.replace("http:","https:");if(t)throw new TypeError(""+t+" is not a valid video id.");throw new TypeError(""+n+" is not a vimeo.com url.");}function p(n){for(var u,f,r,e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],t=et,o=Array.isArray(t),i=0,t=o?t:t[Symbol.iterator]();;){if(o){if(i>=t.length)break;u=t[i++]}else{if(i=t.next(),i.done)break;u=i.value}f=u;r=n.getAttribute("data-vimeo-"+f);(r||""===r)&&(e[f]=""===r?1:r)}return e}function w(n){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return new Promise(function(i,r){var e,f,u;if(!s(n))throw new TypeError(""+n+" is not a vimeo.com url.");e="https://vimeo.com/api/oembed.json?url="+encodeURIComponent(n);for(f in t)t.hasOwnProperty(f)&&(e+="&"+f+"="+encodeURIComponent(t[f]));u="XDomainRequest"in window?new XDomainRequest:new XMLHttpRequest;u.open("GET",e,!0);u.onload=function(){if(404===u.status)return void r(new Error(""+n+" was not found."));if(403===u.status)return void r(new Error(""+n+" is not embeddable."));try{var t=JSON.parse(u.responseText);i(t)}catch(n){r(n)}};u.onerror=function(){var n=u.status?" ("+u.status+")":"";r(new Error("There was an error fetching the embed code from Vimeo"+n+"."))};u.send()})}function b(n,t){var r=n.html,i;if(!t)throw new TypeError("An element must be provided");return null!==t.getAttribute("data-vimeo-initialized")?t.querySelector("iframe"):(i=document.createElement("div"),i.innerHTML=r,t.appendChild(i.firstChild),t.setAttribute("data-vimeo-initialized","true"),t.querySelector("iframe"))}function it(){var e=arguments.length<=0||void 0===arguments[0]?document:arguments[0],o=[].slice.call(e.querySelectorAll("[data-vimeo-id], [data-vimeo-url]")),r=function(n){"console"in window&&console.error&&console.error("There was an error creating an embed: "+n)},s=function(){var f,e,o;if(u){if(t>=n.length)return"break";i=n[t++]}else{if(t=n.next(),t.done)return"break";i=t.value}f=i;try{if(null!==f.getAttribute("data-vimeo-defer"))return"continue";e=p(f);o=y(e);w(o,e).then(function(n){return b(n,f)}).catch(r)}catch(f){r(f)}},i,f;n:for(var n=o,u=Array.isArray(n),t=0,n=u?n:n[Symbol.iterator]();;){f=s();switch(f){case"break":break n;case"continue":continue}}}function k(n){return"string"==typeof n&&(n=JSON.parse(n)),n}function h(n,t,i){var r,u;n.element.contentWindow.postMessage&&(r={method:t},void 0!==i&&(r.value=i),u=parseFloat(navigator.userAgent.toLowerCase().replace(/^.*msie (\d+).*$/,"$1")),u>=8&&u<10&&(r=JSON.stringify(r)),n.element.contentWindow.postMessage(r,n.origin))}function rt(n,t){var s,u,l,a,v,y,h;if(t=k(t),s=[],u=void 0,t.event){if("error"===t.event)for(var b=o(n,t.data.method),i=b,p=Array.isArray(i),f=0,i=p?i:i[Symbol.iterator]();;){if(p){if(f>=i.length)break;l=i[f++]}else{if(f=i.next(),f.done)break;l=f.value}a=l;v=new Error(t.data.message);gts.$(window).trigger("vimeoPlayerError");v.name=t.data.name;a.reject(v);c(n,t.data.method,a)}s=o(n,"event:"+t.event);u=t.data}else t.method&&(s=o(n,t.method),u=t.value,c(n,t.method));for(var r=s,w=Array.isArray(r),e=0,r=w?r:r[Symbol.iterator]();;){if(w){if(e>=r.length)break;y=r[e++]}else{if(e=r.next(),e.done)break;y=e.value}h=y;try{if("function"==typeof h){h.call(n,u);continue}h.resolve(u)}catch(n){}}}var ut="undefined"!=typeof Array.prototype.indexOf,ft="undefined"!=typeof postMessage;if(!ut||!ft)throw new Error("Sorry, the Vimeo Player API is not available in this browser.");var u="undefined"!=typeof window?window:"undefined"!=typeof t?t:"undefined"!=typeof self?self:{},f=(a(function(n,t){!function(n){function i(n,t){function i(n){return this&&this.constructor===i?(this._keys=[],this._values=[],this._itp=[],this.objectOnly=t,void(n&&y.call(this,n))):new i(n)}return t||d(n,"size",{get:k}),n.constructor=i,i.prototype=n,i}function y(n){this.add?n.forEach(this.add,this):n.forEach(function(n){this.set(n[0],n[1])},this)}function r(n){return this.has(n)&&(this._keys.splice(t,1),this._values.splice(t,1),this._itp.forEach(function(n){t<n[0]&&n[0]--})),-1<t}function o(n){if(this.has(n))return this._values[t]}function s(n,i){if(this.objectOnly&&i!==Object(i))throw new TypeError("Invalid value used as weak collection key");if(i!=i||0===i)for(t=n.length;t--&&!g(n[t],i););else t=n.indexOf(i);return-1<t}function h(n){return s.call(this,this._values,n)}function c(n){return s.call(this,this._keys,n)}function l(n,i){return this.has(n)?this._values[t]=i:this._values[this._keys.push(n)-1]=i,this}function a(n){return this.has(n)||this._values.push(n),this}function u(){(this._keys||0).length=this._values.length=0}function p(){return f(this._itp,this._keys)}function e(){return f(this._itp,this._values)}function w(){return f(this._itp,this._keys,this._values)}function b(){return f(this._itp,this._values,this._values)}function f(n,t,i){var r=[0],u=!1;return n.push(r),{next:function(){var e,f=r[0];return!u&&f<t.length?(e=i?[t[f],i[f]]:t[f],r[0]++):(u=!0,n.splice(n.indexOf(r),1)),{done:u,value:e}}}}function k(){return this._values.length}function v(n,t){for(var i,r=this.entries();;){if(i=r.next(),i.done)break;n.call(t,i.value[1],i.value[0],this)}}var t,d=Object.defineProperty,g=function(n,t){return n===t||n!==n&&t!==t};"undefined"==typeof WeakMap&&(n.WeakMap=i({"delete":r,clear:u,get:o,has:c,set:l},!0));"undefined"!=typeof Map&&"function"==typeof(new Map).values&&(new Map).values().next||(n.Map=i({"delete":r,has:c,get:o,set:l,keys:p,values:e,entries:w,forEach:v,clear:u}));"undefined"!=typeof Set&&"function"==typeof(new Set).values&&(new Set).values().next||(n.Set=i({has:h,add:a,"delete":r,clear:u,keys:e,values:e,entries:b,forEach:v}));"undefined"==typeof WeakSet&&(n.WeakSet=i({"delete":r,add:a,clear:u,has:h},!0))}("undefined"!=typeof t&&"undefined"!=typeof u?u:window)}),a(function(t){!function(i,r,u){r[i]=r[i]||u();"undefined"!=typeof t&&t.exports?t.exports=r[i]:"function"==typeof n&&n.amd&&n(function(){return r[i]})}("Promise","undefined"!=typeof u?u:u,function(){function i(n,t){e.add(n,t);f||(f=p(e.drain))}function s(n){var t,i=typeof n;return null==n||"object"!=i&&"function"!=i||(t=n.then),"function"==typeof t&&t}function u(){for(var n=0;n<this.chain.length;n++)v(this,1===this.state?this.chain[n].success:this.chain[n].failure,this.chain[n]);this.chain.length=0}function v(n,t,i){var r,u;try{t===!1?i.reject(n.msg):(r=t===!0?n.msg:t.call(void 0,n.msg),r===i.promise?i.reject(TypeError("Promise-chain cycle")):(u=s(r))?u.call(r,i.resolve,i.reject):i.resolve(r))}catch(n){i.reject(n)}}function h(n){var f,t=this;if(!t.triggered){t.triggered=!0;t.def&&(t=t.def);try{(f=s(n))?i(function(){var i=new l(t);try{f.call(n,function(){h.apply(i,arguments)},function(){r.apply(i,arguments)})}catch(u){r.call(i,u)}}):(t.msg=n,t.state=1,t.chain.length>0&&i(u,t))}catch(i){r.call(new l(t),i)}}}function r(n){var t=this;t.triggered||(t.triggered=!0,t.def&&(t=t.def),t.msg=n,t.state=2,t.chain.length>0&&i(u,t))}function c(n,t,i,r){for(var u=0;u<t.length;u++)!function(u){n.resolve(t[u]).then(function(n){i(u,n)},r)}(u)}function l(n){this.def=n;this.triggered=!1}function y(n){this.promise=n;this.state=0;this.triggered=!1;this.chain=[];this.msg=void 0}function t(n){if("function"!=typeof n)throw TypeError("Not a function");if(0!==this.__NPO__)throw TypeError("Not a promise");this.__NPO__=1;var t=new y(this);this.then=function(n,r){var f={success:"function"!=typeof n||n,failure:"function"==typeof r&&r};return f.promise=new this.constructor(function(n,t){if("function"!=typeof n||"function"!=typeof t)throw TypeError("Not a function");f.resolve=n;f.reject=t}),t.chain.push(f),0!==t.state&&i(u,t),f.promise};this.catch=function(n){return this.then(void 0,n)};try{n.call(void 0,function(n){h.call(t,n)},function(n){r.call(t,n)})}catch(i){r.call(t,i)}}var n,f,e,a=Object.prototype.toString,p="undefined"!=typeof setImmediate?function(n){return setImmediate(n)}:setTimeout,o;try{Object.defineProperty({},"x",{});n=function(n,t,i,r){return Object.defineProperty(n,t,{value:i,writable:!0,configurable:r!==!1})}}catch(i){n=function(n,t,i){return n[t]=i,n}}return e=function(){function r(n,t){this.fn=n;this.self=t;this.next=void 0}var i,t,n;return{add:function(u,f){n=new r(u,f);t?t.next=n:i=n;t=n;n=void 0},drain:function(){var n=i;for(i=t=f=void 0;n;)n.fn.call(n.self),n=n.next}}}(),o=n({},"constructor",t,!1),t.prototype=o,n(o,"__NPO__",0,!1),n(t,"resolve",function(n){var t=this;return n&&"object"==typeof n&&1===n.__NPO__?n:new t(function(t,i){if("function"!=typeof t||"function"!=typeof i)throw TypeError("Not a function");t(n)})}),n(t,"reject",function(n){return new this(function(t,i){if("function"!=typeof t||"function"!=typeof i)throw TypeError("Not a function");i(n)})}),n(t,"all",function(n){var t=this;return"[object Array]"!=a.call(n)?t.reject(TypeError("Not an array")):0===n.length?t.resolve([]):new t(function(i,r){if("function"!=typeof i||"function"!=typeof r)throw TypeError("Not a function");var u=n.length,f=Array(u),e=0;c(t,n,function(n,t){f[n]=t;++e===u&&i(f)},r)})}),n(t,"race",function(n){var t=this;return"[object Array]"!=a.call(n)?t.reject(TypeError("Not an array")):new t(function(i,r){if("function"!=typeof i||"function"!=typeof r)throw TypeError("Not a function");c(t,n,function(n,t){i(t)},r)})}),t})})),r=f&&"object"==typeof f&&"default"in f?f.default:f,i=new WeakMap,et=["id","url","width","maxwidth","height","maxheight","portrait","title","byline","color","autoplay","autopause","loop","responsive"],ot=function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");},l=new WeakMap,d=new WeakMap,st=function(){function n(t){var i=this,e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],u,f;if(ot(this,n),window.jQuery&&t instanceof jQuery&&(t.length>1&&window.console&&console.warn&&console.warn("A jQuery object with multiple elements was passed, using the first element."),t=t[0]),"string"==typeof t&&(t=document.getElementById(t)),!nt(t))throw new TypeError("You must pass either a valid element or a valid id.");if("IFRAME"!==t.nodeName&&(u=t.querySelector("iframe"),u&&(t=u)),"IFRAME"===t.nodeName&&!s(t.getAttribute("src")||""))throw new Error("The player element passed isnt a Vimeo embed.");return l.has(t)?l.get(t):(this.element=t,this.origin="*",f=new r(function(n,r){var f=function(t){if(s(t.origin)&&i.element.contentWindow===t.source){"*"===i.origin&&(i.origin=t.origin);var r=k(t.data),u="event"in r&&"ready"===r.event,f="method"in r&&"ping"===r.method;return u||f?(i.element.setAttribute("data-ready","true"),void n()):void rt(i,r)}},u,o;(window.addEventListener?window.addEventListener("message",f,!1):window.attachEvent&&window.attachEvent("onmessage",f),"IFRAME"!==i.element.nodeName)&&(u=p(t,e),o=y(u),w(o,u).then(function(n){var r=b(n,t);return i.element=r,g(t,r),n}).catch(function(n){return r(n)}))}),d.set(this,f),l.set(this.element,this),"IFRAME"===this.element.nodeName&&h(this,"ping"),this)}return n.prototype.then=function(n){var t=arguments.length<=1||void 0===arguments[1]?function(){}:arguments[1];return this.ready().then(n,t)},n.prototype.callMethod=function(n){var t=this,i=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return new r(function(r,u){return t.ready().then(function(){e(t,n,{resolve:r,reject:u});h(t,n,i)})})},n.prototype.get=function(n){var t=this;return new r(function(i,r){return n=v(n,"get"),t.ready().then(function(){e(t,n,{resolve:i,reject:r});h(t,n)})})},n.prototype.set=function(n,t){var i=this;return r.resolve(t).then(function(t){if(n=v(n,"set"),void 0===t||null===t)throw new TypeError("There must be a value to set.");return i.ready().then(function(){return new r(function(r,u){e(i,n,{resolve:r,reject:u});h(i,n,t)})})})},n.prototype.on=function(n,t){if(!n)throw new TypeError("You must pass an event name.");if(!t)throw new TypeError("You must pass a callback function.");if("function"!=typeof t)throw new TypeError("The callback must be a function.");var i=o(this,"event:"+n);0===i.length&&this.callMethod("addEventListener",n).catch(function(){});e(this,"event:"+n,t)},n.prototype.off=function(n,t){if(!n)throw new TypeError("You must pass an event name.");if(t&&"function"!=typeof t)throw new TypeError("The callback must be a function.");var i=c(this,"event:"+n,t);i&&this.callMethod("removeEventListener",n).catch(function(){})},n.prototype.loadVideo=function(n){return this.callMethod("loadVideo",n)},n.prototype.ready=function(){var n=d.get(this);return r.resolve(n)},n.prototype.enableTextTrack=function(n,t){if(!n)throw new TypeError("You must pass a language.");return this.callMethod("enableTextTrack",{language:n,kind:t})},n.prototype.disableTextTrack=function(){return this.callMethod("disableTextTrack")},n.prototype.pause=function(){return this.callMethod("pause")},n.prototype.play=function(){return this.callMethod("play")},n.prototype.unload=function(){return this.callMethod("unload")},n.prototype.getAutopause=function(){return this.get("autopause")},n.prototype.setAutopause=function(n){return this.set("autopause",n)},n.prototype.getColor=function(){return this.get("color")},n.prototype.setColor=function(n){return this.set("color",n)},n.prototype.getCurrentTime=function(){return this.get("currentTime")},n.prototype.setCurrentTime=function(n){return this.set("currentTime",n)},n.prototype.getDuration=function(){return this.get("duration")},n.prototype.getEnded=function(){return this.get("ended")},n.prototype.getLoop=function(){return this.get("loop")},n.prototype.setLoop=function(n){return this.set("loop",n)},n.prototype.getPaused=function(){return this.get("paused")},n.prototype.getTextTracks=function(){return this.get("textTracks")},n.prototype.getVideoEmbedCode=function(){return this.get("videoEmbedCode")},n.prototype.getVideoId=function(){return this.get("videoId")},n.prototype.getVideoTitle=function(){return this.get("videoTitle")},n.prototype.getVideoWidth=function(){return this.get("videoWidth")},n.prototype.getVideoHeight=function(){return this.get("videoHeight")},n.prototype.getVideoUrl=function(){return this.get("videoUrl")},n.prototype.getVolume=function(){return this.get("volume")},n.prototype.setVolume=function(n){return this.set("volume",n)},n}();return it(),st})}).call(this,typeof global!="undefined"?global:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{}],2:[function(n,t,i){(function(t){"use strict";function f(n){return n&&n.__esModule?n:{"default":n}}function l(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}function a(n,t){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:n}function v(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(n,t):n.__proto__=t)}function y(){if(!o){o=!0;var t="\n      .vjs-vimeo iframe {\n        position: absolute;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n      }\n    ",i=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css";n.styleSheet?n.styleSheet.cssText=t:n.appendChild(document.createTextNode(t));i.appendChild(n)}}i.__esModule=!0;var s=typeof window!="undefined"?window.videojs:typeof t!="undefined"?t.videojs:null,u=f(s),h=n("@vimeo/player"),c=f(h);var p=u.default.getComponent("Component"),e=u.default.getComponent("Tech"),o=!1,r=function(n){function t(i,r){l(this,t);var u=a(this,n.call(this,i,r));return y(),u.setPoster(i.poster),u.initVimeoPlayer(),u}return v(t,n),t.prototype.initVimeoPlayer=function(){var n=this,t={url:this.options_.source.src,byline:!1,portrait:!1,title:!1,muted:this.options_.muted,controls:this.options_.controls};this.options_.autoplay&&(t.autoplay=!0);this.options_.height&&(t.height=this.options_.height);this.options_.width&&(t.width=this.options_.width);this.options_.maxheight&&(t.maxheight=this.options_.maxheight);this.options_.maxwidth&&(t.maxwidth=this.options_.maxwidth);this.options_.loop&&(t.loop=this.options_.loop);this._player=new c.default(this.el(),t);this.initVimeoState();this._player.ready().then(()=>{$(window).trigger("vimeoPlayerReady",this.el())});["play","pause","ended","timeupdate","progress","seeked"].forEach(function(t){n._player.on(t,function(i){n._vimeoState.progress.duration!=i.duration&&n.trigger("durationchange");n._vimeoState.progress=i;n.trigger(t);t==="play"&&i&&n.trigger("playing")})});this._player.on("pause",function(){return n._vimeoState.playing=!1});this._player.on("play",function(){n._vimeoState.playing=!0;n._vimeoState.ended=!1});this._player.on("ended",function(){n._vimeoState.playing=!1;n._vimeoState.ended=!0});this._player.on("volumechange",function(t){return n._vimeoState.volume=t});this._player.on("error",function(t){return n.trigger("error",t)});this.triggerReady()},t.prototype.initVimeoState=function(){var n=this._vimeoState={ended:!1,playing:!1,volume:0,progress:{seconds:0,percent:0,duration:0}};this._player.getCurrentTime().then(function(t){return n.progress.seconds=t});this._player.getDuration().then(function(t){return n.progress.duration=t});this._player.getPaused().then(function(t){return n.playing=!t});this._player.getVolume().then(function(t){return n.volume=t})},t.prototype.createEl=function(){var n=u.default.createEl("div",{id:this.options_.techId});return n.style.cssText="width:100%;height:100%;top:0;left:0;position:absolute",n.className="vjs-vimeo",n},t.prototype.controls=function(){return!0},t.prototype.supportsFullScreen=function(){return!0},t.prototype.src=function(){return this.options_.source},t.prototype.currentSrc=function(){return this.options_.source.src},t.prototype.currentTime=function(){return this._vimeoState.progress.seconds},t.prototype.setCurrentTime=function(n){this._player.setCurrentTime(n)},t.prototype.volume=function(){return this._vimeoState.volume},t.prototype.setVolume=function(n){return this._player.setVolume(n)},t.prototype.duration=function(){return this._vimeoState.progress.duration},t.prototype.buffered=function(){var n=this._vimeoState.progress;return u.default.createTimeRange(0,n.percent*n.duration)},t.prototype.paused=function(){return!this._vimeoState.playing},t.prototype.pause=function(){this._player.pause()},t.prototype.play=function(){this._player.play()},t.prototype.muted=function(){return this._vimeoState.volume===0},t.prototype.ended=function(){return this._vimeoState.ended},t}(e);r.prototype.featuresTimeupdateEvents=!0;r.isSupported=function(){return!0};e.withSourceHandlers(r);r.nativeSourceHandler={};r.nativeSourceHandler.canPlayType=function(n){return n==="video/vimeo"?"maybe":""};r.nativeSourceHandler.canHandleSource=function(n){return n.type?r.nativeSourceHandler.canPlayType(n.type):n.src?r.nativeSourceHandler.canPlayType(n.src):""};r.nativeSourceHandler.handleSource=function(n,t){t.src(n.src)};r.nativeSourceHandler.dispose=function(){};r.registerSourceHandler(r.nativeSourceHandler);typeof videojs.registerTech!="undefined"?videojs.registerTech("Vimeo",r):videojs.registerComponent("Vimeo",r);r.VERSION="0.0.1";i.default=r}).call(this,typeof global!="undefined"?global:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"@vimeo/player":1}]},{},[2])(2)});;;;(function(n,t){typeof exports=="object"&&typeof module!="undefined"?module.exports=t(require("video.js")):typeof define=="function"&&define.amd?define(["videojs"],function(i){return n.Brightcove=t(i)}):n.Brightcove=t(n.videojs)})(this,function(n){"use strict";var i="/brightcove-api?action=getVideoDetailsById&videoId=",r="brightcove-video-poster",t={getVideoDetails:function(t,r){var u={cors:!0,uri:baseWebRoot+i+t};n.xhr(u,function(n,t,i){if(n||t.statusCode!==200)return console.error("There was a problem getting Brightcove video data.","Error: "+n,"Status: "+t.statusCode),r(null);r(JSON.parse(i))})},parseUrl:function(n){var t=n.match(/brightcove.com\/id:([0-9]+)$/i);return t?{videoId:t[1]}:null},getIsBrightcovePosterPlaceholderUrlFunction:function(n){return typeof n=="string"&&n.match(r)}};n.use("video/brightcove",function(n){return{setSource:function(i,r){var u=t.parseUrl(i.src),f=n.el().offsetWidth;if(u===null){r("Video URL format not supported.",null);return}t.getVideoDetails(u.videoId,function(i){if(i===null){r("Video not found.",null);return}var u=i.sources.map(function(n){return n.type=n.type?n.type.toLowerCase():n.container?"video/"+n.container.toLowerCase():"unknown",n.isHttps=n.src&&n.src.toLowerCase().substring(0,8)==="https://",n.avg_bitrate=n.avg_bitrate?n.avg_bitrate:0,n.width=n.width?n.width:0,n}).filter(function(t){return t.src&&n.canPlayType(t.type)}).sort(function(n,t){if(n.type!==t.type)return n.type==="application/x-mpegurl"?-1:1;if(n.isHttps!==t.isHttps)return n.isHttps?-1:1;if(n.width!==t.width){if(n.width===0||t.width===0)return t.width===0?-1:1;var i=n.width-f,r=t.width-f;return i>0&&(i*=.9),r>0&&(r*=.9),Math.abs(i)<Math.abs(r)?-1:1}return n.avg_bitrate!==t.avg_bitrate?n.avg_bitrate>t.avg_bitrate?-1:1:0});if(u.length===0){r("No supported sources found for the requested video.",null);return}i.poster&&n.trigger("setbrightcoveposter",[i.poster,t.getIsBrightcovePosterPlaceholderUrlFunction]);r(null,u[0])})}}})});;;;var AutoPlayOptions={OnlyOnDesktopSite:"OnlyOnDesktopSite",DesktopAndTablets:"DesktopAndTablets",On:"On",Off:"Off"};(function(n){"use strict";function f(n){return n.indexOf("youtube.com")>-1||n.indexOf("youtu.be")>-1?"video/youtube":n.indexOf("vimeo.com")>-1?"video/vimeo":n.indexOf("brightcove.com/id:")>-1?"video/brightcove":undefined}function e(n){var t,i;return!_.isNumber(n)&&(n=parseFloat(n),isNaN(n))?0:n<=1?n:(t=Math.log(n)*Math.LOG10E+1|0,n===Math.pow(10,Math.max(t-1,0)))?1:(i=Math.pow(10,t),n/i)}var t="videoPlayer",r=[],u=!1,i=!1;n.widget("gts."+t,{defaults:{throttleInterval:250,mediaAspectRatio:16/9,autoplay:AutoPlayOptions.OnlyOnDesktopSite,controls:"custom",useAlwaysFill:!0,poster:"data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",sources:[],volume:0,preload:"auto",loop:!0,rotateVideoCallback:function(){return!0},onBeforeInitializePlayer:function(){return!0},onAfterInitializePlayer:function(){return!0},onPlayerReady:function(){return!0},videoPlayButtonClass:"icon-play-round",videoStopButtonClass:"icon-pause",showVideoPlayerBar:!1},_create:function(){var i=this;i.configuration={};i.options=_.extend({},i.defaults,i.options);r.push(i);i.element=gts.$(i.element);i.runningOnIOS=typeof gts.deviceIs!="undefined"&&gts.deviceIs.iOS;i.runningOnIOS&&i.element.addClass("videoplayer--is-ios");i._autoplay=u&&(i.options.autoplay===AutoPlayOptions.On||i.options.autoplay===AutoPlayOptions.OnlyOnDesktopSite&&!OnMobileDevice()||i.options.autoplay===AutoPlayOptions.DesktopAndTablets);i.element.data(t)===undefined&&i.element.data(t,{});i.initializeVideoElement();n(window).off("resize."+t+" focus."+t).on("resize."+t+" focus."+t,n.throttle(i.options.throttleInterval,function(){window.setTimeout(function(){for(var n=0;n<r.length;n++)i.redraw.apply(r[n])},10)}));return i.element.attr("data-hasVideoPlayer",!0),i},_destroy:function(){var n=this,u;if(i&&console!==undefined&&typeof console.info=="function"&&console.info("Destroy video called for: "+JSON.stringify(n.options.sources)),r=_.without(r,n),u=gts.$(n.element),n._videoJsPlayer!==undefined&&n._videoJsPlayer!==null&&_.isFunction(n._videoJsPlayer.dispose))try{n._videoJsPlayer.dispose()}catch(f){}n.element.find("img[data-hassmartimage]").smartImage("destroy");u.off("."+t);u.empty();u.removeData(t);u.removeAttr("data-hasVideoPlayer")},destroy:function(){var n=this;n._destroy();gts.$.Widget.prototype.destroy.call(n)},initializeVideoElement:function(){var t=this,r,u;(t.element.removeClass("c-video-container--always-fill").removeClass("videoplayer--no-sources").empty(),t._videoJsPlayer!==undefined&&t._videoJsPlayer!==null&&(t._videoJsPlayer.dispose(),t._videoJsPlayer=null),t.options.useAlwaysFill&&t.element.addClass("c-video-container--always-fill"),t.element.html('<video class="video-js vjs-default-skin" id="videojs" playsinline><p class="vjs-no-js">To view this video please enable JavaScript, and consider upgrading to a web browser that supports HTML5.<\/p><\/video>'),t.options.sources=gts.$.map(t.options.sources,function(n){if(_.isUndefined(n.type)){var t=f(n.src);t!==undefined&&(n.type=t)}return n}),r=["html5","youtube","vimeo"],t.options.sources[0]&&t.options.sources[0].type==="video/youtube"&&(r=["youtube","html5","vimeo"]),u={poster:"data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",techOrder:r,width:"100%",height:"100%",fluid:!0,preload:t._autoplay?t.options.preload:"none",autoplay:t._autoplay,controls:t.options.hideVimeoControls?!1:t.options.controls==="default",loop:t.options.loop&&!t.runningOnIOS,muted:t.options.volume===0,sources:t.options.sources},_.isFunction(t.options.onBeforeInitializePlayer)&&t.options.onBeforeInitializePlayer.apply(t,[u])===!1)||(t._videoJsPlayer=videojs(t.element.find("video").get(0),u,function(){var r=this,u,f;gts.$.each(["loadstart","waiting","canplay","canplaythrough","playing","ended","seeking","seeked","play","firstplay","pause","progress","durationchange","fullscreenchange","error","suspend","abort","emptied","stalled","loadedmetadata","loadeddata","timeupdate","ratechange","volumechange","texttrackchange","posterchange","setbrightcoveposter"],function(n,u){r.on(u,function(n){i&&console!==undefined&&typeof console.info=="function"&&console.info("Video player '"+n.type+"' for: "+JSON.stringify(t.options.sources));t.element.trigger(n.type,[].concat.apply([],arguments).slice(1))})});r.src(t.options.sources);i&&console!==undefined&&typeof console.info=="function"&&console.info("Video player initialized for: "+JSON.stringify(t.options.sources));_.isFunction(t.options.onAfterInitializePlayer)&&t.options.onAfterInitializePlayer.apply(t,[r]);(t.options.sources===undefined||t.options.sources.length===0)&&t.element.addClass("videoplayer--no-sources");u=t._videoJsPlayer.techName_.toLowerCase();t.element.addClass("videoplayer--tech-"+u);t.element.trigger("videoPlayerTech",[u]);u==="youtube"?(t.element.find("iframe").parent().addClass("vjs-tech").append('<div class="vjs-aspect-ratio  vjs-aspect-ratio--16-9">'),t.options.controls!=="default"&&t.options.poster===t.defaults.poster&&r.tech_.url&&r.tech_.url.videoId&&(t.options.poster="https://img.youtube.com/vi/"+r.tech_.url.videoId+"/hqdefault.jpg")):u==="flash"&&t.element.find("object").attr("scale","noborder");t.SetPoster(t.options.poster);r.on("loadedmetadata",function(){i&&console!==undefined&&typeof console.info=="function"&&console.info("Video player metadata loaded for: "+JSON.stringify(t.options.sources));t.options.useAlwaysFill&&(t.updateMediaAspectRatio(),t.redraw())});if(gts.deviceIs.safari&&(t.options.onPlayerReady=()=>{t.redraw()}),t.options.controls==="custom"&&u!=="youtube"&&t.createControls(r),t.options.controls!=="default"&&n(r.posterImage.el_).parents("[data-hasposteractiondisabled=true]").length===0&&r.posterImage.off(["click","tap"]),t.options.volume=e(t.options.volume),t.options.volume||t.element.find("video").prop("muted","true"),r.volume(t.options.volume),_.isFunction(t.options.onPlayerReady)&&t.options.onPlayerReady.apply(t,[r]),t.element.trigger("playerReady",[r]),i&&console!==undefined&&typeof console.info=="function"&&console.info("Video player ready for: "+JSON.stringify(t.options.sources)),t.options.sources[0].src.indexOf("vimeo.com")===-1&&t._autoplay&&!t.element.is(".videoplayer--no-sources")&&(i&&console!==undefined&&typeof console.info=="function"&&console.info("Video player auto-play is enabled for: "+JSON.stringify(t.options.sources)),r.play()),t.options.showVideoPlayerBar){f=t.element.find(".vjs-tech");f.prop("controls",!0);t.element.find(".video-js").addClass("has-controls");f.off("touchstart."+t.widgetName).on("touchstart."+t.widgetName,function(){r.paused()?t.Play():t.Pause()})}}))},updateMediaAspectRatio:function(){var n=this,t;n._videoJsPlayer!==undefined&&n._videoJsPlayer!==null&&(t=n._videoJsPlayer.techName_.toLowerCase(),t==="html5"?n.options.mediaAspectRatio=n._videoJsPlayer.videoWidth()/n._videoJsPlayer.videoHeight():t==="flash"&&(n.options.mediaAspectRatio=n._videoJsPlayer.vjs_getProperty("videoWidth")/n._videoJsPlayer.vjs_getProperty("videoHeight")))},redraw:function(){var n=this,t,i;n._videoJsPlayer===undefined||n._videoJsPlayer===null||n.options.mediaAspectRatio===undefined||isNaN(n.options.mediaAspectRatio)||(t={width:n.element.width(),height:n.element.height()},i={width:n.options.mediaAspectRatio*t.height,height:1/n.options.mediaAspectRatio*t.width},n.element.find(".vjs-tech").addClass("video-ratio").removeClass("video-ratio--portrait video-ratio--landscape").addClass(i.width-t.width>i.height-t.height?"video-ratio--portrait":"video-ratio--landscape").find(".vjs-aspect-ratio--custom").css("padding-top",n.options.mediaAspectRatio+"%"))},createControls:function(n){var t=this,i=gts.$("<div>").append('<span class="icon  '+t.options.videoPlayButtonClass+'" />').addClass("videoplayer__controls__button  videoplayer__controls__button--play"),r=gts.$("<div>").append('<span class="icon  '+t.options.videoStopButtonClass+'" />').addClass("videoplayer__controls__button  videoplayer__controls__button--pause");t.element.find(".video-js").append(gts.$("<div>").addClass("videoplayer__controls").addClass("js-video-player__controls").append(i).append(r).on("click."+t.widgetName,function(){n.paused()?t.Play():t.Pause()}));n.on("play",function(){i.removeClass("videoplayer__controls__button--blink").addClass("videoplayer__controls__button--blink");r.removeClass("videoplayer__controls__button--blink");typeof IDListing!="undefined"&&window.IDListing!==""&&DoReport(Records[window.IDListing].ReportData,"CRE.Video.Played",{link:document.CanonicalUrl()})});n.on("pause",function(){r.removeClass("videoplayer__controls__button--blink").addClass("videoplayer__controls__button--blink");i.removeClass("videoplayer__controls__button--blink")})},ChangeSource:function(n){var t=this;t.options=_.extend({},t.defaults,n);t.initializeVideoElement()},Play:function(){var n=this;if(n._videoJsPlayer===undefined){console!==undefined&&typeof console.info=="function"&&console.info("Play called but videoPlayer not initialized yet");return}i&&console!==undefined&&typeof console.info=="function"&&console.info("Play video called for: "+JSON.stringify(n.options.sources));n._videoJsPlayer.ready(function(){const t=n._videoJsPlayer.play();t!==undefined&&t.then(function(){i&&console!==undefined&&typeof console.info=="function"&&console.info("Play video called for: "+JSON.stringify(n.options.sources))}).catch(n=>{console.log(n)})})},Pause:function(){var n=this;if(n._videoJsPlayer===undefined){console!==undefined&&typeof console.info=="function"&&console.info("Pause called but videoPlayer not initialized yet");return}n._videoJsPlayer.hasStarted()!==!1&&(i&&console!==undefined&&typeof console.info=="function"&&console.info("Pause video called for: "+JSON.stringify(n.options.sources)),n._videoJsPlayer.pause())},Reset:function(){var n=this;n._videoJsPlayer!==undefined&&n._videoJsPlayer.hasStarted()!==!1&&(i&&console!==undefined&&typeof console.info=="function"&&console.info("Reset video called for: "+JSON.stringify(n.options.sources)),n.Pause(),n._videoJsPlayer.currentTime(0),n._videoJsPlayer.hasStarted(!1),window.setTimeout(function(){n.element.find("img[data-hassmartimage]").trigger("showIfInViewPort");n.element.trigger("reset",[n._videoJsPlayer])},10))},SetPoster:function(i){var r=this,u;if(r.element.find(".vjs-poster").children().length>0){if(r.options.poster===i)return;r.element.find(".vjs-poster").empty()}if(i!==r.defaults.poster)if(_.isFunction(window.staticSmartImageInitialization)&&_.isFunction(n("body").smartImage)){u=gts.$("<img>").attr("smartimage","{ alwaysFill: true }").attr("data-src",i).attr("alt","Video Poster").addClass("js-smartimage  smartimage__item").appendTo(r.element.find(".vjs-poster").addClass("vjs-poster--custom"));u.hide(0);window.setTimeout(function(){u.show(0);staticSmartImageInitialization(u)},0);r.element.off("appear."+t).on("appear."+t,function(t){n(this).off(t);u.trigger("appear")})}else console!==undefined&&typeof console.info=="function"&&console.info("Got poster image but smartImage is not available."),r._videoJsPlayer.poster(i);r.options.poster=i},PlayerClicked:function(){var n=this;n._videoJsPlayer.paused()?n.Play():n.Pause()}}),function(){function t(t){var i=n('<video muted loop playsinline webkit-playsinline autoplay width="1px" height="1px" style="position: fixed; top: -100px; ">').append(n('<source type="video/mp4" src="data:video/mp4;base64,AAAAFGZ0eXBNU05WAAACAE1TTlYAAAOUbW9vdgAAAGxtdmhkAAAAAM9ghv7PYIb+AAACWAAACu8AAQAAAQAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAnh0cmFrAAAAXHRraGQAAAAHz2CG/s9ghv4AAAABAAAAAAAACu8AAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAAFAAAAA4AAAAAAHgbWRpYQAAACBtZGhkAAAAAM9ghv7PYIb+AAALuAAANq8AAAAAAAAAIWhkbHIAAAAAbWhscnZpZGVBVlMgAAAAAAABAB4AAAABl21pbmYAAAAUdm1oZAAAAAAAAAAAAAAAAAAAACRkaW5mAAAAHGRyZWYAAAAAAAAAAQAAAAx1cmwgAAAAAQAAAVdzdGJsAAAAp3N0c2QAAAAAAAAAAQAAAJdhdmMxAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAFAAOABIAAAASAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGP//AAAAEmNvbHJuY2xjAAEAAQABAAAAL2F2Y0MBTUAz/+EAGGdNQDOadCk/LgIgAAADACAAAAMA0eMGVAEABGjuPIAAAAAYc3R0cwAAAAAAAAABAAAADgAAA+gAAAAUc3RzcwAAAAAAAAABAAAAAQAAABxzdHNjAAAAAAAAAAEAAAABAAAADgAAAAEAAABMc3RzegAAAAAAAAAAAAAADgAAAE8AAAAOAAAADQAAAA0AAAANAAAADQAAAA0AAAANAAAADQAAAA0AAAANAAAADQAAAA4AAAAOAAAAFHN0Y28AAAAAAAAAAQAAA7AAAAA0dXVpZFVTTVQh0k/Ou4hpXPrJx0AAAAAcTVREVAABABIAAAAKVcQAAAAAAAEAAAAAAAAAqHV1aWRVU01UIdJPzruIaVz6ycdAAAAAkE1URFQABAAMAAAAC1XEAAACHAAeAAAABBXHAAEAQQBWAFMAIABNAGUAZABpAGEAAAAqAAAAASoOAAEAZABlAHQAZQBjAHQAXwBhAHUAdABvAHAAbABhAHkAAAAyAAAAA1XEAAEAMgAwADAANQBtAGUALwAwADcALwAwADYAMAA2ACAAMwA6ADUAOgAwAAABA21kYXQAAAAYZ01AM5p0KT8uAiAAAAMAIAAAAwDR4wZUAAAABGjuPIAAAAAnZYiAIAAR//eBLT+oL1eA2Nlb/edvwWZflzEVLlhlXtJvSAEGRA3ZAAAACkGaAQCyJ/8AFBAAAAAJQZoCATP/AOmBAAAACUGaAwGz/wDpgAAAAAlBmgQCM/8A6YEAAAAJQZoFArP/AOmBAAAACUGaBgMz/wDpgQAAAAlBmgcDs/8A6YEAAAAJQZoIBDP/AOmAAAAACUGaCQSz/wDpgAAAAAlBmgoFM/8A6YEAAAAJQZoLBbP/AOmAAAAACkGaDAYyJ/8AFBAAAAAKQZoNBrIv/4cMeQ==" />')).append(n('<source type="video/webm" src="data:video/webm;base64,GkXfo49CgoR3ZWJtQoeBAUKFgQEYU4BnAQAAAAAAF60RTZt0vE27jFOrhBVJqWZTrIIQA027jFOrhBZUrmtTrIIQbE27jFOrhBFNm3RTrIIXmU27jFOrhBxTu2tTrIIWs+xPvwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFUmpZuQq17GDD0JATYCjbGliZWJtbCB2MC43LjcgKyBsaWJtYXRyb3NrYSB2MC44LjFXQY9BVlNNYXRyb3NrYUZpbGVEiYRFnEAARGGIBc2Lz1QNtgBzpJCy3XZ0KNuKNZS4+fDpFxzUFlSua9iu1teBAXPFhL4G+bmDgQG5gQGIgQFVqoEAnIEAbeeBASMxT4Q/gAAAVe6BAIaFVl9WUDiqgQEj44OEE95DVSK1nIN1bmTgkbCBULqBPJqBAFSwgVBUuoE87EQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB9DtnVB4eeBAKC4obaBAAAAkAMAnQEqUAA8AABHCIWFiIWEiAICAAamYnoOC6cfJa8f5Zvda4D+/7YOf//nNefQYACgnKGWgQFNANEBAAEQEAAYABhYL/QACIhgAPuC/rOgnKGWgQKbANEBAAEQEAAYABhYL/QACIhgAPuC/rKgnKGWgQPoANEBAAEQEAAYABhYL/QACIhgAPuC/rOgnKGWgQU1ANEBAAEQEAAYABhYL/QACIhgAPuC/rOgnKGWgQaDANEBAAEQEAAYABhYL/QACIhgAPuC/rKgnKGWgQfQANEBAAEQEAAYABhYL/QACIhgAPuC/rOgnKGWgQkdANEBAAEQEBRgAGFgv9AAIiGAAPuC/rOgnKGWgQprANEBAAEQEAAYABhYL/QACIhgAPuC/rKgnKGWgQu4ANEBAAEQEAAYABhYL/QACIhgAPuC/rOgnKGWgQ0FANEBAAEQEAAYABhYL/QACIhgAPuC/rOgnKGWgQ5TANEBAAEQEAAYABhYL/QACIhgAPuC/rKgnKGWgQ+gANEBAAEQEAAYABhYL/QACIhgAPuC/rOgnKGWgRDtANEBAAEQEAAYABhYL/QACIhgAPuC/rOgnKGWgRI7ANEBAAEQEAAYABhYL/QACIhgAPuC/rIcU7trQOC7jLOBALeH94EB8YIUzLuNs4IBTbeH94EB8YIUzLuNs4ICm7eH94EB8YIUzLuNs4ID6LeH94EB8YIUzLuNs4IFNbeH94EB8YIUzLuNs4IGg7eH94EB8YIUzLuNs4IH0LeH94EB8YIUzLuNs4IJHbeH94EB8YIUzLuNs4IKa7eH94EB8YIUzLuNs4ILuLeH94EB8YIUzLuNs4INBbeH94EB8YIUzLuNs4IOU7eH94EB8YIUzLuNs4IPoLeH94EB8YIUzLuNs4IQ7beH94EB8YIUzLuNs4ISO7eH94EB8YIUzBFNm3SPTbuMU6uEH0O2dVOsghTM" />')).appendTo(n("body")).hide().on("play",function(){u=!0;i.remove()}).on("canplay",function(){i[0].play()});setTimeout(function(){i.remove()},t)}(function i(){n("body").length===0?window.setTimeout(i,100):t(1e4)})()}()})(jQuery,jQuery);;;;(function(n,t){"use strict";var i="imageCarousel";n.widget("gts."+i,{runningOn:{iOS:typeof gts.deviceIs=="undefined"||gts.deviceIs.iOS,iPhone:typeof gts.deviceIs!="undefined"&&gts.deviceIs.iphone,android:typeof gts.deviceIs!="undefined"&&gts.deviceIs.android},defaults:{slides:null,minItems:1,isSingle:!1,isSwipeable:!0,startAt:0,autorotateInterval:8e3,height:-1,slideWithBelt:!1,visibleSlides:1,hasClearer:!1,hasControls:!0,playingClass:"carousel--is-playing",inactiveClass:"carousel--is-inactive",waitingForPlayClass:"carousel--is-waiting",inactivityTimeout:1e3,hasBullets:!0,bulletMarkup:'<a href="#" class="carousel__bullet js-bullet" role="button" aria-selected="false" aria-current="false" tabindex="0"/>',bulletsContainerMarkup:'<section class="carousel__bullets js-bullets"/>',bulletsDirection:"horizontal",captionSelector:".carousel__details",customCaptionContainer:"",customCaptionClass:"carousel__caption--custom",customNavigationContainer:"",videoPlayButtonClass:"icon-play-round",videoStopButtonClass:"icon-pause",currentSlideCountSelector:null,slideNumberingCalculator:function(n){return n},useCSS3:!1,transition:"slide",clearerCalculator:function(n){return n},alwaysVisible:!0,heightCalculator:function(n){return{height:n}},threshold:50,rotateVideos:!0,autoPlayVideos:!1,customVideoControlsContainer:"",videoPlayerFillContainer:!0,videoVolume:0,hasExpander:!1,isTop:!1,isFullscreen:!1,isFixed:!1,onSlideChanged:function(){return!0},onAfterCreate:function(){},smartImageParameters:{useLazyLoad:!0,useBestFit:!0,alwaysFill:!0},randomOrder:!1,slideClass:"",transitionSpeedMs:!1,preloadSlides:0,maxDomElements:0,ignoreSmartImageHandler:!1},_create:function(){var r=this,u,o,f,e;if(r.options=_.extend({},r.defaults,r.options),r.element.data("button-videoplay-class")&&(r.options.videoPlayButtonClass=r.element.data("button-videoplay-class")),r.element.data("button-videostop-class")&&(r.options.videoStopButtonClass=r.element.data("button-videostop-class")),r.activeSlides=null,r.inactiveSlides=null,r.preloadSlides=0,r.carouselJSContainer=gts.$(".js-carousel",r.element).length?gts.$(".js-carousel",r.element):r.element,r._filterOptions(),r.autoPlayInterval=null,r.hasOneWing=r.element.hasClass("with-one-wing")||r.element.find(".with-one-wing").length>0,r.minWingCarouselItems=r.hasOneWing?3:5,r.runningOn.iOS&&(r.options.autoPlayVideos=!r.runningOn.iOS&&r.options.autoPlayVideos,r.element.addClass("carousel--is-ios")),r.runningOn.android&&(r.options.autoPlayVideos=!r.runningOn.android&&r.options.autoPlayVideos),r.isRTL=n("body").css("direction")==="rtl"||!1,r.belt=t(".carousel__track",r.element),r.weightedCollection=[],r.weightedCollectionEnumerator=!1,r.slides=r.options.slides!==null?r.options.slides:n(".js-carousel-container",r.element),r.options.slideWithBelt!==undefined&&r.options.slideWithBelt===!0&&r._setVisibleElementCount(r.options.visibleSlides),r.slideWidth=100/r.slides.length,r.isSingleSlide=r.slides.length===1,r.isStaticCarousel=!1,(r.options.isSingle===!0||r.slides.length<r.minWingCarouselItems)&&(n(r.element).addClass("is-single"),r.isSingleSlide=!0,n(r.element).addClass("is-single--"+r.options.transition)),u=r.slides.filter('[data-is-first="true"]'),r.options.startAt===0&&u.length!==0&&(o=u.length>1?gts.$(u.get(_.random(u.length-1))):u,r.options.startAt=o.index()),r.currentSlideIndex=r.options.startAt*1,r.oldSlideIndex=r.currentSlideIndex,(isNaN(r.currentSlideIndex)||r.currentSlideIndex<0||r.currentSlideIndex>r.slides.length)&&(r.currentSlideIndex=0),r.options.customNavigationContainer!==""&&n(r.options.customNavigationContainer).length>0?(f=r.options.carouselControlsContainer,n(".m-carousel .js-carousel-controls").addClass("u-hide")):f=r.element,r.controls=n(".js-carousel-controls",f),r._setupBullets(),r.captionsContainer=n(r.options.customCaptionContainer),!r.options.isFixed||r.options.isFullscreen||r.captionsContainer.length||(r.captionsContainer=n('<div class="js-custom-caption" />'),r.element.append(r.captionsContainer)),r.firstTouchPos=0,r.lastTouchPos=0,r.isVideoPlaying=!1,r.isExpanderOpened=!1,r.options.autorotateInterval=parseInt(r.options.autorotateInterval),(isNaN(r.options.autorotateInterval)||r.options.autorotateInterval<0)&&(r.options.autorotateInterval=0),r.events=[],r.events.resize="resize."+i,r.events.click="click."+i+" keydown."+i,r.events.toggleRotation="toggleRotation."+i,r.events.forceStopVideo="forceStopVideo."+i,r.events.forcePlayVideo="forcePlayVideo."+i,r.events.forceStopRotation="forceStopRotation."+i,r.events.move="mousemove."+i,r.events.stopVideoPlay="stopvideoplay."+i,"ontouchstart"in window&&(r.element.addClass("carousel--is-touch"),r.events.move+=" touchmove."+i),"onorientationchange"in window&&(r.events.resize+=" orientationchange."+i),r.slides.length<r.options.minItems)return console!==undefined&&console.info("Min "+r.options.minItems+" items required to run GTS Carousel. Aborting..."),_.isFunction(r.options.onAfterCreate)&&r.options.onAfterCreate.apply(r),!1;r._setHeight();r.element.data("currentSlideIndex",r.currentSlideIndex);r.options.slideWithBelt===!0&&(r.element.hasClass("m-carousel--alt")?(r.hasVerticalBelt=!0,r.belt.css({height:"100%",width:"100%"}),r._updateSlideHeight()):r._setupHorizontalSlideCarousel());r.options.isTop===!0&&(n(".js-header").addClass("is-on-top"),n(r.element).addClass("is-top"));r.options.isFixed===!0&&(n(r.element).addClass("is-fixed"),n(".global-content").addClass("global-content--behind"));r.options.isFullscreen===!0&&n(".js-carousel",r.element).css(gts.fullHeightCalculator());r.options.isFullscreen===!0&&n(r.element).addClass("is-fullscreen");switch(r.options.transition){case"fade":r.transitionClasses={farLeft:"is-far-left--fade",left:"is-next-left--fade",center:"is-center  is-center--fade",right:"is-next-right--fade",farRight:"is-far-right--fade"};break;default:r.transitionClasses={farLeft:"is-far-left",left:"is-next-left",center:"is-center",right:"is-next-right",farRight:"is-far-right"}}return r.allTransitionClasses=_.map(r.transitionClasses,function(n){return n}).join(" "),r._addClearer(),r._updateClearer(),e=r._createVideoControls(!r.options.isFullscreen),r.customVideoControlsContainer=n(r.options.customVideoControlsContainer),r.slides.each(function(){var t=n(this),u=t,f=n(".js-video-parent",t),i;f.length&&(u=f);i=n(".js-video-src",t).attr("href");typeof i=="string"&&i.length>7&&(u.append(n('<div class="js-video-container  carousel__video-player  carousel__video-player--created  c-video-container '+r.options.slideClass+' "><\/div>')),t.attr("data-videosrc",i).attr("data-postersrc",n(".js-image-src[href]",t).attr("href")),r.options.autoPlayVideos===!0&&t.attr("data-postersrc")&&r.options.threshold>0&&t.find(".js-video-container").addClass("u-hide"),r.options.hasExpander===!0&&r.customVideoControlsContainer.length===0&&e.clone().appendTo(n(t)),(i.indexOf("www.youtube.com")>-1||i.indexOf("youtu.be")>-1)&&t.addClass("has-youtube-video"))}),r.slides.filter("[data-videosrc]").length>0&&r.customVideoControlsContainer.children(".carousel__expander-controls.js-controls").remove().end().append(e.clone()),r.options.randomOrder&&r._initializeRandomCollection(),r._createCustomCaptions(),r._bindToEvents(),r.options.SkipSlideWithoutVideo&&!n(r.slides[r.options.startAt]).attr("data-videosrc")&&(r.options.startAt+=r._getValidOffset("next")),r._changeSlideTo(r.options.startAt),r._start(),_.isFunction(r.options.onAfterCreate)&&r.options.onAfterCreate.apply(r),r},_destroy:function(){var t=this;t._stop();t.element.find(".c-video-container[data-hasVideoPlayer]").videoPlayer("Pause").videoPlayer("destroy");t.element.find("img[data-hassmartimage]").smartImage("destroy");n(t.element).attr("style","");t.bullets.remove();t.slides.removeClass("is-hidden-slide "+t.allTransitionClasses)},_setupBullets:function(){var e=this,i=n(".js-carousel-container",this.element),t,u,w,b;if(this.bullets=n(),this.options.hasBullets===!0&&i.length>1){var o=this.slides.length,s=i.length<o?i.length:o,a=this.bulletLimitOffset*2+1,v=a<s&&o>this.options.maxDomElements&&this.options.maxDomElements>0?a:s;if(this.bullets=n(".js-bullet:not(.carousel__bullet--hidden)",this.element),this.bullets.length===0){var y=[],r=_.map(i,function(t,i){var r=parseInt(n(t).attr("slide-number"))-1;return isNaN(r)?i:r}),p=r.indexOf(e.currentSlideIndex);for(t=p-2;t<p-2+v;t++)u=t,t<0&&(u=r.length+t+1),t>=r.length&&(u=t-r.length),y.push(n(this.options.bulletMarkup).attr("aria-label","Go to slide "+u).attr("slide-index",r[u]));n().append.apply(n(this.options.bulletsContainerMarkup),y).appendTo(this.element.find(".carousel__wrapper"));this.bullets=n(".js-bullet",this.element)}else if(v<s&&this.currentSlideIndex!==this.oldSlideIndex){var k=this.bullets.last().index(),d=this.bullets.filter("[slide-index='"+this.currentSlideIndex+"']").index(),f=this.bulletLimitOffset-(k-d),h=null,c=null,l=null;if(n(".carousel__bullet--hidden",this.element).remove(),f>0)w=parseInt(this.bullets.last().attr("slide-index"))+1,b=i.filter("[slide-number='"+w+"']"),this.bullets.slice(0,f).addClass("carousel__bullet--hidden"),h=b.nextAll(".js-carousel-container").slice(0,f),c="after";else{var g=parseInt(this.bullets.first().attr("slide-index"))+1,nt=i.filter("[slide-number='"+g+"']"),tt=nt.prevAll(".js-carousel-container").get().reverse();this.bullets.slice(f,this.bullets.length).addClass("carousel__bullet--hidden");h=n(tt).slice(f);c="before"}h.each(function(){var i=n(".js-bullet",e.element),r=parseInt(n(this).attr("slide-number"))-1,t=n(e.options.bulletMarkup).attr("slide-index",r).addClass("carousel__bullet--hidden");c==="after"?i.last().after(t):(l=l||i.first(),l.before(t));setTimeout(function(){n(t).removeClass("carousel__bullet--hidden")},0)})}this.element.is(".m-carousel--alt")&&this.element.find(".js-bullets").addClass("carousel__bullets--vertical  js-bullets-vertical")}},_setupHorizontalSlideCarousel:function(){var n=this,t=n.virtualSlides*100+"%";n.belt.css({width:t});n.slides.css({width:n.slideWidth+"%"})},Start:function(){this._start()},Stop:function(){this._stop()},StopVideo:function(){this._stopVideoPlay()},Goto:function(n){this._changeSlideTo(n)},Next:function(n){this._next(n===undefined?1:n)},Prev:function(n){this._prev(n===undefined?1:n)},SetHeight:function(){this._setHeight()},SetStatic:function(){var t=this,r;t.isStaticCarousel!==!0&&(t._stop(),t.slides.removeClass("is-hidden-slide").removeClass(this.allTransitionClasses),r=n.inviewport(t.element),this.slides.find(".js-smartimage:not([data-hassmartimage])").on("initialized.smartImage."+i,function(){n(this).off("initialized.smartImage."+i).trigger(r?"appear":"showIfInViewPort")}).smartImage(t.options.smartImageParameters),t.isStaticCarousel=!0)},ResetStatic:function(){var n=this,t;n.isStaticCarousel!==!1&&(t=n.currentSlideIndex,n._changeSlideTo(t),n.isStaticCarousel=!1)},SetElementCount:function(n){this._setVisibleElementCount(n)},_next:function(n){n=n===undefined?1:n;this._changeSlideByOffset(n)},_prev:function(n){n=n===undefined?1:n;this._changeSlideByOffset(-1*n)},_addClearer:function(){var t=this,i;t.options.hasClearer===!0&&(i=t.element.next(),t.clearer=i.hasClass("js-carousel-clear")?i:n('<div class="carousel__clear  js-carousel-clear"/>').insertAfter(t.element))},_updateSlideHeight:function(){var n=this,t;n.hasVerticalBelt&&(t=n.belt.closest(".js-carousel-sizer").height(),n.slides.height(t))},_updateClearer:function(){var n=this,t,i;n.options.hasClearer===!0&&(t=n.carouselJSContainer.outerHeight(),i=n.options.clearerCalculator.call(undefined,t,n.element),n.clearer.css({height:i}))},_filterOptions:function(){var t=this;window.isEditRulePreview&&(t.options=n.extend(t.options,{hasClearer:!1,isTop:!1,isFixed:!1,isFullscreen:!1,heightCalculator:function(n){return{height:n}}}))},_setHeight:function(){var t,i,r,u;typeof IsPreview=="function"&&IsPreview()||(t=this,t.options.alwaysVisible===!0&&t.options.height>0?(i=t.options.heightCalculator.call(undefined,t.options.height,t.element),t.carouselJSContainer.css(i)):t.options.height>0&&(i={height:t.options.height},t.carouselJSContainer.css(i)),t.options.isTop&&t._controlsPosition(),t.element.hasClass("m-carousel--alt")&&(r=t.belt.closest(".js-carousel-sizer").height(),u=r-t.controls.height()-160,n(".js-location-list",t.element).height(u)))},_bindNavigationToEvents:function(n){var t=this,i;t.controls.removeClass("u-hide");n.off(t.events.click).on(t.events.click,".js-carousel-next, ."+t.transitionClasses.right,function(n){(n.keyCode===undefined||n.keyCode===13)&&(n.preventDefault(),i=1,t.options.SkipSlideWithoutVideo&&(i=t._getValidOffset("next")),setTimeout(function(){t._next(i)},0))}).on(t.events.click,".js-carousel-next2, ."+t.transitionClasses.farRight,function(n){(n.keyCode===undefined||n.keyCode===13)&&(n.preventDefault(),t._changeSlideByOffset(2))}).on(t.events.click,".js-carousel-prev, ."+t.transitionClasses.left,function(n){(n.keyCode===undefined||n.keyCode===13)&&(n.preventDefault(),i=1,t.options.SkipSlideWithoutVideo&&(i=t._getValidOffset("prev")),setTimeout(function(){t._prev(i)},0))}).on(t.events.click,".js-carousel-prev2, ."+t.transitionClasses.farLeft,function(n){(n.keyCode===undefined||n.keyCode===13)&&(n.preventDefault(),t._changeSlideByOffset(-2))})},_getValidOffset:function(t){var o=this,f,r=o.slides,e=o.currentSlideIndex,i,u;if(t==="next"){for(i=0;i<r.length;i++)if(u=(i+e)%r.length,u!==e&&n(r[u]).attr("data-videosrc")){f=i;break}}else if(t==="prev")for(i=r.length;i>0;i--)if(u=(i+e)%r.length,u!==e&&n(r[u]).attr("data-videosrc")){f=r.length-i;break}return f||(f=0,o.controls.addClass("u-hide")),f},_initializeRandomCollection:function(){var n=this,t;typeof WeightedCollectionEnumerator!="undefined"&&n.slides&&n.slides.length>0&&(t=n._buildCollection(),n.weightedCollectionEnumerator=new WeightedCollectionEnumerator(t,{restrictIdenticalSequence:!0,numberOfItemsToPreGenerate:0}),n.weightedCollection=n.weightedCollectionEnumerator.Randomize(),n.weightedCollection&&n.weightedCollection.length>0&&(n.slides=n._generateSlides(n.weightedCollection)))},_buildCollection:function(){var i=this,t=[];return i.slides.each(function(i){var r=parseInt(n(this).data("weight")),u=n(this).data("is-first");isNaN(r)&&(r=0);typeof u=="undefined"&&(u=!1);t.push({index:i,weight:r,showFirst:u})}),t},_generateSlides:function(){var t=this,i=[];return n.each(t.weightedCollection,function(n,r){var u=t.slides.eq(r);i.push(u.attr("slide-number",n+1).get(0))}),n(i)},_setVisibleElementCount:function(n,t){var i=this;i.virtualSlides=n>1?i.slides.length/n:i.slides.length;i.visibleSlides=n;i.options.preloadSlides=n;t||i._setupHorizontalSlideCarousel()},_bindToEvents:function(){var t=this,r=t.element,u=n(t.options.customNavigationContainer);u.length>0&&(r=u);t.options.hasControls&&t.slides.length>1?t._bindNavigationToEvents(r):t.controls.addClass("u-hide");t.options.isSwipeable&&t.element.swipe({swipeStatus:t._swipeHandler,allowPageScroll:"vertical",excludedElements:"button, input, select, textarea, .noSwipe, .stop-swipe"});t.element.on(t.events.move,n.throttle(250,function(){t.element.removeClass(t.options.inactiveClass);t.inactiveTimer!==undefined&&window.clearTimeout(t.inactiveTimer);t.options.inactivityTimeout>0&&(t.inactiveTimer=window.setTimeout(function(){t.element.addClass(t.options.inactiveClass)},t.isVideoPlaying?t.options.inactivityTimeout/4:t.options.inactivityTimeout))})).on(t.events.click,".js-bullet",function(i){(i.keyCode===undefined||i.keyCode===13)&&(i.preventDefault(),t._changeSlideTo(n(this).attr("slide-index")))}).on("prev."+i,function(){t._changeSlideByOffset(-1)}).on("next."+i,function(){t._changeSlideByOffset(1)}).on("goto."+i,function(n,i){t._changeSlideTo(i.slideId)}).on("stopAutoRotate."+i,function(){t._stopAutoRotate()}).on("startAutoRotate."+i,function(n,i){t._startAutoRotate(i.interval)}).on("stop."+i,function(){t._stop()}).on("start."+i,function(){t._start()}).on("playvideo."+i,function(){t._playCurrentVideo(!0)}).on("gotoandstop."+i,function(n,i){t._changeSlideTo(i.slideId);t._stopVideoPlay(!0)}).on("gotoandplay."+i,function(n,i){t._changeSlideTo(i.slideId);t._playCurrentVideo(!0)});t._bindToVideoControls(t.element);t._bindToVideoControls(t.customVideoControlsContainer);n(window).on(t.events.resize,n.throttle(250,function(){t._updateClearer();t._updateSlideHeight();t.options.alwaysVisible===!0&&t._setHeight()})).on(t.events.stopVideoPlay,function(){t._stopVideoPlay()});if(t.element.hasClass("m-carousel--alt"))t.element.find(".js-captioncontainer").on("mousewheel."+i+" DOMMouseScroll."+i,function(n){var r=n.originalEvent.wheelDelta||-n.originalEvent.detail;r>0&&t.element.trigger("prev."+i);r<0&&t.element.trigger("next."+i);n.preventDefault()})},_bindToVideoControls:function(t){var i=this;t.on(i.events.move,function(){i.element.removeClass(i.options.inactiveClass);i.inactiveTimer!==undefined&&window.clearTimeout(i.inactiveTimer)}).on(i.events.click,".js-play",function(n){(n.keyCode===undefined||n.keyCode===13)&&(n.preventDefault(),n.stopPropagation(),i._stop(),i.isVideoPlaying===!0?i._stopVideoPlay():i._playCurrentVideo(!0))}).on(i.events.toggleRotation,".js-play",function(){i.autoPlayInterval!==null?i._stop():i._start()}).on(i.events.forceStopRotation,".js-play",function(){i._stop()}).on(i.events.forceStopVideo,".js-play",function(){i._stopVideoPlay()}).on(i.events.forcePlayVideo,".js-play",function(n,t){t!==undefined&&t===!0&&(i.options.autoPlayVideos=!0);i._playCurrentVideo(!0)}).on(i.events.click,".js-expand",function(t){if(t.keyCode===undefined||t.keyCode===13){t.preventDefault();t.stopPropagation();var r=n(this).closest(".js-carousel-container");if(r.length<1)return;i._stopVideoPlay();i._openExpander(r.find(".js-image-src").attr("href"),r.find(".js-video-src").attr("href"))}})},_swipeHandler:function(n,t,r){t==="end"&&(r==="left"&&this.trigger("next."+i),r==="right"&&this.trigger("prev."+i))},_stop:function(){var n=this;n.autoPlayInterval!==null&&(window.clearTimeout(n.autoPlayInterval),n.autoPlayInterval=null)},_stopAutoRotate:function(){var n=this;n.options.autorotateInterval=0},_startAutoRotate:function(n){var t=this;t.options.autorotateInterval=n;t._start()},_createVideoControls:function(t){return n('<div class="carousel__expander-controls  js-controls">').addClass("carousel__expander-controls--expand").append(n('<span class="carousel__play  js-play  icon '+this.options.videoPlayButtonClass+' aria-label="carousel play control" "><\/span>')).append(t?n('<span class="carousel__expand  js-expand  icon icon-toggle-fullscreen">'):n())},_initializeSlideVideo:function(t){var r=this,h={autoplay:"Off",useAlwaysFill:r.options.videoPlayerFillContainer,volume:r.options.videoVolume,controls:"none",loop:!1,videoPlayButtonClass:r.options.videoPlayButtonClass,videoStopButtonClass:r.options.videoStopButtonClass,hideVimeoControls:r.options.hideVimeoControls},c=t.attr("data-videosrc"),o=!0,e=t.attr("data-autoplay"),u=t.attr("data-postersrc"),f=n.extend({},h,{sources:[{src:c}]}),s;typeof e!="undefined"&&(e==="False"||e==="false"||e==="")&&(o=!1);f.autoplay=r.options.autoPlayVideos&&o&&r.currentSlideIndex===t.index()?"On":"Off";r.options.hideVimeoControls&&(f.controls=!r.options.hideVimeoControls);u!==undefined&&u!==null&&u.length>0&&(r.options.autoPlayVideos&&o||(f=n.extend(f,{poster:u})));s=r.customVideoControlsContainer.add(t).find(".js-controls");t.find(".c-video-container").off("."+i).on("pause."+i,function(){r.runningOn.iOS&&(s.find(".js-play").addClass(r.options.videoPlayButtonClass).removeClass(r.options.videoStopButtonClass),r.isVideoPlaying=!1,n(this).trigger("appear"))}).on("ended."+i,function(){if(r.isVideoPlaying=!1,!r.isVideoPlaying||n(this).hasClass("videoplayer--tech-youtube")){if(n(this).parent(".js-carousel-container").find(".js-expandable").hasClass("is-expanded")){n(this).videoPlayer("Play");return}if(r.options.rotateVideos){var t=1;r.options.SkipSlideWithoutVideo&&(t=r._getValidOffset("next"));r._changeSlideByOffset(t);return}if(!_.isUndefined(this.Reset)){this.Reset();return}r._stopVideoPlay(!0);r._playCurrentVideo()}else return}).on("firstplay."+i+" playing."+i,function(){r.isVideoPlaying||(r.isVideoPlaying=!0,r._stop(),r.element.addClass(r.options.playingClass).removeClass(r.options.waitingForPlayClass),s.find(".js-play").addClass(r.options.videoStopButtonClass).removeClass(r.options.videoPlayButtonClass).attr("aria-label","carousel pause control"))}).on("waiting."+i,function(){r.element.addClass(r.options.waitingForPlayClass)}).on("setbrightcoveposter."+i,function(t,i,r){if(u===undefined||u===null||u.length===0||r(u)){var f=n(this);f.videoPlayer("SetPoster",i)}}).videoPlayer(f)},_openExpander:function(t,i){var r,u;if(t!==undefined||i!==undefined){r=this;r._closeExpander();u=n('<div class="carousel__expander js-content-expander  u-ar"><div class="u-ar__16-9"><\/div><a class="carousel__close-expander js-close-expander"><i class="icon icon-close"><\/i><\/a><\/div>').appendTo("body");i!==undefined?(u.prepend('<div class="u-ar__content carousel__expander-media-video"><div class="c-video-container"><\/div><\/div>'),setTimeout(function(){var n={autoplay:"On",useAlwaysFill:!1,volume:r.options.videoVolume,sources:[{src:i}]};t!==undefined&&(n.poster=t);r.expanderVideo=u.find(".c-video-container").videoPlayer(n)},0)):t!=="image"&&(u.prepend('<div class="u-ar__content carousel__expander-media-image"><img smartimage="{ alwaysFill: true }" class="o-smartimage" data-src="'+t+'"><\/div>'),_.isFunction(window.staticSmartImageInitialization)&&_.isFunction(n("body").smartImage)&&window.staticSmartImageInitialization(u.find(".o-smartimage")));n(".js-close-expander",u).off(r.events.click).on(r.events.click,function(n){(n.keyCode===undefined||n.keyCode===13)&&(n.preventDefault(),n.stopPropagation(),r._closeExpander())});r._stopVideoPlay();r._stop();r.isExpanderOpened=!0}},_closeExpander:function(){var t=this;n(".js-content-expander").fadeOut(function(){var t=n(this);t.find(".carousel__expander-media-video .c-video-container[data-hasVideoPlayer]").videoPlayer("Pause").videoPlayer("destroy");t.find("img[data-hassmartimage]").smartImage("destroy");t.remove()});t.isExpanderOpened=!1;t._start()},_stopVideoPlay:function(n,t){var i=this,u,f,r;t=t===undefined||t===null?i._getCurrentSlide():t;u=t.find(".c-video-container[data-hasVideoPlayer]");n?u.videoPlayer("Reset"):u.videoPlayer("Pause");i.element.removeClass(i.options.playingClass).removeClass(i.options.waitingForPlayClass);f=i.customVideoControlsContainer.add(t).find(".js-controls");r=f.find(".js-play");(r.attr("data-state-video")===undefined||r.attr("data-state-video")!=="loading")&&r.addClass(i.options.videoPlayButtonClass).removeClass(i.options.videoStopButtonClass).attr("aria-label","carousel play control");i.isVideoPlaying=!1},_playCurrentVideo:function(n){var t=this,i=t._getCurrentSlide(),u=!0,r=i.attr("data-autoplay");typeof r!="undefined"&&(r==="False"||r==="false"||r==="")&&(u=!1);t._stopVideoPlay();(t.options.autoPlayVideos===!0&&u||typeof n!="undefined"&&n===!0)&&(t.options.autoPlayVideos===!0&&i.attr("data-postersrc")&&t.options.threshold>0?window.setTimeout(function(){i.find(".c-video-container[data-hasVideoPlayer]").videoPlayer("Play").removeClass("u-hide")},t.options.threshold):i.find(".c-video-container[data-hasVideoPlayer]").videoPlayer("Play"))},_start:function(){var n=this,t;n._stop();n.options.autorotateInterval>0&&(n.autoPlayInterval=window.setTimeout(function(){n.isVideoPlaying===!1&&n.isExpanderOpened===!1&&(t=1,n.options.SkipSlideWithoutVideo&&(t=n._getValidOffset("next")),n._next(t))},n.options.autorotateInterval))},_changeSlideTo:function(t){var i=this,u,o,s,a,v,f,l,y,p,h;i._stop();i.oldSlideIndex=i.currentSlideIndex;t=i._getRealSlideIndex(t);i.currentSlideIndex=t;i.element.data("currentSlideIndex",t);var r=i._getSlideByIndex(t),e=i._getSlideByIndex(t+1).not(r),c=i._getSlideByIndex(t-1).not(r).not(e),w=i._getSlideByIndex(t+2).not(r).not(e).not(c),b=i._getSlideByIndex(t-2).not(r).not(e).not(c);i.options.slideWithBelt!==undefined&&i.options.slideWithBelt===!0?(u=t,i.visibleSlides>1&&(o=t%i.visibleSlides,s=Math.floor(i.visibleSlides/2),o<=s&&t<i.visibleSlides?u=0:(a=i.slides.length-i.visibleSlides,v=a+s,t>v?u=i.slides.length-i.visibleSlides:u-=o+(s-o)),u<0&&(u=0)),f=0,i.element.hasClass("m-carousel--alt")?(l=i.belt.closest(".js-carousel-sizer").height(),r.prevAll().css({marginTop:-l,marginBottom:0}),r.nextAll().css({marginBottom:-l,marginTop:0}),i.slides.removeClass(i.allTransitionClasses),r.addClass(i.transitionClasses.center).css({marginBottom:0,marginTop:0})):i.options.useCSS3===!0?(f=i.slideWidth*u,f=i.isRTL?f:"-"+f,i.belt.css("transform","translate3D("+f+"%,0,0)")):(y=100/i.visibleSlides,f=u*y+"%",i.belt.css("margin-left","-"+f))):(i.slides.addClass("is-hidden-slide").removeClass(i.allTransitionClasses),r.removeClass(i.allTransitionClasses).addClass(i.transitionClasses.center).removeClass("is-hidden-slide"),i.isSingleSlide||(b.addClass(i.transitionClasses.farLeft).removeClass("is-hidden-slide"),c.addClass(i.transitionClasses.left).removeClass("is-hidden-slide"),e.addClass(i.transitionClasses.right).removeClass("is-hidden-slide"),w.addClass(i.transitionClasses.farRight).removeClass("is-hidden-slide")));i._buildSlides(t);i._initializeSlides();n(".js-caption",i.captionsContainer).removeClass("is-current").filter("[data-id="+t+"]").addClass("is-current");_.isFunction(i.options.onSlideChanged)&&i.options.onSlideChanged.apply(i,[i._getSlideByIndex(t),i.slides,i.oldSlideIndex]);i.options.currentSlideCountSelector&&n(i.options.currentSlideCountSelector).length>0&&_.isFunction(i.options.slideNumberingCalculator)&&(p=i.options.slideNumberingCalculator.call(i,t,i.oldSlideIndex),n(i.options.currentSlideCountSelector).html(p));gts.$(".js-carousel-container",i.element).each(function(t,i){n(i).data("domIndex",t)});this._setupBullets();i.bullets.removeClass("is-active").attr("aria-selected","false").attr("aria-current","false").parent().find("[slide-index='"+t+"']").addClass("is-active").attr("aria-selected","true").attr("aria-current","true");i.options.transitionSpeedMs=parseInt(i.options.transitionSpeedMs);!isNaN(i.options.transitionSpeedMs)&&i.options.transitionSpeedMs>=0&&i.options.transition!=="none"&&gts.$(".js-carousel-container",i.element).css("transition-duration",i.options.transitionSpeedMs+"ms");h=0;i.currentSlideIndex!==i.oldSlideIndex&&(!isNaN(i.options.transitionSpeedMs)&&i.options.transitionSpeedMs>0&&(h=i.options.transitionSpeedMs),window.setTimeout(function(){var n=i._getSlideByIndex(i.oldSlideIndex);i._stopVideoPlay(!0,n)},h));window.setTimeout(function(){i._playCurrentVideo()},h);i._start()},_buildSlides:function(t){var i=this,o=this._getSlideByIndex(t),u=i.slides.filter(":not(.js-delay-smartimage)"),e=i.slides.filter(".is-hidden-slide"),r=n(),f;for(i.preloadSlides=i.options.preloadSlides+(i.options.isSingle?0:1),i.bulletLimitOffset=i.options.preloadSlides>0?i.options.preloadSlides:1,f=i.preloadSlides;f>=1;f--)r=r.add(i._getSlideByIndex(t-f)),r=r.add(i._getSlideByIndex(t+f));r=r.add(o);i.preloadSlides!==0?(u=u.filter(r),e=e.not(u)):u=u.filter(":not(.is-hidden-slide)");i.activeSlides=u;i.inactiveSlides=e},getWeightedCollection:function(){var n=this;return n.weightedCollection},_initializeSlides:function(){var t=this,r="elementRendered.LazyLoad",u;t.inactiveSlides&&t.inactiveSlides.each(function(){var i=n(this);i.find(".c-video-container[data-hasVideoPlayer]").videoPlayer("Pause").videoPlayer("destroy");t.options.ignoreSmartImageHandler||i.find("img[data-hassmartimage]").smartImage("destroy")});t.activeSlides&&(u=n.inviewport(t.element)&&n(t.element).is(":visible"),t.activeSlides.each(function(){var f=n(this);f.find(".js-smartimage:not([data-hassmartimage])").on("initialized.smartImage."+i,function(){if(n(this).off("initialized.smartImage."+i).trigger(u?"appear":"showIfInViewPort"),!u)n(this).off(r).on(r,function(){t.activeSlides.not(n(this).parents(".js-carousel-container")[0]).find(".js-smartimage[data-hassmartimage]").each(function(){n(this).trigger("appear");n(this).off(r)});n(this).off(r)})}).smartImage(t.options.smartImageParameters);f.hasClass("is-hidden-slide")||(f.find(".c-video-container[data-hasVideoPlayer]").length===0&&t._initializeSlideVideo(f),f.find(".c-video-container[data-hasVideoPlayer]").trigger("appear"))}))},_getRealSlideIndex:function(n){var t=this;return n*=1,isNaN(n)&&(n=0),(n%t.slides.length+t.slides.length)%t.slides.length},_getSlideByIndex:function(n){var t=this;return n=t._getRealSlideIndex(n),t.slides.eq(n)},_getCurrentSlide:function(){var n=this,t=n.currentSlideIndex;return n._getSlideByIndex(t)},_changeSlideByOffset:function(n){var t=this;t._changeSlideTo(n*1+t.currentSlideIndex)},_createCustomCaptions:function(){var t=this;t.captionsContainer.length!==0&&t.slides.each(function(i){var r=n(this).find(t.options.captionSelector),u=r.clone().attr("data-id",i).addClass("js-caption  "+t.options.customCaptionClass);r.addClass("is-hidden-slide");t.currentSlideIndex===i&&u.addClass("is-current");u.appendTo(t.captionsContainer);n(window).trigger(t.events.resize)})},_controlsPosition:function(){var n=this,t=n.carouselJSContainer.height()/2+gts.$(".js-header").outerHeight()-n.controls.height()*2+n.controls.height()/2;n.controls.css("top",t)}})})(jQuery,jQuery);;;;(function(n){"use strict";var t="scrollCarousel";n.widget("gts."+t,{runningOn:{iOS:typeof gts.deviceIs=="undefined"||gts.deviceIs.iOS,iPhone:typeof gts.deviceIs!="undefined"&&gts.deviceIs.iphone,android:typeof gts.deviceIs!="undefined"&&gts.deviceIs.android},defaults:{activeClass:"is-scrollable",leftDirectionClass:"scroll-left",rightDirectionClass:"scroll-right",sliderSelector:".js-scroll-carousel-slider",carouselSlideSelector:".js-scroll-carousel-item",selectedClass:"is-selected",moduleEle:"",breakpoints:[{width:"480","class":"js-break-mobile  is-scrollable"},{width:"768","class":"js-break-lap  is-scrollable"},{width:"960","class":"js-break-tablet  is-scrollable"},{"class":"js-break-default"}],breakpointsRelativeToViewport:!1,asyncContent:!1,AutoAdvanceInterval:0,animationDuration:400,throttleInterval:250,navigationControls:".js-control",controlsHTML:'<a href="#" role="button" tabindex="0" class="scroll-carousel__control  js-control  scroll-carousel__control--left" data-direction="prev" aria-label="Previous slide"><i class="icon  icon-arrow-left-full  scroll-carousel__icon  scroll-carousel__icon-left"><\/i><\/a><a href="#" role="button" tabindex="0" class="scroll-carousel__control  scroll-carousel__control--right  js-control" data-direction="next" aria-label="Next slide"><i class="icon  icon-arrow-right-full  scroll-carousel__icon  scroll-carousel__icon-right"><\/i><\/a>',continuousScroll:!1,snapToSlide:!0,accountForOffset:!0,preloadSlides:1,leftOffset:"",onSlideChanges:gts.$.noop(),onAfterCreate:gts.$.noop(),onBeforeCreate:gts.$.noop(),onImageLoaded:gts.$.noop(),threshold:50,autoPlayVideos:!1,customVideoControlsContainer:"",videoPlayerFillContainer:!0,videoVolume:0,hasExpander:!1,isFullscreen:!1,slideClass:"",videoPlayButtonClass:"icon-play-round",videoStopButtonClass:"icon-pause",playingClass:"carousel--is-playing",inactiveClass:"carousel--is-inactive",waitingForPlayClass:"carousel--is-waiting",inactivityTimeout:1e3,centerCurrentSlide:!1,countImagesReady:0},_create:function(){var n=this;this.options=_.extend({},this.defaults,this.options);this.eventNamespace=this.widgetName+RenoEventsNS;this.clickEvent="touchstart."+this.eventNamespace+" click."+this.eventNamespace;this.moveEvent="mousemove."+this.eventNamespace;this.resizeEvent=(gts.isMobileDevice?"orientationchange":"resize")+"."+this.eventNamespace;this.element.data("button-videoplay-class")&&(this.options.videoPlayButtonClass=this.element.data("button-videoplay-class"));this.element.data("button-videostop-class")&&(this.options.videoStopButtonClass=this.element.data("button-videostop-class"));n.runningOn.iOS&&(n.options.autoPlayVideos=!n.runningOn.iOS&&n.options.autoPlayVideos,n.element.addClass("carousel--is-ios"));n.runningOn.android&&(n.options.autoPlayVideos=!n.runningOn.android&&n.options.autoPlayVideos);n.isVideoPlaying=!1;n.isExpanderOpened=!1;n.videoControls=n._createVideoControls(!n.options.isFullscreen);n.customVideoControlsContainer=gts.$(n.options.customVideoControlsContainer);this._initializeWidget()},_initializeWidget:function(){var t=this;(this.containerEle=n(this.element),this.scrollableEle=this.containerEle.find(this.options.sliderSelector),this.scrollableEle.length)&&(this._autoadvanceTimeout=null,this.scrollSlides=this._getScrollableSlides(),this.containerEle.addClass("c-scroll-carousel"),this.scrollableEle.addClass("scroll-carousel__slider"),t.options.continuousScroll&&this._setupContinuousScroll(),typeof t.options.onBeforeCreate=="function"&&t.options.onBeforeCreate(),this._executeMain(t._initializeDependencies()))},_setupContinuousScroll:function(){const r=this.scrollableEle.outerWidth();let n=0;const t=[...this.scrollSlides];t.unshift(t.pop());let i=0;if(t.every(t=>r<i?!1:(i+=t.getBoundingClientRect().width,n++,!0)),!(this.scrollSlides.length<=n)){const u=this.scrollableEle.scrollLeft()===0;if(this.scrollSlides.eq(this.scrollSlides.length-1).clone(!0).attr("data-scroll-to",this.scrollSlides.length).attr("data-appear-with",this.scrollSlides.length).insertBefore(this.scrollSlides.eq(0)),u){const n=this,i=this._calculateTargetPositionForSlide(this.scrollSlides.get(0)),t=n.options.onAfterCreate;n.options.onAfterCreate=()=>{n.scrollableEle.scrollLeft(i),typeof t=="function"&&t()}}for(let t=0;t<n;t++){const i=this.scrollSlides.eq(t);i.attr("data-appear-with",this.scrollSlides.length+t+1);const n=i.clone(!0);n.attr("data-appear-with",t+1);t===1&&n.attr("data-scroll-to",2);this.scrollableEle.append(n)}this.scrollSlides=this._getScrollableSlides()}},_initializeDependencies:function(){this._initializeContainerBreakpoints();this._bindEvents()},_executeMain:function(n){var t=this;gts.$.when(n).then(function(){t._updateStatus();typeof t.options.onAfterCreate=="function"&&t.options.onAfterCreate()})},_initializeContainerBreakpoints:function(){var n=this;if(n.options.breakpoints){if(this.refreshWidget){this.containerEle.containerBreakpoints("refresh");return}this.containerEle.containerBreakpoints({breakpoints:n.options.breakpoints,breakpointsRelativeToViewport:n.options.breakpointsRelativeToViewport})}},_bindEvents:function(){var t=this;t.containerEle.off("changeBreakpoint.containerBreakpoints."+t.eventNamespace+t.uuid).on("changeBreakpoint.containerBreakpoints."+t.eventNamespace+t.uuid,function(n,i,r,u){n.stopPropagation();r&&r.class.indexOf(t.options.activeClass)<0?t._updateStatus():u&&u.type!=="focus"&&(t._goToItem(),t.isWindowResized=!0)});t.containerEle.off("scrollCarouselUpdatePosition."+t.eventNamespace).on("scrollCarouselUpdatePosition."+t.eventNamespace,function(n,i){t._goToItem({item:i})});if(t.options.asyncContent)t.containerEle.find(".js-smartimage").off("imageReady.smartImage.scrollCarousel"+t.eventNamespace).on("imageReady.smartImage.scrollCarousel"+t.eventNamespace,function(n){if(t.options.countImagesReady++,gts.$(n.currentTarget).closest(t.options.carouselSlideSelector).hasClass("is-last-photo")&&typeof t.options.onImageLoaded=="function")t.options.onImageLoaded(t.isWindowResized);t.options.countImagesReady===1&&gts.$(t.options.sliderSelector).trigger("firstImageFullyLoaded.scrollCarousel.RENO")});t.containerEle.off(t.clickEvent).on(t.clickEvent,t.options.navigationControls,function(i){i.preventDefault();t.isProcessingGoTo||t._goTo(n(this).attr("data-direction"))});if(this.options.snapToSlide&&!this.options.centerCurrentSlide)t.scrollableEle.off("touchmove."+t.eventNamespace).on("touchmove."+t.eventNamespace,function(){t.isBeingDraggedByUser=!0;t.scrollableEle.one("touchend."+t.eventNamespace,function(){t.isBeingDraggedByUser=!1;t.scrollableEle.trigger("scroll")})}).off("scroll."+t.eventNamespace).on("scroll."+t.eventNamespace,n.debounce(t.options.throttleInterval,function(){t.isBeingDraggedByUser||t.isUpdatingPosition||(t._snapToSlide(),t._updateScrollableDirection(),t._showImages())}));t.scrollableEle.find(".js-video-slide").length&&t._bindVideoEvents()},_bindVideoEvents:function(){var n=this;gts.$(window).off("videoMp4Initialize."+n.eventNamespace).on("videoMp4Initialize."+n.eventNamespace,function(t,i){i&&i.slide&&i.slide.length&&(n._setVideoMp4(i.slide),n._initializeSlideVideo(i.slide))});n._bindToVideoControls(n.scrollableEle);n._bindToVideoControls(n.customVideoControlsContainer)},_bindToVideoControls:function(n){var t=this;n.on(t.moveEvent,function(){t.element.removeClass(t.options.inactiveClass);t.inactiveTimer!==undefined&&window.clearTimeout(t.inactiveTimer)}).on(t.clickEvent,".js-play",function(n){(n.keyCode===undefined||n.keyCode===13)&&(n.preventDefault(),n.stopPropagation(),t.isVideoPlaying===!0?t._stopVideoPlay():t._playCurrentVideo(!0))})},_snapToSlide:async function(){var i=this._getSlidesInView(),t,r;if((!this.containerEle.hasClass(this.options.leftDirectionClass)||this.scrollSlides.last().get(0)!==i.last().get(0))&&(t=i.first(),t.length)){const u=this.scrollableEle.get(0).scrollWidth-this.scrollableEle.scrollLeft()===n(this.scrollableEle).outerWidth();(this.options.continuousScroll||Math.floor(t.offset().left)!==Math.floor(this.containerEle.offset().left)&&Math.ceil(t.offset().left)!==Math.ceil(this.containerEle.offset().left)&&!u)&&(r=Math.abs(t.offset().left)>t.outerWidth()/2?t.next():t,await this._goToItem({item:r,index:r.index(),visibleSlides:i}))}},_appendNavigationControls:function(){!this.containerEle.find(this.options.navigationControls).length&&this.options.controlsHTML&&n(this.options.controlsHTML).appendTo(this.element)},_goToItem:async function(n){var r,u;const t=this;t.oldSlide=t.options.moduleEle?gts.$(t.options.carouselSlideSelector+"."+t.options.selectedClass,t.options.moduleEle):gts.$(t.options.carouselSlideSelector+"."+t.options.selectedClass,t.containerEle);let i;if(n&&n.item?i=n.item[0]||n.item:n&&n.index>-1?i=this.scrollSlides[n.index]:(r=t._getSlidesInView(),i=i||t.oldSlide[0]||r.first()[0]||t.scrollSlides.first()[0]),t.newSlide=gts.$(i),t.newSlide.length){if(typeof t.options.onSlideChanges=="function"&&n)t.options.onSlideChanges(n.index,n.direction);t.oldSlide.removeClass(t.options.selectedClass);t.newSlide.addClass(t.options.selectedClass);let i=t._calculateTargetPositionForSlide(t.newSlide);const r=t.newSlide.outerWidth(),e=t.scrollableEle.scrollLeft(),f=Math.abs(e-i),o=f<r?f*t.options.animationDuration/r:t.options.animationDuration;t.isUpdatingPosition=!0;await t.scrollableEle.clearQueue().stop(!0,!1).animate({scrollLeft:i},o,"swing").promise();t.newSlide.is("[data-scroll-to]")&&(t.newSlide=t.scrollSlides.eq(t.newSlide.data("scroll-to")),i=t._calculateTargetPositionForSlide(t.newSlide));t.scrollableEle.scrollLeft(i);t._updateStatus();t.isUpdatingPosition=!1;t.options.asyncContent||(u=n&&n.visibleSlides?n.visibleSlides:undefined,t._showImages(u));t.oldSlide.hasClass("js-video-slide")&&t._stopVideoPlay(!0,t.oldSlide);gts.$("."+t.options.selectedClass).hasClass("js-video-slide")&&t._playCurrentVideo()}},_calculateTargetPositionForSlide:function(n){n=gts.$(n);let t=Math.round(n.offset().left+this.scrollableEle.scrollLeft()-this.containerEle.offset().left);this.options.centerCurrentSlide&&(t=n.get(0).offsetLeft-(this.containerEle.outerWidth()-n.width())/2+n.outerWidth()-n.width());const i=this.scrollableEle[0].offsetLeft;if(this.options.accountForOffset&&0>=i&&(t-=i),this.options.leftOffset){this.currentBreakpoint=this.containerEle.containerBreakpoints("getCurrentBreakpoint");for(const n in this.options.leftOffset)this.currentBreakpoint["class"].indexOf(n)!==-1&&t!==0&&(t-=this.options.leftOffset[n])}return t},_goTo:async function(n){var i,t,r;this.isProcessingGoTo=!0;i=this.options.preloadSlides===this.defaults.preloadSlides?this._getSlidesInView().first():this._getSlidesInView().filter(".is-selected");t=this.scrollSlides.index(i);n==="prev"&&(t=Math.max(0,t-1));n==="next"&&(t=Math.min(this.scrollSlides.length-1,t+1));r=this.scrollSlides.eq(t);await this._goToItem({item:r,direction:n,index:t});this.isProcessingGoTo=!1},_updateStatus:function(){if(this.containerEle.hasClass(this.options.activeClass)){var n=Math.floor(this.scrollableEle[0].scrollWidth-this.scrollableEle.outerWidth()),t=this.options.asyncContent&&this.scrollableEle.children().length>this.options.preloadSlides;if(!n&&!t){this.containerEle.removeClass(this.options.activeClass+" "+this.options.leftDirectionClass+" "+this.options.rightDirectionClass);return}this._appendNavigationControls();this._updateScrollableDirection()}},_updateScrollableDirection:function(){var i=Math.floor(this.scrollSlides.last().offset().left+this.scrollSlides.last().outerWidth()),r=this.scrollSlides.first()[0].offsetLeft,n=this.scrollSlides.first().offset().left-r,t=this.containerEle.offset().left;this.containerEle.removeClass(this.options.rightDirectionClass+" "+this.options.leftDirectionClass);(n===0||n===t)&&this.containerEle.addClass(this.options.rightDirectionClass);i<=t+this.scrollableEle.outerWidth()&&this.containerEle.addClass(this.options.leftDirectionClass);this.options.AutoAdvanceInterval&&(this._disableAutoAdvance(),this._startAutoAdvance())},_showImages:function(n){const t=this;gts.$.each(n||this._getSlidesInView(),function(n,i){if(gts.$(i).find("[data-hassmartimage]").trigger("appear"),gts.$(i).is("[data-appear-with]")){const n=gts.$(i).data("appear-with");t.scrollSlides.eq(n).find("[data-hassmartimage]").trigger("appear")}})},_getSlidesInView:function(){var i=this.scrollableEle.outerWidth(),t=this.containerEle.offset().left;return n(this.scrollSlides.toArray().filter(function(r){var u=n(r).offset().left,f=n(r).outerWidth(),e=Math.floor(u+f);return u<i+t&&e>t}))},_getScrollableSlides:function(){var t=this.scrollableEle.children(".js-scroll-carousel-item");return t.length||(t=this.scrollableEle.children()),n(t.toArray().filter(function(t){return!n(t).is(":hidden")}))},IsVisible:function(t){var i=this._getSlidesInView();return i.index(n(this.options.carouselSlideSelector,this.containerEle)[t])>=0},_startAutoAdvance:function(){var n=this;this._autoadvanceTimeout=window.setTimeout(function(){n._autoadvanceDirection&&(n.containerEle.hasClass(n.options.leftDirectionClass)||!n.containerEle.hasClass(n.options.rightDirectionClass))||(n._autoadvanceDirection="next");n.containerEle.hasClass(n.options.leftDirectionClass)&&!n.containerEle.hasClass(n.options.rightDirectionClass)&&(n._autoadvanceDirection="prev");n._goTo(n._autoadvanceDirection)},this.options.AutoAdvanceInterval*1e3)},_disableAutoAdvance:function(){this._autoadvanceTimeout&&window.clearTimeout(this._autoadvanceTimeout)},_setVideoMp4:function(n){var i=n,r=gts.$(".js-video-parent",n),t,u;r.length&&(i=r);t=gts.$(".js-video-src",n).attr("href");u=this._createVideoControls(!this.options.isFullscreen);typeof t=="string"&&t.length>7&&(i.append(gts.$('<div class="js-video-container  carousel__video-player  carousel__video-player--created  c-video-container '+this.options.slideClass+' "><\/div>')),n.attr("data-videosrc",t).attr("data-postersrc",gts.$(".js-image-src[href]",n).attr("href")),this.options.autoPlayVideos===!0&&n.attr("data-postersrc")&&n.find(".js-video-container").addClass("u-hide"),this.options.hasExpander===!0&&this.customVideoControlsContainer.length===0?this.videoControls.clone().appendTo(gts.$(n)):this.customVideoControlsContainer.length&&this.customVideoControlsContainer.children(".carousel__expander-controls.js-controls").remove().end().append(u.clone()),(t.indexOf("www.youtube.com")>-1||t.indexOf("youtu.be")>-1)&&n.addClass("has-youtube-video"))},_createVideoControls:function(n){return gts.$('<div class="carousel__expander-controls  js-controls">').addClass("carousel__expander-controls--expand").append(gts.$('<span class="carousel__play  js-play  icon '+this.options.videoPlayButtonClass+' aria-label="carousel play control" "><\/span>')).append(n?gts.$('<span class="carousel__expand  js-expand  icon icon-toggle-fullscreen">'):gts.$())},_initializeSlideVideo:function(i){var r=this,h={autoplay:"Off",useAlwaysFill:r.options.videoPlayerFillContainer,volume:r.options.videoVolume,controls:"none",loop:!1,videoPlayButtonClass:r.options.videoPlayButtonClass,videoStopButtonClass:r.options.videoStopButtonClass},c=i.attr("data-videosrc"),s=!0,f=i.attr("data-autoplay"),u=i.attr("data-postersrc"),e=n.extend({},h,{sources:[{src:c}]}),o;typeof f!="undefined"&&(f==="False"||f==="false"||f==="")&&(s=!1);u!==undefined&&u!==null&&u.length>0&&(r.options.autoPlayVideos&&s||(e=n.extend(e,{poster:u})));o=r.customVideoControlsContainer.add(i).find(".js-controls");i.find(".c-video-container").off("."+t).on("pause."+t,function(){r.runningOn.iOS&&(o.find(".js-play").addClass(r.options.videoPlayButtonClass).removeClass(r.options.videoStopButtonClass),r.isVideoPlaying=!1,n(this).trigger("appear"))}).on("ended."+t,function(){if(r.isVideoPlaying){if(!_.isUndefined(this.Reset)){this.Reset();return}r._stopVideoPlay(!0);r._playCurrentVideo()}}).on("firstplay."+t+" playing."+t,function(){r.isVideoPlaying||(r.isVideoPlaying=!0,r.element.addClass(r.options.playingClass).removeClass(r.options.waitingForPlayClass),o.find(".js-play").addClass(r.options.videoStopButtonClass).removeClass(r.options.videoPlayButtonClass).attr("aria-label","carousel pause control"))}).on("waiting."+t,function(){r.element.addClass(r.options.waitingForPlayClass)}).on("setbrightcoveposter."+t,function(t,i,r){if(u===undefined||u===null||u.length===0||r(u)){var f=n(this);f.videoPlayer("SetPoster",i)}}).videoPlayer(e)},_stopVideoPlay:function(n,t){var i=this,r,u;t=t===undefined||t===null?i._getCurrentSlide():t;r=t.find(".c-video-container[data-hasVideoPlayer]");n?r.videoPlayer("Reset"):r.videoPlayer("Pause");i.element.removeClass(i.options.playingClass).removeClass(i.options.waitingForPlayClass);u=i.customVideoControlsContainer.add(t).find(".js-controls");u.find(".js-play").addClass(i.options.videoPlayButtonClass).removeClass(i.options.videoStopButtonClass).attr("aria-label","carousel play control");i.isVideoPlaying=!1},_getCurrentSlide:function(){return gts.$(this.options.carouselSlideSelector+".is-selected")},_playCurrentVideo:function(n){var t=this,i=t._getCurrentSlide(),u=!0,r=i.attr("data-autoplay");typeof r!="undefined"&&(r==="False"||r==="false"||r==="")&&(u=!1);t._stopVideoPlay();(t.options.autoPlayVideos===!0&&u||typeof n!="undefined"&&n===!0)&&(t.options.autoPlayVideos===!0&&i.attr("data-postersrc")&&t.options.threshold>0?window.setTimeout(function(){i.find(".c-video-container[data-hasVideoPlayer]").videoPlayer("Play").removeClass("u-hide")},t.options.threshold):i.find(".c-video-container[data-hasVideoPlayer]").videoPlayer("Play"))},destroy:function(){this.containerEle.removeClass(this.options.activeClass).off(this.eventNamespace).find(this.options.navigationControls).remove()},refresh:function(){this.refreshWidget=!0;this.destroy();this._initializeWidget();this._disableAutoAdvance()},Goto:function(n){this._goToItem(n)}})})(gts.jQuery,gts.jQuery);;;;var regexSpecialCharacters=new RegExp("[^\\a-zA-Z"+String.fromCharCode(192)+"-"+String.fromCharCode(255)+"0-9\\s\\-]+","gi");String.prototype.seoReplace=function(){var n=this;return n=n.replace(","," "),n=n.replace(regexSpecialCharacters,"-"),n=n.replace(/\s+/g," "),n=n.replace(/\s/g,"-"),n=n.replace(/\-+/g,"-"),n=="-"&&(n=""),n.Latinize()};String.prototype.seoEncode=function(){var n=this;return encodeURI(n).toLowerCase()};String.prototype.seoEncodeComponent=function(){var n=this;return encodeURIComponent(n).toLowerCase()};String.prototype.seoDecode=function(){var n=this;return decodeURI(n)};String.prototype.seoDecodeComponent=function(){var n=this;return decodeURIComponent(n)};;;;var RecaptchaHandlerBase=Class.create({intialize:function(){},retryCount:0,AddFormLabels:function(){$(".captcha__wrapper").parent().find("input,textarea").each(function(){var n=this;$(n).prev().is("label")?$(n).prev().attr("for",$(n).attr("id")):$(n).before(`<label for="${$(n).attr("id")}" class="u-hide">Recaptcha</label>`)})},CreateRecaptcha:function(n,t,i){var r=this,f=gts.$(n).parents("form").length>0?gts.$(n).parents("form"):gts.$(n).parents(".js-recaptcha-wrapper");const u=gts.isMobileDevice?"focus.RENO":"click.RENO";f.find("input,textarea,.js-submit").off(u).on(u,function(){const u=gts.$(n).attr("data-loaded");window.isEditRulePreview||u==="true"||r._EnsureRecaptchaIsLoaded(function(){r._CreateRecaptcha(n,t,i);gts.$(n).attr("data-loaded","true")})})},DestroyRecaptcha:function(n){(n=gts.$(n),n instanceof gts.$&&n.length!==0)&&n.removeAttr("data-recaptcha-clientid").empty(!0)},DestroyAllCaptchasInContainer:function(n){var t=this;(n=gts.$(n),n instanceof gts.$&&n.length!==0)&&n.find("[data-recaptcha-clientid]").each(function(){t.DestroyRecaptcha(this)})},ReinitializeAllCaptchasInContainer:function(n){var t=this;(n=gts.$(n),n instanceof gts.$&&n.length!==0)&&n.parent().find("[data-recaptcha-clientid]").each(function(){t.CreateRecaptcha(this)})},GetResponse:function(n){if(n=gts.$(n),!(n instanceof gts.$)||n.length===0)return null;var t=n.parent().find("[data-recaptcha-clientid]:eq(0)");return window.grecaptcha==="undefined"||t.length===0?"":window.grecaptcha.getResponse(t.attr("data-recaptcha-clientid"))},Execute:function(n){var t=this;if(window.grecaptcha)t._Execute(n);else n.off("GRecaptchaLoaded").on("GRecaptchaLoaded",function(){t._Execute(n)})},_CreateRecaptcha:function(n,t,i){var f=this,u,r;(n=gts.$(n),n instanceof gts.$&&n.length!==0)&&(u=n.attr("data-recaptcha-clientid"),u!==undefined&&(n.empty(),r=gts.$("<span />").append(n.clone()).children(":first"),r.removeAttr("data-recaptcha-clientid"),r.insertBefore(n),n.remove(),n=r),f._RenderRecaptcha(n,t,i))},_Execute:function(n){if(RecaptchaIsInvisible&&n){var t=n.attr("data-recaptcha-clientid")||n.find("[data-recaptcha-clientid]").attr("data-recaptcha-clientid");window.grecaptcha.execute(t)}},_RecaptchaIsInvisible:RecaptchaIsInvisible,_RenderRecaptcha:function(n,t,i){var e=n.attr("data-recaptcha-clientid"),r,u,f;if(e!==undefined){window.grecaptcha.reset(e);return}r=this;u=gts.$.extend({sitekey:RecaptchaKey,theme:"white",callback:function(){if(RecaptchaIsInvisible)n.parents("form").submit();else{var i=n.parent().find(".captcha_validator");i.length===1&&i.valid()}typeof t=="function"&&t.apply(null,n)},"expired-callback":function(){console.log("expired callback");r._RenderRecaptcha(n,t,i)},"error-callback":function(){if(r.retryCount++,window.grecaptcha&&window.grecaptcha.reset(),r._RenderRecaptcha(n,t,i),r._Execute(n,t,i),r.retryCount==1)r._Execute(n,t,i);else if(r.retryCount==2)r._RecaptchaIsInvisible=!1,r.ReinitializeAllCaptchasInContainer(n);else if(r.retryCount>2){r.retryCount=0;r._RecaptchaIsInvisible=!0;ShowDialogResult('<div class="c-modal"><div class="modal__container"><div class="modal__item"><div class="modal__title"><h4>WARNING<\/h4><a href="#" class="modal__action  js-modal-close"><i class="icon  icon-close"><\/i><span style="display: none">Close<\/span><\/a><\/div><div><div class="modal__section"><p>There was an error processing the form, please try again.<\/p><\/div><\/div><\/div>');return}}},i);r._RecaptchaIsInvisible&&(gts.$.extend(u,{size:"invisible",badge:"inline"}),n.parents("form").addClass("captcha--invisible"),n.next().hasClass("captcha__message")||(u.customMessage?n.after('<p class="captcha__message">'+u.customMessage+"<\/p>"):n.after('<p class="captcha__message">This site is protected by reCAPTCHA and the Google <a href="https://policies.google.com/privacy">Privacy Policy<\/a> and <a href="https://policies.google.com/terms">Terms of Service<\/a> apply.<\/p>')));f=window.grecaptcha.render(n.get(0),u);f!==undefined?(n.attr("data-recaptcha-clientid",f),n.trigger("GRecaptchaLoaded"),r.AddFormLabels()):log.warn("There was an issue trying to initialize ReCaptcha on container "+containerId)},_recaptchaLoading:!1,_recaptchaLoadCallbacks:[],_EnsureRecaptchaIsLoaded:function(n){var t=this,i;typeof grecaptcha=="undefined"?(t._recaptchaLoadCallbacks.push(n),t._recaptchaLoading||(t._recaptchaLoading=!0,i=_.uniqueId("recaptchaInitializer_"),window[i]=function(){delete window[i];for(var n;typeof(n=t._recaptchaLoadCallbacks.shift())!="undefined";)n.apply(t,[]);!isResponsive&&gts.$("body > .simplemodal-container").length>0&&ResizeDialog()},ScriptProcessor.GetScript("https://www.google.com/recaptcha/api.js?render=explicit"+(SiteCultureInfoName?"&hl="+SiteCultureInfoName:"")+"&onload="+i))):(n.apply(t,[]),!isResponsive&&gts.$("body > .simplemodal-container").length>0&&ResizeDialog())}}),RecaptchaHandler;typeof RecaptchaHandler=="undefined"&&(window.RecaptchaHandler=new RecaptchaHandlerBase);RecaptchaHandler=window.RecaptchaHandler;;;;var _ToolTipService={BindToEvents:function(){var n=this;gts.$(document).off("UpdateIconToolTips"+RenoEventsNS);gts.$(document).on("UpdateIconToolTips"+RenoEventsNS,function(t,i){n._SetIconToolTips(i)})},_SetIconToolTips:function(n){var t,i;(typeof n=="undefined"&&(n={context:document}),typeof gts.$("body").tooltipster!="undefined"&&(t=gts.$('[data-hastooltipster="true"]:not(.tooltipstered)',n.context),t.length>0&&t.each(function(){this.title&&$(this).tooltipster({content:this.title,position:$(this).attr("data-tooltipster-position")||"bottom",maxWidth:$(this).attr("data-tooltipster-maxwidth")||"auto"})}),gts.jQuery(".polygon-search-tip").each(function(){gts.jQuery(this).attr("ttp",1);this.title.length>1&&gts.jQuery(this).tooltipster({content:this.title,position:"top"})})),typeof gts.$("body").toolTip=="function")&&(i=n.selector||".tip.icon[title!='']",gts.$(i,n.context).each(function(){var i=$(this).data("tclass"),t={node:this,content:this.title,className:i,tip:!gts.$(this).hasClass("nopoint"),offset:{x:20,y:-10}};gts.$.extend(t,n);$(this).toolTip(t)}))}};gts.$(function(){_ToolTipService.BindToEvents()});;;;function staticSmartImageInitialization(n,t){if(n!==undefined&&n.length!==0&&n.attr("data-hassmartimage")===undefined){_.isFunction(t)||(t=function(n){return gts.$(n).attr("src")||gts.$(n).attr("data-src")});var i=n.attr("smartimage").trim();i=i.length===0?{}:i.slice(0,1)==="{"?eval("options = "+i):gts.$.extend(!0,{},gts.$.extend.apply({},gts.$.map(i.split(/\s*,\s*/),function(n){var t={};return n.indexOf(":")>-1?(n=n.split(":"),eval("result["+n.shift().trim()+"] = "+n.join(":").trim())):n.indexOf("=")>-1?(n=n.split("="),eval("result["+n.shift().trim()+"] = "+n.join("=").trim())):t[n]=!0,t})));const r=NoPhotoUrls&&NoPhotoUrls.GetUrlByRecordType(NoPhotoUrls.RecordType.None)||"";n.parent().addClass("js-smartimage-parent").addClass("o-smartimage");n.attr("data-image-srcset","1600,1200,1024,640,480,320,150,90,45");n.attr("data-image-url-format",SEOService.AddQueryStringParam(ImageProxyPath(window.ImageProxyServer),"imageurl="+EncodeImageUrl(NormalizeImageUrl(t(n))),"option=n","w={0}",r?"fallbackimageurl="+r:""));n.attr("src","");n.addClass("js-smartimage smartimage__item");n.smartImage(i)}}(function(){var n=function(){gts.$("img[smartimage]:not([data-hassmartimage])").each(function(){var n=gts.$(this);staticSmartImageInitialization(n,n[0].hasAttribute("data-src")?function(n){return gts.$(n).attr("data-src")}:null)})};n();gts.$(document).ready(n);gts.$(document).on("staticSmartImageInitialize",n)})();;;