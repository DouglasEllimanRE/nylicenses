;$(function(){$(".js-animate-scroll").off("click").on("click",function(n){var i=$(this).attr("href"),t;i.substr(0,1)==="#"&&(t=$(i),t.length)&&(t.is(":first-child")&&(t=t.parent()),$("html, body").stop().animate({scrollTop:t.offset().top},300,function(){$(".js-non-featured",i).focus().trigger("click")}),n.preventDefault(),n.stopPropagation())});$(".js-animate-scroll[href^=#]").each(function(n,t){var i=$(t).attr("href");i.length>1&&($(i).length?$(t).removeClass("u-hide--alt"):$(t).addClass("u-hide"))})});;;;var DetailsModule={Id:undefined,_XSLParams:undefined,_SearchCookieValues:undefined,_BuildSearchCookie:undefined,Initialize:function(n){this._XSLParams=n;this.Id=this._XSLParams.ModuleId;this._ModuleEle=gts.$("#"+this._XSLParams.ModuleId);this.BuildSearchCookie();this._BindToEvents();this._OnInitialize()},_OnInitialize:function(){this._InitializeSmartImages()},_InitializeSmartImages:function(){gts.$(".js-smartimage",this._ModuleEle).smartImage({useLazyLoad:this._XSLParams.UseImageLazyLoading||!0,useBestFit:this._XSLParams.UseImageBestFit||!0,alwaysFill:this._XSLParams.UseImageBestFit||!0})},_BindToEvents:function(){},BuildSearchCookie:function(){if(typeof this._BuildSearchCookie!="undefined")this._BuildSearchCookie();else{this._SearchCookieValues={channelKey:this._XSLParams.ChannelKey};var n=new SearchCookie(this._SearchCookieValues.channelKey);this._SearchCookieValues.page=n.Page;this._SearchCookieValues.pageTotal=n.PageTotal;this._SearchCookieValues.perPage=n.PerPage;this._SearchCookieValues.seoQuery=n.SEOQuery;this._SearchCookieValues.listingTotal=n.ListingTotal;this._SearchCookieValues.detailIndex=n.DetailIndex;this._SearchCookieValues.referrerQueryType=n.ReferrerQueryType;this._SearchCookieValues.referrerId=n.ReferrerId;this._SearchCookieValues.extraSearchParams=n.ExtraSearchParams;this._SearchCookieValues.backLink=n.BackLink;this._SearchCookieValues.applicationPath=n.ApplicationPath;this._BuildSearchCookie=function(){BuildSearchCookie(this._SearchCookieValues.channelKey,this._SearchCookieValues.page,this._SearchCookieValues.pageTotal,this._SearchCookieValues.perPage,this._SearchCookieValues.seoQuery,this._SearchCookieValues.listingTotal,this._SearchCookieValues.detailIndex,this._SearchCookieValues.referrerQueryType,this._SearchCookieValues.referrerId,this._SearchCookieValues.extraSearchParams,this._SearchCookieValues.backLink)}}},GoToDetailPage:function(n,t,i,r,u,f){return n!=this._SearchCookieValues.channelKey?!1:(this._SearchCookieValues.detailIndex=i,this._SearchCookieValues.page=r,this.BuildSearchCookie(),Report(t,u),f!=undefined&&document.all)?(window.location.href=f,!1):!0},ShowDrivingDirections:function(){var n="//maps.google.com/maps?",t=[];gts.$(".direction-input").each(function(){if(typeof this.name=="undefined")return!0;t.push(this.name+"="+this.value)});n+=t.join("&");window.open(n)},GoPge:function(n,t,i){this._SearchCookieValues.page=t;this._SearchCookieValues.seoQuery=n;this._SearchCookieValues.detailIndex=i;this.BuildSearchCookie()},Ck:function(n,t){this._SearchCookieValues.page=n;this._SearchCookieValues.detailIndex=t;this.BuildSearchCookie()}};;;;function MortgageCalc(n,t){var i=t===RenoChannelType.BuildingsCommunities?"communitymortgagecalculator":"listingmortgagecalculator",r=SEOService.AddMandatoryUrlParts(String.Format("/widget/nowrapper/{0}/modal",i));ShowDialogPost(r,{listingid:n,channel:t})}function EmailBroker(n,t,i){EmailAgent(n,"broker",t,null,null,i)}function EmailAgent(n,t,i,r,u,f,e,o){var s,h,l,a,v,y,p;t=t.toLowerCase();typeof r=="undefined"?r=WindowOpenMode.Modal:r!==WindowOpenMode.NewWindow&&r!==WindowOpenMode.Modal&&r!==WindowOpenMode.Append&&(r=WindowOpenMode.Modal);s="";typeof u!="undefined"&&u!==null&&u!==""&&(s=String.Format("/config-layout({0})",u));h={idrecord:gts.$.isArray(n)?n.join(","):n,email_agent_referrer:location.href,channel:f};switch(r){case WindowOpenMode.NewWindow:l=SEOService.AddMandatoryUrlParts(String.Format("/widget/{0}emailagent{1}/show",t,s));h.email_agent_referrer=escape(h.email_agent_referrer);ShowDialogNewWindow(l,h);break;case WindowOpenMode.Redirect:s===""&&(s="/config-layout(default)");a=SEOService.AddMandatoryUrlParts(String.Format("/widget/{0}emailagent{1}/show?email_agent_referrer={2}&idrecord={3}",t,s,escape(h.email_agent_referrer),h.idrecord));location.href="/"+SEOService.TrimSlashes(a);break;case WindowOpenMode.Append:var w=SEOService.AddMandatoryUrlParts(String.Format("/widget/nowrapper/{0}emailagent{1}",t,s)),c=gts.$(".js-append-contact"),b=gts.$(".js-email-agent");if(c.hasClass("is-expanded"))return;c.addClass("is-loading");v=function(n){b.append(n);gts.$(".js-append-content-container").removeClass("u-hide").addClass("is-expanded");c.removeClass("is-loading").addClass("is-expanded");gts.$(document).trigger("ContactFormAttached"+RenoEventsNS+"."+o)};gts.$.post(w,h,v);break;default:y=SEOService.AddMandatoryUrlParts(String.Format("/widget/nowrapper/{0}emailagent{1}/show/modal",t,s));p=function(){var t=".EmailAgent",i="SendAgentEmailModule",r=i+"_ModuleLoaded",n=i+"_SetEmailAgentIndex",u="ContactInfoModule_SelectAgent";if(gts.$("#simplemodal-data :input").blur(),gts.$(".simplemodal-wrap").css("width",gts.$("#simplemodal-container").width()+"px"),gts.$(document).trigger("ModalOpened_"+RenoEventsNS,{module:this,modal:"EmailDealer"}),gts.$(document).trigger("ContactFormAttached"+RenoEventsNS+"."+o),"undefined"!=typeof e)if(typeof gts.$(document).data("events")[u]!="undefined"&&gts.$(document).trigger(u,{indexAgent:e}),"undefined"!=typeof gts.$(document).data("events")[n])gts.$(document).trigger(n+RenoEventsNS+"."+o,{index:e});else gts.$(window).on(r+t+RenoEventsNS,function(){gts.$(document).trigger(n+RenoEventsNS,{index:e});gts.$(window).off(r+t+RenoEventsNS)})};ShowDialogPost(y,h,p)}}function EmailFriend(n,t,i,r){t=t.toLowerCase();var u={idrecord:n,email_friend_referrer:escape(location.href),channel:r},f=SEOService.AddMandatoryUrlParts(String.Format("/widget/nowrapper/{0}emailfriend/show/modal",t));ShowDialogPost(f,u)}function SendToCell(n,t,i){var r,u,f;typeof t=="undefined"&&(t=RecordType.Listing);switch(t){case RecordType.Listing:r="listingsendtocell";break;case RecordType.Community:r="communitysendtocell"}u={idrecord:n,channel:i};f=SEOService.AddMandatoryUrlParts(String.Format("/widget/nowrapper/{0}/show/modal",r));ShowDialogPost(f,u)}function SendOpenHouseCalendar(n,t,i="default"){var r={idrecord:n,channel:t},u=SEOService.AddMandatoryUrlParts(`widget/nowrapper/openhousecalendarwidget/${i}-layout`);ShowDialogPost(u,r)}function EmbedVOD(n,t,i,r,u,f,e,o){(o===undefined||o===null)&&(o={});var s=_.extend({},o,{pathToXmlData:u,width:t,height:i,autoplay:f});gts.$("#"+n).vodPlayer(s);return}function VideoOnDemand(n,t){var r=Math.floor(Math.random()*1e6),i=String.Format("vodcontent-{0}-uid-{1}",n,r),u="<br/><div style='height:250px' id='"+i+"'><\/div>",f=typeof t!="undefined"?"&channel="+t:"";gts.$.modal(u,{minWidth:320,onShow:function(){var t="300",r="250",u=SEOService.AddMandatoryUrlParts(String.Format("/reno/vod/videoondemand/getslideshow.ashx?lid={0}&width={1}&height={2}{3}"),n,t,r,f);EmbedVOD(i,t,r,!1,u,!0)},onClose:function(){gts.$("#"+i).vodPlayer("stop");gts.$.modal.close()}})}function FeaturedAgentVOD(n,t,i,r,u){var f="100%",e="238";gts.$("#listingsresult #"+n).parent().hasClass("count_1")||gts.$("#listingsresult #"+n).parents(".hlisting").parent().hasClass("count_1")?(f="100%",e="238"):gts.$("#listingsresult #"+n).parent().hasClass("count_2")||gts.$("#listingsresult #"+n).parents(".hlisting").parent().hasClass("count_2")?(f="100%",e="180"):(gts.$("#listingsresult #"+n).parent().hasClass("count_3")||gts.$("#listingsresult #"+n).parents(".hlisting").parent().hasClass("count_3"))&&(f="100%",e="127");var o=typeof r!="undefined"?"&clicktocall="+r:"",s=typeof u!="undefined"?"&channel="+u:"",h=SEOService.AddMandatoryUrlParts(String.Format("/reno/vod/featuredagent/getslideshow.ashx?lid={0}&width={1}&height={2}{3}{4}",t,f,e,o,s));EmbedVOD(n,f,e,!1,h,!1,i)}function FeaturedListingVOD(n,t,i,r){var u="100%",f="238";gts.$("#listingsresult #"+n).parent().hasClass("count_1")?u="100%":gts.$("#listingsresult #"+n).parent().hasClass("count_2")?(u="100%",f="180"):gts.$("#listingsresult #"+n).parent().hasClass("count_3")&&(u="100%",f="127");var e=typeof i!="undefined"?"&clicktocall="+i:"",o=typeof r!="undefined"?"&channel="+r:"",s=SEOService.AddMandatoryUrlParts(String.Format("/reno/vod/featuredlisting/getslideshow.ashx?lid={0}&width={1}&height={2}{3}{4}",t,u,f,e,o));EmbedVOD(n,u,f,!0,s,!1)}function RequestBrochure(n,t){var i=SEOService.AddMandatoryUrlParts(String.Format("/widget/nowrapper/sendbrochureemail/{0}/{1}",n,t));ShowDialog(i)}var EmbeddedVideoOnDemand=function(){var t={ContainerSelector:undefined,ListingId:null,IsFeaturedListing:"false",Autoplay:"true",playSound:!0,Width:680,Height:510,ContainerId:"vod-player",CloseButtonId:"vod-close",CloseButtonText:"Close",ShowCloseButton:!1},n=this;n.initialized=!1;n.Options=t;n.ParentContainer=gts.$("body");n.Container=null;n.VodContainer=null;n.CloseButton=null;n.Initialize=function(t){typeof t.ContainerSelector!="undefined"&&(n.ParentContainer=gts.$(t.ContainerSelector));typeof t!="undefined"&&gts.$.extend(n.Options,t);n.InitContainers();n.EmbedVOD();n.BindToEvents();n.initialized=!0};n.InitContainers=function(){var t=String.Format('<span id="{0}"><span id="icon"><\/span>{1}<\/span>',n.Options.CloseButtonId,n.Options.CloseButtonText),i=String.Format('<span id="vod-container" class="vod-container"><span id="vod-container-background"/><span id="{0}" class="js-vod-player" />{1}<\/span>',n.Options.ContainerId,n.Options.ShowCloseButton?t:"");n.Container=gts.$(i);n.VodContainer=gts.$("#"+n.Options.ContainerId,n.Container);n.Options.ShowCloseButton&&(n.CloseButton=gts.$("#"+n.Options.CloseButtonId,n.Container));n.ParentContainer.prepend(n.Container)};n.EmbedVOD=function(){var t=SEOService.AddMandatoryUrlParts(String.Format("/reno/vod/videoondemand/getslideshow.ashx?lid={0}&width={1}&height={2}&channel={3}",n.Options.ListingId,n.Options.Width,n.Options.Height,n.Options.channel));EmbedVOD(n.Options.ContainerId,n.Options.Width,n.Options.Height,n.Options.IsFeaturedListing,t,n.Options.Autoplay,null,n.Options)};n.Destroy=function(){n.Container.remove();n.initialized=!1};n.BindToEvents=function(){n.CloseButton!==null&&n.CloseButton.bind("click",function(){n.Destroy()})}};;;;function BannerModuleBase(){ModuleBase.call()}BannerModuleBase.prototype=new ModuleBase;BannerModuleBase.prototype._OnInitialize=function(){this._InitializeSmartImages()};BannerModuleBase.prototype._InitializeSmartImages=function(){var n=this._XSLParams.UseImageBestFit;isResponsive||(n=!1);gts.$("#"+this._XSLParams.ModuleId).find(".js-smartimage").smartImage({useLazyLoad:this._XSLParams.UseImageLazyLoading,useBestFit:this._XSLParams.UseImageBestFit,alwaysFill:n})};;;;function RecordInfoModuleBase(){ModuleBase.call()}RecordInfoModuleBase.prototype=new ModuleBase;;;;function LogoModule(){RecordInfoModuleBase.call()}LogoModule.prototype=new RecordInfoModuleBase;LogoModule.prototype._OnInitialize=function(){this._InitializeSmartImages()};LogoModule.prototype._InitializeSmartImages=function(){gts.$(".js-smartimage",this._ModuleEle).smartImage({useLazyLoad:!1})};;;;function PhotoModule(){RecordInfoModuleBase.call()}PhotoModule.prototype=new RecordInfoModuleBase;PhotoModule.prototype._OnInitialize=function(){this._InitializeSmartImages()};PhotoModule.prototype._InitializeSmartImages=function(){gts.$(".js-smartimage",this._ModuleEle).smartImage({useLazyLoad:this._XSLParams.UseImageLazyLoading,useBestFit:this._XSLParams.UseImageBestFit,alwaysFill:this._XSLParams.UseImageBestFit,verticalAlign:this._XSLParams.UseImageBestFit})};;;;(function(n){"use strict";var t=[];n.widget("gts.expandableBox",{defaults:{maxHeight:170,safetyOffset:20,expandedClass:".is-fully-visible",actionSelector:".js-expander-handle",expandableSelector:".js-expander-text",wrapperSelector:".js-expander-content"},_create:function(){var n=this;return n.configuration={},n.options=_.extend({},n.defaults,n.options),t.push(n),n.containerEle=gts.$(n.element),n._initializeContainerBreakpoints(),n._allowCotentToExpand(),n._bindToContainerBreakpointsChange(),n},_initializeContainerBreakpoints:function(){var t=n("body");typeof t.containerBreakpoints!="undefined"&&t.containerBreakpoints()},_bindToContainerBreakpointsChange:function(){var t=this;n("body").off("changeBreakpoint.containerBreakpoints."+this.widgetName+RenoEventsNS).on("changeBreakpoint.containerBreakpoints."+this.widgetName+RenoEventsNS,function(){t._allowCotentToExpand()})},_allowCotentToExpand:function(){var t=this,i=t.options.maxHeight+t.options.safetyOffset;gts.$(t.options.wrapperSelector,t.containerEle).each(function(){var r=n(this).find(t.options.expandableSelector).outerHeight();i<=r?n(this).removeClass(t.options.expandedSelector).next(t.options.actionSelector).removeClass("u-hide"):n(this).addClass(t.options.expandedSelector).next(t.options.actionSelector).addClass("u-hide")})}})})(jQuery,jQuery);;;;function ProfileModule(){RecordInfoModuleBase.call()}ProfileModule.prototype=new RecordInfoModuleBase;ProfileModule.prototype._OnInitialize=function(){this._InitializeExpandableBox()};ProfileModule.prototype._InitializeExpandableBox=function(){gts.$(this._ModuleEle).expandableBox()};;;;(function(n){function t(){this.el=null;this.o={};this.d=n("<div id='overlay-div'><\/div>")}n.fn.overlay=function(i){n.each(this,function(r,u){var f=new t;f.init(i,u);n.overlay.objList.push(f)})};n.overlay=function(i){var r=new t;return r.init(i),n.overlay.objList.push(r)};n.overlay.die=function(){n.each(n.overlay.objList,function(n,t){t.r()})};n.overlay.defaults={color:"#fff",opacity:.8,loading:!1,esc:!1,fade:!1,fixedSize:!1};n.overlay.objList=[];t.prototype.dim=function(){var t="100%",i="100%";this.fixedSize&&(t=n(this.el).width(),i=this.el.tagName=="BODY"?n(window).height():n(this.el).height());this.d.css({height:i,width:t})};t.prototype.init=function(t,i){this.el=i?i:document.body;var r=this,u=i?"absolute":"fixed";return r.o=n.extend({},n.overlay.defaults,t),this.dim(),r.o.fade&&typeof r.o.fade=="number"?this.d.appendTo(this.el).hide().css({"z-index":"100",backgroundColor:r.o.color,position:u,top:0,left:0}).fadeTo(r.o.fade,r.o.opacity):this.d.appendTo(this.el).css({"z-index":"100",backgroundColor:r.o.color,opacity:r.o.opacity,position:u,top:0,left:0}),r.o.loading&&typeof r.o.loading=="string"&&(this.l=n("<img />"),this.l.load(function(){var n=(r.d.height()-this.height)/2,t=(r.d.width()-this.width)/2;r.l.appendTo(r.el).css({"z-index":"200",position:u,top:n,left:t})}),this.l.attr("src",""),this.l.attr("src",r.o.loading)),r.o.esc&&typeof r.o.esc=="boolean"&&n(document).bind("keydown.overlay",function(n){n.keyCode==27&&r.r()}),n(window).bind("resize.overlay",function(){r.dim()}),n(this.el)};t.prototype.ub=function(){n(document).unbind("keydown.overlay");n(window).unbind("resize.overlay")};t.prototype.r=function(){var n=this;this.d.remove();n.o.loading&&this.l.remove();this.ub()}})(gts.jQuery);;;;var SendAgentEmailReporter=Class.create({initialize:function(n){this._responseCode=n.responseCode;this._recordReportDatas=n.recordReportDatas;this._sendStatusReportDatas=n.sendStatusReportDatas;this._recipientDatas=n.recipientDatas;this._reportDataEmail=typeof n.reportDataEmail!="undefined"?n.reportDataEmail:"";this._postParameters=n.postParameters;this._userPhone=n.userPhone;this._emailReportEventName=n.emailReportEventName;this._emailSuccessReportEventName="RE.EmailAgentSentReport.EmailAgentSentReport";this._emailFailedReportEventName="RE.EmailAgentSentReport.FailedEmailAgentSentReport";this._emailsSpamReportEventName="RE.BlockedEmailSendReport.BlockedEmailAgent"},DoReport:function(){if(this._responseCode==="success"){this._OnSuccesfulResponseCode();return}this._OnNonSuccesfulResponseCode()},_OnSuccesfulResponseCode:function(){this._DoReportFromRecordDatas();this._DoReportFromSendStatusReportDatas(this._emailSuccessReportEventName,{phone:this._userPhone,propertytour:this._postParameters.email_agent_appointment_type})},_OnNonSuccesfulResponseCode:function(){(this._responseCode==="ipisinspamlist"||this._responseCode==="emailisinspamlist")&&this._DoReportFromSendStatusReportDatas(this._emailsSpamReportEventName,{ResponseCode:this._responseCode,PostParams:this._postParameters});this._DoReportFromSendStatusReportDatas(this._emailFailedReportEventName,{ResponseCode:this._responseCode,PostParams:this._postParameters})},_DoReportFromRecordDatas:function(){var n=this;gts.$(this._recordReportDatas).each(function(t,i){n._DoReportFromRecordData(i.recordid,i.reportdata,i.extraParams)})},_DoReportFromRecordData:function(n,t,i){if(typeof n!="undefined"){var r=gts.$(this._recipientDatas).find("recipientinfo").filter(function(t,i){return gts.$(i).find("recordid").text()===n}),u=gts.$(r).find("recipientrecordtype").text(),f=u==="Brokers"?"email-office":"email-agent";(typeof i=="undefined"||i===null)&&(i={});DoReport(t,this._emailReportEventName,{destination:f,email:this._reportDataEmail,address:i.address,addrdisplay:i.addrdisplay,brokerid:i.brokerid,mlsid:i.mlsid,idclient:i.idclient,brokername:i.brokername,agentname:i.agentname,webid:i.webid})}},_DoReportFromSendStatusReportDatas:function(n,t){typeof this._sendStatusReportDatas!="undefined"&&gts.$(this._sendStatusReportDatas).each(function(i,r){DoReport(r.reportdata,n,gts.$.extend({},r.extraParams,t))})}});;;;function SendAgentEmailModuleBase(){this._XSLParams=undefined;this._ModuleEle=undefined;this.Id=undefined;this.Initialize=function(n){var t=this;if(log.debug("SendAgentEmailModule.Initialize"),$("#ui-datepicker-div")&&$("#ui-datepicker-div").remove(),t._XSLParams=n,t.Id=t._XSLParams.ModuleId,t._ModuleEle=gts.$("#"+t.Id),t._XSLParams.ModuleLayout!=="buttonwithappend"&&t._XSLParams.ModuleLayout!=="buttonwithmodal"){t.BindToEvents();t._OnInitialize();return}gts.$(document).off("ContactFormAttached"+RenoEventsNS+"."+t.Id).on("ContactFormAttached"+RenoEventsNS+"."+t.Id,function(){t._XSLParams.ModuleLayout==="buttonwithappend"&&(gts.hasTouch()&&(gts.lockHeadroom(),gts.$("body").attr("data-has-pinned","true")),gts.$("body").addClass("no-scroll  contact-flyout-expanded"),t._getVisibleSpaceHeight(),t._radioButtonsShowHide(gts.$("#"+t.Id)),t._bindToBreakpointChange());t.BindToEvents();t._OnInitialize()})};this._OnInitialize=function(){gts.$(window).trigger("SendAgentEmailModule_ModuleLoaded"+RenoEventsNS,{module:this})};this.InitializeInput=function(n){var t=String.Format("{0}{1}",this._XSLParams.FieldIdPrefix,n),i=gts.$("#"+n).val();gts.$("#"+t).attr("allowdefault",!1).prop("defaultValue",i).val(i);window[t]=new textUI("#"+t)};this.BindToEvents=function(){var n=this,e=gts.$(".js-icon-close",n._ModuleEle),r=gts.$(String.Format("#{0}agentindex",n._XSLParams.FieldIdPrefix),gts.$(n._XSLParams.FormSelector)),o=gts.$(".js-date-range-show",n._ModuleEle),u,f,t,i;if(gts.$(document).off(RenoEventsNS+"."+n.Id),gts.$(".js-realtor-channel, .js-realtor-soldsendertype",n._ModuleEle).selectBoxIt({similarSearch:!0,autoWidth:!1,createPlaceholders:!0}),gts.$(".js-realtor-email-agent__header",n._ModuleEle).find(".js-smartimage").smartImage({useLazyLoad:!0,useBestFit:!0,alwaysFill:!0}),n._BindToFormSubmitEvent(),n._XSLParams.OpenedInModalDialog)gts.$(document).trigger("ContactInfoModule_SetEmailAgentIndex"+RenoEventsNS,{inputToUpdate:r});else gts.$(document).on("SendAgentEmailModule_SetEmailAgentIndex"+RenoEventsNS+"."+n.Id,function(n,t){r.val(t.index)});gts.$(document).on(RenoEvent.SignIn+RenoEventsNS+"."+n.Id,function(t,i){gts.$(String.Format("#{0}user_name",n._XSLParams.FieldIdPrefix),gts.$(n._XSLParams.FormSelector)).val(i.find("username").text());gts.$(String.Format("#{0}user_email",n._XSLParams.FieldIdPrefix),gts.$(n._XSLParams.FormSelector)).val(i.find("email").text());gts.$(String.Format("#{0}user_phone",n._XSLParams.FieldIdPrefix),gts.$(n._XSLParams.FormSelector)).val(i.find("phone").text());gts.$("label.error").hide();gts.$(".error").removeClass("error")});gts.$(document).on(RenoEvent.SignOut+RenoEventsNS+"."+n.Id,function(){gts.$("#gts-inputs").length>0?(n.InitializeInput("user_name"),n.InitializeInput("user_email"),n.InitializeInput("user_phone")):(gts.$(String.Format("#{0}user_name",n._XSLParams.FieldIdPrefix),gts.$(n._XSLParams.FormSelector)).val(""),gts.$(String.Format("#{0}user_email",n._XSLParams.FieldIdPrefix),gts.$(n._XSLParams.FormSelector)).val(""),gts.$(String.Format("#{0}user_phone",n._XSLParams.FieldIdPrefix),gts.$(n._XSLParams.FormSelector)).val(""))});gts.$(document).off("ContactFormAttached"+RenoEventsNS+"."+n.Id).on("ContactFormAttached"+RenoEventsNS+"."+n.Id,function(){n._XSLParams.ModuleLayout==="buttonwithappend"&&(gts.hasTouch()&&(gts.lockHeadroom(),gts.$("body").attr("data-has-pinned","true")),gts.$("body").addClass("no-scroll  contact-flyout-expanded"),n._getVisibleSpaceHeight(),n._radioButtonsShowHide(gts.$("#"+n.Id)),n._bindToBreakpointChange())});e.off("click.collapseDrawer"+n.Id).on("click.collapseDrawer"+n.Id,function(){n._collapseDrawer()});o.off("click.toggleDateRange"+n.Id).on("click.toggleDateRange"+n.Id,function(){n._switchModalDateType(gts.$("#"+n.Id))});if(u="#"+n._XSLParams.ModuleId+" input[type='text']",f="#"+n._XSLParams.ModuleId+" textarea",gts.jQuery(u+", "+f).each(function(n){var t=this.id===""?n:this.id;window["input_"+t]=new textUI(this)}),t=gts.$(".js-expander-handle",n._ModuleEle),i=gts.$(".js-expander-icon",n._ModuleEle),t.length>0){t.off("gtsExpandableBoxToggled"+RenoEventsNS+"."+n._XSLParams.ModuleId).on("gtsExpandableBoxToggled"+RenoEventsNS+"."+n._XSLParams.ModuleId,function(r){r.preventDefault();r.stopPropagation();var u=$(".js-datetimepicker",n._ModuleEle);if(u&&n._HideCollapsableArea(u),gts.$(document).trigger("expanded.toggleSticky",[t.hasClass("is-expanded")]),!gts.$(this).hasClass("is-expanded")){i.removeClass("icon-mail");return}i.addClass("icon-mail");n._CreateRecaptcha()});t.hasClass("is-expanded")&&(i.addClass("icon-mail"),n._CreateRecaptcha())}else n._CreateRecaptcha()};this._radioButtonsShowHide=function(n){var i=this,t=gts.$(".js-datetimepicker",n);gts.$(".js-email-agent-radio",n).off("change.emailAgentRadioButton"+i.Id).on("change.emailAgentRadioButton"+i.Id,function(){t.is(":visible")?t.first().slideUp():t.first().slideDown();t.find(".js-appointment-type-radio").prop("checked",!1);gts.$(".js-email-agent-input",n).val(gts.$('input[type="radio"]:checked + .js-email-agent-label-text').text().trim())})};this._switchModalDateType=function(n){gts.$(".date-single",n).toggle();gts.$(".date-range",n).toggle()};this._bindToBreakpointChange=function(){var n=this;gts.$("body").off("changeBreakpoint.containerBreakpoints.setHeight"+n.Id).on("changeBreakpoint.containerBreakpoints.setHeight"+n.Id,function(){n._getVisibleSpaceHeight()})};this._getVisibleSpaceHeight=function(){var n=typeof gts.gtsGetViewportInfo=="function"?gts.gtsGetViewportInfo().height:gts.$(window).height(),t=n-gts.$(".js-header").outerHeight()-gts.$(".js-sub-header").outerHeight(),i=gts.$(".js-listing-contact-container");i.css("max-height",t)};this._collapseDrawer=function(){gts.$(".js-append-content-container").removeClass("is-expanded");gts.$("body").removeClass("no-scroll  contact-flyout-expanded");gts.$(".js-append-contact").removeClass("is-expanded");gts.$(".js-email-agent").html("");gts.hasTouch()&&gts.unlockHeadroom()};this._BindToFormSubmitEvent=function(){var n=this;gts.$(n._XSLParams.FormSelector).on("submit"+RenoEventsNS+"."+n.Id,function(){return n.Send(),!1})};this._CreateRecaptcha=function(){var n,t;UseRecaptcha&&(n=gts.$("#"+this._XSLParams.ModuleId+"_captcha"),n.length>0&&(t=RecaptchaHandler.GetResponse(n),t||(this._XSLParams.RealtorLeadEnabled?RecaptchaHandler.CreateRecaptcha(n,undefined,{customMessage:'This site is protected by reCAPTCHA and the Google <a href="https://policies.google.com/privacy">Privacy Policy<\/a> and <a href="https://policies.google.com/terms">Terms of Service<\/a> apply. By proceeding, you consent to receive calls, texts and voicemails at the number you provided (may be recorded and may be autodialed and use prerecorded and artificial voices), and email, from CityHomes, Opcity, realtor.com and their network of service providers about your inquiry and other home-related matters. Msg/data rates may apply. This consent applies even if you are on a do not call list and is not a condition of any purchase.'}):RecaptchaHandler.CreateRecaptcha(n))))};this.SetValidateRules=function(n){var t=this,i;t._AddNoEmptyCheckToValidator();i={ignore:[],rules:n,showErrors:function(){this.defaultShowErrors()}};$(t._XSLParams.FormSelector).validate(gts.$.extend({},defaultValidationSettings,i))};this._AddNoEmptyCheckToValidator=function(){log.debug("SendAgentEmailModule._AddNoEmptyCheckToValidator");var n=this;typeof $.validator.methods.noEmpty!="function"&&$.validator.addMethod("noEmpty",function(t,i){if(n._IETrim(t).length<=0)return!1;var r=$(i).attr("allowdefault");return(r=!(typeof r=="undefined"||r==null||r==="false"),i.defaultValue!==t||r)?!0:!1},"This field is required")};this._IETrim=function(n){return n.replace(/[\s\xA0]+/g,"")};this.Send=function(){var n,t,r,i;(log.debug("SendAgentEmailModule.Send"),n=this,t=gts.$(n._XSLParams.FormSelector),t.validate().form())&&(typeof t.overlay=="function"&&t.overlay(),r=SEOService.AddMandatoryUrlParts(String.Format("/widget/nowrapper/{0}/send/xml-out",n._XSLParams.EmailModule)),i=n.GetPostParameters(t),UseRecaptcha&&(i["g-recaptcha-response"]=RecaptchaHandler.GetResponse(t)),gts.$.post(r,i,function(t,r){var u,f;r.toLowerCase()==="success"&&(u=gts.$(t).find("emailmodule > responsecode").text(),u==="recaptchaerror"?n._OnEmailSentRecaptchaError(t):(f=new SendAgentEmailReporter({responseCode:u,recordReportDatas:gts.$(t).find("recordreportdatas recordreportdata").map(function(){var n=gts.$(this).attr("recordid");return{recordid:n,reportdata:$(this).text(),extraParams:typeof ListingReportingExtraParams!="undefined"?ListingReportingExtraParams[n]:{}}}),sendStatusReportDatas:gts.$(t).find("leadstatusreportdatas > leadstatusreportdata").map(function(){var t=gts.$(this).attr("recordid"),n=typeof ListingReportingExtraParams!="undefined"?ListingReportingExtraParams[t]:{};return typeof n!="undefined"&&(n.receiptId=gts.$(this).attr("receiptid")),{recordid:t,reportdata:$(this).text(),extraParams:n}}),recipientDatas:gts.$(t).find("recipientinfos"),reportDataEmail:gts.$(t).find("recipientinfos").find("agentemail").text(),postParameters:i,userPhone:i.email_agent_user_phone,emailReportEventName:n._XSLParams.EmailReportEventName}),f.DoReport(),u==="success"&&typeof EmailSubmissionConfirmationPageUrl!="undefined"&&EmailSubmissionConfirmationPageUrl!=""?window.location.href=SEOService.AddMandatoryUrlParts(EmailSubmissionConfirmationPageUrl):n._OnEmailSentSetResponseMessageToUi(t),gts.$(document).trigger("SendAgentEmailModule_EmailSent"+RenoEventsNS)));gts.$.overlay.die()},"xml"))};this._OnEmailSentRecaptchaError=function(n){var t=gts.$("#"+this._XSLParams.ModuleId+"_captcha_message");t.show();t.attr("class","error");t.text(gts.$(n).find("emailmodule > responsemessage").text());RecaptchaHandler.ReinitializeAllCaptchasInContainer(this._ModuleEle)};this._OnEmailSentSetResponseMessageToUi=function(n){var t=gts.$(this._XSLParams.ResponseTargerSelector),i=gts.$(n).find("emailmodule > responsemessage").text();t.addClass("modal__response-message");t.html(i);gts.$(n).find("input[type=button], button").length||CloseDialog(5e3)};this.GetPostParameters=function(n){var t=this,u="",f=gts.$(String.Format("#{0}date",t._XSLParams.FieldIdPrefix),n).val(),i,r,e;return typeof f!="undefined"&&f!==""&&(u=f),i=gts.$(String.Format("#{0}date_from",t._XSLParams.FieldIdPrefix),n).val(),r=gts.$(String.Format("#{0}date_to",t._XSLParams.FieldIdPrefix),n).val(),(typeof i!="undefined"&&i!==""||typeof r!="undefined"&&r!=="")&&(u=i+" - "+r),e=gts.$(".js-appointment-type-radio:checked",n).val(),{a:1,idrecord:gts.$(String.Format("#{0}idrecord",t._XSLParams.FieldIdPrefix),n).val(),email_agent_agentindex:gts.$(String.Format("#{0}agentindex",t._XSLParams.FieldIdPrefix),n).val(),email_agent_user_name:gts.$(String.Format("#{0}user_name",t._XSLParams.FieldIdPrefix),n).val(),email_agent_user_email:gts.$(String.Format("#{0}user_email",t._XSLParams.FieldIdPrefix),n).val(),email_agent_user_phone:gts.$(String.Format("#{0}user_phone",t._XSLParams.FieldIdPrefix),n).val(),email_agent_user_pref_contact:gts.$(String.Format("#{0}user_pref_contact",t._XSLParams.FieldIdPrefix),n).val(),email_agent_user_message:gts.$(String.Format("#{0}user_message",t._XSLParams.FieldIdPrefix),n).val(),email_agent_appointment_type:e?e:"",email_agent_date:u,email_agent_time:gts.$(String.Format("#{0}time",t._XSLParams.FieldIdPrefix),n).val(),email_agent_date2:gts.$(String.Format("#{0}date2",t._XSLParams.FieldIdPrefix),n).val(),email_agent_time2:gts.$(String.Format("#{0}time2",t._XSLParams.FieldIdPrefix),n).val(),email_agent_date3:gts.$(String.Format("#{0}date3",t._XSLParams.FieldIdPrefix),n).val(),email_agent_time3:gts.$(String.Format("#{0}time3",t._XSLParams.FieldIdPrefix),n).val(),from:gts.$(String.Format("#{0}date_from",t._XSLParams.FieldIdPrefix),n).val(),to:gts.$(String.Format("#{0}date_to",t._XSLParams.FieldIdPrefix),n).val(),email_agent_referrer:window.location.href,channel:t._XSLParams.Channel,email_agent_custom_fields:t.GetCustomFieldsParameterXml(n),email_agent_realtor_channel:gts.$(String.Format("#{0}realtor_channel",t._XSLParams.FieldIdPrefix),n).val(),email_agent_realtor_soldsendertype:gts.$(String.Format("input[name={0}realtor_soldsendertype]:checked",t._XSLParams.FieldIdPrefix),n).val(),trustedFormCertUrl:gts.$("input[name='xxTrustedFormCertUrl']",n).val(),referrerPageType:gts.$("body").attr("pagetype")}};this.GetCustomFieldsParameterXml=function(n){var i=this,t="<fields>";return gts.$(String.Format('[id^="{0}custom_"]',i._XSLParams.FieldIdPrefix),n).each(function(){var n=gts.$(this);t+=String.Format('<field name="{0}"><title>{1}<\/title><value>{2}<\/value><\/field>',n.attr("name"),n.attr("aria-label"),n.val())}),t+="<\/fields>"};this.CreateDateTimePicker=function(n){var i,t;log.debug("SendAgentEmailModule.CreateDateTimePicker");i=this;n=String.Format("#{0}{1}",i._XSLParams.FieldIdPrefix,n);t=$(String.Format("{0} {1}",i._XSLParams.FormSelector,n));typeof gts.deviceIs=="undefined"||gts.deviceIs.iOS||typeof gts.deviceIs!="undefined"&&gts.deviceIs.android?$(".datepicker",t).attr("type","date").addClass("datetime-picker--native"):($(".datepicker",t).datepicker({minDate:0}),gts.$(".hasDatepicker").each(function(){var n=gts.$(this);n.datepicker("hide");n.on("blur",function(){setTimeout(function(){n.is(":focus")||n.datepicker("hide")},250)})}));$(".js-view-toggle",t).off("click"+RenoEventsNS);$(".js-view-toggle",t).on("click"+RenoEventsNS,function(){var r=$(".js-collapsable",t),u=r.parents(".js-expandable"),n=u.find(".js-expander-handle");u&&n.length>0&&!n.hasClass("is-expanded")&&n.trigger("click");r.is(":hidden")?i._ShowCollapsableArea(t):i._HideCollapsableArea(t)});gts.$(".js-appointment-type-radio",t).off("change.appointmentTypeRadioButton"+i.Id).on("change.appointmentTypeRadioButton"+i.Id,function(){gts.$(".js-collapsable",t).is(":hidden")&&i._ShowCollapsableArea(t)});gts.$(".js-appointment-type-label",t).off("click"+RenoEventsNS).on("click"+RenoEventsNS,function(){gts.$(".js-collapsable",t).is(":hidden")&&i._ShowCollapsableArea(t);$(this).prev().prop("checked",!0)});$(".hasDatepicker").click(function(){$("#ui-datepicker-div").css("z-index",$(".c-modal").css("z-index")+9)})};this._IsMeetingDataValid=function(n){if(n.length===0)return!0;var r=n.find(".datepicker").val()!=="",u=n.find("select.js-time-select").val()!=="",t=n.find(".js-appointment-type-radio"),i=t.length===0||t.is(":checked"),f=r&&u&&i;return f?(n.find(".js-meetingerror").remove(),!0):(n.find(".js-meetingerror").length===0&&(i?n.append('<div class="grid"><div class="grid__item  default--1-1"><span class="error  js-meetingerror  u-error">Please fill in appointment<\/span><\/div><div>'):n.append('<div class="grid"><div class="grid__item  default--1-1"><span class="error  js-meetingerror  u-error">Please select appointment type<\/span><\/div><div>')),!1)};this._ShowCollapsableArea=function(n){var i=n.prev(".js-datetimepicker"),r=this._IsMeetingDataValid(i),t;r&&(t=$(".js-view-toggle",n),n.find(".js-appointment-type-radio").length===0&&($(".icon",t).removeClass("icon-add"),$(".icon",t).addClass("icon-remove"),$(".js-request-title",n).hide(),$(".js-remove-title",n).show()),$(".js-availability-title",n).show(),this._ClearDateTimePicker(n),$(".js-collapsable",n).show(),n.next(".js-datetimepicker").show(),$(".js-time-select").selectBoxIt({autoWidth:!1}))};this._HideCollapsableArea=function(n){var t=n.next(".js-datetimepicker"),i=$(".js-collapsable",t).is(":hidden"),r;if(!i&&!($("input",t).val()==undefined))while($("input",t).val()!=undefined&&!i)$("input",n).val($("input",t).val()),n=n.next(".js-datetimepicker"),t=t.next(".js-datetimepicker"),i=$(".js-collapsable",t).is(":hidden");r=$(".js-view-toggle",n);n.find(".js-appointment-type-radio").length===0&&($(".icon",r).addClass("icon-add"),$(".icon",r).removeClass("icon-remove"),$(".js-remove-title",n).hide(),$(".js-request-title",n).show());$(".js-availability-title",n).hide();this._ClearDateTimePicker(n);$(".js-collapsable",n).hide();t.hide();t.find(".js-meetingerror").remove();$(".datepicker:visible",this._ModuleEle).length===0&&n.find(".js-appointment-type-radio").prop("checked",!1)};this._ClearDateTimePicker=function(n){$("input:not(.js-appointment-type-radio)",n).val("");$(".selectboxit-option",n).each(function(){$(this).prop("selected",!1)});$(".js-meetingerror",n).remove()};this.Cancel=function(){HideMobileEmailAgentForm()};this.SelectAgent=function(n){gts.$(document).trigger("SendAgentEmailModule_SetEmailAgentIndex"+RenoEventsNS,{index:n})}}function SendAgentEmailModule(){gts.$(window).on("load",function(){SendAgentEmailModuleBase.call()})}SendAgentEmailModule.prototype=new SendAgentEmailModuleBase;;;;function ContactInfoModule(){ModuleBase.call()}ContactInfoModule.prototype=new ModuleBase;ContactInfoModule.prototype._OnInitialize=function(){this._InitializeSmartImages()};ContactInfoModule.prototype._InitializeSmartImages=function(){var n=gts.$("#"+this._XSLParams.ModuleId);gts.$(".js-smartimage",n).smartImage({useLazyLoad:this._XSLParams.UseImageLazyLoading,useBestFit:this._XSLParams.UseImageBestFit,alwaysFill:this._XSLParams.UseImageBestFit,verticalAlign:!1})};;;;function CustomInfoModuleBase(){ModuleBase.call()}CustomInfoModuleBase.prototype=new ModuleBase;;;;var GoogleAPILoaderBase=Class.create({initialize:function(){this._IsLoaded=!1;this._IsLoading=!1;this._Callbacks=[]},ExecuteLoadCallbacks:function(){if(this._IsLoading=!1,this._IsLoaded=!0,this._Callbacks){var n=this;gts.$.each(this._Callbacks,function(t,i){n._ExecuteCallback(i)});this._Callbacks.length=0}},_ExecuteCallback:function(n){typeof n=="function"&&n()},ExecuteOnLoad:function(n){if(typeof n=="function"){if(this._IsLoaded){this._ExecuteCallback(n);return}this._Callbacks.push(n)}},Load:function(n){if(this._IsLoaded){this._ExecuteCallback(n);return}(this.ExecuteOnLoad(n),this._IsLoading)||(this._IsLoading=!0,this._InsertAPIScriptElement())},LoadVisualization:async function(n,t){const i=window.location.protocol+"//www.gstatic.com/charts/loader.js";(typeof google=="undefined"||typeof google.visualization=="undefined")&&await gts.$.getScript(i);google.charts.load("48",{packages:n});typeof t=="function"&&google.charts.setOnLoadCallback(t)},_InsertAPIScriptElement:function(){var n=this._GetAPIUrl();GoogleSignAPICalls?this._CreateSignedAPIScript(n):this._CreateAPIScriptElement(n)},_CreateAPIScriptElement:function(n){var t=document.createElement("script");t.type="text/javascript";t.src=n;document.body.appendChild(t)},_CreateSignedAPIScript:function(n){var t=this;gts.$.ajax({url:"/reno/google/googleurlsigner.ashx",dataType:"jsonp",data:{url:n.seoEncode()},success:function(i){n+="&signature="+i;t._CreateAPIScriptElement(n)}})},_GetAPIUrl:function(){var n="//maps.googleapis.com/maps/api/js?sensor=false&language="+TwoLetterISOLanguageName;return GoogleMapKey!==""&&(n+="&key="+GoogleMapKey),GoogleClientName!==""&&(n+="&client="+GoogleClientName),GoogleMapVersion!==""&&(n+="&v="+GoogleMapVersion),n+="&libraries=drawing,places,geometry",n+="&callback=GoogleMapsAPILoader.ExecuteLoadCallbacks",globalParams.GoogleAPIChannelParameter.trim()!=""&&(n+="&channel="+globalParams.GoogleAPIChannelParameter.replace("{pagetype}",gts.$("body").attr("pageType"))),n}}),GoogleMapsAPILoader,GoogleVisualizationAPILoader;typeof GoogleMapsAPILoader=="undefined"&&(window.GoogleMapsAPILoader=new GoogleAPILoaderBase);GoogleMapsAPILoader=window.GoogleMapsAPILoader;typeof GoogleVisualizationAPILoader=="undefined"&&(window.GoogleVisualizationAPILoader=new GoogleAPILoaderBase);GoogleVisualizationAPILoader=window.GoogleVisualizationAPILoader;;;;function GSize(n,t){this.width=n;this.height=t}function GLatLng(n,t){this.lat=n;this.lng=t}function GLatLngBounds(n,t){this.swLatLng=n;this.neLatLng=t}function CloseGInfoWindow(n){var t=!1,i,r;typeof n.infoWindow=="undefined"&&(t=!0);i={infoWindow:GInfoWindow,oldCenter:GInfoCenter,oldZoom:GInfoZoom};n=gts.$.extend({},i,n);typeof n.map=="undefined"&&(n.map=n.infoWindow.map);r=GInfoWindowCloseServiceProvider.GetService(n.map);r.CloseInfoWindow(n);t&&(GInfoWindow=null)}function GetDefaultMapOptions(n){var t,i;if(log.debug("GetDefaultMapOptions"),t={zoom:8,scrollwheel:!1,mapTypeId:"roadmap",navigationControl:!1,maxZoom:21,minZoom:2,zoomControlOptions:{style:1,position:MapControlPosition.RightBottom},navigationControlOptions:{style:0},mapTypeControl:!1,mapTypeControlOptions:{position:MapControlPosition.TopLeft,style:2},scaleControl:!0,panControl:!1,streetViewControl:!1,streetViewControlOptions:{position:MapControlPosition.RightBottom},fullscreenControl:!1,fullscreenControlOptions:{position:parseInt(MapControlPosition.TopRight)},useCustomControls:!1,controlSize:24,clickableIcons:!1},isResponsive&&typeof n!="undefined"&&n.MapControlPositions!=null&&(n.MapControlPositions.ZoomControl!=MapControlPosition.Hidden?(t.zoomControl=!0,t.zoomControlOptions.position=parseInt(n.MapControlPositions.ZoomControl)):t.zoomControl=!1,n.MapControlPositions.MapTypeControl!=MapControlPosition.Hidden?(t.mapTypeControl=!0,t.mapTypeControlOptions.position=parseInt(n.MapControlPositions.MapTypeControl)):t.mapTypeControl=!1,n.MapControlPositions.StreetViewControl!=MapControlPosition.Hidden?(t.streetViewControl=!0,t.streetViewControlOptions.position=parseInt(n.MapControlPositions.StreetViewControl)):t.streetViewControl=!1),typeof n!="undefined"&&typeof n.MapControlsType!="undefined"&&(t.useCustomControls=n.MapControlsType=="custom"),t.customControls={},t.useCustomControls&&(t.customControls={zoomControl:t.zoomControl,mapTypeControl:t.mapTypeControl,streetViewControl:t.streetViewControl,fullscreenControl:t.fullscreenControl},t.zoomControl=!1,t.mapTypeControl=!1,t.streetViewControl=!1,t.fullscreenControl=!1),typeof n!="undefined"&&n.MapStyles!=null&&(t.styles=JSON.parse(n.MapStyles)),typeof n!="undefined"&&n.MapSettings!=null&&(gts.$.extend(t,JSON.parse(n.MapSettings)),i=t.scrollwheel,i)){gts.$(document).off("MapModule.InfoBubbleDataLoaded"+RenoEventsNS+".customMapSettings").on("MapModule.InfoBubbleDataLoaded"+RenoEventsNS+".customMapSettings",function(n,t){t.map&&t.map.setOptions({scrollwheel:!1})});gts.$(document).off("MapModule.InfoWindowClosed"+RenoEventsNS+".customMapSettings").on("MapModule.InfoWindowClosed"+RenoEventsNS+".customMapSettings",function(n,t){t.map&&t.map.setOptions({scrollwheel:i})})}return t}function Map_clearMarkers(n,t){var r,i;if(n!=null)if(r=n.length,r>0&&r<5e3)for(i=0;i<r;i++)Map_clearMarker(n[i],t);else if(r>0)for(i in n)Map_clearMarker(n[i],t)}function Map_clearMarker(n,t){if(n!=null)try{n.getMap!=undefined&&n.getMap()!=null&&n.setMap(null);t&&typeof n.boundary!="undefined"&&n.boundary.setMap(null);typeof n.locMarkers!="undefined"&&gts.$.each(n.locMarkers,function(n,t){t.setMap(null)})}catch(i){}}var MapControlPosition={Hidden:"-1",BottomCenter:11,BottomLeft:10,BottomRight:12,LeftBottom:6,LeftCenter:4,LeftTop:5,RightBottom:9,RightCenter:8,RightTop:7,TopCenter:2,TopLeft:1,TopRight:3};GSize.prototype.ToGoogleFormat=function(){return new google.maps.Size(this.width,this.height)};GLatLng.prototype.ToGoogleFormat=function(){return new google.maps.LatLng(this.lat,this.lng)};GLatLngBounds.prototype.ToGoogleFormat=function(){return new google.maps.LatLngBounds(this.swLatLng.ToGoogleFormat(),this.neLatLng.ToGoogleFormat())};var GInfoWindow=null,GInfoCenter=null,GInfoZoom=null,GInfoWindowCloseServiceProvider={_services:[],GetService:function(n){var i=this._GetExistingService(n),t;return typeof i!="undefined"?i.service:(t=new GInfoWindowCloseService,this._services.push({map:n,service:t}),t)},_GetExistingService:function(n){return gts.$(this._services).filter(function(){return this.map==n}).get(0)}},GInfoWindowCloseService=Class.create({initialize:function(){},CloseInfoWindow:function(n){typeof n.infoWindow!="undefined"&&n.infoWindow!=null&&(n.infoWindow.close(),typeof n.goToOldPosition=="undefined"&&(n.goToOldPosition=!0),n.goToOldPosition&&typeof n.oldCenter!="undefined"&&n.oldCenter!=null&&n.map.panTo(n.oldCenter),n.goToOldPosition&&typeof n.oldZoom!="undefined"&&n.oldZoom!=n.map.getZoom()&&n.map.setZoom(n.oldZoom),gts.$(document).trigger("MapModule.InfoWindowClosed"+RenoEventsNS,n))}});;;;var CustomMapControls=Class.create({_options:{templates:{iconControl:'<div class="map-control  map-control--{1}"><div title="{0}" class="map-control__button" data-hastooltipster="true" data-tooltipster-position="{3}"><i class="{2}  map-control__icon  js-map-control-icon"><!-- --><\/i><\/div><\/div>',stackedIconControl:'<div class="map-control  map-control--{0}"><div title="{1}" class="map-control__button  js-{2}" data-hastooltipster="true" data-tooltipster-position="{7}"><i class="{3}  map-control__icon  js-map-control-icon"><!-- --><\/i><\/div><div title="{4}" class="map-control__button  js-{5}" data-hastooltipster="true" data-tooltipster-position="{7}"><i class="{6}  map-control__icon  js-map-control-icon"><!-- --><\/i><\/div><\/div>',doubleIconControl:'<div class="map-control  map-control--{1}"><div title="{0}" class="map-control__button" data-hastooltipster="true" data-tooltipster-position="{4}"><i class="{2}  map-control__icon  js-map-control-icon"><!-- --><\/i><i class="{3}  map-control__icon  js-map-control-icon"><!-- --><\/i><\/div><\/div>',textControl:'<div class="map-control map-control--{1}" data-selected="terrain"><div title="{0}" class="map-control__button" data-hastooltipster="true" data-tooltipster-position="{4}"><p class="map-control__label  map-control__label--type  js-map-control-text  u-hide" data-name="terrain">{2}<\/p><p class="map-control__label  map-control__label--type  js-map-control-text" data-name="hybrid">{3}<\/p><\/div><\/div>',imageControl:'<div class="map-control map-control--{0}" data-selected="terrain"><div class="map-control__button"><p title="{3}" class="map-control__label  map-control__label--type  js-map-control-text  u-hide" data-name="terrain" data-hastooltipster="true" data-tooltipster-position="{5}">{1}<\/p><p title="{4}" class="map-control__label  map-control__label--type  js-map-control-text" data-name="hybrid" data-hastooltipster="true" data-tooltipster-position="{5}">{2}<\/p><\/div><\/div>'}},initialize:function(n,t,i){$.isEmptyObject(i)||(this._map=n,this._controlOptions=gts.$.extend({},t.customControls),this._controlOptions.zoomControlOptions=t.zoomControlOptions,this._controlOptions.mapTypeControlOptions=t.mapTypeControlOptions,this._controlOptions.streetViewControlOptions=t.streetViewControlOptions,this._controlOptions.fullscreenControlOptions=t.fullscreenControlOptions,this._controlOptions.customPositionForControls=t.customPositionForControls,this._buildControls())},_changeMapType:function(n){var t=gts.$(n),u=t.attr("data-selected"),i=gts.$(".js-map-control-text",t),r;i.addClass("u-hide");i.filter('[data-name="'+u+'"]').removeClass("u-hide");r=i.filter(".u-hide").attr("data-name");t.attr("data-selected",r);this._map.setMapTypeId(google.maps.MapTypeId[r.toUpperCase()])},_goFullscreen:function(){var n=this._map.getCenter();$(this._map.getDiv()).toggleClass("is-fullscreen");$("body").toggleClass("has-map-fullscreen");google.maps.event.trigger(this._map,"resize");this._map.setCenter(n)},_buildControls:function(){this._controlOptions.customPositionForControls?(this._buildMapTypeControl(),this._buildZoomControls()):(this._buildZoomControls(),this._buildMapTypeControl());this._buildStreetViewControl();this._buildFullScreenControl()},_ApplyZoomControl:function(n,t){var i=this._controlOptions.customPositionForControls,u=this,r,f=u._map.maptoolsontop;return i?t:!i&&(r=!1,!r&&f)?t:n},_buildZoomControls:function(){if(this._controlOptions.zoomControl)var n=this,t=new CustomMapControl({template:[this._options.templates.stackedIconControl,"zoom"+n._isTopControl(this._controlOptions.zoomControlOptions.position),"click to zoom in","zoomIn",this._ApplyZoomControl("icon  icon-zoomin","icon  icon-zoomin-slim"),"click to zoom out","zoomOut",this._ApplyZoomControl("icon  icon-zoomout","icon  icon-zoomout-slim")],position:this._controlOptions.zoomControlOptions.position,action:{zoomIn:function(){n._map.setZoom(n._map.getZoom()+1)},zoomOut:function(){n._map.setZoom(n._map.getZoom()-1)}},map:this._map})},_buildMapTypeControl:function(){if(this._controlOptions.mapTypeControl)var n=this,t=[this._options.templates.textControl,"click to change map type","change-map-type"+n._isTopControl(this._controlOptions.mapTypeControlOptions.position),"MAP","Satellite"],i=[this._options.templates.imageControl,"change-map-type"+n._isTopControl(this._controlOptions.mapTypeControlOptions.position),'<img src="'+StaticResources+'/_responsive/images/common/map-terrain.png" class="map-type-switch"/>','<img src="'+StaticResources+'/_responsive/images/common/map-satellite.png" class="map-type-switch"/>',"Switch to Terrain View","Switch to Satellite View"],r=new CustomMapControl({template:this._ApplyZoomControl(t,i),position:this._controlOptions.mapTypeControlOptions.position,action:function(t){n._changeMapType(t)},map:this._map})},_buildStreetViewControl:function(){if(this._controlOptions.streetViewControl)var n=this,t=new CustomMapControl({template:[this._options.templates.iconControl,"go to street view","street-view"+n._isTopControl(this._controlOptions.streetViewControlOptions.position),"icon  icon-street-view"],position:this._controlOptions.streetViewControlOptions.position,action:function(){n._map.getStreetView().setVisible(!1)},map:this._map})},_buildFullScreenControl:function(){if(this._controlOptions.fullscreenControl)var n=this,t=new CustomMapControl({template:[n._options.templates.doubleIconControl,"go fullscreen","fullscreen"+n._isTopControl(this._controlOptions.fullscreenControlOptions.position),"icon-map-glyphs  icon-map-glyphs-full-screen","icon-map-glyphs  icon-map-glyphs-full-screen-exit"],position:this._controlOptions.fullscreenControlOptions.position,action:function(t){n._goFullscreen(t)},map:this._map})},_isTopControl:function(n){var t="";if(!n)return t;switch(parseInt(n)){case google.maps.ControlPosition.TOP_LEFT:t="  js-update-position  js-top-lt";break;case google.maps.ControlPosition.TOP_RIGHT:t="  js-update-position  js-top-rt";break;case google.maps.ControlPosition.TOP_CENTER:t="  js-update-position  js-top";break;case google.maps.ControlPosition.LEFT_TOP:t="  js-update-position  js-lt-top";break;case google.maps.ControlPosition.RIGHT_TOP:t="  js-update-position  js-rt-top"}return t}}),CustomMapControl=Class.create({initialize:function(n){this._map=n.map;this._action=n.action;this._template=n.template;this._position=n.position;this._buildControl()},_buildControl:function(){var n=this._buildControlFromTemplate();this._attachClickEvent(n);this._map.controls[this._position].push(n)},_attachClickEvent:function(n){var t=this,i,r;if("function"==typeof t._action&&google.maps.event.addDomListener(n,"click",function(){t._action(this)}),"object"==typeof t._action&&Object.keys(t._action).length>0)for(i in t._action)r=n.getElementsByClassName("js-"+i)[0],google.maps.event.addDomListener(r,"click",t._action[i])},_buildControlFromTemplate:function(){var n=this._getTooltipsterPosition(),t,i;return n&&this._template.push(n),t=String.Format.apply(this,this._template),i=$(t)[0],i},_getTooltipsterPosition:function(n){n=n||this._position;switch(parseInt(n)){case google.maps.ControlPosition.TOP_RIGHT:case google.maps.ControlPosition.RIGHT_TOP:n="left";break;case google.maps.ControlPosition.TOP_CENTER:n="bottom";break;case google.maps.ControlPosition.BOTTOM_CENTER:n="top";break;default:n="right"}return n}});;;;var MapBoundsUtility={FitBounds:function(n){var i,r;if(typeof n.bounds=="undefined"||n.bounds==null){typeof n.callback=="function"&&n.callback();return}var t=n.map,f=this,u=t.getBounds();(n.forceZoom||u==null||u.toUrlValue()!=n.bounds.toUrlValue())&&(i=t.getZoom(),t.fitBounds(n.bounds),r=new google.maps.OverlayView,r.draw=function(){var r,u,o,e;this.ready||(r=t.getZoom(),n.forceZoom?(u=typeof n.forcedZoomInSteps=="undefined"||n.forcedZoomInSteps==null?1:n.forcedZoomInSteps,r-i<u?t.setZoom(i+u):t.setZoom(r)):(o=t.getBounds(),e=f._GetExtraZoom(this.getProjection(),n.bounds,o),e>0&&t.setZoom(r+e)),this.ready=!0,google.maps.event.trigger(this,"ready"),typeof n.callback=="function"&&n.callback())},r.setMap(t))},_GetExtraZoom:function(n,t,i){var u=this._GetSizeInPixels(n,t),f=this._GetSizeInPixels(n,i),r;if(Math.floor(u.x)==0||Math.floor(u.y)==0)return 0;var o=f.x/u.x,s=f.y/u.y,e=Math.min(o,s);return e<1?0:(r=Math.log(e)/Math.LN2,r/Math.ceil(r)>.99)?Math.floor(Math.ceil(r)):Math.floor(r)},_GetSizeInPixels:function(n,t){var i=n.fromLatLngToContainerPixel(t.getSouthWest()),r=n.fromLatLngToContainerPixel(t.getNorthEast());return new google.maps.Point(Math.abs(i.y-r.y),Math.abs(i.x-r.x))}};;;;function RichMarker(n){var t=n||{};this.ready_=!1;this.dragging_=!1;n.visible==undefined&&(n.visible=!0);n.shadow==undefined&&(n.shadow="7px -3px 5px rgba(88,88,88,0.7)");n.anchor==undefined&&(n.anchor=RichMarkerPosition.BOTTOM);this.setValues(t)}GoogleMapsAPILoader.ExecuteOnLoad(function(){RichMarker.prototype=new google.maps.OverlayView;window.RichMarker=RichMarker;RichMarker.prototype.getVisible=function(){return this.get("visible")};RichMarker.prototype.getVisible=RichMarker.prototype.getVisible;RichMarker.prototype.setVisible=function(n){this.set("visible",n)};RichMarker.prototype.setVisible=RichMarker.prototype.setVisible;RichMarker.prototype.visible_changed=function(){this.ready_&&(this.markerWrapper_.style.display=this.getVisible()?"":"none",this.draw())};RichMarker.prototype.visible_changed=RichMarker.prototype.visible_changed;RichMarker.prototype.setFlat=function(n){this.set("flat",!!n)};RichMarker.prototype.setFlat=RichMarker.prototype.setFlat;RichMarker.prototype.getFlat=function(){return this.get("flat")};RichMarker.prototype.getFlat=RichMarker.prototype.getFlat;RichMarker.prototype.getWidth=function(){return this.get("width")};RichMarker.prototype.getWidth=RichMarker.prototype.getWidth;RichMarker.prototype.getHeight=function(){return this.get("height")};RichMarker.prototype.getHeight=RichMarker.prototype.getHeight;RichMarker.prototype.setShadow=function(n){this.set("shadow",n);this.flat_changed()};RichMarker.prototype.setShadow=RichMarker.prototype.setShadow;RichMarker.prototype.getShadow=function(){return this.get("shadow")};RichMarker.prototype.getShadow=RichMarker.prototype.getShadow;RichMarker.prototype.flat_changed=function(){this.ready_&&(this.markerWrapper_.style.boxShadow=this.markerWrapper_.style.webkitBoxShadow=this.markerWrapper_.style.MozBoxShadow=this.getFlat()?"":this.getShadow())};RichMarker.prototype.flat_changed=RichMarker.prototype.flat_changed;RichMarker.prototype.setZIndex=function(n){this.set("zIndex",n)};RichMarker.prototype.setZIndex=RichMarker.prototype.setZIndex;RichMarker.prototype.getZIndex=function(){return this.get("zIndex")};RichMarker.prototype.getZIndex=RichMarker.prototype.getZIndex;RichMarker.prototype.zIndex_changed=function(){this.getZIndex()&&this.ready_&&(this.markerWrapper_.style.zIndex=this.getZIndex())};RichMarker.prototype.zIndex_changed=RichMarker.prototype.zIndex_changed;RichMarker.prototype.getDraggable=function(){return this.get("draggable")};RichMarker.prototype.getDraggable=RichMarker.prototype.getDraggable;RichMarker.prototype.setDraggable=function(n){this.set("draggable",!!n)};RichMarker.prototype.setDraggable=RichMarker.prototype.setDraggable;RichMarker.prototype.draggable_changed=function(){this.ready_&&(this.getDraggable()?this.addDragging_(this.markerWrapper_):this.removeDragListeners_())};RichMarker.prototype.draggable_changed=RichMarker.prototype.draggable_changed;RichMarker.prototype.getPosition=function(){return this.get("position")};RichMarker.prototype.getPosition=RichMarker.prototype.getPosition;RichMarker.prototype.setPosition=function(n){this.set("position",n)};RichMarker.prototype.setPosition=RichMarker.prototype.setPosition;RichMarker.prototype.position_changed=function(){this.draw()};RichMarker.prototype.position_changed=RichMarker.prototype.position_changed;RichMarker.prototype.getAnchor=function(){return this.get("anchor")};RichMarker.prototype.getAnchor=RichMarker.prototype.getAnchor;RichMarker.prototype.setAnchor=function(n){this.set("anchor",n)};RichMarker.prototype.setAnchor=RichMarker.prototype.setAnchor;RichMarker.prototype.anchor_changed=function(){this.draw()};RichMarker.prototype.anchor_changed=RichMarker.prototype.anchor_changed;RichMarker.prototype.htmlToDocumentFragment_=function(n){var t=document.createElement("DIV"),i;if(t.innerHTML=n,t.childNodes.length==1)return t.removeChild(t.firstChild);for(i=document.createDocumentFragment();t.firstChild;)i.appendChild(t.firstChild);return i};RichMarker.prototype.removeChildren_=function(n){if(n)for(var t;t=n.firstChild;)n.removeChild(t)};RichMarker.prototype.setContent=function(n){this.set("content",n)};RichMarker.prototype.setContent=RichMarker.prototype.setContent;RichMarker.prototype.getContent=function(){return this.get("content")};RichMarker.prototype.getContent=RichMarker.prototype.getContent;RichMarker.prototype.content_changed=function(){var n,t,u,i,r;if(this.markerContent_){if(this.removeChildren_(this.markerContent_),n=this.getContent(),n){for(typeof n=="string"&&(n=n.replace(/^\s*([\S\s]*)\b\s*$/,"$1"),n=this.htmlToDocumentFragment_(n)),this.markerContent_.appendChild(n),t=this,u=this.markerContent_.getElementsByTagName("IMG"),i=0;r=u[i];i++)google.maps.event.addDomListener(r,"mousedown",function(n){t.getDraggable()&&(n.preventDefault&&n.preventDefault(),n.returnValue=!1)}),google.maps.event.addDomListener(r,"load",function(){t.draw()});google.maps.event.trigger(this,"domready")}this.ready_&&this.draw()}};RichMarker.prototype.content_changed=RichMarker.prototype.content_changed;RichMarker.prototype.setCursor_=function(n){if(this.ready_){var t="";navigator.userAgent.indexOf("Gecko/")!==-1?(n=="dragging"&&(t="-moz-grabbing"),n=="dragready"&&(t="-moz-grab"),n=="draggable"&&(t="pointer")):((n=="dragging"||n=="dragready")&&(t="move"),n=="draggable"&&(t="pointer"));this.markerWrapper_.style.cursor!=t&&(this.markerWrapper_.style.cursor=t)}};RichMarker.prototype.startDrag=function(n){if(this.getDraggable()&&!this.dragging_){this.dragging_=!0;var t=this.getMap();this.mapDraggable_=t.get("draggable");t.set("draggable",!1);this.mouseX_=n.clientX;this.mouseY_=n.clientY;this.setCursor_("dragready");this.markerWrapper_.style.MozUserSelect="none";this.markerWrapper_.style.KhtmlUserSelect="none";this.markerWrapper_.style.WebkitUserSelect="none";this.markerWrapper_.unselectable="on";this.markerWrapper_.onselectstart=function(){return!1};this.addDraggingListeners_();google.maps.event.trigger(this,"dragstart")}};RichMarker.prototype.stopDrag=function(){this.getDraggable()&&this.dragging_&&(this.dragging_=!1,this.getMap().set("draggable",this.mapDraggable_),this.mouseX_=this.mouseY_=this.mapDraggable_=null,this.markerWrapper_.style.MozUserSelect="",this.markerWrapper_.style.KhtmlUserSelect="",this.markerWrapper_.style.WebkitUserSelect="",this.markerWrapper_.unselectable="off",this.markerWrapper_.onselectstart=function(){},this.removeDraggingListeners_(),this.setCursor_("draggable"),google.maps.event.trigger(this,"dragend"),this.draw())};RichMarker.prototype.drag=function(n){var r,u,t,i;if(!this.getDraggable()||!this.dragging_){this.stopDrag();return}r=this.mouseX_-n.clientX;u=this.mouseY_-n.clientY;this.mouseX_=n.clientX;this.mouseY_=n.clientY;t=parseInt(this.markerWrapper_.style.left,10)-r;i=parseInt(this.markerWrapper_.style.top,10)-u;this.markerWrapper_.style.left=t+"px";this.markerWrapper_.style.top=i+"px";var f=this.getOffset_(),e=new google.maps.Point(t-f.width,i-f.height),o=this.getProjection();this.setPosition(o.fromDivPixelToLatLng(e));this.setCursor_("dragging");google.maps.event.trigger(this,"drag")};RichMarker.prototype.removeDragListeners_=function(){this.draggableListener_&&(google.maps.event.removeListener(this.draggableListener_),delete this.draggableListener_);this.setCursor_("")};RichMarker.prototype.addDragging_=function(n){if(n){var t=this;this.draggableListener_=google.maps.event.addDomListener(n,"mousedown",function(n){t.startDrag(n)});this.setCursor_("draggable")}};RichMarker.prototype.addDraggingListeners_=function(){var n=this;this.markerWrapper_.setCapture?(this.markerWrapper_.setCapture(!0),this.draggingListeners_=[google.maps.event.addDomListener(this.markerWrapper_,"mousemove",function(t){n.drag(t)},!0),google.maps.event.addDomListener(this.markerWrapper_,"mouseup",function(t){n.stopDrag();t.cancelBubble=!0;t.stopPropagation&&t.stopPropagation();n.markerWrapper_.releaseCapture()},!0)]):this.draggingListeners_=[google.maps.event.addDomListener(window,"mousemove",function(t){n.drag(t)},!0),google.maps.event.addDomListener(window,"mouseup",function(t){n.stopDrag();t.cancelBubble=!0;t.stopPropagation&&t.stopPropagation()},!0)]};RichMarker.prototype.removeDraggingListeners_=function(){if(this.draggingListeners_){for(var n=0,t;t=this.draggingListeners_[n];n++)google.maps.event.removeListener(t);this.draggingListeners_.length=0}};RichMarker.prototype.getOffset_=function(){var r=this.getAnchor(),n,t,i;if(typeof r=="object")return r;if(n=new google.maps.Size(0,0),!this.markerContent_)return n;t=this.markerContent_.offsetWidth;i=this.markerContent_.offsetHeight;switch(r){case RichMarkerPosition.TOP:n.width=-t/2;break;case RichMarkerPosition.TOP_RIGHT:n.width=-t;break;case RichMarkerPosition.LEFT:n.height=-i/2;break;case RichMarkerPosition.MIDDLE:n.width=-t/2;n.height=-i/2;break;case RichMarkerPosition.RIGHT:n.width=-t;n.height=-i/2;break;case RichMarkerPosition.BOTTOM_LEFT:n.height=-i;break;case RichMarkerPosition.BOTTOM:n.width=-t/2;n.height=-i;break;case RichMarkerPosition.BOTTOM_RIGHT:n.width=-t;n.height=-i}return n};RichMarker.prototype.onAdd=function(){var n,t;this.markerWrapper_||(this.markerWrapper_=document.createElement("DIV"),this.markerWrapper_.style.position="absolute");this.getZIndex()&&(this.markerWrapper_.style.zIndex=this.getZIndex());this.markerWrapper_.style.display=this.getVisible()?"":"none";this.markerContent_||(this.markerContent_=document.createElement("DIV"),this.markerWrapper_.appendChild(this.markerContent_),n=this,google.maps.event.addDomListener(this.markerContent_,"click",function(t){google.maps.event.trigger(n,"click",t)}),google.maps.event.addDomListener(this.markerContent_,"mouseover",function(t){google.maps.event.trigger(n,"mouseover",t)}),google.maps.event.addDomListener(this.markerContent_,"mouseout",function(t){google.maps.event.trigger(n,"mouseout",t)}));this.ready_=!0;this.content_changed();this.flat_changed();this.draggable_changed();t=this.getPanes();t&&t.overlayMouseTarget.appendChild(this.markerWrapper_);google.maps.event.trigger(this,"ready")};RichMarker.prototype.onAdd=RichMarker.prototype.onAdd;RichMarker.prototype.draw=function(){var n,t,i;if(this.ready_&&!this.dragging_&&(n=this.getProjection(),n)){var f=this.get("position"),r=n.fromLatLngToDivPixel(f),u=this.getOffset_();this.markerWrapper_.style.top=r.y+u.height+"px";this.markerWrapper_.style.left=r.x+u.width+"px";t=this.markerContent_.offsetHeight;i=this.markerContent_.offsetWidth;i!=this.get("width")&&this.set("width",i);t!=this.get("height")&&this.set("height",t)}};RichMarker.prototype.draw=RichMarker.prototype.draw;RichMarker.prototype.onRemove=function(){this.markerWrapper_&&this.markerWrapper_.parentNode&&this.markerWrapper_.parentNode.removeChild(this.markerWrapper_);this.removeDragListeners_()};RichMarker.prototype.onRemove=RichMarker.prototype.onRemove});var RichMarkerPosition={TOP_LEFT:1,TOP:2,TOP_RIGHT:3,LEFT:4,MIDDLE:5,RIGHT:6,BOTTOM_LEFT:7,BOTTOM:8,BOTTOM_RIGHT:9};window.RichMarkerPosition=RichMarkerPosition;;;;function MarkerInfo(n){var t={id:undefined,tooltip:undefined,text:undefined,lat:0,lng:0,address:undefined,lsGroupName:undefined,geoStatus:undefined,index:undefined,status:undefined,size:undefined,bounds:undefined,visible:!0};return $.extend(t,n)};;;var MapBreakpointsGetter=Class.create({mapBreakPoints:{palmMin:"PalmMin",palm:"Palm",palmWide:"PalmWide",lap:"Lap",lapWide:"LapWide",desk:"Desk",deskWide:"DeskWide",deskLarge:"DeskLarge"},initialize:function(n){this.SetByKey(n.mapBreakPointKey)},_getByKey:function(n){if(typeof n=="undefined"||n===null)return"";switch(n){case MapContainerBreakpointKeys.palmMin:return this.mapBreakPoints.palmMin;case MapContainerBreakpointKeys.palm:return this.mapBreakPoints.palm;case MapContainerBreakpointKeys.palmWide:return this.mapBreakPoints.palmWide;case MapContainerBreakpointKeys.lap:return this.mapBreakPoints.lap;case MapContainerBreakpointKeys.lapWide:return this.mapBreakPoints.lapWide;case MapContainerBreakpointKeys.desk:return this.mapBreakPoints.desk;case MapContainerBreakpointKeys.deskWide:return this.mapBreakPoints.deskWide;case MapContainerBreakpointKeys.deskLarge:return this.mapBreakPoints.deskLarge;default:return""}},Get:function(){return this._mapBreakPoint},SetByKey:function(n){this._mapBreakPoint=this._getByKey(n)}}),RecordMarkersLoader=Class.create({initialize:function(n){this._params=gts.$.extend({},n);this._OngoingRequest=null;this._mapBreakpointsGetter=new MapBreakpointsGetter(this._params)},Load:function(n,t,i,r,u){var f=this;typeof n=="undefined"&&(n=LocationAnchorService.GetLocationAnchorOrHRef());typeof u=="undefined"&&(u={});gts.$.ajax({type:"GET",contentType:"application/json; charset=utf-8",url:baseWebRoot+SEOService.AddMandatoryUrlParts("/reno/mapmarkers/mapmarkershandler.ashx"),dataType:"json",data:gts.$.extend({seoquery:n,northeast:t.getNorthEast().toString().replace(/[()]+/g,"").replace(" ",""),southwest:t.getSouthWest().toString().replace(/[()]+/g,"").replace(" ",""),recordtype:this._params.recordType,mapmarkerrendering:this._params.mapMarkerRendering,mapbreakpointkey:this._mapBreakpointsGetter.Get(),zoom:i},u),beforeSend:function(n){f.Abort();f._OngoingRequest=n},error:function(n,t,i){i!=="abort"&&log.debug("RecordMarkersLoader.Load: Json Error Message: error ("+i+') "'+t+'"')},success:function(n){typeof r=="function"&&r(f._BuildResult(n))}})},Abort:function(){this._OngoingRequest!==null&&this._OngoingRequest.abort()},_BuildResult:function(n){var t={recordMarkerInfos:[],clusteredRecordMarkerInfos:{items:[]}},i;if(n===null)return t;if(gts.$(".js-new-filter").length>0){i="";gts.$.each(n.mrkrs.mrkr,function(n,t){typeof t.mrkr.locs!="undefined"&&gts.$.each(t.mrkr.locs.loc,function(n,r){gts.$.each(r,function(n,r){i+="<option data-id="+t.mrkr.id+">"+r.name+"<\/option>"})})});gts.$(".js-new-filter select option").length===1&&gts.$(".js-new-filter select option").remove();n.mrkrs.rollupkey==="State"&&(gts.$(".js-new-filter select").append("<option>filter: by state<\/option>"),gts.$(".js-new-filter").removeClass("u-hide"));n.mrkrs.rollupkey==="County"&&(gts.$(".js-new-filter select").append("<option>filter: by county<\/option>"),gts.$(".js-new-filter").removeClass("u-hide"));gts.$(".js-new-filter select").append(i);gts.$(".js-new-filter select").data("selectBox-selectBoxIt")&&gts.$(".js-new-filter select").data("selectBox-selectBoxIt").refresh();gts.$(".js-new-filter select").off("change.listLocations").on("change.listLocations",function(){var n=this,t=gts.$(n).find("option:selected").attr("data-id"),i={action:"add",ids:[t],updateSelf:!0};gts.$(document).trigger("ActLocationsRequest",i)})}var u=gts.$.makeArray(gts.$.map(n.mrkrs.mrkr,function(t){var i=t.mrkr,r=new MarkerInfo({id:i.id,index:i.index,tooltip:i.tt,text:i.text,lat:i.coor[0],lng:i.coor[1],address:i.addr,addrcity:i.addrcity,addrneighborhood:i.addrneighborhood,name:i.name,geostatus:i.geoStatus,size:i.size,status:i.status,photoitems:i.photoitems,bathsfull:i.bathsfull,bedroom:i.bedroom,sqfeetinterior:i.sqfeetinterior,canonicalurl:i.canonicalurl,formattedtext:i.formattedtext});return typeof i.locs!="undefined"&&(r.locs=i.locs.loc),typeof n.mrkrs.minzoomsteps!="undefined"&&(r.minzoomsteps=n.mrkrs.minzoomsteps),typeof i.mincoor!="undefined"&&typeof i.maxcoor!="undefined"&&(r.bounds={min:{lat:i.mincoor[0],lng:i.mincoor[1]},max:{lat:i.maxcoor[0],lng:i.maxcoor[1]}}),r})),f=typeof n.mrkrs.clusteringtype!="undefined"&&n.mrkrs.clusteringtype!=="None",r=!0;return typeof this._params.clusterMarkerSettings!="undefined"&&typeof this._params.clusterMarkerSettings.displaySingleMarkersAsClusters!="undefined"&&(r=this._params.clusterMarkerSettings.displaySingleMarkersAsClusters),gts.$.each(u,function(n,i){if(f){var u=typeof i.bounds!="undefined"&&i.bounds.min.lat!==i.bounds.max.lat&&i.bounds.min.lng!==i.bounds.max.lng;u||i.size>1||r&&i.size===1?t.clusteredRecordMarkerInfos.items.push(i):t.recordMarkerInfos.push(i)}else t.recordMarkerInfos.push(i)}),t.clusteringtype=n.mrkrs.clusteringtype,this._params.clusterMarkerSettings.debug&&(t.clusteringkey=n.mrkrs.clusteringkey,t.rollupkey=n.mrkrs.rollupkey,t.query=n.mrkrs.query),t.clusteredRecordMarkerInfos.locationInfoRenderMode=n.mrkrs.locationInfoRenderMode,t},SetMapBreakpointKey:function(n){this._mapBreakpointsGetter.SetByKey(n)}});;;;function EventHandler(){this.init()}function Intersection(n){arguments.length>0&&this.init(n)}function IntersectionParams(n,t){arguments.length>0&&this.init(n,t)}function Point2D(n,t){arguments.length>0&&this.init(n,t)}function Shape(n){arguments.length>0&&this.init(n)}function Line(n){arguments.length>0&&this.init(n)}function Polygon(n){arguments.length>0&&this.init(n)}EventHandler.VERSION=1;EventHandler.prototype.init=function(){};Intersection.prototype.init=function(n){this.status=n;this.points=[]};Intersection.prototype.appendPoints=function(n){this.points=this.points.concat(n)};Intersection.intersectLineLine=function(n,t,i,r){var u,s=(r.x-i.x)*(n.y-i.y)-(r.y-i.y)*(n.x-i.x),h=(t.x-n.x)*(n.y-i.y)-(t.y-n.y)*(n.x-i.x),e=(r.y-i.y)*(t.x-n.x)-(r.x-i.x)*(t.y-n.y),f,o;return e!=0?(f=s/e,o=h/e,0<=f&&f<=1&&0<=o&&o<=1?(u=new Intersection("Intersection"),u.points.push(new Point2D(n.x+f*(t.x-n.x),n.y+f*(t.y-n.y)))):u=new Intersection("No Intersection")):u=s==0||h==0?new Intersection("Coincident"):new Intersection("Parallel"),u};Intersection.intersectLinePolygon=function(n,t,i){for(var r=new Intersection("No Intersection"),f=i.length,u=0;u<f;u++){var e=i[u],o=i[(u+1)%f],s=Intersection.intersectLineLine(n,t,e,o);r.appendPoints(s.points)}return r.points.length>0&&(r.status="Intersection"),r};IntersectionParams.prototype.init=function(n,t){this.name=n;this.params=t};Point2D.prototype.init=function(n,t){this.x=n;this.y=t};Point2D.prototype.lerp=function(n,t){return new Point2D(this.x+(n.x-this.x)*t,this.y+(n.y-this.y)*t)};Shape.prototype=new EventHandler;Shape.prototype.constructor=Shape;Shape.superclass=EventHandler.prototype;Shape.prototype.init=function(n){this.svgNode=n;this.locked=!1;this.visible=!0;this.selected=!1;this.callback=null;this.lastUpdate=null};Line.prototype=new Shape;Line.prototype.constructor=Line;Line.superclass=Shape.prototype;Line.prototype.init=function(n){if(n==null||n.localName!="line")throw new Error("Line.init: Invalid localName: "+n.localName);Line.superclass.init.call(this,n);var t=parseFloat(n.getAttributeNS(null,"x1")),i=parseFloat(n.getAttributeNS(null,"y1")),r=parseFloat(n.getAttributeNS(null,"x2")),u=parseFloat(n.getAttributeNS(null,"y2"));this.p1=new Handle(t,i,this);this.p2=new Handle(r,u,this)};Polygon.prototype=new Shape;Polygon.prototype.constructor=Polygon;Polygon.superclass=Shape.prototype;Polygon.prototype.init=function(n){var i,t,r,u;if(n.localName=="polygon")for(Polygon.superclass.init.call(this,n),i=n.getAttributeNS(null,"points").split(/[\s,]+/),this.handles=[],t=0;t<i.length;t+=2)r=parseFloat(i[t]),u=parseFloat(i[t+1]),this.handles.push(new Handle(r,u,this));else throw new Error("Polygon.init: Invalid SVG Node: "+n.localName);};;;;var ClusterMarkerPositionAdjuster=Class.create({initialize:function(n){this._shapes=n.shapes;this._map=n.map;this._debugEle=n.debugEle},Adjust:function(n){var t=n,i,r;return this._shapes===null?t:(i=this,r=this._map.getProjection(),gts.$.each(this._shapes,function(u,f){if(f.type==="circle")t=i._AdjustLatLngByRadius(n,f.circle.getBounds().getCenter(),f.circle.getRadius());else if(f.type==="polygon"){var e=[];f.polygon.getPath().forEach(function(n){e.push(r.fromLatLngToPoint(n))});t=i._AdjustLatLngByPolygon(n,i._GetPolygonCenter(f.polygon),e)}}),t)},_AdjustLatLngByRadius:function(n,t,i){var u=google.maps.geometry.spherical.computeDistanceBetween(n,t)-i,f,r;return u<=0?n:(f=google.maps.geometry.spherical.computeHeading(n,t),r=google.maps.geometry.spherical.computeOffset(n,u,f),this._debugEle!==null&&this._debugEle.append(String.Format("Cluster from {0},{1} moved to {2},{3} - <a target='_blank' href='https://www.google.com/maps/dir/{0},{1}/{2},{3}'>See on map<\/a><br/>",n.lat(),n.lng(),r.lat(),r.lng())),r)},_AdjustLatLngByPolygon:function(n,t,i){var r=n,e=this,f=e._map.getProjection(),o=f.fromLatLngToPoint(n),s=new Point2D(o.x,o.y),h=f.fromLatLngToPoint(t),l=new Point2D(h.x,h.y),c=Intersection.intersectLinePolygon(s,l,gts.$.map(i,function(n){return new Point2D(n.x,n.y)})),u;return c.status!=="Inside"&&(u=null,gts.$.each(c.points,function(n,t){var i=e._GetDistanceBetweenPoints(s,t);if(u===null||i<u)return u=i,r=f.fromPointToLatLng(t),!0})),this._debugEle!==null&&this._debugEle.append(String.Format("Cluster from {0},{1} moved to {2},{3}.<br/>",n.lat(),n.lng(),r.lat(),r.lng())),r},_GetDistanceBetweenPoints:function(n,t){return Math.hypot(n.x-t.x,n.y-t.y)},_GetPolygonCenter:function(n){for(var t,u=new google.maps.LatLngBounds,f=n.getPaths(),i,r=0;r<f.getLength();r++)for(i=f.getAt(r),t=0;t<i.getLength();t++)u.extend(i.getAt(t));return u.getCenter()}});;;;var ClusterMarkersBuilder=Class.create({initialize:function(n){this._xslParams=n;this._debugEle=this._xslParams.debug?this._CreateDebugEle():null;this._clusterMarkerBuilder=new ClusterMarkerBuilder(gts.$.extend({debugEle:this._debugEle},this._xslParams))},Build:function(n){var r=n.clusteredRecordMarkerInfos.items,u=$.map(r,function(n){return n.size}),s=Math.min.apply(null,u),h=Math.max.apply(null,u),f=[],t,i,e,o;for(this._debugEle!==null&&typeof n.clusteringtype!="undefined"&&(t="",t+="Clustering type: "+n.clusteringtype+".<br/>",t+="Clustering config key: "+n.clusteringkey+".<br/>",t+="Rollupkey: "+n.rollupkey+".<br/>",t+="Visible map radius: "+this._GetVisibleMapAreaRadius()+".<br/>",t+="Query: "+n.query+".<br/>",this._debugEle.append(t)),i=0;i<r.length;i++)e=r[i],o=this._clusterMarkerBuilder.Build(i,e,s,h,n.clusteredRecordMarkerInfos.locationInfoRenderMode,n.clusteringtype),f.push(o);return f},_GetVisibleMapAreaRadius:function(){var n=DistanceUtility.GetDistanceBetweenPoints(this._xslParams.map.getCenter(),this._xslParams.map.getBounds().getNorthEast());return DistanceUtility.KilometersToMiles(n)},_CreateDebugEle:function(){var t=gts.$("#"+this._xslParams.moduleId),n=gts.$(".js-cluster-debug",t);return n.length===0&&(n=gts.$('<div class="js-cluster-debug" style="background: #FEF4C5;border: 2px solid #FDE368;"/>'),t.append(n)),n.empty(),n}}),ClusterMarkerBuilder=Class.create({_defaultSettings:{minSize:2,maxSize:2,zIndex:20,onClickCallback:"undefined",taxonomyLocationClusterSettings:null,debugEle:null},initialize:function(n){this._xslParams=gts.$.extend({},this._defaultSettings,n);this._map=this._xslParams.map;this._numberFormatter=NumberFormatting.NumberFormatterFactory.GetNumberFormatter(NumberFormatting.NumberFormatterType.Price,{numberFormatLimit:1e3,addCurrencySymbolInFormatNumber:!1});this._xslParams.taxonomyLocationClusterSettings!==null&&(this._markerPositionAdjuster=new ClusterMarkerPositionAdjuster({shapes:this._xslParams.taxonomyLocationClusterSettings.shapes,map:this._xslParams.map,debugEle:this._xslParams.debugEle}))},Build:function(n,t,i,r,u,f){var e=new RichMarker({id:t.id,position:this._GetMarkerPosition(t,f),content:this._GetMarkerContent(t,i,r),flat:!0,zIndex:this._xslParams.zIndex,markerData:t,anchor:RichMarkerPosition.MIDDLE,map:this._map}),o;return typeof u!="undefined"&&u!=="None"&&(o=u==="Marker"?new ClusterMarkerLocationMarkersBuilder(this._xslParams):new ClusterMarkerLocationTooltipsBuilder(this._xslParams),o.Build(e,t.locs)),this._AddMarkerBoundary(e,t),this._AddMarkerClickHandler(e),e},_GetMarkerPosition:function(n,t){var i=new google.maps.LatLng(parseFloat(n.lat),parseFloat(n.lng));return t!=="TaxonomyLocation"||typeof this._markerPositionAdjuster=="undefined"?i:this._markerPositionAdjuster.Adjust(i)},_GetMarkerContent:function(n,t,i){var e=i===t?1:(n.size-t)*100/(i-t)/100,o=parseFloat(this._xslParams.maxSize),u=parseFloat(this._xslParams.minSize),s=e*(o-u)+u,r,f;return typeof n.text!="undefined"?r=n.text:(f=typeof n.size!="undefined"?n.size.toString():"1",r=this._numberFormatter.FormatNumber(f,{roundToDecimalPlace:0})),gts.$('<div data-id="'+n.id+'" class="cluster-marker  marker-type-center  marker-status-normal" style="font-size: '+s+'em"><span class="cluster-marker__data" style="pointer-events:none;">'+r+"<\/span><\/div>").get(0)},_AddMarkerBoundary:function(n,t){n.boundary=this._GetClusterBoundary(t);var i=this;google.maps.event.addListener(n,"mouseover",function(){n.setZIndex(i._xslParams.zIndex+1);typeof n.boundary!="undefined"&&n.boundary.setMap(i._map);i._LogClusterInfo(n,"HOVER")});google.maps.event.addListener(n,"mouseout",function(){n.setZIndex(i._xslParams.zIndex);typeof n.boundary!="undefined"&&n.boundary.setMap(null)});typeof n.boundary!="undefined"&&google.maps.event.addListener(n,"click",function(){n.boundary.setMap(null)})},_GetClusterBoundary:function(n){return!this._xslParams.debug||typeof n.bounds=="undefined"?undefined:new google.maps.Rectangle({strokeColor:"#FF0000",strokeOpacity:.8,strokeWeight:2,fillColor:"#FF0000",fillOpacity:.35,bounds:new google.maps.LatLngBounds(new google.maps.LatLng(n.bounds.min.lat,n.bounds.min.lng),new google.maps.LatLng(n.bounds.max.lat,n.bounds.max.lng))})},_LogClusterInfo:function(n,t){if(this._xslParams.debug&&typeof n.boundary!="undefined"){var r=DistanceUtility.KilometersToMiles(DistanceUtility.GetDistanceBetweenPoints(n.position,n.boundary.bounds.getNorthEast())),i="";i+=t+" CLUSTER BOUNDS\n";i+="- Cluster radius: "+r+"\n";i+="- min.lat: "+n.markerData.bounds.min.lat+"\n";i+="- min.lng: "+n.markerData.bounds.min.lng+"\n";i+="- max.lat: "+n.markerData.bounds.max.lat+"\n";i+="- max.lat: "+n.markerData.bounds.max.lng+"\n";console.log(i)}},_AddMarkerClickHandler:function(n){if(typeof this._xslParams.onClickCallback!="undefined"){var t=this;google.maps.event.addListener(n,"click",function(i){try{if(typeof n.boundary!="undefined"&&n.boundary.setMap(null),typeof t._xslParams.onClickCallback=="function"){t._LogClusterInfo(n,"CLICK");t._xslParams.onClickCallback(n)}i.stopPropagation()}catch(r){console.error(r)}})}}});;;;var ClusterMarkerLocationMarkersBuilder=Class.create({initialize:function(n){this._xslParams=gts.$.extend({},n);this._xslParams.zIndex=100;this._map=n.map;this._locationBuilder=new ClusterMarkerLocationMarkerBuilder(this._xslParams)},Build:function(n,t){if(typeof t!="undefined"){var i=this;google.maps.event.addListener(n,"mouseover",function(){typeof n.locMarkersVisible=="undefined"&&(typeof n.locMarkers=="undefined"&&(n.locMarkers=[],gts.$.each(t,function(t,r){var f={loc:r.loc,ownerId:n.id},u=i._locationBuilder.Build(f);n.locMarkers.push(u);google.maps.event.addListener(u,"click",function(n){var t=n.srcElement&&gts.$(n.srcElement).attr("data-owner"),i=gts.$("[data-id = "+t+"]");t&&i.length!==0&&i.trigger("click")});google.maps.event.addListener(u,"mouseout",function(t){var u=t.toElement||t.rangeParent,r=t.srcElement&&gts.$(t.srcElement).attr("data-owner");r&&gts.$(u).attr("data-id")==r||r&&gts.$(u).attr("data-owner")==r||i._HideLocationMarkers(n)})})),i._ShowLocationMarkers(n))});google.maps.event.addListener(n,"mouseout",function(t){var r=t.toElement||t.rangeParent;typeof n.locMarkersVisible=="undefined"||gts.$(r).attr("data-owner")==n.id||t.srcElement&&r&&gts.$.contains(t.srcElement,r)||i._HideLocationMarkers(n)})}},_ShowLocationMarkers:function(n){var t=this;gts.$.each(n.locMarkers,function(n,i){i.setMap(t._map)});n.locMarkersVisible=!0},_HideLocationMarkers:function(n){gts.$.each(n.locMarkers,function(n,t){t.setMap(null)});n.locMarkersVisible=undefined}}),ClusterMarkerLocationMarkerBuilder=Class.create({initialize:function(n){this._xslParams=n;this._map=this._xslParams.map},Build:function(n){var t=n.loc,i=t.coor[0],r=t.coor[1];return new RichMarker({id:t.name,clickable:!0,position:new google.maps.LatLng(parseFloat(i),parseFloat(r)),content:gts.$('<div class="cluster-marker  marker-type-center  cluster-marker--location" data-owner="'+n.ownerId+'"><span class="cluster-marker__data"><\/span><\/div>').get(0),flat:!0,zIndex:this._xslParams.zIndex,markerData:t,anchor:RichMarkerPosition.MIDDLE})}});;;;var ClusterMarkerLocationTooltipsBuilder=Class.create({initialize:function(n){this._zIndex=n.zIndex+20},Build:function(n,t){if(typeof t!="undefined"){var i=this;google.maps.event.addListener(n,"domready",function(){var r="ontouchstart"in document.documentElement;typeof n.locToolTip!="undefined"||r||(n.locToolTip=i._BuildMarkerTooltip(n,t))});google.maps.event.addListener(n,"mouseover",function(){typeof n.locToolTip!="undefined"&&n.locToolTip.tooltipster("show")});google.maps.event.addListener(n,"mouseout",function(){typeof n.locToolTip!="undefined"&&n.locToolTip.tooltipster("hide")})}},_BuildMarkerTooltip:function(n,t){var i=[];return gts.$.each(t,function(n,t){i.push(t.loc.name)}),gts.$(n.getContent()).tooltipster({offset:{x:20,y:-15},content:i.join(", "),onlyOne:!0,theme:"tooltipster-default  tooltipster-narrow"})}});;;;var MapEventType={ZoomChanged:"zoom_changed",Drag:"drag",DragStart:"dragstart",DragEnd:"dragend",Idle:"idle",TilesLoaded:"tilesloaded",BoundsChanged:"bounds_changed"},MapMarkerRendering={RenderMarkersForRecordsOnThePage:"rendermarkersforrecordsonthepage",RenderClustered:"renderclustered"},MapInteraction={Inert:"inert",Refine:"refine"};;;;var MapContainerBreakpointKeys={palmMin:"palm-min",palm:"palm",palmWide:"palm-wide",lap:"lap",lapWide:"lap-wide",desk:"desk",deskWide:"desk-wide",deskLarge:"desk-large"},MapContainerSettings={breakpoints:[{width:"10",key:MapContainerBreakpointKeys.palmMin,"class":"js-palm-min"},{width:"400",key:MapContainerBreakpointKeys.palm,"class":"js-palm"},{width:"480",key:MapContainerBreakpointKeys.palmWide,"class":"js-palm-wide"},{width:"768",key:MapContainerBreakpointKeys.lap,"class":"js-lap"},{width:"960",key:MapContainerBreakpointKeys.lapWide,"class":"js-lap-wide"},{width:"1280",key:MapContainerBreakpointKeys.desk,"class":"js-desk"},{width:"1680",key:MapContainerBreakpointKeys.deskWide,"class":"js-desk-wide"},{key:MapContainerBreakpointKeys.deskLarge,"class":"js-desk-large"}]};;;;function MapModuleBase(){this.GMap=null;this._MapOptions=null;this.MapBounds=null;this._MapIconProvider=null;this._MapIdleEventReceived=!1;this._DefaultParams={ShowLoadingIndicator:!0,MapMarkerRendering:MapMarkerRendering.RenderMarkersForRecordsOnThePage,LoadingImageSelector:".js-loading",MapTypeSatelliteZoomLevelEnabled:!1,MapTypeSatelliteZoomLevel:18,ClusterMarkerSettings:{},CurrentPageSEOUrlGetter:function(n){return n._XSLParams.CurrentPageSEOUrl},_OnMarkersFinishedHandler:function(){},MarkerDataGetter:function(n){return n._XSLParams.MarkerData}};this._Markers=[];this._clusterMarkers=[];this._HoveredMarker=undefined;this._SelectedMarkerId=undefined;this._isFirstLoadInProgress=!0;this._MainRecordMarker=undefined;this._EnsuringBounds=!1;this.InitialZoom=undefined;this._CenterMapOnInitializeBoundsChangedListener=null;this._CenteringMap=!1;this._CanTriggerMapBoundsEvents=!0;this._MapTypeIdChangedListener=undefined;this._MapTypeIdChangeForceInProgress=!1;this._LoadingImage=isResponsive?$('<div id="loadingimage" class="c-map-loader  map-message  js-loading  js-top-message" style="display:none;"><p class="map-message__text">Loading Data <span class="o-loading-dot">.<\/span><span class="o-loading-dot">.<\/span><span class="o-loading-dot">.<\/span><\/p><\/div>')[0]:$('<div id="loadingimage"  style="display:none;">&nbsp;<\/div>')[0];this._LoadingImageDelay=2e3;this._LoadingImageTimer=null;this._BindToMarkerClick=!0;this._BindToMarkerDrag=!1;this._AllowMarkersWithoutLatLng=!1;this._selectedClass="marker-status-highlight";this._DefaultCursor="url('http://maps.gstatic.com/mapfiles/openhand_8_8.cur'), default";this.topSpacingForControls=0;this.Initialize=function(n){if(log.debug("MapModuleBase.Initialize"),this._SetXSLParams(n),this._ModuleEle=gts.$("#"+this._XSLParams.ModuleId),this._MapEle=gts.$(this._XSLParams.MapSelector,this._ModuleEle),!(this._MapEle.length<=0)){var t=this;GoogleMapsAPILoader.Load(function(){t._OnApiLoadedCallback()})}};this._SetXSLParams=function(n){this._XSLParams=gts.$.extend({},this._DefaultParams,n)};this._OnApiLoadedCallback=function(){if(this._SetMapOptions(),this._SetMapIconProvider(),(this.GMap==null||typeof this.GMap=="undefined")&&(this._MapOptions.mapContainer=this._MapEle[0],this.GMap=new google.maps.Map(this._MapEle[0],this._MapOptions),this._MapOptions.useCustomControls))var n=new CustomMapControls(this.GMap,this._MapOptions,this._MapOptions.customControls);this.GMap!=null&&(this._InitializeContainerBreakpoints(),this._RemoveMapEventListeners(),this._InitializeMapBounds(),typeof this._RecordMarkersLoader=="undefined"&&(this._RecordMarkersLoader=new RecordMarkersLoader({recordType:this._XSLParams.RecordType,mapMarkerRendering:this._XSLParams.MapMarkerRendering,clusterMarkerSettings:this._XSLParams.ClusterMarkerSettings,mapBreakPointKey:this._ContainerBreakpointsElement.containerBreakpoints?this._ContainerBreakpointsElement.containerBreakpoints("getCurrentBreakpoint").key:null})),this._CenterMapOnInitialize(),this._SetControlsToMap(),this._PostLoadMap(),this._BindToMapTypeIdChangeEvent(),this._OnInitialize(),this.InitialZoom=this.GMap.getZoom(),this._BindToContainerBreakpointChange())};this._OnInitialize=function(){};this._SetMapOptions=function(){var n=GetDefaultMapOptions(this._XSLParams);n.center=new google.maps.LatLng(this._XSLParams.CenterLat,this._XSLParams.CenterLng);n.zoom=14;this._MapOptions=n;this._MapOptions.zoomControlOptions=gts.$.extend({},n.zoomControlOptions,{style:google.maps.ZoomControlStyle.SMALL});this._OnSetMapOptions()};this._GetMapBoundsFromXSLParams=function(){return typeof this._XSLParams.MinLat=="undefined"||typeof this._XSLParams.MaxLat=="undefined"||typeof this._XSLParams.MinLng=="undefined"||typeof this._XSLParams.MaxLng=="undefined"?null:new google.maps.LatLngBounds(new google.maps.LatLng(this._XSLParams.MinLat,this._XSLParams.MinLng),new google.maps.LatLng(this._XSLParams.MaxLat,this._XSLParams.MaxLng))};this._OnSetMapOptions=function(){};this._SetMapIconProvider=function(){};this._SetControlsToMap=function(){this._SetLoadingIndicatorToMap()};this._SetControlToMap=function(n,t,i){if(typeof n!="undefined"){i=typeof i!="undefined"?i:!1;var r=this.GMap.controls[t].indexOf(n);r===-1?this.GMap.controls[t].push(n):i&&this.GMap.controls[t].setAt(r,n);switch(parseInt(t)){case google.maps.ControlPosition.TOP_LEFT:gts.$(n).addClass("js-update-position  js-top-lt");break;case google.maps.ControlPosition.TOP_RIGHT:gts.$(n).addClass("js-update-position  js-top-rt");break;case google.maps.ControlPosition.TOP_CENTER:gts.$(n).addClass("js-update-position  js-top");break;case google.maps.ControlPosition.LEFT_TOP:gts.$(n).addClass("js-update-position  js-lt-top");break;case google.maps.ControlPosition.RIGHT_TOP:gts.$(n).addClass("js-update-position  js-rt-top")}}};this._EnsureBounds=function(){if(!this._EnsuringBounds){this._EnsuringBounds=!0;var i=this.GMap.getBounds().getSouthWest(),r=this.GMap.getBounds().getNorthEast(),u,n=new google.maps.LatLng(r.lat(),r.lng()),t=new google.maps.LatLng(i.lat(),i.lng()),f=n.lat()>85||n.lat()<-85,e=t.lat()>85||t.lat()<-85;n.lat()>85&&(n=new google.maps.LatLng(85,n.lng()),t.lat()>85&&(t=new google.maps.LatLng(n.lat()-(r.lat()-i.lat()),t.lng())));t.lat()<-85&&(t=new google.maps.LatLng(-85,t.lng()),n.lat()<-85&&(n=new google.maps.LatLng(t.lat()+(r.lat()-i.lat()),n.lng())));(f||e)&&(u=new google.maps.LatLngBounds(t,n),this.FitBounds(u));this._EnsuringBounds=!1}};this._CenterMapOnInitialize=function(){if(this._XSLParams.CenterMapOnInitialize){var n=this;this._CenterMapOnInitializeBoundsChangedListener=google.maps.event.addListenerOnce(this.GMap,"bounds_changed",function(){n._CenteringMap&&n.GMap.setCenter(new google.maps.LatLng(n._XSLParams.CenterLat,n._XSLParams.CenterLng));n._CenteringMap=!1;n._CanTriggerMapBoundsEvents=!0});this._CenteringMap=!0;this._CanTriggerMapBoundsEvents=!1;this.FitBounds(this.MapBounds)}};this.FitBounds=function(n,t){MapBoundsUtility.FitBounds({map:this.GMap,bounds:n,callback:t,forceZoom:!1})};this._PostLoadMap=function(){log.debug("MapModuleBase._PostLoadMap");var n=this;n._mapIdleHandled=!1;google.maps.event.addListenerOnce(n.GMap,MapEventType.Idle,function(){(log.debug("MapModuleBase._PostLoadMap. Map idle event handler."),n._MapIdleEventReceived=!0,n._mapIdleHandled)||n._OnMapIdle()});n._MapIdleEventReceived&&!n._mapIdleHandled&&n._OnMapIdle()};this._OnMapIdle=function(){this._mapIdleHandled||(log.debug("MapModuleBase._OnMapIdle"),this.DataLoadingStarted(),this._LoadClusteredMarkers(),this._OnBeginMapIdle(),this._BeginSetMarkersToMap(),this._SetMarkersToMap(),this._SetMainRecordMarkerToMap(),this._FitBoundsToMarkers(),this._AddMapEventListeners(),this._ForceMapTypeId(),this._OnEndMapIdle(),this._XSLParams.MapMarkerRendering==MapMarkerRendering.RenderMarkersForRecordsOnThePage&&this.DataLoadingStopped(),this._mapIdleHandled=!0,this._SetIsFirstLoadInProgressToFalseIfReady(),gts.$(this._MapEle).trigger("MapReady"+RenoEventsNS,{map:this.GMap}))};this._OnBeginMapIdle=function(){};this._OnEndMapIdle=function(){};this._FitBoundsToMarkers=function(){if(this._XSLParams.FitBoundsToMarkers){this._CanTriggerMapBoundsEvents=!1;var n=this,t=function(){n._CanTriggerMapBoundsEvents=!0};this.FitBounds(this.MapBounds,t)}};this._GetMarkerCount=function(n){var t=0;return gts.$.each(n,function(){t++}),t};this._InitializeMapBounds=function(){var n=this._GetMapBoundsFromXSLParams();this.MapBounds=n==null?new google.maps.LatLngBounds:n};this._BeginSetMarkersToMap=function(){(typeof this._XSLParams.MapMarkerRendering=="undefined"||this._XSLParams.MapMarkerRendering==MapMarkerRendering.RenderMarkersForRecordsOnThePage)&&this.ClearMarkers()};this.ClearMarkers=function(){Map_clearMarkers(this._Markers);this._Markers=[];var n=typeof this._XSLParams.ClusterMarkerSettings.debug!="undefined"?this._XSLParams.ClusterMarkerSettings.debug:!1;Map_clearMarkers(this._clusterMarkers,n);this._clusterMarkers=[]};this._SetMarkersToMap=function(){if(typeof this._XSLParams.MapMarkerRendering=="undefined"||this._XSLParams.MapMarkerRendering==MapMarkerRendering.RenderMarkersForRecordsOnThePage){var n=this;gts.$.each(this._XSLParams.MarkerDataGetter(this),function(t,i){n.SetMarkerToMap(i)});this._XSLParams._OnMarkersFinishedHandler(this,this._Markers)}};this.ShowMarker=function(n){var t=this._FindMarker(n);t!=null&&t.map==null&&t.setMap(this.GMap)};this.HideMarker=function(n){var t=this._FindMarker(n);t!=null&&t.setMap(null)};this.SetMarkerToMap=function(n){var t=this._GetMarker(n),r,i;return t==null?null:(r=typeof t.markerData.visible=="undefined"||t.markerData.visible,this._XSLParams.FitBoundsToMarkers&&r&&(i=t.getPosition(),i!=null&&this.MapBounds.extend(i)),this._Markers.push(t),n.selected&&(this._MarkerHighlight(t,this._selectedClass),this._SelectedMarkerId=t.id),t)};this._SetMainRecordMarkerToMap=function(){(this._InitializeMainRecordMarker(),typeof this._MainRecordMarker!="undefined")&&(this._MainRecordMarker.setMap(this.GMap),this._XSLParams.FitBoundsToMarkers&&this.MapBounds.extend(this._MainRecordMarker.getPosition()))};this._InitializeMainRecordMarker=function(){if(typeof this._XSLParams.RecordData!="undefined"&&typeof this._MainRecordMarker=="undefined"){var n=new RecordMarkerBuilder,t={id:null,lat:this._XSLParams.RecordData.Lat,lng:this._XSLParams.RecordData.Lng,recordType:this._XSLParams.RecordData.RecordType,geoStatus:this._XSLParams.RecordData.GeoStatus,status:this._XSLParams.RecordData.Status,markerNumber:null,selected:!1};this._MainRecordMarker=n.Build(t)}};this._GetMarkerLatLng=function(n){return typeof n.lat=="undefined"||typeof n.lng=="undefined"?null:new google.maps.LatLng(parseFloat(n.lat),parseFloat(n.lng))};this._GetMarker=function(n){var i=this._GetMarkerLatLng(n),r,t,u;return i==null&&!this._AllowMarkersWithoutLatLng?null:(typeof this._SelectedMarkerId!="undefined"&&this._SelectedMarkerId!=null&&this._SelectedMarkerId===n.id&&(n.selected=!0),r=this._GetMarkerContent(n),t=new RichMarker({id:n.id,position:i,draggable:typeof n.draggable!="undefined"?n.draggable:!1,content:gts.$(r).get(0),cursor:"pointer",clickable:!1,flat:!0,zIndex:1e3,originalZIndex:1e3,markerData:n}),i!=null&&(t.setPosition(i),u=typeof t.markerData.visible=="undefined"||t.markerData.visible,u&&t.setMap(this.GMap)),n.selected&&(this._SelectedMarkerId=t.id),this._XSLParams.ShowToolTips&&this._AddToolTipToMarker(t,n),this._AddClickEventToMarker(t,n),this._AddDragEventToMarker(t),t)};this._FindMarker=function(n){if(typeof n=="undefined"||n==null)return null;var t=gts.$.grep(this._Markers,function(t){return t.id===n});return t.length>0?t[0]:null};this._GetMarkerContent=function(){alert("MapModuleBase._GetMarkerContent. Define override.")};this._AddClickEventToMarker=function(n,t){if(this._BindToMarkerClick){var i=this;google.maps.event.addListener(n,"click",function(r){typeof r!="undefined"&&typeof r.stopPropagation=="function"&&r.stopPropagation();i._SelectedMarkerId!==n&&(i._MarkerUnHighlight(i._SelectedMarkerId,i._selectedClass),i._MarkerHighlight(n,i._selectedClass),i._SelectedMarkerId=n.id);$(document).trigger("MarkerClicked"+RenoEventsNS+"."+i._XSLParams.ModuleId,{marker:this,markerData:t})})}};this._AddDragEventToMarker=function(n){if(this._BindToMarkerDrag){var t=this;google.maps.event.addListener(n,"dragend",function(){gts.$(document).trigger("MarkerDragged"+RenoEventsNS+"."+t._XSLParams.ModuleId,{marker:this})})}};this._AddToolTipToMarker=function(n,t){isResponsive?this._AddToolTipsterOnMarker(n,t):this._AddToolTipOnMarker(n,t)};this._AddToolTipOnMarker=function(n,t){typeof toolTip!="undefined"&&typeof t.name!="undefined"&&(n.toolTip=new toolTip({offset:{x:20,y:-15},tip:!0,content:t.name,context:this._MapEle}),google.maps.event.addListener(n,"mouseover",function(){n.toolTip.showTip()}),google.maps.event.addListener(n,"mouseout",function(){n.toolTip.hide()}),google.maps.event.addListener(n,"click",function(){n.toolTip.hide()}))};this._AddToolTipsterOnMarker=function(n,t){if(typeof t.name!="undefined"&&typeof $("body").tooltipster!="undefined"){var i=gts.$(n.getContent());setTimeout(function(){n.toolTip=i.tooltipster({content:t.name,position:"right",interactive:!0})},0);gts.$(i).hover(function(){typeof n.toolTip!="undefined"&&n.toolTip.tooltipster("show")},function(){typeof n.toolTip!="undefined"&&n.toolTip.tooltipster("hide")});gts.$(i).click(function(){typeof n.toolTip!="undefined"&&n.toolTip.tooltipster("hide")})}};this._MarkerHighlight=function(n,t){if(typeof n!="undefined"&&n!=null){n.setZIndex(google.maps.Marker.MAX_ZINDEX+1);var i=gts.$(n.getContent());i.addClass(t);n.setContent(i[0])}};this._MarkerUnHighlight=function(n,t){var i,r;typeof n!="undefined"&&n!=null&&(i=this._FindMarker(n),i!=null)&&(r=gts.$(i.getContent()),r.removeClass(t),i.setZIndex(i.originalZIndex),i.setContent(r[0]))};this._MapZoomChangedEventHandler=null;this._MapDragStartEventHandler=null;this._MapDragEndEventHandler=null;this._MapNewBoundsChangedEventWaitTimer=null;this._AddMapEventListeners=function(){var n=this,t=typeof n._XSLParams.MapInteraction!="undefined"&&n._XSLParams.MapInteraction===MapInteraction.Inert;(n._MapDragStartEventHandler=google.maps.event.addListener(n.GMap,MapEventType.DragStart,function(){n._dragging=!0;var i=google.maps.event.addListener(n.GMap,MapEventType.Idle,function(){(google.maps.event.removeListener(i),n._draggingIdleReceived=!0,n._dragging)||n._OnDragEnd(t)})}),n._MapDragEndEventHandler=google.maps.event.addListener(n.GMap,MapEventType.DragEnd,function(){n._dragging=!1;n._draggingIdleReceived&&(n._draggingIdleReceived=!1,n._OnDragEnd(t))}),t)||(n._MapZoomChangedEventHandler=google.maps.event.addListener(this.GMap,MapEventType.ZoomChanged,function(){var t=google.maps.event.addListener(n.GMap,MapEventType.Idle,function(){google.maps.event.removeListener(t);n._OnZoomChanged()})}))};this._OnDragEnd=function(n){this._isFirstLoadInProgress||(this._EnsureBounds(),n)||this._OnMapBoundsChanged(MapEventType.DragEnd)};this._OnZoomChanged=function(){this._isFirstLoadInProgress||(this._EnsureBounds(),this._OnMapBoundsChanged(MapEventType.ZoomChanged))};this._RemoveMapEventListeners=function(){this._MapZoomChangedEventHandler!=null&&google.maps.event.removeListener(this._MapZoomChangedEventHandler);this._MapDragStartEventHandler!=null&&google.maps.event.removeListener(this._MapDragStartEventHandler);this._MapDragEndEventHandler!=null&&google.maps.event.removeListener(this._MapDragEndEventHandler)};this._OnMapBoundsChanged=function(n){this._CanTriggerMapBoundsEvents&&this._TriggerMapBoundsChangedEvent(n)};this._TriggerMapBoundsChangedEvent=function(n){var t=this;t._MapNewBoundsChangedEventWaitTimer!=null&&window.clearTimeout(t._MapNewBoundsChangedEventWaitTimer);t.MapBounds=t.GMap.getBounds();t._MapNewBoundsChangedEventWaitTimer=window.setTimeout(function(){log.debug("MapModuleBase._MapBoundsChangedRequestHandler");$(document).trigger("MapBoundsChanged"+RenoEventsNS+"."+t._XSLParams.ModuleId,{Bounds:t.MapBounds,MapEventType:n});t._MapNewBoundsChangedEventWaitTimer=null},500)};this._GetSelectedMarker=function(){return this._FindMarker(this._SelectedMarkerId)};this._BindToMapTypeIdChangeEvent=function(){var n=this;this._MapTypeIdChangedListener!=null&&google.maps.event.removeListener(this._MapTypeIdChangedListener);this._MapTypeIdChangedListener=google.maps.event.addListener(this.GMap,"maptypeid_changed",function(){n._MapTypeIdChangeForceInProgress||(n._XSLParams.UserSelectedMapTypeId=n.GMap.getMapTypeId());n._MapTypeIdChangeForceInProgress=!1})};this._ForceMapTypeId=function(){if(typeof this._XSLParams.UserSelectedMapTypeId=="undefined"||this._XSLParams.UserSelectedMapTypeId===""){var n=this._MapOptions.mapTypeId;(this._XSLParams.MapTypeSatelliteZoomLevelEnabled&&this.GMap.getZoom()>=this._XSLParams.MapTypeSatelliteZoomLevel&&(n=google.maps.MapTypeId.SATELLITE),this.GMap.getMapTypeId()!==n)&&(this._MapTypeIdChangeForceInProgress=!0,this.GMap.setOptions({mapTypeId:n}))}};this._SetLoadingIndicatorToMap=function(){this._XSLParams.ShowLoadingIndicator&&gts.$(this._XSLParams.LoadingImageSelector,this._ModuleEle).length!=1&&this._SetControlToMap(this._LoadingImage,google.maps.ControlPosition.TOP_CENTER,!0)};this.DataLoadingStarted=function(){this._ShowLoadingIndicator()};this._ShowLoadingIndicator=function(){if(this._XSLParams.ShowLoadingIndicator){this._StopLoadingImageTimer();var n=this;this._LoadingImageTimer=window.setTimeout(function(){gts.$(n._XSLParams.LoadingImageSelector,n._ModuleEle).addClass("is-active").show();n._UpdateMapMessage()},n._LoadingImageDelay)}};this.DataLoadingStopped=function(){typeof this._RecordMarkersLoader!="undefined"&&this._RecordMarkersLoader.Abort();this._HideLoadingIndicator()};this._HideLoadingIndicator=function(){this._XSLParams.ShowLoadingIndicator&&(this._StopLoadingImageTimer(),gts.$(this._XSLParams.LoadingImageSelector,this._ModuleEle).removeClass("is-active").hide(),this._UpdateMapMessage())};this._StopLoadingImageTimer=function(){this._LoadingImageTimer!=null&&window.clearTimeout(this._LoadingImageTimer);this._LoadingImageTimer=null};this.SetCursor=function(n){var t;t=this.GMap.getZoom()<this._XSLParams.ZoomLevelForMarkers?typeof n=="undefined"?this._BullseyeCursor:n:this._DefaultCursor;this.GMap.setOptions({draggableCursor:t})};this.SetCursorWithTimeout=function(n){var t=this;setTimeout(function(){t.SetCursor()},n)};this._LoadClusteredMarkers=function(){if(typeof this._XSLParams.MapMarkerRendering!="undefined"&&this._XSLParams.MapMarkerRendering==MapMarkerRendering.RenderClustered){var n=this,t=function(t){if(t!=null){n.ClearMarkers();gts.$.each(t.recordMarkerInfos,function(t,i){n.SetMarkerToMap(i)});var i=gts.$.extend({map:n.GMap,onClickCallback:function(t){if(n._XSLParams.ClusterMarkerSettings.markerClickAction=="CenterAndZoom"||typeof t.markerData.bounds=="undefined"){n._RecenterToLatLngAndZoom(new google.maps.LatLng(t.markerData.lat,t.markerData.lngm,n.GMap.getZoom()+t.markerData.minzoomsteps));return}MapBoundsUtility.FitBounds({map:n.GMap,bounds:new google.maps.LatLngBounds(new google.maps.LatLng(t.markerData.bounds.min.lat,t.markerData.bounds.min.lng),new google.maps.LatLng(t.markerData.bounds.max.lat,t.markerData.bounds.max.lng)),forceZoom:!0,forcedZoomInSteps:t.markerData.minzoomsteps})}},n._XSLParams.ClusterMarkerSettings);n._clusterMarkers=new ClusterMarkersBuilder(i).Build(t);n.DataLoadingStopped()}};this._RecordMarkersLoader.Load(this._XSLParams.CurrentPageSEOUrlGetter(this),this.GMap.getBounds(),this.GMap.getZoom(),t,this._XSLParams.ClusteredMarkersRequestData);this._SetIsFirstLoadInProgressToFalseIfReady()}};this._SetIsFirstLoadInProgressToFalseIfReady=function(){this._mapIdleHandled&&(this._isFirstLoadInProgress=!1)};this._RecenterToLatLngAndZoom=function(n,t){typeof t=="undefined"&&(t=this.GMap.getZoom()+1);this.GMap.setCenter(n);this.GMap.setZoom(t)};this._InitializeContainerBreakpoints=function(){this._ContainerBreakpointsElement="";this._MapEle.containerBreakpoints&&(this._ContainerBreakpointsElement=this._MapEle.containerBreakpoints({breakpoints:MapContainerSettings.breakpoints}))};this._BindToContainerBreakpointChange=function(){var n=this;if(this._ContainerBreakpointsElement)this._ContainerBreakpointsElement.off("changeBreakpoint.containerBreakpoints.MapModule"+RenoEventsNS).on("changeBreakpoint.containerBreakpoints.MapModule"+RenoEventsNS,function(t){t.stopPropagation();n._UpdateMapMessage();n._mapIdleHandled&&(typeof n._RecordMarkersLoader!="undefined"&&n._RecordMarkersLoader.SetMapBreakpointKey(n._ContainerBreakpointsElement.containerBreakpoints("getCurrentBreakpoint").key),n._LoadClusteredMarkers())})};this._UpdateMapMessage=function(){var r=gts.$(this._MapSelector,this._ModuleEle),n=r.find(".js-update-position:not(.js-top-message)"),u=n.filter(".js-top-lt"),f=n.filter(".js-top-rt"),s=n.filter(".js-lt-top:first"),h=n.filter(".js-rt-top:first"),e=r.find(".js-top-message:visible"),t=0,i=[],o;n.length&&(e.length&&(elemMaxHeight=_.max(e,function(n){return gts.$(n).outerHeight()}),t=gts.$(elemMaxHeight).outerHeight()),t&&this.topSpacingForControls!==t)&&(u.length?gts.$.merge(i,u):gts.$.merge(i,s),f.length?gts.$.merge(i,f):gts.$.merge(i,h),this.topSpacingForControls=t,gts.$(i).each(function(){gts.$(this).css("margin-top",t+10)}),o=this.GMap.getCenter(),google.maps.event.trigger(this.GMap,"resize"),this.GMap.setCenter(o))};this.SetCanTriggerMapBoundsEvents=function(n){this._CanTriggerMapBoundsEvents=n}};;;var MarkerHoverService=Class.create({_defaultParams:{hoverClassPrefix:"marker",mouseenterEvent:"mouseenter",mouseleaveEvent:"mouseleave",onMouseEnter:function(){},onMouseOut:function(){},eventNs:null},initialize:function(n){this._params=gts.$.extend({},this._defaultParams,n);this._eventNS=typeof this._params.eventNs!="undefined"?this._params.eventNs:null},HoverMarker:function(n,t){typeof n!="undefined"&&n!==null&&(n.oldZIndex=n.getZIndex(),n.setZIndex(google.maps.Marker.MAX_ZINDEX+1),t===undefined&&(t=n.getContent()),n.isMarkerHighlight=!0,gts.$(t).addClass(this._params.hoverClassPrefix+"--hover"))},UnhoverMarker:function(n,t){typeof n!="undefined"&&n!==null&&(typeof n.oldZIndex!="undefined"&&n.setZIndex(n.oldZIndex),t===undefined&&(t=n.getContent()),n.isMarkerHighlight=!1,gts.$(t).removeClass(this._params.hoverClassPrefix+"--hover"))},AddMarkerMouseHover:function(n){if(typeof n!="undefined"&&n!==null){var i=this,t=gts.$(n.getContent());t.off(this._params.mouseenterEvent).on(this._params.mouseenterEvent,function(){i._OnMarkerMouseOver(n,t)});t.off(this._params.mouseleaveEvent).on(this._params.mouseleaveEvent,function(){i._OnMarkerMouseOut(n,t)})}},_OnMarkerMouseOver:function(n,t){this.HoverMarker(n,t);this._params.onMouseEnter(n);this._eventNS!==null&&gts.$(document).trigger("MarkerMouseOver"+this._eventNS,{markerData:n.markerData})},_OnMarkerMouseOut:function(n,t){this.UnhoverMarker(n,t);this._params.onMouseOut(n);this._eventNS!==null&&gts.$(document).trigger("MarkerMouseOut"+this._eventNS,{markerData:n.markerData})}});;;;var MarkerHighlighterService=Class.create({_defaultParams:{hoverServiceParams:{}},initialize:function(n){this._params=gts.$.extend({},this._defaultParams,n);this._markerHoverService=new MarkerHoverService(this._params.hoverServiceParams)},AddMarkerMouseHover:function(n){this._markerHoverService.AddMarkerMouseHover(n)},HoverMarker:function(n,t){this._markerHoverService.HoverMarker(n,t)},UnhoverMarker:function(n,t){this._markerHoverService.UnhoverMarker(n,t)},HighlightMarker:function(n){n.oldZIndex=n.getZIndex();n.setZIndex(google.maps.Marker.MAX_ZINDEX+1);gts.$(n.getContent()).addClass("marker-status-highlight")},UnhighlightMarker:function(n){typeof n.oldZIndex!="undefined"&&n.setZIndex(n.originalZIndex);var i=gts.$(n.getContent()),t=i.attr("class");t=t.replace(/(?:^|\s)marker-status-highlight(?!\S)/g,"");i.attr("class",t)}});;;;var MapBubbleServiceBase=Class.create({initialize:function(){this._OngoingRequest=null},_AbortOngoingRequest:function(){this._OngoingRequest!=null&&this._OngoingRequest.abort()},ShowBubble:function(){alert("MapBubbleServiceBase.ShowBubble. Define override.")},_LoadBubbleData:function(n,t,i){var r=this,u=gts.$.extend({type:"POST",dataType:"html",beforeSend:function(n){r._AbortOngoingRequest();r._OngoingRequest=n},error:function(i,u,f){log.debug("Json Error Message: error("+f+') "'+u+'"');var e=String.Format('<div id="{0}">An error occurred.<\/div>',t);r._OnBubbleDataLoaded(n,t,e)},success:function(i){r._OnBubbleDataLoaded(n,t,i)}},i);gts.$.ajax(u)},_OnBubbleDataLoaded:function(){alert("MapBubbleServiceBase._OnBubbleDataLoaded. Define override.")},_CreateInfoWindow:function(n,t){return new google.maps.InfoWindow({position:n.getPosition(),pixelOffset:new google.maps.Size(0,5),maxWidth:800,content:t,markerId:n.id})},_CreateLoadingWindow:function(n){return new google.maps.InfoWindow({position:n.getPosition(),pixelOffset:new google.maps.Size(0,5),maxWidth:730,content:'<p class="InfoWindowLoading  info-bubble__loading">Please Wait...<\/p>'})},_LoadBubbleJavascripts:function(n){$.each($(n).filter("script"),function(n,t){ExecuteJavaScript(t.innerHTML)})},_StyleInfoBubble:function(n){gts.$(".gm-style-iw-d").addClass("map-info-bubble__parent").css("overflow","auto");n==="loading"&&gts.$(".gm-style-iw").find("button").remove()}});;;;ResultItemLayoutManagerBase=Class.create({_defaultOptions:{primaryResultItemSelector:".js-resultitem-primary",additionalResultItemSelector:".js-resultitem-additional",resultItemParentSelector:".grid__item",parentCloneClassTemplate:"js-resultitem-parent-clone-{0}",noDataResultItemClass:"js-resultitem-nodata",titleClassParentSelector:"js-first-record-title"},initialize:function(n){this._options=gts.$.extend({},this._defaultOptions,typeof n!="undefined"?n:{})},UpdateLayout:function(n,t,i){i||this._ToggleParentVisibility(n);this._MovePossibleAddionalResultItemsToClonedParentSiblings(n);this._MoveTitlesOutside(t)},_MoveTitlesOutside:function(n){var t=this._options.titleClassParentSelector;n.each(function(){var n=gts.$(this),u=n.parent().next(),f=n.parent().prev(),r=n.find("."+t),i;u.hasClass(t)&&u.remove();f.hasClass(t)&&f.remove();r.length&&(i=n.closest(".grid__item"),i.prev().hasClass(t)?i.prev().replaceWith($(r)):i.before($(r)))})},_ToggleParentVisibility:function(n){var i=!n.hasClass(this._options.noDataResultItemClass),t=n.closest(this._options.resultItemParentSelector);if(i){t.show();return}t.hide()},_MovePossibleAddionalResultItemsToClonedParentSiblings:function(n){var i,r,t,u;!gts.$(n).siblings(this._options.primaryResultItemSelector).length!=0&&(i=String.Format(this._options.parentCloneClassTemplate,n.attr("id")),gts.$("."+i).remove(),r=n.nextAll(this._options.additionalResultItemSelector),r.length!=0)&&(t=n.closest(this._options.resultItemParentSelector),t.length!=0)&&(u=t,gts.$.each(r,function(n,r){var f=t.clone().empty().addClass(i);f.append(r);u.after(f);u=f}))}});typeof ResultItemLayoutManager=="undefined"&&(window.ResultItemLayoutManager=new ResultItemLayoutManagerBase);var ResultItemLayoutManager=window.ResultItemLayoutManager;;;;ResultItemInfiniteScrollingLayoutManagerBase=Class.create({_defaultOptions:{resultItemParentSelector:".grid__item",parentCloneClass:"js-resultitem-parent-clone",resultItemEleSelector:".js-resultitem",scrollUpEleSelector:"js-scroll-up",scrollDownEleSelector:"js-scroll-down",resultLoaderTriggerSelector:".js-resultloadertrigger",previousResultLoaderTriggerSelector:".js-resultloadertrigger-previous",nextResultLoaderTriggerSelector:".js-resultloadertrigger-next",resultIndexAttrName:"js-data-resultindex",pageAttrName:"js-data-page",amountOfResultItemsToKeepInDOM:30,initialScrollPosition:40},initialize:function(n){this._options=gts.$.extend({},this._defaultOptions,typeof n!="undefined"?n:{});this._addLoadingItems();this._hideFooter();this._initializeScrollPosition()},_initializeScrollPosition:function(){if(gts.$(this._options.previousResultLoaderTriggerSelector).length==0){ScrollUpDownEventSender.Enable();return}this._moveScrollPosition(this._options.initialScrollPosition,!0)},_moveScrollPosition:function(n,t){var r=this,i;this._DisableNextAndPreviousLoaderTriggerElements();i=!1;ScrollUpDownEventSender.IsEnabled()&&(i=!0,ScrollUpDownEventSender.Disable());gts.$(window).scrollTop(n);setTimeout(function(){r._EnableNextAndPreviousLoaderTriggerElements();(i||typeof t!="undefined"&&t&&!ScrollUpDownEventSender.IsEnabled())&&ScrollUpDownEventSender.Enable();gts.resetScrollPosition();gts.unlockHeadroom()},10)},_addLoadingItems:function(){var n=gts.$(this._options.resultItemEleSelector).closest(".grid"),t;n&&(t='<div class="{0}   grid__item default--1-1  u-hide--alt"><div class="c-loading"><div class="c-loading__button-wrapper"><div class="o-button o-button--bordered">loading<span class="o-loading-dot">.<\/span><span class="o-loading-dot">.<\/span><span class="o-loading-dot">.<\/span><\/div><\/div><\/div><\/div>',gts.$(String.Format(t,this._options.scrollUpEleSelector)).prependTo(n),gts.$(String.Format(t,this._options.scrollDownEleSelector)).appendTo(n))},ShowLoadingElement:function(n){var t=gts.$("."+this._options.scrollUpEleSelector),i=gts.$("."+this._options.scrollDownEleSelector);i.addClass("u-hide--alt");t.addClass("u-hide--alt");n==="previous"&&t.removeClass("u-hide--alt");n==="next"&&i.removeClass("u-hide--alt")},_HideLoadingElements:function(){var n=gts.$("."+this._options.scrollUpEleSelector),t=gts.$("."+this._options.scrollDownEleSelector);n.addClass("u-hide--alt");t.addClass("u-hide--alt")},_hideFooter:function(){var n=gts.$(".js-footer");gts.$(this._options.nextResultLoaderTriggerSelector).length>0&&n&&n.addClass("u-hide")},_showFooter:function(){var n=gts.$(".js-footer");n&&n.hasClass("u-hide")&&n.removeClass("u-hide")},RemoveParents:function(n){n.parent(this._options.resultItemParentSelector).remove()},AddResultItem:function(n,t){var u=this._getResultItemAsContextForInsert(n,t),i,r;u!=null&&(i=u.closest(this._options.resultItemParentSelector),i.length!=0)&&(r=i.clone().empty().addClass(this._options.parentCloneClass),r.append(n),this._HideLoadingElements(),this._DisableNextAndPreviousLoaderTriggerElements(),gts.$(this._options.previousResultLoaderTriggerSelector,i).addClass("u-hide--alt"),gts.$(this._options.previousResultLoaderTriggerSelector,r).addClass("u-hide--alt"),gts.$(this._options.nextResultLoaderTriggerSelector,i).addClass("u-hide--alt"),gts.$(this._options.nextResultLoaderTriggerSelector,r).addClass("u-hide--alt"),t=="previous"?i.before(r):i.after(r))},_removeExtraResultItems:function(n){var i=gts.$(this._options.resultItemEleSelector),t,r,u;if(!(i.length<=this._options.amountOfResultItemsToKeepInDOM)){if(n=="previous")t=i.slice(this._options.amountOfResultItemsToKeepInDOM).closest(this._options.resultItemParentSelector),gts.$(".js-resultitem-last",t).length>0&&gts.$(this._options.nextResultLoaderTriggerSelector,t).length==0&&this._hideFooter(),this._removeElementsWithNoScrollEvent(t),r=gts.$(this._options.nextResultLoaderTriggerSelector+":last");else{u=gts.$(window).scrollTop();t=i.slice(0,i.length-this._options.amountOfResultItemsToKeepInDOM).closest(this._options.resultItemParentSelector);var e=t.first(),f=t.last(),o=e.offset().top,s=f.offset().top+f.height(),h=s-o;this._removeElementsWithNoScrollEvent(t);r=gts.$(this._options.previousResultLoaderTriggerSelector+":first");this._moveScrollPosition(u-h)}r.removeClass("u-hide--alt")}},_getResultItemAsContextForInsert:function(n,t){var i=this,u=gts.$(this._options.resultItemEleSelector),r=null,f=parseInt(n.filter(i._options.resultItemEleSelector).attr(i._options.resultIndexAttrName));return t=="next"?(u.each(function(){var n=gts.$(this);f>parseInt(n.attr(i._options.resultIndexAttrName))&&(r=n)}),r):(u.each(function(){var n=gts.$(this);if(f<parseInt(n.attr(i._options.resultIndexAttrName)))return r=n,!1}),r)},_removeElementsWithNoScrollEvent:function(n){gts.lockHeadroom();var t=ScrollUpDownEventSender.IsEnabled();t&&ScrollUpDownEventSender.Disable();n.remove();t&&ScrollUpDownEventSender.Enable()},Refresh:function(n){if(this._removeExtraResultItems(n.infiniteScrollLoadMode),n.infiniteScrollLoadMode=="previous"){var t=gts.$(this._options.previousResultLoaderTriggerSelector+String.Format("[js-data-page='{0}']",n.page));this._MoveScrollToLoadingTrigger(t);this._HideLoadingElements()}else gts.$(this._options.resultItemEleSelector).last().next(this._options.nextResultLoaderTriggerSelector).length==0&&this._showFooter();this._EnableNextAndPreviousLoaderTriggerElements();ScrollUpDownEventSender.Enable()},_MoveScrollToLoadingTrigger:function(n){var t=n.closest(".grid__item").offset().top-n.closest(".grid").offset().top;this._moveScrollPosition(gts.$(window).scrollTop()+t)},_DisableNextAndPreviousLoaderTriggerElements:function(){gts.$(this._options.previousResultLoaderTriggerSelector).addClass("u-hide--alt");gts.$(this._options.nextResultLoaderTriggerSelector).addClass("u-hide--alt")},_EnableNextAndPreviousLoaderTriggerElements:function(){var n=gts.$(this._options.resultItemEleSelector),t=n.first().parent(),i=n.last().parent();gts.$(this._options.previousResultLoaderTriggerSelector,t).removeClass("u-hide--alt");gts.$(this._options.nextResultLoaderTriggerSelector,i).removeClass("u-hide--alt")}});;;;function ResultItemModuleBase(){ModuleBase.call()}ResultItemModuleBase.prototype=new ModuleBase;ResultItemModuleBase.prototype._OnInitialize=function(){this._OnInitializeResultItemModuleBase()};ResultItemModuleBase.prototype._OnInitializeResultItemModuleBase=function(){if(typeof ResultItemLayoutManager!="undefined"&&ResultItemLayoutManager.UpdateLayout(gts.$(this._PrimaryResultItemForThisModuleSelector),gts.$(this._ResultItemsForThisModuleSelector),this._XSLParams.UseInfiniteScrolling),typeof gts.ResultsItemInitialized!="undefined"?gts.ResultsItemInitialized+=gts.$(".js-record",this._ModuleEle).length||1:gts.ResultsItemInitialized=1,gts.$(document).trigger("ResultsItemInitialized"+RenoEventsNS,{moduleId:this.Id}),this._InitializeSmartImages(),gts.$(".js-new-listing-gallery").length>0){gts.$(".js-new-listing-gallery .listing-item__select").each(function(n,t){gts.$(t).detach().prependTo(gts.$(".listing-item__details").eq(n));gts.$(".listing-item__details .listing-item__select").eq(n).attr("aria-checked",!1).attr("for",gts.$(".listing-item__details .listing-item__select").eq(n).find(".result-checkbox").attr("id"));gts.$(".listing-item__details .listing-item__select").eq(n).find(".result-checkbox").removeAttr("style");gts.$(".listing-item__details .listing-item__select").eq(n).removeAttr("onclick")});gts.$(document).off("keydown.CheckResultItem"+RenoEventsNS).on("keydown.CheckResultItem"+RenoEventsNS,function(n){var i=window.event?n.keyCode:n.which,t=gts.$(n.target).find("input:checkbox");$(".js-new-listing-gallery .listing-item__select").is(":focus")&&i===32&&(t.prop("checked")===!1?(t.prop("checked",!0),t.parent().attr("aria-checked",!0)):(t.prop("checked",!1),t.parent().attr("aria-checked",!1)),gts.$(document).trigger("ChangeCheckbox.SelectedListingsModule"+RenoEventsNS,{elem:t[0],sufixId:"defaultCheck",remove:!0}))})}};ResultItemModuleBase.prototype._SetModuleEle=function(){this._ResultItemsForThisModuleSelector=".js-resultitem-"+this._XSLParams.ModuleEleId;this._PrimaryResultItemForThisModuleSelector=".js-resultitem-primary-"+this._XSLParams.ModuleEleId;this._ModuleEle=gts.$(this._ResultItemsForThisModuleSelector)};ResultItemModuleBase.prototype._GetModuleContainers=function(){return this._resultItemsLoadedViaAjax=gts.$("<div><\/div>"),{wrapper:this._resultItemsLoadedViaAjax}};ResultItemModuleBase.prototype._ReloadContentTransformCallbackBeforeScript=function(n){var t=typeof n=="undefined"||typeof n.infiniteScrollLoadMode=="undefined"?"none":n.infiniteScrollLoadMode,i=this._resultItemsLoadedViaAjax.find(".js-ajaxxslresult"),r;if(t=="none"){this._XSLParams.UseInfiniteScrolling&&(r=gts.$(String.Format(".js-resultitem[js-data-moduleid='{0}']",this.Id)).not(this._ModuleEle),ResultItemInfiniteScrollingLayoutManager.RemoveParents(r));this._ModuleEle.not(this._PrimaryResultItemForThisModuleSelector).remove();this._ModuleEle.siblings(".js-resultloadertrigger").remove();this._ModuleEle.replaceWith(i);return}ResultItemInfiniteScrollingLayoutManager.AddResultItem(i,t)};ResultItemModuleBase.prototype._OnDataLoadIncludeModuleOrNot=function(n){var i,r,t;return this._XSLParams.UseInfiniteScrolling?(i=typeof n=="undefined"||typeof n.updatePageNumberInUrl=="undefined"?!1:n.updatePageNumberInUrl,i)?!1:(r=typeof n=="undefined"||typeof n.infiniteScrollLoadMode=="undefined"?"none":n.infiniteScrollLoadMode,r=="none")?!0:(t=!1,gts.$.each(gts.$(".js-resultitem"),function(i,r){var u=gts.$(r);if(n.page==u.attr("js-data-page"))return t=!0,!1}),!t):!0};;;;function SalesResultItemModuleBase(){ResultItemModuleBase.call()}SalesResultItemModuleBase.prototype=new ResultItemModuleBase;SalesResultItemModuleBase.prototype._OnInitialize=function(){this._OnInitializeResultItemModuleBase();this._OnInitializeSalesResultItemModuleBase()};SalesResultItemModuleBase.prototype._OnInitializeSalesResultItemModuleBase=function(){this._InitializeMapMarkerHighlightingOnHover();this._InitializeCardResultItem()};SalesResultItemModuleBase.prototype._GetRecordElements=function(){return gts.$(".js-record",this._ModuleEle)};SalesResultItemModuleBase.prototype._SetupThumbnailPager=function(){var n=this;n._XSLParams.ModuleLayout==="wfpoverlay"&&gts.$(n._ModuleEle).addClass("wfp--overlay-main");gts.$.each(this._GetRecordElements(),function(){var t=gts.$(this),i=t.attr("id").replace("LS",""),r;if(t.hasClass("js-no-thumbnail-carousel"))r={lazyLoad:n._XSLParams.UseImageLazyLoading,useBestFit:n._XSLParams.UseImageBestFit,alwaysFill:n._XSLParams.UseImageBestFit},$(n._XSLParams.MainImageSelector).smartImage(r);else{var u=gts.$.extend({},n._XSLParams,{ContextEle:t,RecordId:i,Photos:ArrLImg[i],MainImageSelector:n._XSLParams.MainImageSelector,HoverEle:".photo",ThumbPagerEle:".thumb-pager",StartPhotoIndexAttr:"js-data-startphotoindex"}),f=CreateGtsCarouselParams(u),e=new ThumbnailCarousel;gts.$(n._ModuleEle).hasClass("wfp--overlay-main")||e.Initialize(f)}})};SalesResultItemModuleBase.prototype._InitializeMapMarkerHighlightingOnHover=function(){typeof MapHighlightModuleBase!="undefined"&&(this._XSLParams.HighlightSelector=this._ResultItemsForThisModuleSelector,typeof this._mapHighlightModule=="undefined"&&(this._mapHighlightModule=new MapHighlightModuleBase),this._mapHighlightModule.Initialize(this._XSLParams))};SalesResultItemModuleBase.prototype._InitializeCardResultItem=function(){this._BindToListingHover();this._BindAdditionalEventsInitialized();this._HandleTouchBehaviour();this._InitializeTabs()};SalesResultItemModuleBase.prototype._BindAdditionalEventsInitialized=function(){var t=this,n="resultItemModule.tabsinitialized"+RenoEventsNS;gts.$(window).off(n).on(n,function(){t._InitializeTabs()})};SalesResultItemModuleBase.prototype._BindToListingHover=function(){if(!gts.isMobileDevice){var n=this,t=gts.$(".js-record",n._ModuleEle);t.on("mousemove"+RenoEventsNS,function(){var t=$(this);t.addClass("is-card-active");n.inactiveTimer!==undefined&&window.clearTimeout(n.inactiveTimer);n.inactiveTimer=window.setTimeout(function(){t.removeClass("is-card-active")},2e3);gts.$(".js-thumb-pager, .js-galleryview-tabs",t).on("mouseenter"+RenoEventsNS+" mousemove"+RenoEventsNS,function(t){window.clearTimeout(n.inactiveTimer);t.stopPropagation()})});t.on("mouseleave",function(){$(this).removeClass("is-card-active")})}};SalesResultItemModuleBase.prototype._InitializeTabs=function(){var n=this;gts.$(".js-record",this._ModuleEle).find(".js-nav-tabs:first").each(function(){var r=this,t=gts.$(r).attr("for"),i="#"+gts.$(r).closest(".js-record").attr("id"),u;$(r).addClass("is-selected");gts.$("#"+t).addClass("is-selected");t.indexOf("images")>-1&&n._SetupThumbnailPager();t.indexOf("map")>-1&&n._InitializeRecordItemMapElement(i);t.indexOf("contact")>-1&&(gts.$(i+" .o-listing-flag").hide(),n._InitializeContactSmartImages());t.indexOf("video")>-1&&(u=gts.$(i).attr("data-video-type"),setTimeout(function(){n._initializeVideo(u,i)},10))});gts.$(".js-record .js-nav-tabs",this._ModuleEle).off("click"+RenoEventsNS+" touchstart"+RenoEventsNS).on("click"+RenoEventsNS+" touchstart"+RenoEventsNS,function(){var r=this,t=gts.$(r).attr("for"),i="#"+gts.$(r).closest(".js-record").attr("id"),u;if($(this).hasClass("is-selected"))return!1;n._stopVideo();gts.$(i+" .js-nav-tabs").removeClass("is-selected");gts.$(i+" .js-tabs-content").removeClass("is-selected");gts.$(r).addClass("is-selected");gts.$("#"+t).addClass("is-selected");gts.$(i+" .o-listing-flag").show();t.indexOf("images")>-1&&n._SetupThumbnailPager();t.indexOf("map")>-1&&n._InitializeRecordItemMapElement(i);t.indexOf("contact")>-1&&(gts.$(i+" .o-listing-flag").hide(),gts.$("#"+t+" .listing-item__agent-photo .js-smartimage[data-hassmartimage]").smartImage("destroy"),gts.$("#"+t+" .listing-item__agent-photo .js-smartimage").smartImage({useLazyLoad:!1,useBestFit:!1,alwaysFill:!1}),gts.$("#"+t+" .results-logo-wrapper .js-smartimage[data-hassmartimage]").smartImage("destroy"),gts.$("#"+t+" .results-logo-wrapper .js-smartimage").smartImage({useLazyLoad:!1,useBestFit:!1,alwaysFill:!1}),gts.$("#"+t+".js-contact-image-bg .js-smartimage[data-hassmartimage]").smartImage("destroy"),gts.$("#"+t+".js-contact-image-bg .js-smartimage").smartImage({useLazyLoad:!1,useBestFit:n._XSLParams.UseImageBestFit,alwaysFill:n._XSLParams.UseImageBestFit}));t.indexOf("video")>-1&&(u=gts.$(i).attr("data-video-type"),n._initializeVideo(u,i))})};SalesResultItemModuleBase.prototype._initializeVideo=function(n,t){var i=this,r,u;if((n==="mp4"||n==="embeddedvideo")&&i._XSLParams.AlwaysFillVimeo)gts.$(window).off("vimeoAlwaysFill."+i.Id+RenoEventsNS).on("resize.vimeoAlwaysFill."+i.Id+RenoEventsNS,$.throttle(250,function(){i._applyAlwaysFillVimeo()})).on("vimeoPlayerReady.vimeoAlwaysFill."+i.Id+RenoEventsNS,function(){i._applyAlwaysFillVimeo()});if(n==="mp4"){gts.$(t+" .js-mp4-video").imageCarousel({height:"100%",isSingle:!0,hasClearer:!1,hasBullets:!1,hasControls:!1,videoPlayerFillContainer:!0,slideWithBelt:!1,autorotateInterval:0,rotateVideos:!0,autoPlayVideos:!1,hasExpander:!1});gts.$(t+" .js-mp4-video .js-play.icon-play-round").off("click"+RenoEventsNS+" touchstart"+RenoEventsNS).on("click"+RenoEventsNS+" touchstart"+RenoEventsNS,function(){gts.$(".vod-player").length>0&&gts.$(".vod-player").vodPlayer("pause").find(".icon-pause").removeClass("icon-pause").addClass("icon-play-round");gts.$(".js-record").not(t).find(".js-mp4-video.carousel--is-playing").imageCarousel("StopVideo");gts.isMobileDevice&&gts.$(".js-record").addClass("is-card-active");setTimeout(function(){gts.$(t).find(".js-mp4-video.carousel--is-playing").length>0&&(i._stopIframeVideo(t),gts.$(t).removeClass("is-card-active"))},0)})}else if(n==="embeddedvideo"){r=gts.$(t).find("iframe[data-src]");u=r.attr("data-src");window.setTimeout(function(){r.attr("src",u)},10);i._XSLParams.AlwaysFillVimeo&&i._applyAlwaysFillVimeo();r.off("mouseenter"+RenoEventsNS).on("mouseenter"+RenoEventsNS,function(){$(this).parents(".js-record").addClass("is-card-active")})}else if(n==="vod"){gts.$(".js-vod-video .js-smartimage",this._ModuleEle).smartImage({useLazyLoad:this._XSLParams.UseImageLazyLoading,useBestFit:this._XSLParams.UseImageBestFit,alwaysFill:this._XSLParams.UseImageBestFit});i.videoVODElement=gts.$(t+" .vod-player");gts.$(t+" .js-play-vod").off("click"+RenoEventsNS+" touchstart"+RenoEventsNS).on("click"+RenoEventsNS+" touchstart"+RenoEventsNS,function(){i._stopVideo();i._playVOD(t);gts.$(this).remove();gts.$(t+" .js-play").off("click"+RenoEventsNS+" touchstart"+RenoEventsNS).on("click"+RenoEventsNS+" touchstart"+RenoEventsNS,function(n){n.preventDefault();n.stopPropagation();gts.isMobileDevice&&gts.$(".js-record").addClass("is-card-active");gts.$(".js-mp4-video.carousel--is-playing").imageCarousel("StopVideo");i.videoVODElement.attr("data-running")=="true"?(i.videoVODElement.vodPlayer("pause"),gts.$(this).removeClass("icon-pause").addClass("icon-play-round")):(i._stopIframeVideo(t),gts.$(".vod-player").vodPlayer("pause").find(".icon-pause").removeClass("icon-pause").addClass("icon-play-round"),i.videoVODElement.vodPlayer("play"),gts.$(t).removeClass("is-card-active"),gts.$(this).removeClass("icon-play-round").addClass("icon-pause"))})})}gts.$(t+" .js-touch-play").off("touchstart"+RenoEventsNS).on("touchstart"+RenoEventsNS,function(){gts.$(t).toggleClass("is-card-active")})};SalesResultItemModuleBase.prototype._applyAlwaysFillVimeo=function(){const t=$(".js-tabs-content",this._ModuleEle),n=t.find("iframe"),i=t.width(),s=t.height(),r=n.width()<i?i:n.width(),u=Math.round(r/16*9),f=i/r,e=s/u,o=e>f?e:f;n.width(o*r);n.height(o*u)};SalesResultItemModuleBase.prototype._playVOD=function(){};SalesResultItemModuleBase.prototype._stopVOD=function(){};SalesResultItemModuleBase.prototype._stopVideo=function(){var n=this,t;n._stopVOD();typeof gts.$(".js-mp4-video.carousel--is-playing").imageCarousel=="function"&&gts.$(".js-mp4-video.carousel--is-playing").length>0&&(t=gts.$(".js-mp4-video.carousel--is-playing"),t.imageCarousel("StopVideo"));n._stopIframeVideo(n._ModuleEle);gts.isMobileDevice&&gts.$(".js-record",n._ModuleEle).addClass("is-card-active")};SalesResultItemModuleBase.prototype._stopIframeVideo=function(n){n=typeof n=="undefined"?"body":n;$(".is-selected",n).find(".js-embed-video").find("iframe[src]").each(function(){$(this).attr("src",$(this).attr("data-src"))})};SalesResultItemModuleBase.prototype._HandleTouchBehaviour=function(){var n=this;gts.isMobileDevice&&gts.$(".js-record",n._ModuleEle).addClass("is-card-active")};SalesResultItemModuleBase.prototype._InitializeRecordItemMapElement=function(n){var t=gts.$(n+" .js-listing-map"),i=n.replace("#LS",""),u,o;if(!t.hasClass("is-initialized")){var f=this,r=[{lat:gts.$(n).attr("fullresultlat"),lng:gts.$(n).attr("fullresultlng"),geoStatus:gts.$(n).attr("fullresultgeo"),id:i,status:""}],e=this._XSLParams.ModuleLayout==="wfpoverlay"?r:this._XSLParams.RecordMarkers;(markerData=MarkerDataFinder.GetMarkerData(i,e),typeof markerData!="undefined"&&markerData!==null)&&(u=gts.$.extend({},f._XSLParams,{MapContainer:t,MarkerData:this._XSLParams.ModuleLayout==="wfpoverlay"?r[0]:markerData.Data,Index:this._XSLParams.ModuleLayout==="wfpoverlay"?0:markerData.Index,MapControlsType:"custom",MapControlPositions:{ZoomControl:9,StreetViewControl:-1,MapTypeControl:-1}}),o=new RecordItemMap(u),t.addClass("is-initialized"))}};;;;(function(n){"use strict";var f="vodPlayer",t={html:"html",body:"body",widget:"vod-player",isLoading:"is-loading",isMute:"is-mute",isPlaying:"is-playing",isVisible:"is-visible",isActive:"is-active",loader:"o-loader",cover:"vod-player__cover",controlBar:"vod-player__control-bar",slides:"vod-player__slides",header:".vod-player__header",overlay:"vod-player__overlay",hideOnLoading:"vod-player--hide-on-loading",hideOnPlaying:"vod-player--hide-on-playing",jsCover:".js-vod-cover",button:"vod-player__btn",buttonPlay:"btn--play",buttonSound:"btn--sound",buttonLang:"btn--lang",langToggle:"lang__toggle",langFlag:"lang__flag",langSelector:"vod-player__lang-selector",langCurrent:"lang__current",langName:"lang__name",agent:"vod-player__agent",agentPhoto:"agent__photo",agentData:"agent__data",agentName:"agent__name",agentPhone:"agent__phone",agentMail:"agent__mail",agentIcon:"agent__icon",iconPhone:"agent--phone",iconMail:"agent--mail",jsAgentPhone:".js-vod-agent-phone",jsAgentMail:".js-vod-agent-mail",jsListingDetail:".js-vod-details"},i=function(n){return _.map(n.split(","),function(n){return n=n.trim(),n+"."+f}).join(", ")},r=["cover","zoomin","zoomout","panleft","panright","panup","pandown"],e=function(){return r[Math.round(Math.random()*(r.length-2)+1)]},u=function(){return n("<span />").addClass(t.loader)},o=function(){var n=/WebKit/.test(navigator.userAgent),t=/Mozilla/.test(navigator.userAgent)&&/Firefox/.test(navigator.userAgent);return n?"webkit":t?"moz":""},s={transitionName:"cover",startOpacity:"1",stepOpacity:"1",startTranslateX:0,startTranslateY:0,startScale:1,finalTranslateX:0,finalTranslateY:0,finalScale:1},h={transitionName:"zoomin",startOpacity:0,stepOpacity:"1",startTranslateX:0,startTranslateY:0,startScale:1,finalTranslateX:0,finalTranslateY:0,finalScale:1.3},c={transitionName:"vzoomin",startOpacity:0,stepOpacity:".8",startTranslateX:0,startTranslateY:-40,startScale:1,finalTranslateX:0,finalTranslateY:15,finalScale:1.3},l={transitionName:"zoomout",startOpacity:0,stepOpacity:"1",startTranslateX:0,startTranslateY:0,startScale:1.3,finalTranslateX:0,finalTranslateY:0,finalScale:1},a={transitionName:"vzoomout",startOpacity:0,stepOpacity:".8",startTranslateX:0,startTranslateY:15,startScale:1.3,finalTranslateX:0,finalTranslateY:-40,finalScale:1},v={transitionName:"panleft",startOpacity:0,stepOpacity:"1",startTranslateX:0,startTranslateY:0,startScale:1.2,finalTranslateX:-20,finalTranslateY:-20,finalScale:1.4},y={transitionName:"vpanleft",startOpacity:0,stepOpacity:".8",startTranslateX:0,startTranslateY:0,startScale:1.2,finalTranslateX:0,finalTranslateY:-45,finalScale:1.3},p={transitionName:"panright",startOpacity:0,stepOpacity:".8",startTranslateX:0,startTranslateY:0,startScale:1.2,finalTranslateX:15,finalTranslateY:-15,finalScale:1.3},w={transitionName:"vpanright",startOpacity:0,stepOpacity:".8",startTranslateX:0,startTranslateY:-45,startScale:1.3,finalTranslateX:0,finalTranslateY:0,finalScale:1},b={transitionName:"panup",startOpacity:0,stepOpacity:".8",startTranslateX:0,startTranslateY:0,startScale:1,finalTranslateX:0,finalTranslateY:0,finalScale:1.3},k={transitionName:"vpanup",startOpacity:0,stepOpacity:".8",startTranslateX:0,startTranslateY:0,startScale:1,finalTranslateX:0,finalTranslateY:0,finalScale:1.3},d={transitionName:"pandown",startOpacity:0,stepOpacity:".8",startTranslateX:0,startTranslateY:0,startScale:1,finalTranslateX:0,finalTranslateY:0,finalScale:1.3},g={transitionName:"vpandown",startOpacity:0,stepOpacity:".8",startTranslateX:0,startTranslateY:0,startScale:1,finalTranslateX:0,finalTranslateY:0,finalScale:1.3};n.widget("gts."+f,{_audioMusic:null,_audioVoice:null,_playSound:!0,_activeSlide:null,_movieStatus:!1,_animStatus:!1,_slidesLoaded:!1,_isHover:!1,_heading:null,_overlay:null,_controlBar:null,_btnPlay:null,_btnSound:null,_agent:null,options:{theme:"light",autoplay:!1,hasControls:!0,customPlayButton:null,customSoundButton:null,customCover:!1,width:"100%",height:"100%",barHideDelay:2e3,animationSeconds:4,bgColor:"",pathToXmlData:"",xmlData:n("<div/>"),languages:[],slides:[],music_url:"",currentLanguageName:"english",imgProxyReloader:"IPX_DetailsMain",buttonsHTMLTag:"<li />",playSound:!0,displayListingInfo:!0,overrideCoverAnimation:!0,enableClickToCall:!0,events:{}},_create:function(){var t=this;t.options.ControlBar!==undefined&&n(t.options.ControlBar).length>0&&(t._controlBar=n(t.options.ControlBar));t._browser=o();t._createPlayer()},_destroy:function(){var n=this;n._pause();n._audioVoice=null;n._audioMusic=null},render:function(){var n=this;n._createCover();n._createAgentCard();n.options.hasControls&&(n._createControls(),n._bindToEvents())},play:function(){return this._play()},pause:function(){return this._pause()},stop:function(){return this._stop()},_createPlayer:function(){var n=this;n.element.addClass(t.widget);n.element.addClass("t-"+n.options.theme);isResponsive?(n.element.addClass("u-ar__content").addClass("is-absolute").addClass(t.widget+"--responsive"),gts.deviceIs.iOS&&n.element.addClass("vod-player-is-ios")):n.element.width(n.options.width).height(n.options.height);n.options.bgColor!==""&&n.element.css("backgroundColor",n.options.bgColor);n.element.html("").addClass("is-"+n._browser).append(u());n.element.attr("data-running","loading");n.options.pathToXmlData!==""?n.options.xmlData.load(n.options.pathToXmlData,function(){n._handleXmlData()}):n.render()},_handleXmlData:function(){var t=this;if(isResponsive&&(t.options.width=t.element.is(":visible")?Math.ceil(t.element.width()):Math.ceil(t.element.parents(":visible").width()),t.options.height=t.element.is(":visible")?Math.ceil(t.element.outerHeight()):Math.ceil(t.element.parents(":visible").outerHeight())),t.options.slides=t.options.xmlData.find("slide").map(function(){var u=n(this),r={},i=u.attr("url"),f;return isResponsive&&(i=i.replace(/h=(.*?)&/i,"h="+t.options.height+"&"),i=i.replace(/w=(.*?)&/i,"w="+t.options.width+"&")),i.indexOf("option=")===-1&&i.indexOf("&imageurl=")!==-1&&(f=i.indexOf("&imageurl="),i=i.substring(0,f)+"&option=n"+i.substring(f,i.length)),r.image=i,r.vodHeader=u.find("draw_text").text(),r.transition=u.find("transition").text(),r.loaded=!1,r}).get(),t.options.music_url=t.options.xmlData.find("music").attr("url"),t.options.xmlData.find("event").each(function(){var i=n(this);t.options.events[i.attr("type")]=i.text()}),t.options.enableClickToCall=!_.isUndefined(t.options.events.clicktocall),t.options.xmlData.find("displayagent")&&t.options.xmlData.find("displayagent").text().toLowerCase()==="true"){var r=t.options.xmlData.find("agent"),i=r.attr("url"),f=r.find("draw_text").text(),e=t.options.xmlData.find("agent_phone").text(),u="imageurl=";t._agent={name:f,phone:e};t._agent.url=i.indexOf(u,i.length-u.length)!==-1?"":i}t.render()},_createCover:function(){var i=this,r=i.options.slides[0],f,e;i.options.customCover?i.options.autoplay&&i.element.attr("data-running")!=="true"&&(i.options.autoplay=!1,i.element.append(u()),i._play(),i.element.attr("data-running","true")):(r.vodHeader!==""&&!i.element.find(t.header).length&&i.options.displayListingInfo&&(i._headerContainer=n("<p />").addClass(t.header.substring(1)).addClass(t.hideOnLoading).addClass(t.isVisible).width(i.options.width).html(r.vodHeader).appendTo(i.element)),f=n("<div />"),e=n("<img />"),f.addClass(t.cover).addClass(t.jsCover.substring(1)).appendTo(i.element),e.attr("src",r.image).appendTo(f).load(function(){i._backgroundImageLoaded(n(this));i.element.attr("data-running","false")}))},_backgroundImageLoaded:function(n){var t=this,i=n.parent();i.css("background-image","url('"+n.attr("src")+"')");n.remove();t.options.autoplay&&t.element.attr("data-running")!=="true"&&(t.options.autoplay=!1,t._play())},_createAgentCard:function(){var i=this;_.isNull(i._agent)||(i._agentContainer=n("<div />").appendTo(i.element).addClass(t.agent).addClass(t.hideOnLoading).addClass(t.isVisible),i._agent.url&&n("<img />").addClass(t.agentPhoto).attr("src",i._agent.url).appendTo(i._agentContainer),n("<div />").addClass(t.agentData).appendTo(i._agentContainer).append(n("<div />").addClass(t.agentName).html(i._agent.name)).append(i.options.enableClickToCall?n("<a href='#'/>").addClass(t.agentPhone).addClass(t.jsAgentPhone.substring(1)).text("Click To Call").prepend(n("<i />").addClass(t.agentIcon).addClass(t.iconPhone).append(n("<span />"))):n("<span>",{"class":"tel phone-number",title:i._agent.phone,text:i._agent.phone})).append(n("<a href='#'/>").addClass(t.agentMail).addClass(t.jsAgentMail.substring(1)).text("Email Agent").prepend(n("<i />").addClass(t.agentIcon).addClass(t.iconMail).append(n("<span />")))))},_createSlides:function(){var i=this,r=i.options.slides.length,u=n("style[data-slides="+r+"]");u.length||i._createAnimationCSS(r);i._slidesContainer=n("<div />").addClass(t.slides).addClass(t.hideOnLoading);i._slidesContainer.appendTo(i.element);_.each(i.options.slides,function(t,u){var s=u*i.options.animationSeconds,h=i.options.slides.length*i.options.animationSeconds,o=typeof t.transition!="undefined"?t.transition:e(),f="";i._browser==="webkit"&&(f="-"+i._browser+"-");u===0&&i.options.overrideCoverAnimation&&(o="cover");n("<img />").attr("src",t.image).addClass(o+"_"+r).attr("data-index",u).css(f+"animation-delay",s+"s").css(f+"animation-duration",h+"s").attr("onerror",'ImgProxyReloader("'+i.options.imgProxyReloader+'", this)').appendTo(i._slidesContainer).load(function(){i._onImageLoaded(n(this))});i._slidesLoaded=!0})},_createAnimationCSS:function(t){var e=this,tt=100/t,rt=tt/e.options.animationSeconds,it=tt+rt,ut=it/e.options.animationSeconds,i="",o=e._browser!=""?"-"+e._browser+"-":"",u=function(n){var i="";return i+="@"+o+"keyframes "+n.transitionName+"_"+t+" {",i+="0% { opacity:"+n.startOpacity+"; "+o+"transform:translate("+n.startTranslateX+"%, "+n.startTranslateY+"%) scale("+n.startScale+"); } ",i+=ut+"% { opacity:"+n.stepOpacity+"; } "+tt+"% { opacity:1;  } ",i+=it+"% { opacity:0; "+o+"transform:translate("+n.finalTranslateX+"%, "+n.finalTranslateY+"%) scale("+n.finalScale+"); } ",i+"100% { opacity:0; }}"},f,nt;for(i+=u(s),i+=u(h),i+=u(l),i+=u(v),i+=u(p),i+=u(b),i+=u(d),i+=u(c),i+=u(a),i+=u(y),i+=u(w),i+=u(k),i+=u(g),f=0;f<r.length;f++)i+=".vod-player__slides img."+r[f]+"_"+t+" {",i+=o+"animation:"+r[f]+"_"+t+" linear infinite;",i+="}",nt=".vod-player__slides img."+r[f]+"_"+t+".is-portrait {",nt+=o+"animation:"+r[f]+"_"+t+"_vertical linear infinite;",nt+="}",i+=nt;n('<style data-slides="'+t+'" />').text(i).appendTo(e.element)},_onImageLoaded:function(n){var i=this,o=n.attr("data-index"),u=n.width(),f=n.height(),e,r;for(f>u&&n.addClass("img-portrait"),n.width(i.options.width).height(Math.round(i.options.width*f/u)),n.height()<i.options.height?(n.height(i.options.height).width(Math.round(i.options.height*u/f)),n.css("margin-left",(n.width()-i.options.width)/-2+"px")):n.height()>i.options.height&&n.css("margin-top",(n.height()-i.options.height)/-2+"px"),i.options.slides[o].loaded=!0,e=!0,r=0;r<i.options.slides.length;r++)if(!i.options.slides[r].loaded){e=!1;break}o==="0"?n.animate({opacity:1},1e3):e&&(i._hideCoverImage(),i.element.find("."+t.loader).remove(),_.isUndefined(i.options.events.report)||eval(i.options.events.report))},_hideCoverImage:function(){var i=this,r=i.element.find(t.jsCover),u=100;i.options.overrideCoverAnimation&&(u=1e3);r.length>0&&r.fadeTo(u,0,function(){n(this).remove();i._run(!0)})},_createControls:function(){var i=this,r;_.isNull(i._controlBar)&&(i._controlBar=n("<ul/>").addClass(t.controlBar).addClass(t.hideOnLoading).addClass(t.isVisible).appendTo(i.element));i._btnPlay=n(i.options.buttonsHTMLTag).addClass(t.button).addClass(t.buttonPlay).appendTo(i._controlBar);i._btnSound=n(i.options.buttonsHTMLTag).addClass(t.button).addClass(t.buttonSound).appendTo(i._controlBar).append(n("<span />"));i.options.playSound||(i._btnSound.addClass(t.isMute),i.element.addClass(t.isMute));i._overlay=n("<div />").css("bottom",i._controlBar.height()+"px").addClass(t.overlay).addClass(t.hideOnLoading).appendTo(i.element);r=i.options.events.listingdetail.split("(");r.length>0&&(r=r[0],eval("typeof("+r+') != "undefined"')&&i.options.events.listingdetail!==""&&n("<a href='#' />").text("View listing details").addClass(t.jsListingDetail.substring(1)).appendTo(i._overlay));i._createLanguageSelector()},_createLanguageSelector:function(){var i=this,u="",r,f,e,o;_.keys(i.options.languages).length>1&&(r=n(i.options.buttonsHTMLTag).addClass(t.button).addClass(t.buttonLang).appendTo(i._controlBar),f=i.element.attr("id")+"VodLangToggle",n("<input type='checkbox' id='"+f+"' />").addClass(t.langToggle).appendTo(r),e=n("<ul />").addClass(t.langSelector).appendTo(r),_.each(i.options.languages,function(r){var f=n("<li />").addClass(r.iso).text(r.type).appendTo(e);r.type===i.options.currentLanguageName&&(f.addClass(t.isActive),u=r.iso);n("<i />").addClass(t.langFlag).addClass("lang--"+r.iso.toLowerCase()).prependTo(f);f.bind("click",{obj:this},function(){i._changeLanguage(n(this))})}),e.css("bottom","20px"),o=n('<label for="'+f+'" />').addClass(t.langCurrent).text("Language: ").appendTo(r),n("<span />").addClass(t.langName).text(i.options.currentLanguageName).appendTo(o),u&&n("<i />").addClass(t.langFlag).addClass("lang--"+u.toLowerCase()).appendTo(o))},_bindToEvents:function(){var n=this,r=n.element.find(t.jsListingDetail),u=n.element.find(t.jsAgentPhone),f=n.element.find(t.jsAgentMail);n._btnPlay.off(i("click")).on(i("click"),function(){n.element.attr("data-running")==="false"?n._play():n._pause()});n._btnSound.off(i("click")).on(i("click"),function(){n.element.hasClass(t.isMute)?(n.element.removeClass(t.isMute),n._btnSound.removeClass(t.isMute),n._playSound=!0,n.options.playSound=!0,n.element.attr("data-running")==="true"&&n._playAudio()):(n.element.addClass(t.isMute),n._btnSound.addClass(t.isMute),n._playSound=!1,n.options.playSound=!1,_.isNull(n._audioMusic)||n._audioMusic.pause(),_.isNull(n._audioVoice)||n._audioVoice.pause())});n.element.off(i("mouseenter")).on(i("mouseenter"),function(){n._isHover=!0;n.element.attr("data-running")==="true"&&(n._controlBar.hasClass(t.isVisible)||(n._headerContainer.addClass(t.isVisible),n._controlBar.addClass(t.isVisible),_.isUndefined(n._agentContainer)||n._agentContainer.addClass(t.isVisible)))}).off(i("mouseleave")).on(i("mouseleave"),{$me:this},function(){n._isHover=!1;n.element.attr("data-running")==="true"&&setTimeout(function(){if(!n._isHover&&n._controlBar.hasClass(t.isVisible)){n._headerContainer.removeClass(t.isVisible);n._controlBar.removeClass(t.isVisible);_.isUndefined(n._agentContainer)||n._agentContainer.removeClass(t.isVisible);var i=n._controlBar.find("."+t.langToggle);i.length>0&&i.is(":checked")&&i.trigger("click")}},n.options.barHideDelay)});if(r.length>0&&!_.isUndefined(n.options.events.listingdetail))r.off(i("click")).on(i("click"),function(){return eval(n.options.events.listingdetail),!1});if(u.length>0&&!_.isUndefined(n.options.events.clicktocall))u.off(i("click")).on(i("click"),function(){return eval(n.options.events.clicktocall),!1});if(f.length>0&&!_.isUndefined(n.options.events.emailagent))f.off(i("click")).on(i("click"),function(){return eval(n.options.events.emailagent),!1})},_run:function(n){var i=this;i.element.toggleClass(t.isPlaying,n);i.options.hasControls&&i._btnPlay.toggleClass(t.isPlaying,n);i.element.attr("data-running",n.toString())},_play:function(){var n=this;_.isUndefined(n._slidesContainer)||n._slidesContainer.addClass(t.slides);n.element.attr("data-running")!=="true"&&(n._slidesLoaded?(n._hideCoverImage(),n._run(!0)):(n._run("loading"),n.element.append(u()),n._createSlides()),n.options.playSound&&n._playAudio())},_pause:function(){var n=this;_.isNull(n._audioMusic)||n._audioMusic.pause();_.isNull(n._audioVoice)||n._audioVoice.pause();n._run(!1)},_stop:function(){var i=this;i._pause();_.isNull(i._audioMusic)||(i._audioMusic.currentTime=0);_.isNull(i._audioVoice)||(i._audioVoice.currentTime=0);_.isUndefined(i._slidesContainer)||(i._slidesContainer.removeClass(t.slides),i._slidesContainer.find("> img").each(function(){var t=n(this),i=t.attr("class");t.removeClass(i);setTimeout(function(){t.addClass(i)},200)}));i.element.find(t.jsCover).length===0&&(i._createCover(),_.isUndefined(i._agentContainer)||i._agentContainer.addClass(t.isVisible))},_playAudio:function(){var n=this;_.isNull(Audio)||(_.isNull(n._audioMusic)&&n.options.music_url!==""&&(n._audioMusic=new Audio(n.options.music_url),n._audioMusic.loop=!0),n._playSound&&(_.isNull(n._audioMusic)||n._audioMusic.play(),_.isNull(n._audioVoice)||n._audioVoice.play()))},_changeLanguage:function(n){var i=this,r=n.parent(),u=r.parent(),e=r.find("."+t.isActive),o=u.find("."+t.langToggle),s=u.find("."+t.langCurrent),f=s.find("."+t.langName),h=f.next();i._stop();e.removeClass(t.isActive);f.text(n.text());h.attr("class",t.langFlag).addClass("lang--"+n.attr("class").toLowerCase());n.addClass(t.isActive);i._audioVoice=null;o.trigger("click");i._play()}})})(jQuery);;;;(function(n){gts.vodMethods||(gts.vodMethods={transitions:["zoomin","zoomout","panleft","panright","panup","pandown"],getRandomTransition:function(){var n=gts.vodMethods.transitions;return n[Math.round(Math.random()*(n.length-1))]},init:function(n){this.isHover=!1;this.bCanHideControlbar=!1;this.settings=gts.$.extend({debug:!1,autoplay:!1,useVodControls:!0,btnCustomPlay:null,btnCustomSound:null,width:400,height:300,barShowSpeed:200,barHideSpeed:500,barHideDelay:2e3,speedAppear:500,speedAnimation:5e3,animationSeconds:6,skin:"light",vodClass:"vod-stage",bgColor:"",pathToCss:"css/",pathToXmlData:"",$xmlData:gts.$("<div/>"),languages:[],slides:[],sounds:[],music_url:"",currentLanguageName:"english",imgProxyReloader:"IPX_DetailsMain"},n);var t=this;return this.settings.$xmlData.attr("instance",this.attr("id")),this.attr("running","false"),this.settings.pathToXmlData!=""&&(log.debug("loadXML at "+this.settings.pathToXmlData),this.settings.$xmlData.load(this.settings.pathToXmlData,function(){t.vod("handleXmlData")})),this.addClass(this.settings.vodClass).width(this.settings.width).height(this.settings.height),this.isIE8=!1,(document.documentMode||100)<9&&(this.isIE8=!0),this.settings.bgColor!=""&&this.css("backgroundColor",this.settings.bgColor),this.addClass("vod-"+this.settings.skin),this.html(""),this.isIE8&&gts.$("<img />").attr("src",StaticResources+"/layouts/common/images/1x1.gif").attr("width",this.settings.width).attr("height",this.settings.height).css("float","left").appendTo(this),this.preloader=gts.$("<span />").addClass("vod-preloader").appendTo(this),this.addClass("vod-preloading"),this.transitions=gts.vodMethods.transitions,this.browsers=[""],this.audioMusic=null,this.audioVoice=null,this.playSound=!0,this.activeSlide=null,this.movieStatus=!1,this.animStatus=!1,this.$btnPlay=this.settings.btnCustomPlay,this.$btnSound=this.settings.btnCustomSound,this.$btnPlay!=null&&typeof this.$btnPlay=="string"&&(this.$btnPlay=gts.$(this.$btnPlay)),this.$btnSound!=null&&typeof this.$btnSound=="string"&&(this.$btnSound=gts.$(this.$btnSound)),this},handleXmlData:function(){var n=this;this.settings.slides=this.settings.$xmlData.find("slide").map(function(){var t={},n=gts.$(this).attr("url"),i;return n.indexOf("option=")==-1&&(i=n.indexOf("&imageurl="),n=n.substring(0,i)+"&option=N"+n.substring(i,n.length)),t.image=n,t.vodHeader=gts.$(this).find("draw_text").html(),t.transition=gts.$(this).find("transition").text(),t.loaded=!1,t}).get();this.settings.music_url=this.settings.$xmlData.find("music").attr("url");log.debug("VOD Plugin: Load audio "+this.settings.music_url);this.vod("start")},start:function(){return this.settings.autoplay=!0,this.isIE8?(this.vod("animateSlide",0,!1),this.removeClass("vod-preloading")):this.vod("drawSlides"),this.settings.useVodControls&&this.vod("drawControls"),this.vod("bindEvents"),this},defineAnimation:function(n){var u=100/n,s=u/4,f=u+s,e=f/4,t="",h=this.vod("getBrowser"),r,o;for(log.debug("#BROWSER : "+navigator.userAgent),k=0;k<this.browsers.length;k++)r=this.browsers[k],t+="@"+r+"keyframes zoomin_"+n+" {",t+="0% { opacity:0; "+r+"transform:translate(0, 0) scale(1); }",t+=e+"% { opacity:1; } "+u+"% { opacity:1;  }",t+=f+"% { opacity:0; "+r+"transform:translate(0, 0) scale(1.3); }",t+="100% { opacity:0; }}",t+="@"+r+"keyframes zoomin_"+n+"_vertical {",t+="0% { opacity:0; "+r+"transform:translate(0, -40%) scale(1); }",t+=e+"% { opacity:0.8; } "+u+"% { opacity:1;  }",t+=f+"% { opacity:0; "+r+"transform:translate(0, 15%) scale(1.3); }",t+="100% { opacity:0; }}",t+="@"+r+"keyframes zoomout_"+n+" {",t+="0% { opacity:0; "+r+"transform:translate(0, 0) scale(1.3); }",t+=e+"% { opacity:1; } "+u+"% { opacity:1; }",t+=f+"% { opacity:0; "+r+"transform:translate(0, 0) scale(1); }",t+="100% { opacity:0; }}",t+="@"+r+"keyframes zoomout_"+n+"_vertical {",t+="0% { opacity:0; "+r+"transform:translate(0, 15%) scale(1.3); }",t+=e+"% { opacity:0.8; } "+u+"% { opacity:1;  }",t+=f+"% { opacity:0; "+r+"transform:translate(0, -40%) scale(1); }",t+="100% { opacity:0; }}",t+="@"+r+"keyframes panleft_"+n+" {",t+="0% { opacity:0; "+r+"transform:translate(0, 0) scale(1.2); }",t+=e+"% { opacity:1; } "+u+"% { opacity:1;  }",t+=f+"% { opacity:0; "+r+"transform:translate(-20%, -20%) scale(1.4); }",t+="100% { opacity:0; }}",t+="@"+r+"keyframes panleft_"+n+"_vertical {",t+="0% { opacity:0; "+r+"transform:translate(0, 0) scale(1.2); }",t+=e+"% { opacity:0.8; } "+u+"% { opacity:1;  }",t+=f+"% { opacity:0; "+r+"transform:translate(0, -45%) scale(1.3); }",t+="100% { opacity:0; }}",t+="@"+r+"keyframes panright_"+n+" {",t+="0% { opacity:0; "+r+"transform:translate(0, 0) scale(1.2); }",t+=e+"% { opacity:0.8; } "+u+"% { opacity:1;  }",t+=f+"% { opacity:0; "+r+"transform:translate(20%, -20%) scale(1.4); }",t+="100% { opacity:0; }}",t+="@"+r+"keyframes panright_"+n+"_vertical {",t+="0% { opacity:0; "+r+"transform:translate(0, -45%) scale(1.3); }",t+=e+"% { opacity:0.8; } "+u+"% { opacity:1;  }",t+=f+"% { opacity:0; "+r+"transform:translate(0, 0) scale(1); }",t+="100% { opacity:0; }}",t+="@"+r+"keyframes panup_"+n+" {",t+="0% { opacity:0; "+r+"transform:translate(0, 0) scale(1.2); }",t+=e+"% { opacity:0.8; } "+u+"% { opacity:1;  }",t+=f+"% { opacity:0; "+r+"transform:translate(-15%, -15%) scale(1.3); }",t+="100% { opacity:0; }}",t+="@"+r+"keyframes panup_"+n+"_vertical {",t+="0% { opacity:0; "+r+"transform:translate(0, 0) scale(1); }",t+=e+"% { opacity:0.8; } "+u+"% { opacity:1;  }",t+=f+"% { opacity:0; "+r+"transform:translate(0, -45%) scale(1); }",t+="100% { opacity:0; }}",t+="@"+r+"keyframes pandown_"+n+" {",t+="0% { opacity:0; "+r+"transform:translate(0, -10%) scale(1.2); }",t+=e+"% { opacity:0.8; } "+u+"% { opacity:1;  }",t+=f+"% { opacity:0; "+r+"transform:translate(-15%, 15%) scale(1.3); }",t+="100% { opacity:0; }}",t+="@"+r+"keyframes pandown_"+n+"_vertical {",t+="0% { opacity:0; "+r+"transform:translate(0, -45%) scale(1.3); }",t+=e+"% { opacity:0.8; } "+u+"% { opacity:1;  }",t+=f+"% { opacity:0; "+r+"transform:translate(-10%, 0) scale(1.2); }",t+="100% { opacity:0; }}";for(i=0;i<this.transitions.length;i++){for(t+=".vod-movie.vod-status-play .vod-slides img."+this.transitions[i]+"_"+n+" {",styleContentVertical=".vod-movie.vod-status-play .vod-slides img."+this.transitions[i]+"_"+n+".img-portrait {",j=0;j<this.browsers.length;j++)t+=this.browsers[j]+"animation:"+this.transitions[i]+"_"+n+" linear infinite;",styleContentVertical+=this.browsers[j]+"animation:"+this.transitions[i]+"_"+n+"_vertical linear infinite;";t+="}";styleContentVertical+="}";t+=styleContentVertical}o=gts.$('<style class="slides_'+n+'" />');o.text(t).appendTo(this)},drawSlides:function(){var t=this,o=this.settings.slides[0],r=this.settings.slides.length,c=gts.$("style.slides_"+r),u,s;for(c.length!=0||this.isIE8||this.vod("defineAnimation",r),o.vodHeader!=""&&this.find(".vod-header").length==0&&(n("<div />").addClass("vod-header").addClass("vod-overlay").width(this.settings.width).appendTo(this),u=n("<p />").addClass("vod-header").width(this.settings.width).html(o.vodHeader).appendTo(this),u.html(u.text())),s=gts.$("<div />").addClass("vod-slides").appendTo(this),i=0;i<this.settings.slides.length;i++){var f=this.settings.slides[i],h=i*6,l=this.settings.slides.length*6,a=typeof f.transition!="undefined"?f.transition:gts.vodMethods.getRandomTransition(),e=gts.$("<img />").attr("src",f.image).addClass(a+"_"+r).attr("index",i).attr("onerror","ImgProxyReloader('"+this.settings.imgProxyReloader+"', this)").appendTo(s);for(j=0;j<this.browsers.length;j++)e.css(this.browsers[j]+"animation-duration",l+"s");if(h>0)for(j=0;j<this.browsers.length;j++)e.css(this.browsers[j]+"animation-delay",h+"s");e.load(function(){var n=gts.$(this),f=n.attr("index"),r=n.width(),i=n.height(),u;for(i>r&&n.addClass("img-portrait"),n.width(t.settings.width).height(Math.round(t.settings.width*i/r)),i<t.settings.height&&f>0&&n.height(t.settings.height).width(Math.round(t.settings.height*r/i)),t.settings.slides[f].loaded=!0,u=!0,k=0;k<t.settings.slides.length;k++)if(!t.settings.slides[k].loaded){u=!1;break}u&&(t.removeClass("vod-preloading"),t.find(".vod-slides > img:first-child").css("opacity",0).animate({opacity:1},800,function(){t.settings.autoplay&&t.attr("running")!="true"&&t.vod("play")}))})}},drawControls:function(){var e=this,t,i,r,f,u;if(this.css("position","relative"),t=gts.$("<ul/>").addClass("vod-control").addClass(this.settings.skin).appendTo(this),t.css("bottom",0),gts.$("<li />").addClass("bg").appendTo(t),i=gts.$("<li />").addClass("vod-btn vod-play").appendTo(t),gts.$("<a />").addClass("vod-icon").appendTo(i),r=gts.$("<li />").addClass("vod-btn vod-sound").appendTo(t),gts.$("<a />").addClass("vod-icon").appendTo(r),this.$btnPlay=this.$btnPlay==null?i:this.$btnPlay.add(i),this.$btnSound=this.$btnSound==null?r:this.$btnSound.add(r),this.settings.languages.length>2){f=gts.$("<li />").addClass("vod-btn vod-lang").appendTo(t);$langSelect=gts.$('<ul class="select"/>').appendTo(f);for(k in this.settings.languages)u=this.settings.languages[k],$langOption=gts.$("<li />").addClass(u.iso).text(u.type).appendTo($langSelect),u.type==this.settings.currentLanguageName&&$langOption.addClass("vod-active"),$flag=gts.$('<span class="vod-flag" />').prependTo($langOption),$langOption.bind("click",{obj:this},function(n){var t=gts.$(this);n.data.obj.vod("pause");n.data.obj.vod("languageClick",t);n.data.obj.vod("play")});$langSelect.css("bottom","20px");$currentLanguage=gts.$('<div class="vod-current-language" />').addClass("ENG").text("Language: ").appendTo(f);gts.$("<span />").addClass("vod-icon").prependTo($currentLanguage);gts.$('<span class="vod-langName"/>').text(this.settings.currentLanguageName).appendTo($currentLanguage);$currentLanguage.append('<span class="vod-flag"><\/span>')}$hoverLayer=n("<div />").html('<a href="#">View listing details<\/a>').height(this.height()-20).css("line-height",this.height()-20+"px").addClass("hover-layer")},bindEvents:function(){var n=this;this.$btnPlay.unbind("click").bind("click",{$me:this},function(n){n.data.$me.attr("running")=="false"?(n.data.$me.vod("play"),n.data.$me.bCanHideControlbar=!0):(n.data.$me.bCanHideControlbar=!1,n.data.$me.vod("pause"))});this.$btnSound.unbind("click").bind("click",{$me:this},function(){var t=gts.$(this);n.playSound?(n.attr("running")=="true"&&(n.audioMusic!=null&&n.audioMusic.pause(),n.audioVoice!=null&&n.audioVoice.pause()),n.playSound=!1,t.removeClass("vod-sound").addClass("vod-sound-off")):(n.attr("running")=="true"&&(n.audioMusic!=null&&n.audioMusic.play(),n.audioVoice!=null&&n.audioVoice.play()),n.playSound=!0,t.removeClass("vod-sound-off").addClass("vod-sound"))});this.unbind("mouseover").bind("mouseover",{$me:this},function(n){n.data.$me.isHover=!0;var t=n.data.$me.find(".vod-control"),i=n.data.$me.find(".vod-header");t.animate({bottom:0},n.data.$me.settings.barShowSpeed);i.animate({top:0},n.data.$me.settings.barShowSpeed)});this.unbind("mouseout").bind("mouseout",{$me:this},function(n){n.data.$me.isHover=!1;n.data.$me.attr("running")=="true"&&setTimeout(function(){n.data.$me.bCanHideControlbar&&gts.vodMethods.hideControl(n.data.$me)},n.data.$me.settings.barHideDelay)})},hideControl:function(n){if(!n.isHover){var i=n.find(".vod-control"),t=n.find(".vod-header");i.animate({bottom:-1*n.height()},n.settings.barHideSpeed);t.animate({top:-1*t.outerHeight()-5},n.settings.barHideSpeed)}},play:function(){if(this.isIE8){this.animStatus=!0;var n=this;return this.$btnPlay.addClass("vod-pause"),this.attr("running","true"),typeof Audio!="undefined"&&(this.audioMusic==null&&(this.audioMusic=new Audio(this.settings.music_url),this.audioMusic.loop=!0),this.audioMusic.play(),this.audioVoice.play()),this.movieStatus?this.activeSlide.resume():this.settings.slides.length>1&&(this.vod("animateSlide",1),this.movieStatus=!0),this}for(this.$btnPlay.addClass("vod-pause"),this.isIE8||this.attr("running")=="true"||this.vod("_playAudio"),this.attr("running","true"),this.addClass("vod-status-play"),k=0;k<this.browsers.length;k++)this.find(".vod-slides > img").css(this.browsers[k]+"animation-play-state","running");return this.animStatus=!0,this},_playAudio:function(){if(Audio!=null){var n=this;this.settings.music_url!=""&&(this.audioMusic=new Audio(this.settings.music_url),this.audioMusic.loop=!0);this.playSound&&(this.audioMusic!=null&&this.audioMusic.play(),this.audioVoice!=null&&this.audioVoice.play())}},pause:function(){if(this.$btnPlay.removeClass("vod-pause"),this.attr("running","false"),this.animStatus=!1,this.settings.autoplay=!1,this.isIE8)return this.activeSlide.pause(),this;for(this.audioMusic!=null&&this.audioMusic.pause(),this.audioVoice!=null&&this.audioVoice.pause(),k=0;k<this.browsers.length;k++)this.find(".vod-slides > img").css(this.browsers[k]+"animation-play-state","paused");return this},stop:function(){this.settings.autoplay=!1;this.vod("pause");this.audioMusic=null;this.audioVoice=null;this.removeClass("vod-status-play")},languageClick:function(n){var i=n.parent(),u=i.parent(),r=i.find(".vod-active"),t=u.find(".vod-current-language"),f=t.find(".vod-langName");r.removeClass("vod-active");t.removeClass(r.attr("class"));t.addClass(n.attr("class"));f.text(n.text());n.addClass("vod-active");this.audioMusic=null},getBrowser:function(){var n=/WebKit/.test(navigator.userAgent),t=/Mozilla/.test(navigator.userAgent)&&/Firefox/.test(navigator.userAgent),i=typeof opera!="undefined";n?(this.browsers=["-webkit-",""],gts.$(".vod-stage").addClass("browser-webkit")):/*@cc_on!@*/!1?(this.browsers=["-ms-"],gts.$(".vod-stage").addClass("browser-msie")):t?(this.browsers=["-moz-"],gts.$(".vod-stage").addClass("browser-moz")):i?(this.browsers=[""],gts.$(".vod-stage").addClass("browser-opera")):(this.browsers=[""],gts.$(".vod-stage").addClass("browser-normal"))},animateSlide:function(t,i){var i=i===undefined?!0:i,r=this;if(this.settings.slides.length!=0){t>=this.settings.slides.length&&(t=0);var u=this.settings.slides[t],e=gts.$('<div id="slide_'+t+'" />').addClass("vod-holder").appendTo(this),f=gts.$("<img />");this.activeSlide=f;f.load(function(){var f=n(this),e=f.width(),l=f.height(),o,s,h,c;e>l?(o=Math.round(e*r.settings.height/r.settings.height),s=(r.settings.width-o)/2,f.height(r.settings.height).width(o),s<0&&f.css("left",s+"px")):(h=Math.round(l*r.settings.width/r.settings.width),c=(r.settings.height-h)/2,f.width(e).height(h),c<0&&f.css("top",c+"px"));i&&r.animStatus&&r.vod("handleAnimation",u,this,t)});f.appendTo(e).attr("src",u.image);typeof u.vodHeader!="undefined"&&u.vodHeader!=""&&this.find(".vod-header").length==0&&(n("<div />").addClass("vod-header").addClass("vod-overlay").width(this.settings.width).appendTo(this),n("<p />").addClass("vod-header").width(this.settings.width).html(u.vodHeader).appendTo(this));e.fadeIn(r.settings.speedAppear,function(){var i=t-1,n;t==0&&(i=r.settings.slides.length-1);n=gts.$("#slide_"+i,r);n.length>0&&n.remove()})}},handleAnimation:function(n,t,i){var b=this,c={},e=t.width,f=t.height,l=gts.$(t),k=typeof n.transition!="undefined"?n.transition:gts.vodMethods.getRandomTransition(),a;l.attr("transition",k);switch(k){case"wait":c={width:this.settings.width};break;case"zoomin":var o=1,r,u,v=0,y=0,h=e,s=f;e>f?(u=this.settings.height,r=Math.round(e*u/f),r<this.settings.width&&(r=this.settings.width,u=Math.round(f*r/e))):(r=this.settings.width,u=Math.round(f*r/e),s<this.settings.height&&(u=this.settings.height,r=Math.round(e*u/f)));o=this.settings.height/u;s=u;h=Math.round(e/o);h>this.settings.width&&(w=(this.settings.width-h)/2);s>this.settings.height&&(p=(this.settings.height-s)/2);r>this.settings.width&&(v=(this.settings.width-r)/2);u>this.settings.height&&(y=(this.settings.height-u)/2);c={width:r,height:u,left:v,top:y};a=3*o/2;l.width(h*a).height(s*a).css("left",w+"px").css("top",p+"px");break;case"zoomout":var o=1,r,u,v=0,y=0,h=e,s=f;e>f?(s=this.settings.height,h=Math.round(e*s/f),h<this.settings.width&&(h=this.settings.width,s=Math.round(f*h/e))):(h=this.settings.width,s=Math.round(f*h/e),s<this.settings.height&&(s=this.settings.height,h=Math.round(e*s/f)));o=this.settings.height/s;u=s;r=Math.round(e/o);r>this.settings.width&&(v=(this.settings.width-r)/2);u>this.settings.height&&(y=(this.settings.height-u)/2);c={width:r,height:u,left:v,top:y};a=3*o/2;l.width(h*a).height(s*a).css("left",-1*Math.round((h*a-this.settings.width)/2)+"px").css("top",-1*Math.round((s*a-this.settings.height)/2)+"px");break;case"panup":var o=1,r,u,v=0,y=0,p=0,w=0,h=e,s=f;e>f?(u=this.settings.height,r=Math.round(e*u/f),r<this.settings.width&&(r=this.settings.width,u=Math.round(f*r/e))):(r=this.settings.width,u=Math.round(f*r/e),s<this.settings.height&&(u=this.settings.height,r=Math.round(e*u/f)));o=1.5;s=Math.round(u*o);h=Math.round(r*o);r>this.settings.width&&(v=(this.settings.width-r)/4);w=(this.settings.width-h)*3/4;p=this.settings.height-s;l.css("left",w).css("top",p).width(h).height(s);c={top:y,left:v};break;case"pandown":this.settings.width>this.settings.height?(o=3*this.settings.height/(2*f),u=f*o,r=e*o):(o=Math.round(this.settings.width/e),r=this.settings.width,u=Math.round(f*o));l.css("left",r/-4).css("top",0).width(r).height(u);c={top:this.settings.height-u,left:this.settings.width-3*r/4};break;case"panright":this.settings.width>this.settings.height?(o=3*this.settings.height/(2*f),u=f*o,r=e*o):(o=Math.round(this.settings.width/e),r=this.settings.width,u=Math.round(f*o));l.css("left",0).css("top",u/-4).width(r).height(u);c={left:this.settings.width-r,top:this.settings.height-3*u/4};break;case"panleft":this.settings.width>this.settings.height?(o=3*this.settings.height/(2*f),u=f*o,r=e*o):(o=Math.round(this.settings.width/e),r=this.settings.width,u=Math.round(f*o));l.css("left",this.settings.width-r).css("top",u/-4).width(r).height(u);c={left:0,top:this.settings.height-3*u/4};break;default:c={width:this.settings.width}}l.animate(c,this.settings.speedAnimation,function(){b.animStatus&&b.vod("animateSlide",i+1)})}});gts.$.fn.vod=function(n){if(gts.vodMethods[n])return gts.vodMethods[n].apply(this,Array.prototype.slice.call(arguments,1));if(typeof n!="object"&&n)log.debug("Method "+n+" does not exist on gts.jQuery.VOD");else return gts.vodMethods.init.apply(this,arguments)}})(jQuery),function(){function u(){return(new Date).getTime()}var n=jQuery,t="jQuery.pause",r=1,f=n.fn.animate,i={};n.fn.animate=function(e,o,s,h){var c=n.speed(o,s,h);return c.complete=c.old,this.each(function(){this[t]||(this[t]=r++);var o=n.extend({},c);f.apply(n(this),[e,n.extend({},o)]);i[this[t]]={run:!0,prop:e,opt:o,start:u(),done:0}})};n.fn.pause=function(){return this.each(function(){this[t]||(this[t]=r++);var f=i[this[t]];f&&f.run&&(f.done+=u()-f.start,f.done>f.opt.duration?delete i[this[t]]:(n(this).stop(),f.run=!1))})};n.fn.resume=function(){return this.each(function(){this[t]||(this[t]=r++);var e=i[this[t]];e&&!e.run&&(e.opt.duration-=e.done,e.done=0,e.run=!0,e.start=u(),f.apply(n(this),[e.prop,n.extend({},e.opt)]))})}}();;;;function ListingItemModule(){SalesResultItemModuleBase.call()}ListingItemModule.prototype=new SalesResultItemModuleBase;ListingItemModule.prototype._OnInitialize=function(n){typeof n!="undefined"&&(this._XSLParams=n,this._ModuleEle=$("#"+this._XSLParams.ModuleId));this._OnInitializeResultItemModuleBase();this._OnInitializeSalesResultItemModuleBase();this._OnInitializeListingItemModule()};ListingItemModule.prototype._OnInitializeListingItemModule=function(){var n=this,t=gts.$(".js-record",n._ModuleEle);n._InitializeExpanderToggle();typeof SetupListingToolsHover!="undefined"&&SetupListingToolsHover(n._ModuleEle);n._SetIconToolTips();t.hasClass("c-listing-item--list")?(n._SetupThumbnailPager(),n._InitializeContactSmartImages()):t.hasClass("listing-item__table-row")||gts.$(n._ModuleEle).hasClass("listing-item__table-row")?n._InitializeTableListingThumbnail():n._InitializeAdvertiserLogoSmartImages()};ListingItemModule.prototype._InitializeTableListingThumbnail=function(){gts.$(".js-record-image .js-smartimage",this._ModuleEle).smartImage({useLazyLoad:this._XSLParams.UseImageLazyLoading,useBestFit:this._XSLParams.UseImageBestFit,alwaysFill:this._XSLParams.UseImageBestFit})};ListingItemModule.prototype._InitializeContactSmartImages=function(){gts.$(".js-agent-photo .js-smartimage",this._ModuleEle).smartImage({useLazyLoad:this._XSLParams.UseImageLazyLoading,useBestFit:this._XSLParams.UseImageBestFit,alwaysFill:this._XSLParams.UseImageBestFit});this._InitializeAdvertiserLogoSmartImages();gts.$(".js-record-image .js-smartimage, .js-contact-image-bg .js-smartimage",this._ModuleEle).smartImage({useLazyLoad:this._XSLParams.UseImageLazyLoading,useBestFit:this._XSLParams.UseImageBestFit,alwaysFill:this._XSLParams.UseImageBestFit})};ListingItemModule.prototype._InitializeAdvertiserLogoSmartImages=function(){gts.$(".results-logo-wrapper .js-smartimage",this._ModuleEle).smartImage({useLazyLoad:this._XSLParams.UseImageLazyLoading,useBestFit:!1,alwaysFill:!1})};ListingItemModule.prototype._InitializeSmartImages=function(){gts.$(".js-c-thumbnail-carousel .js-smartimage",this._ModuleEle).smartImage({useLazyLoad:this._XSLParams.UseImageLazyLoading,useBestFit:this._XSLParams.UseImageBestFit,alwaysFill:this._XSLParams.UseImageBestFit})};ListingItemModule.prototype._InitializeExpanderToggle=function(){if(typeof RecordExpanderToggleModuleBase!="undefined"){this._XSLParams.RecordExpanderToggleSelector=String.Format("div.{0}.view-toggle",this.Id);this._XSLParams.RecordExpanderToggleCollapserSelector="div.hlisting .view-toggle";this._XSLParams.ReverseTogglePrevPrev=!1;var n=new RecordExpanderToggleModuleBase;n.Initialize(this._XSLParams)}};ListingItemModule.prototype._stopVOD=function(){typeof gts.$(".vod-player.is-playing").vodPlayer=="function"&&gts.$(".vod-player.is-playing").length>=1&&gts.$(".vod-player.is-playing").each(function(){var n=$(this);n.vodPlayer("pause");n.find(".icon-pause").removeClass("icon-pause").addClass("icon-play-round")})};ListingItemModule.prototype._playVOD=function(n){if(me=this,me.videoVODElement=gts.$(n+" .vod-player"),gts.$(n+" .js-listing-item-vod-cover").remove(),me.videoVODElement.length===0){(new EmbeddedVideoOnDemand).Initialize({ContainerSelector:n+" .js-vod-video",ListingId:n.replace("#LS",""),playSound:!1,displayListingInfo:!1,hasControls:!1,Autoplay:!0,customCover:!0,overrideCoverAnimation:!1,ContainerId:"vod"+n.replace("#LS",""),channel:me._XSLParams.Channel});me.videoVODElement=gts.$(n+" .vod-player");me.videoVODElement.append('<span class="js-controls"><div class="listing-item__video-overlay  js-touch-play"><\/div><i class="icon  icon-pause  listing-item__video-play  js-play"><\/i><\/span>');gts.$(n+" .js-touch-play").off("touchstart"+RenoEventsNS).on("touchstart"+RenoEventsNS,function(){gts.$(n).toggleClass("is-card-active")})}else me.videoVODElement.vodPlayer("play")};;;;var MarkerDataFinder={GetMarkerData:function(n,t){if(t==null)return{Data:null,Index:-1};var i=-1,r=null;return gts.$.each(t,function(t,u){var f=!1;return u==null?!1:(typeof n=="object"&&typeof u.id=="object"?gts.$.each(n,function(n,t){return f=gts.$.inArray(t,u.id)>-1,f?!1:void 0}):f=typeof n=="object"?gts.$.inArray(u.id,n)>-1:typeof u.id=="object"?gts.$.inArray(n,u.id)>-1:u.id===n,f?(i=t,r=u,!1):void 0)}),{Data:r,Index:i}}};;;;var RecordMarkerBuilder=Class.create({_defaultParams:{UseNumberedMapMarkers:!1,UseLettersForNumbers:!1,UseItemCountOnMapMarkers:!1},initialize:function(n){this._xslParams=gts.$.extend({},this._defaultParams,n);this._mapRecordMarkerStatusDataProvider=new MapRecordMarkerStatusDataProvider},Build:function(n){var t=gts.$.extend({statusData:this._mapRecordMarkerStatusDataProvider.GetStatusData(n.recordType,n.geoStatus,n.status,n.typeOverride),selected:!1},n);return this._GetMarkerImplementation(t)},_GetMarkerImplementation:function(n){return new RichMarker({id:n.id,position:new google.maps.LatLng(n.lat,n.lng),content:gts.$(this._GetRichMarkerContent(n)).get(0),flat:!0,zIndex:1e3,originalZIndex:1e3,markerData:n})},_GetRichMarkerContent:function(n){var t=this._GetMarkerInfo(n),i="";return t!==""&&(i=this._xslParams.UseNumberedMapMarkers?"marker-has-number":this._xslParams.UseItemCountOnMapMarkers?"marker-item-count":"marker-has-text"),String.Format('<div class="record-marker  record-marker--static  marker-type-{0} {1} {2} {3} {6}" data-recordmarkerfor="{4}">{5}<\/div>',n.statusData.type,this._GetMarkerStatusClass(n),n.statusData.isFeatured?"marker-is-featured":"",i,n.id,this._GetMarkerLabel(t,n),this._GetMarkerIconClass(n))},_GetMarkerInfo:function(n){if(this._xslParams.UseNumberedMapMarkers)return typeof n.markerNumber!="number"?"":n.markerNumber;if(this._xslParams.UseItemCountOnMapMarkers)return typeof n.itemCount=="number"&&n.itemCount>1?n.itemCount:"";var t=n.statusData.type,i=this._xslParams.UseNumberedMapMarkers;if(!i){if(t==="listing"||t==="soldlisting"||t==="zip"||t==="community")return n.text!==undefined?n.text:"";if(t==="multilisting"||t==="multisoldlisting"||t==="multizip"||t==="multicommunity"||t==="multioffice")return n.itemCount}return""},_GetMarkerIconClass:function(n){var t=n;return t&&t.status&&t.status.includes("WFPExclusive")?"marker-type-wfp-new":""},_GetCustomMarkerLabel:function(n){var t=n;return t&&t.status&&t.status.includes("WFPExclusive")?'<i class="icon icon-wfp" aria-hidden="true" />':""},_GetMarkerLabel:function(n,t){var i=n,r;return i!==""&&!this._xslParams.UseItemCountOnMapMarkers?(r=typeof this._xslParams.UseLettersForNumbers!="undefined"?this._xslParams.UseLettersForNumbers:!1,r&&(i=String.fromCharCode(64+parseInt(i))),"<span class='record-marker__label-text'><i class='record-marker__text'>"+i+"<\/i>"+this._GetCustomMarkerLabel(t)+"<\/span>"):"<span class='record-marker__label'>"+i+"<\/span>"},_GetMarkerStatusClass:function(n){var t=n.statusData.bestStatus;return n.selected?"marker-status-highlight  marker-status-"+t:"marker-status-"+t}});;;;var MapIconType={Listing:1,Community:2,MultiListing:3,Office:4,Zip:6,MultiZip:7,MultiCommunity:8,MultiOffice:9,SoldListing:10,MultiSoldListing:11},MapIconStatus={ComingSoon:1,Normal:2,New:3,PriceReduced:4,OpenHouse:5,VirtualOpenHouse:6,Saved:7,ContractPending:8,UnderContract:9,Recent:10,SoldListing:11,Rented:12,OfferPending:13,OffMarket:14},MapRecordMarkerStatusDataProvider=Class.create({initialize:function(){},GetStatusData:function(n,t,i,r){return{type:typeof r!="undefined"?_.invert(MapIconType)[r].toLowerCase():this._GetMapIconType(n,t,i),bestStatus:this._GetMapIconStatus(i),isFeatured:this._GetIsFeatured(i)}},_GetMapIconType:function(n,t){var i=MapIconType.Listing;if(t==5)i=MapIconType.Zip;else switch(n){case"soldlisting":i=MapIconType.SoldListing;break;case RecordType.Listing:i=MapIconType.Listing;break;case RecordType.Community:i=MapIconType.Community;break;case RecordType.Broker:i=MapIconType.Office;break;default:log.debug(String.Format("MapIconProvider.GetMapIconType error. RecordType {0} does not have a matching MapIconType, returning MapIconType.Listing",n))}return _.invert(MapIconType)[i].toLowerCase()},_GetMapIconStatus:function(n){var t="\\{0}\\b";return typeof n=="undefined"||n==null?_.invert(MapIconStatus)[MapIconStatus.Normal].toLowerCase():n.search(String.Format(t,"ComingSoon"))>-1?_.invert(MapIconStatus)[MapIconStatus.ComingSoon].toLowerCase():n.search(String.Format(t,"OffMarket"))>-1?_.invert(MapIconStatus)[MapIconStatus.OffMarket].toLowerCase():n.search(String.Format(t,"Sold"))>-1?_.invert(MapIconStatus)[MapIconStatus.SoldListing].toLowerCase():n.search(String.Format(t,"Recent"))>-1?_.invert(MapIconStatus)[MapIconStatus.Recent].toLowerCase():n.search(String.Format(t,"UnderContract"))>-1?_.invert(MapIconStatus)[MapIconStatus.UnderContract].toLowerCase():n.search(String.Format(t,"ContractPending"))>-1?_.invert(MapIconStatus)[MapIconStatus.ContractPending].toLowerCase():n.search(String.Format(t,"OfferPending"))>-1?_.invert(MapIconStatus)[MapIconStatus.OfferPending].toLowerCase():n.search(String.Format(t,"Virtual Open House"))>-1?_.invert(MapIconStatus)[MapIconStatus.VirtualOpenHouse].toLowerCase():n.search(String.Format(t,"Open House"))>-1?_.invert(MapIconStatus)[MapIconStatus.OpenHouse].toLowerCase():n.search(String.Format(t,"Reduction"))>-1?_.invert(MapIconStatus)[MapIconStatus.PriceReduced].toLowerCase():n.search(String.Format(t,"New"))>-1?_.invert(MapIconStatus)[MapIconStatus.New].toLowerCase():n.search(String.Format(t,"Rented"))>-1?_.invert(MapIconStatus)[MapIconStatus.Rented].toLowerCase():_.invert(MapIconStatus)[MapIconStatus.Normal].toLowerCase()},_GetIsFeatured:function(n){return typeof n=="undefined"||n==null?!1:n.search(String.Format("\\{0}\\b","Featured"))>-1}});;;;var RecordItemMap=Class.create({initialize:function(n){var t=this;(t._xslParams=gts.$.extend({},n),t._mapContainer=t._xslParams.MapContainer,t._markerData=t._xslParams.MarkerData,t._mapContainer.length!==0&&t._markerData!==null)&&GoogleMapsAPILoader.Load(function(){t._OnApiLoadedCallback()})},_OnApiLoadedCallback:function(){var t=GetDefaultMapOptions(this._xslParams),n=this,r;t.mapTypeControl=!1;t.scrollwheel=!1;t.disableDoubleClickZoom=!0;t.zoom=15;t.center=new google.maps.LatLng(n._markerData.lat,n._markerData.lng);n._Map=new google.maps.Map(n._mapContainer[0],t);isResponsive&&t.useCustomControls&&(r=new CustomMapControls(n._Map,t,t.customControls));var i=n._Map.getCenter(),u=new RecordMarkerBuilder,f={id:null,lat:i.lat(),lng:i.lng(),recordType:n._xslParams.RecordType,geoStatus:n._markerData.geoStatus,status:n._markerData.status,markerNumber:null,selected:!1};n._marker=u.Build(f);n._marker.setMap(n._Map);$(window).on("listingitemmaptabappear"+RenoEventsNS,function(){setTimeout(function(){google.maps.event.trigger(n._Map,"resize");n._Map.setCenter(t.center)},10)})},Refit:function(){typeof this._Map!="undefined"&&this._Map!=null&&google.maps.event.trigger(this._Map,"resize")}});;;;function CreateGtsCarousel(n){var i=CreateGtsCarouselParams(n),t;try{t=new GtsCarousel;t.Initialize(i)}catch(r){log.debug(r.message);t=null}return t}function CreateGtsCarouselParams(n){var t=ImageProxyPath(window.ImageProxyServer);return typeof n.RecordId!="undefined"&&(t=SEOService.AddQueryStringParam(t,"idlisting="+n.RecordId)),gts.$.extend(n,{ImgProxyServerPath:t})}var GtsCarousel=Class.create({defaultOptions:{ModuleId:"",ImgProxyServerPath:"",PhotosAspectRatio:16/9,RecordId:"-1",ContextEle:null,Photos:[],Captions:[],ReportData:"",SlideShowInterval:5e3,MainPhotoWidth:398,MainPhotoHeight:298,FullScreenMainPhotoWidth:800,FullScreenMainPhotoHeight:600,ThumbnailSpacing:10,ThumbnailMinWidth:120,NumberOfAdjacentThumbsToPreload:2,IsFullScreen:!1,IsSwipeable:!!isResponsive,FullScreenThumbsPerPage:1,FillEmptySpace:!1,MainImageSelector:".main-image .main-img",NextButtonSelector:".next",PrevButtonSelector:".previous",PlayButtonSelector:".play",PlayPauseToggleClassName:"icon-pause",FullScreenCarousel:"CreateFullscreenCarousel",DisabledClass:"disabled",GoToFirstImageOnInitialize:!0,StartPhotoIndex:0,FullScreenHtmlTemplate:'<div id="overlay-div"><\/div><div id="wrapper-photo-carousel"><div class="main-image photo"><div><span class="caption" /><img class="main-img" onerror="ImgProxyReloader(\'IPX_DetailsMain\', this)"><\/div><span class="icon icon-close" /><\/div><div class="carousel"><div class="thumbs"><div class="runner"><\/div><\/div><div class="controls group"><div class="previous left-arrow"><span class="icon icon-left-2">Previous Photo<\/span><\/div><div class="next right-arrow"><span class="icon icon-right-2">Next Photo<\/span><\/div><div class="photo-count"><span>PHOTO <\/span><span class="current-image-index"><\/span><span> of <\/span><span class="total-images"><\/span><\/div><\/div><\/div><\/div>'},initialize:function(){this._initializing=!1;this.Options=_.extend({},this.defaultOptions);this._AllPhotos=[];this._Thumbnails=null;this._ThumbnailStripContainer=null;this._ThumbnailStrip=null;this._ThumbnailStripXOffset=0;this._MainImage=null;this._MainImageAttributeValue=null;this._Counter=null;this._CounterTotal=null;this._NextButton=null;this._PrevButton=null;this._PlayButton=null;this._PhotoCaption=null;this._FullScreenCarouselContainer=null;this._CurrentThumbIndex=0;this._TotalThumbsLoaded=0;this._ThumbsPerPage=0;this._MainPhotoUrlTemplate="imageurl={2}&h={0}&w={1}&option=n";this._SlideShowInterval=null},Initialize:function(n){this._initializing=!0;gts.$.extend(this.Options,_.isObject(n)?n:{});this._fallbackImageUrlParam=n.ImageFailURL&&n.ImageFailURL!==""?"&fallbackimageurl="+EncodeImageUrl(NormalizeImageUrl(n.ImageFailURL)):"";this._InitMainImage();this._InitPhotoArrays();this._DefineThumbSize();this._SetNumberOfVisibleThumbs();this._InitThumbnailsStrip();this._InitThumbnails();this._InitPrevNextButtons();this._InitCounters();this._InitPhotoCaption();this._BindToEvents();this.Options.GoToFirstImageOnInitialize&&this.GoTo(this.Options.StartPhotoIndex);this._initializing=!1},Show:function(n){this._DefineThumbSize();this._InitThumbnails();this._SetNumberOfVisibleThumbs();this.GoTo(n||this._CurrentThumbIndex)},_DefineThumbSize:function(){var n=this;n._ThumbsPerPage=this.Options.IsFullScreen?this.Options.FullScreenThumbsPerPage:this.Options.ThumbsPerPage;_.isNumber(n._ThumbsPerPage)&&n._ThumbsPerPage!==0||(n._ThumbsPerPage=5);var t=(n._ThumbsPerPage-1)*n.Options.ThumbnailSpacing,i=gts.$(n.Options.ContextEle).width()||gts.$("#"+n.Options.ModuleId).width(),r=i-t;n.ThumbnailWidth=Math.max(Math.round(r/n._ThumbsPerPage),n.Options.ThumbnailMinWidth);n.ThumbnailHeight=Math.round(n.ThumbnailWidth/n.Options.PhotosAspectRatio);n.ThumbnailMargin=Math.floor(n.Options.ThumbnailSpacing/2)},_SetNumberOfVisibleThumbs:function(){var n=this,t=(n._ThumbsPerPage-1)*n.Options.ThumbnailSpacing,i=gts.$(n.Options.ContextEle).width()||gts.$("#"+n.Options.ModuleId).width(),r=i-t;n._NumberOfVisibleThumbs=Math.round(r/n.ThumbnailWidth)},_InitMainImage:function(){var n=this.Options.ContextEle.find(this.Options.MainImageSelector);n.length>0&&(this._MainImage=gts.$(n[0]),this._MainImageAttributeValue===null&&(this._MainImageAttributeValue=gts.$(n[0]).attr("alt")))},_InitPrevNextButtons:function(){this._NextButton=this.Options.ContextEle.find(this.Options.NextButtonSelector);this._PrevButton=this.Options.ContextEle.find(this.Options.PrevButtonSelector);this._PlayButton=this.Options.ContextEle.find(this.Options.PlayButtonSelector)},_InitPhotoCaption:function(){this._PhotoCaption=this.Options.ContextEle.find(".caption")},_InitThumbnailsStrip:function(){this._ThumbnailStripContainer=this.Options.ContextEle.find(".thumbs");this._ThumbnailStrip=this._ThumbnailStripContainer.find(">div");this._ThumbnailStripXOffset=parseInt(this._ThumbnailStrip.css("left"))},_InitThumbnails:function(){var n=this;n._Thumbnails=n._ThumbnailStrip.find(".js-smartimage-carousel");n._Thumbnails.each(function(t){$(this).width(n.ThumbnailWidth+"px").height(n.ThumbnailHeight+"px").css({"margin-left":(t===0?0:n.ThumbnailMargin)+"px","margin-right":n.ThumbnailMargin+"px"})});n._TotalThumbsLoaded=n._Thumbnails.length;n._BindToThumbnailEvents()},_InitCounters:function(){var t=this.Options.ContextEle.find(".current-image-index"),n;t.length>0&&(this._Counter=t[0]);n=this.Options.ContextEle.find(".total-images");n.length>0&&(this._CounterTotal=n[0])},_UpdateCounters:function(){this._Counter!=null&&gts.$(this._Counter).html(this._CurrentThumbIndex+1);this._CounterTotal!=null&&gts.$(this._CounterTotal).html(this._AllPhotos.length)},_UpdateThumbnailStripVisibility:function(){if(this._ThumbnailStripContainer.length!==0){if(this._AllPhotos.length<=1){this._ThumbnailStripContainer.hide();return}this._ThumbnailStripContainer.show()}},_UpdatePhotoCaption:function(){if(this._PhotoCaption!=null){var n=this._CurrentThumbIndex,t=this._GetPhotoCaption(n);this._ShowHidePhotoCaption(t)}},_GetPhotoCaption:function(n){var t="";return this.Options.Captions.length>n&&(t=this.Options.Captions[n]),t},_ShowHidePhotoCaption:function(n){n!==""?(gts.$(this._PhotoCaption).html(n),gts.$(this._PhotoCaption).show()):gts.$(this._PhotoCaption).hide()},_InitPhotoArrays:function(){this.Options.Photos=_.merge([],this.Options.Photos);this.Options.Captions=gts.$.merge([],this.Options.Captions);this._AllPhotos=gts.$.merge([],this.Options.Photos)},_RefreshButtonsVisibility:function(){this._AllPhotos.length>1?(this._PrevButton.show(),this._NextButton.show(),this.Options.ContextEle.find(".thumbs").show(),this.Options.ContextEle.find(".photo-count").show()):(this._PrevButton.hide(),this._NextButton.hide(),this.Options.ContextEle.find(".thumbs").hide(),this.Options.ContextEle.find(".photo-count").hide())},_BindToEvents:function(){this._BindToEventsBase()},_BindToEventsBase:function(){var n=this;this.Options.ContextEle.on("goto.GtsCarousel."+RenoEventsNS,function(t,i){n.GoTo(i.photoIndex)});this._NextButton.on("click.GtsCarousel"+RenoEventsNS,function(t){return n._GoByOffset(1),t.preventDefault(),!1});this._PrevButton.on("click.GtsCarousel"+RenoEventsNS,function(t){return n._GoByOffset(-1),t.preventDefault(),!1});if(this._PlayButton!=null&&this._PlayButton.length>0)this._PlayButton.on("click.GtsCarousel"+RenoEventsNS,function(t){return n._PlayButton.toggleClass(n.Options.PlayPauseToggleClassName),n.ToggleSlideShow(),t.preventDefault(),!1});gts.$(window).on("resize",gts.$.throttle(200,function(){n._SetNumberOfVisibleThumbs()}));this.Options.IsSwipeable&&this._AllPhotos.length>1&&gts.$(this.Options.MainImageSelector,this.Options.ContextEle).swipe({swipeStatus:function(t,i,r){t.stopPropagation();i==="end"&&(r==="left"&&n._GoByOffset(1),r==="right"&&n._GoByOffset(-1))},allowPageScroll:"vertical",excludedElements:"button, input, select, textarea, .noSwipe"})},_GetThumbnailFromElement:function(n){for(var t=gts.$(n);t!=null&&t.length>0&&!t.is(".js-smartimage-carousel");)t=t.parent();return t},_BindToThumbnailEvents:function(){var n=this;n._Thumbnails.off("click.GtsCarousel"+RenoEventsNS);n._Thumbnails.on("click.GtsCarousel"+RenoEventsNS,function(t){n.StopSlideShow();var i=n._GetThumbnailFromElement(t.target);return n.GoTo(n._Thumbnails.index(i)),t.preventDefault(),!1})},_BindToFullScreenEvents:function(){return},StartSlideShow:function(){var n=this;n.StopSlideShow();n._GoByOffset(1);n._SlideShowInterval=window.setInterval(function(){n._GoByOffset(1,!0)},n.Options.SlideShowInterval)},StopSlideShow:function(){var n=this;clearInterval(n._SlideShowInterval);n._SlideShowInterval=null},ToggleSlideShow:function(){this._SlideShowInterval?this.StopSlideShow():this.StartSlideShow()},_GoByOffset:function(n,t){var i=this,r,u;t!==undefined&&t||i.StopSlideShow();r=i._AllPhotos.length;u=i._CurrentThumbIndex;this.GoTo((u+n+r)%r)},GoTo:function(n){var t=this,u=t._AllPhotos.length-1,i,r,f;n==undefined||n<0||n>u&&n!==0||(t._CurrentThumbIndex=n,t.Options.UseImageLazyLoading===undefined&&t.Options.UseImageBestFit===undefined?t._MainImage!=null&&(t._MainImage.attr("src")==undefined?(i=StaticResources+"/layouts/common/images/spacer.gif",t._MainImage.load(function(){t._MainImage.attr("src")===i&&t._MainImage.attr("src",t._GenerateMainImageUrl())}),t._MainImage.attr("src",i),t._MainImage.attr("alt",1+parseInt(t._CurrentThumbIndex)+". "+t._MainImageAttributeValue.replace("1. ",""))):(t._MainImage.attr("src",t._GenerateMainImageUrl()),t._MainImage.attr("alt",1+parseInt(t._CurrentThumbIndex)+". "+t._MainImageAttributeValue.replace("1. ","")))):t._MainImage!=null&&(t._MainImage.fadeTo(1,.2),_.isUndefined(t._MainImage.attr("data-hassmartimage"))||t._MainImage.smartImage("destroy"),r=t._Thumbnails.filter(":eq("+t._CurrentThumbIndex+")").find("img.js-smartimage"),undefined!==t._AllPhotos[t._CurrentThumbIndex]&&(f=EncodeImageUrl(NormalizeImageUrl(t._AllPhotos[t._CurrentThumbIndex])),t._MainImage.attr("data-image-url-format",r.length>0?r.attr("data-image-url-format"):SEOService.AddQueryStringParam(t.Options.ImgProxyServerPath,"imageurl="+f,"option=n","w={0}",t._fallbackImageUrlParam))),undefined!==t._MainImage.data("gts-lazyLoad")&&t._MainImage.lazyLoad("destroy"),t._MainImage.smartImage({useLazyLoad:t.Options.UseImageLazyLoading,useBestFit:t.Options.UseImageBestFit,alwaysFill:t.Options.UseImageBestFit}),t._MainImage.attr("alt",1+parseInt(t._CurrentThumbIndex)+". "+t._MainImageAttributeValue.replace("1. ","")),t._MainImage.fadeTo(1,1)),t._PrevButton.removeClass(this.Options.DisabledClass).addClass(t._CurrentThumbIndex===0?this.Options.DisabledClass:""),t._NextButton.removeClass(this.Options.DisabledClass).addClass(t._CurrentThumbIndex===u?this.Options.DisabledClass:""),t._Thumbnails.removeClass("selected"),t._Thumbnails.eq(t._CurrentThumbIndex).addClass("selected"),t._UpdatePhotoCaption(),t._UpdateCounters(),t._RepositionThumbnailStrip(),t.Options.ContextEle.is(":hidden")||t._DoReport())},_DoReport:function(){DoReport(this.Options.ReportData,"RE.Listing.PhotoView")},_GenerateMainImageUrl:function(){var n=this.Options.IsFullScreen?this.Options.FullScreenMainPhotoWidth:this.Options.MainPhotoWidth,t=this.Options.IsFullScreen?this.Options.FullScreenMainPhotoHeight:this.Options.MainPhotoHeight;return typeof n=="string"&&(n=Number(n.replace("px",""))),typeof t=="string"&&(t=Number(t.replace("px",""))),SEOService.AddQueryStringParam(this.Options.ImgProxyServerPath,String.Format(this._MainPhotoUrlTemplate,t,n,escape(this._AllPhotos[this._CurrentThumbIndex])))},_RepositionThumbnailStrip:function(){var n,i,f;if(this._ThumbnailStripContainer.length!==0&&this._Thumbnails.length!==0){n=this;n._ThumbnailStripXOffset=0;n._Thumbnails.length<=n._ThumbsPerPage&&(n._ThumbsPerPage=n._Thumbnails.length);var t=n._Thumbnails.length,r=n._NumberOfVisibleThumbs,u=Math.min(n._CurrentThumbIndex,t-r);u<0&&(u=0);i=Math.min(n._CurrentThumbIndex,t-r);i<0&&(i=0);this._ThumbnailStripXOffset=n._ThumbnailStrip.offset().left-n._Thumbnails.eq(i).offset().left;this._ThumbnailStrip.stop(!0,!0).animate({"margin-left":n._ThumbnailStripXOffset});f=_.map(_.range(-n.Options.NumberOfAdjacentThumbsToPreload,1+r+n.Options.NumberOfAdjacentThumbsToPreload),function(n){return(u+n+t)%t});$(n._Thumbnails).each(function(t,i){var r=$(i).find(".js-smartimage");r.length!==0&&(_.contains(f,t)?("undefined"!=typeof r.data("gts-lazyLoad")&&r.lazyLoad("destroy"),r.attr("data-hassmartimage")===undefined?r.smartImage({useBestFit:n.Options.UseImageBestFit,alwaysFill:n.Options.UseImageBestFit,useLazyLoad:n._initializing?n.Options.UseImageLazyLoading:!1}):r.attr("src")===undefined&&(r.smartImage("destroy"),r.smartImage({useBestFit:n.Options.UseImageBestFit,alwaysFill:n.Options.UseImageBestFit,useLazyLoad:n._initializing?n.Options.UseImageLazyLoading:!1}))):r.attr("data-hassmartimage")!==undefined&&r.smartImage("destroy"))})}}});;;;var ArrLImg,ArrLFloor={},ThumbnailCarousel=Class.create(GtsCarousel,{Initialize:function($super,n){this._HoverEle=gts.$(n.HoverEle,n.ContextEle);this._ThumbPagerEle=gts.$(n.ThumbPagerEle,n.ContextEle);var t=this._HoverEle.attr(n.StartPhotoIndexAttr);typeof t!="undefined"&&t!==""&&(n=_.extend(n,{StartPhotoIndex:t}));$super(n)},_BindToEvents:function($super){$super();this._BindToHoverEleHover()},_BindToHoverEleHover:function(){var n=this;this._HoverEle.hover(function(){n._ThumbPagerEle.stop(!0,!0).fadeIn(250)},function(){n._ThumbPagerEle.stop(!0,!0).fadeOut(250)})},_DoReport:function($super){this.Options.ReportData!==""&&$super()}});;;;var ArrLImg=[];ThumbnailCarousel.addMethods({Initialize:function($super,n){n=_.extend({NextButtonSelector:".js-thumb-pager-next",PrevButtonSelector:".js-thumb-pager-prev",DisabledClass:"js-thumb-pager-disabled",HoverEle:".js-c-thumbnail-carousel",ThumbPagerEle:".js-thumb-pager, .js-thumb-pager-counter",StartPhotoIndexAttr:"js-data-startphotoindex"},n);$super(n)},_BindToHoverEleHover:function(){}});;;;var PropertyCarouselAjaxXmlPathGetter=Class.create({_moduleId:null,_moduleTagName:null,_pagingStringFormat:null,_useQueryStringPaging:null,initialize:function(n,t,i,r){this._moduleId=n;this._moduleTagName=t;this._pagingStringFormat=i;this._useQueryStringPaging=r},GetPageXmlPath:function(n,t,i,r){var e=String.Format(this._pagingStringFormat,this._moduleId,t,i,r),f=SEOService.TrimSlashes(LocationAnchorService.GetLocationHRef()),u,o;return n.indexOf(f)===0&&(f=n),u="",this._useQueryStringPaging?(u=f,u=SEOService.AddQueryStringParam(u,"propertycarouselparams="+e)):(o=new RegExp("/"+String.Format(this._pagingStringFormat,this._moduleId,"\\d+","\\d+","\\d+"),"g"),u=f.replace(o,""),u=SEOService.AddSeoPart(u,e)),u},GetAjaxXmlPath:function(n,t,i,r){var u=this.GetPageXmlPath(n,t,i,r);return u=SEOService.BuildAJAXSEOPath(this._moduleId,u,"xml",window.CurrentMatchedRuleId),SEOService.TrimTrailingSlashes(currentWebsiteDomainWebRoot)+"/"+SEOService.TrimSlashes(u)}}),PropertyCarouselDataLoader=Class.create({initialize:function(n,t){var i=this;i._xslDocs={};i.jsXslPath=t;i.jsXslDoc=null},GetHtmlContentAsync:function(n,t,i){var r=this;gts.$.ajax({url:n,error:function(n,t,i){log.debug("PropertyCarouselModule: Error Message: error("+i+') "'+t+'"')},success:function(n){var u=function(u){r._getTransformationHtml(u,n,t,i);var f=function(i){var u=r._getTransformationHtml(i,n,t);ExecuteJavaScript(u)};r._getJsXslDoc(f)},f=gts.$(n).find("propertycarouselmodule parameters XSLPath").text();r._getXslDoc(f,u)}})},_getTransformationHtml:function(n,t,i,r){var u={params:gts.$.extend({},globalParams,i)},e,f;if(u.params&&u.params.LocalImageProxyServer&&(u.params.LocalImageProxyServer=u.params.LocalImageProxyServer.replace("&","&amp;")),e="<div><\/div>",n!==""&&t!=="")return f=gts.$(e).getTransform(n,t,u).html().replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;amp;/g,"&").replace(/&amp;/g,"&").replace(/&quot;/g,"'"),typeof r=="function"&&r(f),f},_getXslDoc:function(n,t){var i=this._xslDocs[n],r;if(typeof i=="undefined"){r=this;XslLoader.Load(n,function(i){r._xslDocs[n]=i;t(i)});return}t(i)},_getJsXslDoc:function(n){var t=this;if(t.jsXslDoc===null){XslLoader.Load(t.jsXslPath,function(i){t.jsXslDoc=i;n(t.jsXslDoc)});return}n(t.jsXslDoc)}}),PropertyCarousel=Class.create({_defaultOptions:{isSwipeable:!0,throttleInterval:250,VisibleCardClass:"is-visible",IsReadyClass:"is-ready"},initialize:function(n){var t=this,i;this.options=_.extend({},this._defaultOptions,n);this.containersArray={container:null,tabs:null,prev:null,next:null,resultscontainer:null};this._selectors={tabItem:".js-tabs-item",tabItemSelect:".js-tabs-item-select"};this._events={click:"click.propertyCarousel"+RenoEventsNS,change:"change.propertyCarousel"+RenoEventsNS};this.tabid=null;this.isVerticalLayout=null;this._rows=null;this._maxColumns=null;this._moduleId=this.options.ModuleId;this._ModuleEle=gts.$("#"+this.options.ModuleId);this.isLoading=!1;this.updateInfo="";this.navigationArrows=gts.$(".js-listing-carousel-action",t._ModuleEle);this.xmlPathGetter=new PropertyCarouselAjaxXmlPathGetter(this.options.ModuleId,this.options.ModuleTagName,this.options.PagingStringFormat,this.options.UseQueryStringPaging);this.dataLoader=new PropertyCarouselDataLoader(n.XSLPath,n.JSXSLPath);this._initializeCarousel();i=this._getCurrentPageStatistics();this.options.NavigationMode==="Pagination"&&this._load(this.tabid,1,i.CurrentRecordsPerPage,"","","","pagination");this._initializeRefreshModule();this._unbind();this._bindEvents();this._bindToAuthentificationEvents();this._bindToGetSavedItemsEvent();this._bindTabEvents();this._bindNavigation();this._setSameHeight();this._InitializeSelectBoxIt();this.options.isSwipeable&&this._ModuleEle.swipe({swipeStatus:function(n,i,r){i==="end"&&(r!=="left"||t.navigationArrows.filter(".next").hasClass("u-hide")||t.navigationArrows.filter(".next").hasClass("u-disabled")||t.Next(null,!0),r!=="right"||t.navigationArrows.filter(".prev").hasClass("u-hide")||t.navigationArrows.filter(".prev").hasClass("u-disabled")||t.Prev(null,!0))},allowPageScroll:"vertical",excludedElements:"button, input, select, textarea, .noSwipe, .js-tabs-container"});(t.options.NavigationMode==="Arrows"||$(".bullet-navigation",t._ModuleEle).length>0)&&(i.CurrentPageRecordCount<i.CurrentRecordsPerPage||i.LoadedRecordCount>i.CurrentRecordsPerPage)&&t._reloadCurrentPage()},_InitializeSelectBoxIt:function(){var n=this,t=gts.$("select.js-channel-tab","#"+n._moduleId);t.each(function(n,t){"undefined"==typeof $(t).selectBoxIt("instance")&&$(t).selectBoxIt({autoWidth:!1,viewport:$(".global-content")})})},_unbind:function(){gts.$(document).off(RenoEventsNS+"."+this._moduleId)},_bindEvents:function(){var n=this;if(typeof IsPreview!="function"||!IsPreview()){gts.$(document).on("changeBreakpoint.containerBreakpoints"+RenoEventsNS+"."+n._moduleId,function(){var t=n._getCurrentPageStatistics();if(t.CurrentPageRecordCount<t.CurrentRecordsPerPage){n._reloadCurrentPage();return}gts.$(n.containersArray.container).find(".js-pagination").length>0&&n._load(n.tabid,t.FirstRecordPageNumber,t.CurrentRecordsPerPage,"","","","pagination");n._initializeCarousel()});n._bindToResizeEvents()}},_bindToResizeEvents:function(){var n=this,t="transitionend"+RenoEventsNS+"."+n._moduleId+" webkitTransitionEnd"+RenoEventsNS+"."+n._moduleId+" oTransitionEnd"+RenoEventsNS+"."+n._moduleId;gts.$(window).off((typeof gts.hasTouch=="function"&&gts.hasTouch()===!0?"orientationchange.":"resize.")+RenoEventsNS+"."+n._moduleId).on((typeof gts.hasTouch=="function"&&gts.hasTouch()===!0?"orientationchange.":"resize.")+RenoEventsNS+"."+n._moduleId,_.debounce(function(){n._setMaxHeight()},n.options.throttleInterval));n.itemscontainer.off(t).on(t,function(t){(!t.target||$(t.target).hasClass("js-property-carousel-items-container"))&&(n._visibleItems(),gts.$(".js-carousel-slides",n._ModuleEle).removeClass("listing-carousel__slides--overflow"),n.itemscontainer.find(".js-smartimage:not([src])").trigger("appear"))})},_bindToAuthentificationEvents:function(){var n=this;if(n.options.HasVowListings)gts.$(document).on(RenoEvent.SignIn+RenoEventsNS+"."+n._moduleId+" "+RenoEvent.SignOut+RenoEventsNS+"."+n._moduleId,function(){n._reloadCurrentPage()})},_bindToGetSavedItemsEvent:function(){var n=this;gts.$(document).on(RenoEvent.GetSavedItems+RenoEventsNS+"."+n._moduleId,function(){n._refreshSavedRecords()})},_bindTabEvents:function(){var n=this;gts.$(this._selectors.tabItem,this._getContext()).off(this._events.click).on(this._events.click,function(t){t.preventDefault();t.stopImmediatePropagation();var i=gts.$(this).attr("data-seo-part");n.SwitchTab(parseInt(i))});gts.$(this._selectors.tabItemSelect,this._getContext()).off(this._events.change).on(this._events.change,function(t){var i=$("option:selected",t.target).attr("data-seo-part");n.SwitchTab(parseInt(i))})},_reloadCurrentPage:function(){function i(){n._initializeCarousel();n._refreshSavedRecords();n._setSameHeight();n._bindTabEvents();n._bindToResizeEvents()}var t=this._getCurrentPageStatistics(),n=this;this._load(this.tabid,t.FirstRecordPageNumber,t.CurrentRecordsPerPage,i,"","","results")},_setModuleContainers:function(n){var i=this,r=gts.jQuery("#"+n),t=r;t.length&&(i.containersArray.container=t[0],t=gts.$(".js-results-container",i.containersArray.container),t.length>0&&(i.containersArray.resultscontainer=t),t=i.itemscontainer,t.length>0&&(i.containersArray.itemscontainer=t),t=gts.$(".js-listing-carousel-item",i.containersArray.container),t.length>0&&(i.containersArray.item=t))},_setVariables:function(){var n=this,t;n.containersArray.resultscontainer&&n.containersArray.resultscontainer.length&&(n.isVerticalLayout=n.options.Orientation==="Vertical"&&gts.$(window).width()>767,n._rows=n.options.Rows,n._maxColumns=n.options.MaxColumns,n.ListingTotal=n.containersArray.resultscontainer.data("listingtotal"),t=n.containersArray.resultscontainer.data("maxrecords"),!n.isVerticalLayout&&t<4&&t>0&&(n._maxColumns=t),n.tabid=parseInt(n.containersArray.resultscontainer.attr("tabid")),n.maxRecordsToBeDisplayed=t>0&&t<n.ListingTotal?t:n.ListingTotal,n.maxListings=n._rows*n._maxColumns,n._animationDirection=n.isVerticalLayout?n.options.VerticalDirection:n.options.HorizontalDirection)},_initializeCarousel:function(){var n=this;n.itemscontainer=gts.$(".js-property-carousel-items-container",n._ModuleEle);n._setModuleContainers(n.options.ModuleId);n._setVariables();n._handleImages();n._setMaxHeight();n._initializeScrollCarousel()},_setMaxHeight:function(){var n=this,t=gts.$(".js-carousel-slides",n._ModuleEle),i,r;t.removeClass(n.options.IsReadyClass);i=gts.$(".js-listing-carousel-item",n._ModuleEle).map(function(){return gts.$(this).outerHeight(!0)}).get();r=Math.max.apply(null,i);t.css({"max-height":Math.round(r*n.options.Rows)});n._visibleItems()},_visibleItems:function(){var t=this,n=gts.$(".js-carousel-slides",t._ModuleEle),i=gts.$(".js-listing-carousel-item",t._ModuleEle);if(n.removeClass(t.options.IsReadyClass),n.length!==0&&i.length!==0){var r=Math.floor(n.outerHeight()),u=Math.floor(n.offset().left+n.width()),f=Math.floor(i.first().outerWidth()-i.first().width()),e=Math.floor(n.offset().top+r);i.removeClass(t.options.VisibleCardClass).each(function(){var i=Math.ceil($(this).offset().left+f),r=Math.floor($(this).offset().left+$(this).width()),o=Math.floor($(this).offset().top+$(this).height());r<=u&&i>=Math.floor(n.offset().left)&&o<=e&&$(this).addClass(t.options.VisibleCardClass)});n.addClass(t.options.IsReadyClass);t._hideNavigationArrows()}},_setSameHeight:function(){var n=this;typeof gts.$("body").sameHeight!="undefined"&&gts.$(".js-same-height",n._ModuleEle).filter(":visible").sameHeight({onFinish:function(){n._setMaxHeight()},eventNamespace:n._moduleId})},Reinitialize:function(n){var t=this;t.options=gts.$.extend(t.options,n);t._initializeCarousel();t._refreshSavedRecords();t._setSameHeight();t._bindTabEvents();t._bindToResizeEvents()},_refreshSavedRecords:function(){var n=this;typeof n.options.ListingIds!="undefined"&&n.options.ListingIds!==null&&n.options.ListingIds.length!==0&&myPortfolioControllerModule.RefreshSavedRecords(n.options.ListingIds)},Next:function(){this.ChangePage("next");gts.$(document).trigger("CarouselChangeMovement"+RenoEventsNS)},Prev:function(){this.ChangePage("prev");gts.$(document).trigger("CarouselChangeMovement"+RenoEventsNS)},SwitchTab:function(n,t){var i=this._getCurrentPageStatistics();this._load(n,1,i.CurrentRecordsPerPage,t)},ChangePage:function(n,t){var i=this._getCurrentPageStatistics(),r=n;return n==="next"?r=i.NextPageNumber:n==="prev"&&(r=i.PreviousPageNumber),this._load(this.tabid,r,i.CurrentRecordsPerPage,t,"reset",this._animationDirection,"results"),!1},Navigate:function(n){var i=this._getCurrentPageStatistics(),t=i.CurrentRecordsPerPage,r=this._getPageNumber(n,t),u=this.xmlPathGetter.GetPageXmlPath(this.options.PageSEOUrlFull,this.tabid,r,t);return LocationAnchorService.UpdateLocationAnchorWithoutEvent(u),!0},GoToDetailPage:function(n,t,i,r,u,f,e,o,s,h){if(this.options.CanUpdateSearchCookie){var c=new SearchCookie(n);c.Clear();c.Page=e;c.PageTotal=o;c.PerPage=h;c.SEOQuery=u;c.ListingTotal=s;c.DetailIndex=f;this.options.UseCurrentPageForBackLink&&(c.BackLink=window.location.pathname);c.Save()}const l=this.options.ListingReporting?this.options.ListingReporting[t]:t;return(DoReport(l,i),r!==undefined&&document.all)?(window.location.href=r,!1):!0},_load:function(n,t,i,r,u,f,e){var o,h,s;typeof IsPreview=="function"&&IsPreview()||window.isEditRulePreview||(o=this,o.isLoading=!0,h=o.xmlPathGetter.GetAjaxXmlPath(o.options.PageSEOUrlFull,n,t,i),o.options.IsAjaxCall=!0,s=o.options,s.UpdateInfo=e,o.dataLoader.GetHtmlContentAsync(h,s,function(i){o._injectHtml(i,n,u,t,f,e);var s=o._getCurrentPageStatistics();o._setItemPageNumber(s.CurrentRecordsPerPage);setTimeout(function(){o._setBulletPagination();o._InitializeSelectBoxIt()},0);typeof r=="function"&&r();o.isLoading=!1}))},_setBulletPagination:function(){const n=this,t=$(".js-paginationx",n._ModuleEle),i=n._getCurrentPageStatistics();if(t.length!==0){const r=$("<div />"),u=Math.ceil((parseInt($(".js-record:first",n._ModuleEle).attr("fullresultindex"))+1)/i.CurrentPageRecordCount)-1,f=Math.ceil($(".js-results-container",n._ModuleEle).attr("data-listingtotal")/i.CurrentPageRecordCount);for(let t=0;t<f;t++){const i=$("<li class='bullet'><\/li>");t===u?i.addClass("current"):i.attr("onclick",n._moduleId+"_Module.ChangePage("+(t+1)+"); return false;");r.append(i)}t.html(r.html())}},_getPageNumber:function(n,t){return Math.ceil((parseInt(n)+1)/t)},_getLastPageNumber:function(n){var t=this;return Math.ceil(t.maxRecordsToBeDisplayed/n)},_setItemPageNumber:function(n){var t=this;gts.$(".js-listing-carousel-item",t.containersArray.container).each(function(){var t=gts.$(this),i=Math.ceil((parseInt(t.attr("fullresultindex"))+1)/n);t.attr("page-number",i)})},_getContext:function(){var n=this;return n.containersArray.container?n.containersArray.container:gts.$(this._ModuleEle.selector)},_getCurrentPageStatistics:function(){var u=0,f=0,n=gts.$(".js-listing-carousel-item:not(.is-buffered)",this._getContext());u=this.itemscontainer.length>0&&this.itemscontainer.outerWidth(!0)>0&&n.length>0&&gts.$(n[n.length-1]).outerWidth(!0)>0?parseInt(this.itemscontainer.outerWidth(!0)/gts.$(n[n.length-1]).width()):this._maxColumns;f=this._rows;var c=this._maxColumns*this._rows,t=u*f,l=Math.min(t,n.length),e=gts.$(n[0]),o=e.attr("fullresultindex"),s=gts.$(n[n.length-1]).attr("fullresultindex"),i=this._getPageNumber(o,t),h=this._getPageNumber(s,t),r=this._getLastPageNumber(t),a=Math.ceil(this.maxRecordsToBeDisplayed/t);return{MaxRecordsPerPage:c,CurrentRecordsPerPage:t,CurrentPageRecordCount:l,FirstRecord:e,LoadedRecordCount:n.length,FirstRecordFullResultIndex:o,LastRecordFullResultIndex:s,FirstRecordPageNumber:i,LastRecordPageNumber:h,PreviousPageNumber:i>1?i-1:r,NextPageNumber:h<r?i+1:1,LastPageNumber:r,PageTotal:a}},_injectHtml:function(n,t,i,r,u,f){var o=gts.$(this._getContext()),e=gts.$(n),s=o.find(".js-pagination");switch(f){case"pagination":s.html(e.find(".js-pagination").html());break;case"listings":case"results":o.find(".js-carousel-slides").html(e.find(".js-carousel-slides").html());s.html(e.find(".js-pagination").html());break;default:gts.$(this._getContext()).html(e.html())}},_handleImages:function(){var n=this;n.containersArray.container&&gts.$.each(gts.$(".js-listing-carousel-item",n.containersArray.container),function(){var t=gts.$(this),i=t.find(".js-c-thumbnail-carousel:not(.is-initialized)"),r=i.attr("data-photo-url"),f,u,e;if(n.options.MainImageSelector=".js-c-thumbnail-carousel  .js-smartimage",i.length&&r){f=t.attr("id").replace("LS","");u=[];u=r.substring(1,r.length).split(",");var o=gts.$.extend({},n.options,{ContextEle:t,RecordId:f,Photos:u,HoverEle:".photo",ThumbPagerEle:".thumb-pager",StartPhotoIndexAttr:"js-data-startphotoindex"}),s=CreateGtsCarouselParams(o),h=new ThumbnailCarousel;h.Initialize(s);i.addClass("is-initialized")}else e={useLazyLoad:n.advanceSingleSlide?!1:n.options.UseImageLazyLoading,useBestFit:n.options.UseImageBestFit,alwaysFill:n.options.UseImageBestFit},t.find(".js-smartimage").smartImage(e)})},_hideNavigationArrows:function(){var n=this,t=n._getCurrentPageStatistics(),i=gts.$(".js-listing-carousel-item",n._ModuleEle),r=i.filter(":first"),u=i.filter(":last");t.PageTotal&&(n.navigationArrows=gts.$(".js-listing-carousel-action",n._getContext()),n.navigationArrows.removeClass("u-hide"),t.PageTotal<=1&&n.navigationArrows.addClass("u-hide"),r.hasClass(n.options.VisibleCardClass)&&parseInt(r.attr("page-number"))===1&&t.LastRecordPageNumber===t.PreviousPageNumber&&(n.navigationArrows.filter(".prev:not(.always-visible)").addClass("u-hide"),n.navigationArrows.filter(".prev.always-visible").addClass("u-disabled")),u.hasClass(n.options.VisibleCardClass)&&parseInt(u.attr("page-number"))===t.PageTotal&&t.FirstRecordPageNumber===t.NextPageNumber&&(n.navigationArrows.filter(".next:not(.always-visible)").addClass("u-hide"),n.navigationArrows.filter(".next.always-visible").addClass("u-disabled")))},_bindNavigation:function(){var t=this,n=gts.$(t.containersArray.container);n.off("click"+RenoEventsNS+" touchstart"+RenoEventsNS,".js-propertycarousel-next");n.on("click"+RenoEventsNS+" touchstart"+RenoEventsNS,".js-propertycarousel-next",function(n){n.preventDefault();t.Next(null,!0)});n.off("click"+RenoEventsNS+" touchstart"+RenoEventsNS,".js-propertycarousel-prev");n.on("click"+RenoEventsNS+" touchstart"+RenoEventsNS,".js-propertycarousel-prev",function(n){n.preventDefault();t.Prev(null,!0)})},_unbindNavigation:function(){var t=this,n=gts.$(t.containersArray.container);n.off("click"+RenoEventsNS+" touchstart"+RenoEventsNS,".js-propertycarousel-next");n.on("click"+RenoEventsNS+" touchstart"+RenoEventsNS,".js-propertycarousel-next",function(n){n.preventDefault()});n.off("click"+RenoEventsNS+" touchstart"+RenoEventsNS,".js-propertycarousel-prev");n.on("click"+RenoEventsNS+" touchstart"+RenoEventsNS,".js-propertycarousel-prev",function(n){n.preventDefault()})},_initializeRefreshModule:function(){var n=this;(n.options.ExcludeRecordsAlreadyOnPage||n.options.ShowOnFirstPageOnly)&&(typeof n._refreshModule=="undefined"&&typeof ModuleBase!="undefined"&&(n._refreshModule=new ModuleBase),n._refreshModule.Initialize(gts.$.extend({},n.options)))},_initializeScrollCarousel:function(){var n=gts.$(".js-tabs-container",this._ModuleEle),t=gts.$(".tabs__item--selected",this._ModuleEle);n.scrollCarousel({sliderSelector:".js-listing-carousel-tabs",onAfterCreate:()=>{n.trigger("scrollCarouselUpdatePosition",t)}})}});;;;var PropertyCarouselAnimationType={DisplayNextRecords:1,DisplayPrevRecords:2},AnimatedPropertyCarousel=Class.create(PropertyCarousel,{initialize:function($super,n){if($super(n),this.isVerticalLayout){var i=this._getCurrentPageStatistics(),t=this.containersArray.item.outerHeight(!0)*i.CurrentRecordsPerPage-20;gts.$(this.containersArray.container).height(t+80);gts.$(this.containersArray.itemscontainer).height(t)}this._bindEvents();this.autoAdvanceInterval=this.options.AutoAdvanceInterval;this._minimumBufferLength=2;this.delayAnimation=null;this._isBuffering=!1;this._shouldFullyReloadContent=!1;this._slideTransitionSpeed=this.autoAdvanceInterval*1e3;this._slideTransitionPause=this.autoAdvanceInterval*0;this._startAnimation(PropertyCarouselAnimationType.DisplayNextRecords,this._animationDirection)},SwitchTab:function($super,n,t){this.delayAnimation=null;this._shouldFullyReloadContent=!0;var i=this._getCurrentPageStatistics();this._load(n,1,i.CurrentRecordsPerPage*2,t)},Next:function(n,t){var r=this._getCurrentPageStatistics(),i=this,u=r.LastRecordPageNumber<r.LastPageNumber?r.LastRecordPageNumber+1:1,f=t?"next":null;this._load(this.tabid,u,r.CurrentRecordsPerPage,n,f,i._animationDirection,"results");t&&(i.inactiveTimer!==undefined&&window.clearTimeout(i.inactiveTimer),this._unbindNavigation(),i.containersArray.resultscontainer.addClass("action-was-performed").off("mouseleave"+RenoEventsNS),i.containersArray.resultscontainer.find(".js-listing-carousel-item:not(.is-buffered):first").propertyCarouselPause())},Prev:function($super,n,t){var u=this._getCurrentPageStatistics(),i=this,r;i.containersArray.resultscontainer.addClass("action-was-performed");r=this._getPageNumber(gts.$(".js-listing-carousel-item.is-buffered")>=1?gts.$(".js-listing-carousel-item.is-buffered").attr("fullresultindex"):gts.$(".js-listing-carousel-item:first").attr("fullresultindex"),u.CurrentRecordsPerPage)-1;r===0&&(r=u.LastPageNumber);this._load(this.tabid,r,u.CurrentRecordsPerPage,n,"prev",i._animationDirection,"results");t&&(i.inactiveTimer!==undefined&&window.clearTimeout(i.inactiveTimer),this._unbindNavigation(),i.containersArray.resultscontainer.addClass("action-was-performed").off("mouseleave"+RenoEventsNS),i.containersArray.resultscontainer.find(".js-listing-carousel-item:not(.is-buffered):first").propertyCarouselPause())},_injectHtml:function($super,n,t,i,r,u,f){var e=this,s=e._getCurrentPageStatistics(),o;if(e._shouldFullyReloadContent&&t!==e.tabid){$super(n);e._bindEvents();e._shouldFullyReloadContent=!1;return}if(t===e.tabid){if(i=="reset"&&f==="results"){gts.$(".js-results-container",this.containersArray.container).replaceWith(gts.$(n));setTimeout(function(){e._bindEvents()});e._shouldFullyReloadContent=!1;e._startAnimation(PropertyCarouselAnimationType.DisplayNextRecords,u);return}if(f==="pagination"){pagination=gts.$(n).find(".js-pagination",e.containersArray.container);gts.$(this.containersArray.container).find(".js-pagination").replaceWith(pagination);return}o=gts.$(n).find(".js-listing-carousel-item",e.containersArray.container);i=="prev"?(o.addClass("is-buffered"),e.isVerticalLayout?o.css({"margin-top":0-gts.$(".js-listing-carousel-item").outerHeight(!0)}):u=="LeftToRight"?o.css({"margin-right":0-gts.$(".js-listing-carousel-item:last").outerWidth(!0)}):u=="RightToLeft"&&o.css({"margin-left":0-gts.$(".js-listing-carousel-item:last").outerWidth(!0)}),e._animatePage(PropertyCarouselAnimationType.DisplayPrevRecords,u),setTimeout(function(){gts.$(e.containersArray.itemscontainer).prepend(o)},300)):(i=="next"&&this._animatePage(PropertyCarouselAnimationType.DisplayNextRecords,u),setTimeout(function(){gts.$(e.containersArray.itemscontainer).append(o);e._handleImages()},300));setTimeout(function(){gts.$("img[data-hassmartimage]",e.containersArray.container).trigger("appear");e._setItemPageNumber(s.CurrentRecordsPerPage)},400)}},_startAnimation:function(n,t){this._ensureMinimumBufferLength(n);var r=this._getBufferLenght(),i=this;this.delayAnimation=r>0?window.setTimeout(function(){i._animateItem(t)},i._slideTransitionPause):window.setTimeout(function(){i._animateItem(t)},0)},_getBufferLenght:function(){var n=this._getCurrentPageStatistics();return n.LoadedRecordCount-n.CurrentPageRecordCount},_ensureMinimumBufferLength:function(n){var i=this._getBufferLenght(),t=this;if(i<=this._minimumBufferLength&&!this._isBuffering&&!this._shouldFullyReloadContent){this._isBuffering=!0;switch(n){case PropertyCarouselAnimationType.DisplayPrevRecords:this.Prev(function(){t._isBuffering=!1},!1);break;default:this.Next(function(){t._isBuffering=!1},!1)}}},_animateItem:function(n){var t=this,i=gts.$(".js-listing-carousel-item:not(.is-buffered):first",t.containersArray.container),e=t._getCurrentPageStatistics(),s=gts.$(".js-listing-carousel-item.is-buffered:first",t.containersArray.container).attr("page-number"),h=gts.$(".js-listing-carousel-item.is-buffered[page-number="+s+"]",t.containersArray.container),c=gts.$(".js-listing-carousel-item.is-buffered",t.containersArray.container).length>=e.CurrentRecordsPerPage,r,u,f,o;t.isVerticalLayout?r={"margin-top":0-i.outerHeight(!0)}:n=="FromLeftToRight"?r={"margin-right":0-i.outerWidth(!0)}:n=="FromRightToLeft"&&(r={"margin-left":0-i.outerWidth(!0)});u=function(){i.propertyCarouselAnimate(r,t._slideTransitionSpeed,"linear",function(){t._startAnimation(PropertyCarouselAnimationType.DisplayNextRecords,n);c&&(h.remove(),t._ensureMinimumBufferLength(PropertyCarouselAnimationType.DisplayNextRecords));gts.$(this).addClass("is-buffered")})};t.options.NavigationMode=="Pagination"&&(f=gts.$(".js-pagination",t.containersArray.container).find(".paging__item.is-active").html(),f&&f!=i.next().attr("page-number")&&(o=!0,this._load(this.tabid,i.next().attr("page-number"),e.CurrentRecordsPerPage,u,"",t._animationDirection,"pagination")));o||u()},_animatePage:function(n,t){var i=this,f=i._getCurrentPageStatistics();switch(n){case PropertyCarouselAnimationType.DisplayPrevRecords:var l=gts.$(".js-listing-carousel-item:not(.is-buffered)",i.containersArray.container),a=gts.$(".js-listing-carousel-item.is-buffered",i.containersArray.container),e=gts.$(".js-listing-carousel-item:last",i.containersArray.container).attr("page-number"),h=gts.$(".js-listing-carousel-item:not(.is-buffered)[page-number="+e+"]",i.containersArray.container),c=gts.$(".js-listing-carousel-item[page-number="+e+"]",i.containersArray.container).length>=f.CurrentRecordsPerPage,u;l.removeAttr("style");c&&h.remove();this.isVerticalLayout?u={"margin-top":0}:t=="FromLeftToRight"?u={"margin-right":0}:t=="FromRightToLeft"&&(u={"margin-left":0});a.removeClass("is-buffered").propertyCarouselAnimate(u,1e3,"linear").promise().then(function(){i._bindNavigation();i.inactiveTimer=window.setTimeout(function(){i._resumeAnimation(t)},2e3)});break;default:var r=gts.$(".js-listing-carousel-item:not(.is-buffered):first",this.containersArray.container),v=r.attr("page-number"),y=gts.$(".js-listing-carousel-item:not(.is-buffered)[page-number="+v+"]",i.containersArray.container),e=gts.$(".js-listing-carousel-item.is-buffered:first",i.containersArray.container).attr("page-number"),h=gts.$(".js-listing-carousel-item.is-buffered[page-number="+e+"]",i.containersArray.container),c=gts.$(".js-listing-carousel-item.is-buffered",i.containersArray.container).length>=f.CurrentRecordsPerPage,o,s;this.isVerticalLayout?(o={"margin-top":0-r.outerHeight(!0)},s={"margin-top":0-r.outerHeight(!0)*f.CurrentRecordsPerPage}):(o={"margin-left":0-r.outerWidth(!0)},s={"margin-left":0-r.outerWidth(!0)});r.propertyCarouselAnimate(o,200,"linear");y.propertyCarouselAnimate(s,1e3,"linear").promise().then(function(){$(this).addClass("is-buffered");c&&h.remove();i._bindNavigation();i.inactiveTimer=window.setTimeout(function(){i._resumeAnimation(t)},2e3)})}},_bindEvents:function(){var n=this;if(n.options.PauseAnimationOnMouseOver!==!1){n.containersArray.resultscontainer.off("mouseenter"+RenoEventsNS).on("mouseenter"+RenoEventsNS,function(){$(this).find(".js-listing-carousel-item:not(.is-buffered):first").propertyCarouselPause()});n.containersArray.resultscontainer.off("mouseleave"+RenoEventsNS).on("mouseleave"+RenoEventsNS,function(){$(this).hasClass("action-was-performed")?($(this).removeClass("action-was-performed"),n._startAnimation(PropertyCarouselAnimationType.DisplayNextRecords)):$(this).find(".js-listing-carousel-item:not(.is-buffered):first").propertyCarouselResume()});n._bindToResizeEvents()}},_resumeAnimation:function(n){var t=this;if(t.containersArray.resultscontainer.find(".js-listing-carousel-item").clearQueue(),t.containersArray.resultscontainer.hasClass("action-was-performed"))t.containersArray.resultscontainer.removeClass("action-was-performed");else{t.containersArray.resultscontainer.find(".js-listing-carousel-item:not(.is-buffered):first").propertyCarouselResume();return}t._startAnimation(PropertyCarouselAnimationType.DisplayNextRecords,n);t._bindEvents()},_setMaxHeight:function(){var i=this,n,t=$(".js-carousel-slides"),r=$(".js-listing-carousel-item").outerHeight(!0);i.isVerticalLayout?n="none":(t.addClass("listing-carousel__slides--single-row"),n=r);t.css({"max-height":n})}});(function(){function r(){return(new Date).getTime()}var n="Custom.pause",i=1,u=$.fn.animate,t={};$.fn.propertyCarouselAnimate=function(f,e,o,s){var h=$.speed(e,o,s);return h.complete=h.old,this.each(function(){this[n]||(this[n]=i++);var e=$.extend({},h);u.apply($(this),[f,$.extend({},e)]);t[this[n]]={run:!0,prop:f,opt:e,start:r(),done:0}})};$.fn.propertyCarouselPause=function(){return this.each(function(){this[n]||(this[n]=i++);var u=t[this[n]];u&&u.run&&(u.done+=r()-u.start,u.done>u.opt.duration?delete t[this[n]]:($(this).stop(),u.run=!1))})};$.fn.propertyCarouselResume=function(){return this.each(function(){this[n]||(this[n]=i++);var f=t[this[n]];f&&!f.run&&(f.opt.duration-=f.done,f.done=0,f.run=!0,f.start=r(),u.apply($(this),[f.prop,$.extend({},f.opt)]))})}})();;;;var AutoAdvancePropertyCarousel=Class.create(PropertyCarousel,{initialize:function($super,n){$super(n);var t=this;t._autoadvanceTimeout=null;t._isBuffering=!1;t._startAutoAdvance()},_load:function($super,n,t,i,r,u,f,e){if((typeof IsPreview!="function"||!IsPreview())&&!window.isEditRulePreview){var o=this;o._disableAutoAdvance();o._isBuffering||(o._isBuffering=!0,$super(n,t,i,function(){o._isBuffering=!1},"","",e));o._startAutoAdvance()}},_setVariables:function($super){$super()},_bindEvents:function($super){$super();var n=this;gts.$(window).on("changeBreakpoint.containerBreakpoints"+RenoEventsNS+"."+n._moduleId,function(){n._startAutoAdvance()})},_disableAutoAdvance:function(){var n=this;window.clearTimeout(n._autoadvanceTimeout)},_startAutoAdvance:function(){var n=this,t=n._getCurrentPageStatistics();typeof n.options.AutoAdvanceInterval=="number"&&t.PageTotal>1&&(this._autoadvanceTimeout=window.setTimeout(function(){n.Next()},n.options.AutoAdvanceInterval*1e3))}});;;;var PropertyCarouselFactory=Class.create({initialize:function(n){this.xslParams=n},GetCarousel:function(){var n=this.xslParams,i=typeof n!="undefined"&&n.AutoAdvanceToNextPage===!0,r=typeof n!="undefined"&&typeof n.AutoAdvanceInterval=="number"&&n.AutoAdvanceInterval>0,u=typeof n!="undefined"&&n.AnimateTransitionToNextPage===!0,f=typeof n!="undefined"&&n.TransitionType==="singleslide",e=typeof n!="undefined"&&typeof n.IsVideoCarousel!="undefined"&&n.IsVideoCarousel===!0,t;return e?new VideoSlidePropertyCarousel(n):i&&r?(t=n.Orientation==="Horizontal"&&n.Rows===1||n.Orientation==="Vertical"&&n.MaxColumns===1,u&&t?new AnimatedPropertyCarousel(n):new AutoAdvancePropertyCarousel(n)):f?new SingleSlidePropertyCarousel(n):new PropertyCarousel(n)}});;;;var SingleSlidePropertyCarousel=Class.create(PropertyCarousel,{initialize:function($super,n){$super(n);this._xslParams=n;this.timeoutValue=300;this.Reinitialize();this._LoadNewPage()},Reinitialize:function($super,n){$super(n);"undefined"==typeof this.currentSlide&&(this.currentSlide=1);"undefined"==typeof this.translatePercentage&&(this.translatePercentage=0);var t=this._getCurrentPageStatistics();this.translateMultiplier=Number(parseFloat(100/t.CurrentRecordsPerPage).toFixed(5));this.fwTransformLimit=this.translateMultiplier*this._xslParams.MaxColumns*-1;this.PageTotal=this.containersArray.resultscontainer===null?0:parseInt(this.containersArray.resultscontainer.attr("pagetotal"));this._getAgentIds()},_InitTabs:function(){gts.$(window).trigger("resultItemModule.tabsinitialized"+RenoEventsNS)},_LoadNewPage:function(n){function i(){t._handleImages();t._InitTabs()}var t=this;this._load(n||this.tabid,2,this._xslParams.MaxColumns,i,"nextbuffer","","results");this.lastLoadedPageNumber=2;this.hasBuffer=!0},_getAgentIds:function(){var n=this;n.arrIds=[];gts.$(".js-agent-card",n.containersArray.container).each(function(t,i){n.arrIds.push($(i).attr("data-agent-id"))})},_bindEvents:function(){var n=this;if(typeof IsPreview!="function"||!IsPreview()){gts.$(document).on(window.ReadyEvents.PageIsReady,function(){gts.$(document).trigger("getAgentIds"+RenoEventsNS,{agentIds:n.arrIds})});gts.$(window).on("changeBreakpoint.containerBreakpoints"+RenoEventsNS+"."+n._moduleId,function(){var t=n._getCurrentPageStatistics(),i=n.translatePercentage/n.translateMultiplier;n.translateMultiplier=Number(parseFloat(100/t.CurrentRecordsPerPage).toFixed(5));n.fwTransformLimit=n.translateMultiplier*n._xslParams.MaxColumns*-1;n.translatePercentage=Number(parseFloat(n.translateMultiplier*i).toFixed(5));n.itemscontainer.css("transform","translateX("+n.translatePercentage+"%)")});gts.$(".js-agent-card",n.containersArray.container).on("hover",_.debounce(function(){var n=$(this);gts.$(document).trigger("HoverAgentCard"+RenoEventsNS,{agentId:n.attr("data-agent-id")})},500));n._bindToResizeEvents()}},_injectHtml:function($super,n,t,i){var r=this,f=r._getCurrentPageStatistics(),e,o,u;if(t!==r.tabid){$super(n);return}if(r.PageTotal>1&&f.LoadedRecordCount>=f.MaxRecordsPerPage){e=f.MaxRecordsPerPage*2;o=gts.$(n).find(".js-property-carousel-items-container").html();i==="forward"||i==="nextnew"||i==="nextbuffer"?r.itemscontainer.append(o):r.itemscontainer.prepend(o);const s=gts.$(n).find(".js-listing-carousel-item").length,t=gts.$(r.containersArray.container).find(".js-listing-carousel-item");offsetMultiplier=Math.min(f.CurrentRecordsPerPage,s);t.length>e&&(i==="forward"||i==="nextnew"?(t.slice(0,t.length-e).remove(),r.currentSlide=1,i="nextnew"):(t.slice(e).remove(),r.currentSlide=-1));(i==="forward"||i==="nextnew")&&(r.translatePercentage=(100-r.translateMultiplier*offsetMultiplier)*-1);(i==="backwards"||i==="prevnew")&&(r.translatePercentage-=r.translateMultiplier*s);r.itemscontainer.css("transform","translateX("+r.translatePercentage+"%)");switch(i){case"forward":u="next";break;case"backwards":u="prevnew";break;case"nextbuffer":u="nextbuffer";break;default:u="nextnew"}r.ChangePage(u,null,!0)}},SwitchTab:function(n){let t=this,i=function(){t.itemscontainer=gts.$(".js-property-carousel-items-container",t._ModuleEle);t._setModuleContainers(t.options.ModuleId);t._setVariables();t._handleImages();t.currentSlide=1;t.translatePercentage=0;t._LoadNewPage(n)};t._load(n,1,t._xslParams.MaxColumns,i)},ChangePage:function(n,t,i){var r,e,u,f;if(i=i||!1,r=this,!r.isLoading||i){if(gts.$(".js-carousel-slides",r._ModuleEle).addClass("listing-carousel__slides--overflow"),n==="next"?(e=r.currentSlide+1,u="forward"):n==="prev"?(e=r.currentSlide-1,u="backwards"):n==="nextnew"?(e=1,u="forward"):n==="prevnew"&&(e=-1,u="backwards"),r._ModuleEle.removeClass("goes-forward").removeClass("goes-backwards"),"undefined"!=typeof u&&r._ModuleEle.addClass("goes-"+u),Math.round(r.translatePercentage)<=Math.round(this.fwTransformLimit)&&u==="forward"){window.setTimeout(function(){r._ModuleEle.addClass("is-loading")},r.timeoutValue);r.hasBuffer||(r.lastLoadedPageNumber++,r.hasBuffer=!1);f=r.PageTotal===r.lastLoadedPageNumber?1:r.PageTotal<r.lastLoadedPageNumber?2:r.lastLoadedPageNumber+1;r.lastLoadedPageNumber=f;window.setTimeout(function(){r._load(r.tabid,f,r._xslParams.MaxColumns,t,u,"","results")},r.timeoutValue);r.hasBuffer=!0;r.currentSlide=1;r.translatePercentage=0;return}if(Math.round(r.translatePercentage)===0&&u==="backwards"){window.setTimeout(function(){r._ModuleEle.addClass("is-loading")},r.timeoutValue);r.hasBuffer&&(r.lastLoadedPageNumber--,r.hasBuffer=!1);f=r.lastLoadedPageNumber===1?r.PageTotal:r.lastLoadedPageNumber-1;r.lastLoadedPageNumber=f;window.setTimeout(function(){r._load(r.tabid,f,r._xslParams.MaxColumns,t,u,"","results")},r.timeoutValue);r.currentSlide=-1;r.translatePercentage=0;return}r._translatePage(e,u);window.setTimeout(function(){r._ModuleEle.removeClass("is-loading")},r.timeoutValue)}},_translatePage:function(n,t){var i=this;if("undefined"==typeof n){i.currentSlide=0;return}t==="forward"?i.translatePercentage=Number(parseFloat(i.translatePercentage-i.translateMultiplier).toFixed(5)):t==="backwards"&&(i.translatePercentage=Number(parseFloat(i.translatePercentage+i.translateMultiplier).toFixed(5)));gts.$("body").hasClass("is-rtl")&&(i.translatePercentage*=-1);setTimeout(function(){i.itemscontainer.css("transform","translateX("+i.translatePercentage+"%)")},i.timeoutValue);i.currentSlide=n}});;;;var VideoSlidePropertyCarousel=Class.create(PropertyCarousel,{initialize:function($super,n){$super(n);var t=this;t._autoadvanceTimeout=null;t._isBuffering=!1;t._initializeVideoCarousel()},_load:function($super,n,t,i,r,u,f,e){if((typeof IsPreview!="function"||!IsPreview())&&!window.isEditRulePreview){var o=this;o._isBuffering||(o._isBuffering=!0,$super(n,t,i,function(){o._isBuffering=!1},"","",e));o._initializeVideoCarousel()}},_setMaxHeight:function($super){$super()},_setVariables:function($super){$super()},_bindEvents:function($super){$super();var n=this},_initializeVideoCarousel:function(){var n=this,i=n._getCurrentPageStatistics(),t;n.itemscontainer=gts.$(".js-property-carousel-items-container",n._ModuleEle);n.carouselContainer=gts.$(".js-carousel",n._ModuleEle);n._setModuleContainers(n.options.ModuleId);n._setVariables();n.itemscontainer.find("iframe").each(function(){var n=$(this),t=n.attr("src")||n.attr("data-src");n.attr("data-original-src",t);t.indexOf("muted=")==-1&&(t+="&muted=1");t.indexOf("loop=")==-1&&(t+="&loop=1");n.attr("data-src",t);n.parents(".js-carousel-container").hasClass("is-center")?n.attr("src",t):n.removeAttr("src")});t=function(){n.itemscontainer.find("iframe").each(function(){var n=$(this),t;n.attr("data-src")!==undefined&&(n.parents(".js-carousel-container").hasClass("is-center")?(t=n.attr("data-src"),n.attr("src",t)):n.removeAttr("src"))})};n.itemscontainer.find("iframe").css({width:"100%",height:"100%"});n.carouselContainer.imageCarousel({autorotateInterval:0,hasControls:!0,hasBullets:!1,onSlideChanged:t})}});;;;function AgentDetailMediaModule(){ModuleBase.call()}AgentDetailMediaModule.prototype=new ModuleBase;AgentDetailMediaModule.prototype._OnInitialize=function(){this._OnInitializeAgentDetailMediaModule()};AgentDetailMediaModule.prototype._OnInitializeAgentDetailMediaModule=function(){var n=this;n._scrollableContainer=gts.$(".js-slides-rail");n._item=gts.$(".js-carousel-item");n._prevControl=gts.$(".js-carousel-control[data-direction=prev]",n._ModuleEle);n._nextControl=gts.$(".js-carousel-control[data-direction=next]",n._ModuleEle);n._eventNS=RenoEventsNS+"."+n.Id;n._processItems();n._initialControlsDisplay();n._initializeSmartImages();n._setSameHeight();n._bindEvents()};AgentDetailMediaModule.prototype._initialControlsDisplay=function(){var n=this;n._visibleItems>=n._item.length&&n._nextControl.addClass("u-hide")};AgentDetailMediaModule.prototype._processItems=function(){var n=this;n._itemWidth=n._item.outerWidth();n._visibleItems=Math.round(n._scrollableContainer.outerWidth()/n._itemWidth)};AgentDetailMediaModule.prototype._initializeSmartImages=function(){var n=this;gts.$(".js-smartimage",n._ModuleEle).smartImage({useLazyLoad:!0,alwaysFill:!0})};AgentDetailMediaModule.prototype._setSameHeight=function(){var n=this;typeof gts.$("body").sameHeight!="undefined"&&gts.$(".js-same-height",n._ModuleEle).sameHeight({eventNamespace:n.Id})};AgentDetailMediaModule.prototype._goTo=function(n){var t=this,i=Math.round(t._scrollableContainer.scrollLeft()/t._itemWidth),u=i+t._visibleItems,r;n==="prev"&&i--;n==="next"&&i++;i>=t._item.length-t._visibleItems?t._nextControl.addClass("u-hide"):t._nextControl.hasClass("u-hide")&&t._nextControl.removeClass("u-hide");i<=0?t._prevControl.addClass("u-hide"):t._prevControl.hasClass("u-hide")&&t._prevControl.removeClass("u-hide");t._scrollableContainer.find("[data-item-index="+u+"]").find(".js-smartimage:not([src])").trigger("appear");r=i*t._itemWidth;t._scrollableContainer.off("scroll."+t._eventNS);t._scrollableContainer.stop().animate({scrollLeft:r},500)};AgentDetailMediaModule.prototype._bindEvents=function(){var n=this;gts.$(window).off(resizeEvent+n._eventNS).on(resizeEvent+n._eventNS,function(){setTimeout(function(){n._processItems()},500)});gts.$(".js-carousel-control",n._ModuleEle).off("click"+n._eventNS).on("click"+n._eventNS,function(){n._goTo(gts.$(this).attr("data-direction"))});gts.$(".js-expand",n._ModuleEle).off("click"+n._eventNS).on("click"+n._eventNS,function(){var t=gts.$(this),i=t.attr("data-video-src"),r=t.attr("data-image-src");n._openExpander(r,i)});gts.$("body").off("click"+n._eventNS).on("click"+n._eventNS,".js-modal-close",function(t){(t.keyCode===undefined||t.keyCode===13)&&(t.preventDefault(),t.stopPropagation(),n._closeExpander())});n._scrollableContainer.off("mousedown."+n._eventNS+" touchstart."+n._eventNS).off("mouseup."+n._eventNS+" touchend."+n._eventNS).on("mousedown."+n._eventNS+" touchstart."+n._eventNS,function(){n._startDragScroll=n._scrollableContainer.scrollLeft();n._bindScrollEvent()}).on("mouseup."+n._eventNS+" touchend."+n._eventNS,function(){n._startDragScroll<n._scrollableContainer.scrollLeft()?n._dragDirection="next":n._startDragScroll>n._scrollableContainer.scrollLeft()&&(n._dragDirection="prev")});gts.$(document).off("keyup."+n._eventNS).on("keyup."+n._eventNS,function(t){t.key==="Escape"&&n._closeExpander()});n._bindScrollEvent()};AgentDetailMediaModule.prototype._bindScrollEvent=function(){var n=this,t;n._scrollableContainer.on("scroll."+n._eventNS,function(){window.clearTimeout(t);t=setTimeout(function(){n._goTo(n._dragDirection)},66)})};AgentDetailMediaModule.prototype._openExpander=function(n,t){var i=this,r,u;if(n!==undefined||t!==undefined)if(i._closeExpander(),r=gts.$('<div class="c-modal  agent-media-carousel__modal  js-content-expander"><div class="modal__container"><div class="modal__item"><a href="#" class="modal__action  modal__action--alt  js-modal-close" aria-label="Close"><i class="icon  icon-close"><\/i><span style="display: none">Close<\/span><\/a><\/div><\/div><\/div>').hide().appendTo("body").fadeIn(),t!==undefined)r.find(".modal__item").prepend('<div class="u-ar"><div class="u-ar__16-9"><\/div><div class="u-ar__content"><div class="c-video-container"><\/div><\/div><\/div>'),u={autoplay:"On",useAlwaysFill:!1,volume:100,sources:[{src:t}]},n!==undefined&&(u.poster=n),i.expanderVideo=r.find(".c-video-container").videoPlayer(u),setTimeout(function(){i.expanderVideo.videoPlayer("Play")},100);else if(n!=="image")return};AgentDetailMediaModule.prototype._closeExpander=function(){gts.$(".js-content-expander").fadeOut(function(){var n=gts.$(this);n.find(".c-video-container[data-hasVideoPlayer]").videoPlayer("destroy");n.remove()})};;;;function PressResultsModule(){ModuleBase.call()}PressResultsModule.prototype=new ModuleBase;PressResultsModule.prototype._OnInitialize=function(){if(this._ModuleEle=gts.$("#"+this._XSLParams.ModuleId),this._XSLParams.InitializeJs!=="false"){let n=gts.$(".js-pressresults-viewall",this._ModuleEle);n.data("record-total")<=n.data("record-perpage")&&!n.hasClass("js-toggle-content")&&n.addClass("u-hide");this._InitializeSmartImages();this._InitializeSameHeight()}};PressResultsModule.prototype.ViewAll=function(){const n=gts.$(".js-pressresults-viewall",this._ModuleEle),t=(n,t)=>{var i=t,r=SEOService.AddQueryStringParam(n._XSLParams.PageSEOUrl,"ArticlesPerPage="+i);n._ReloadContent(r);gts.$(".pressresults__container").css("height","").css("height",gts.$(".pressresults__photo").height())};if(n.hasClass("js-toggle-content")&&!n.hasClass("expanded-all")){t(this,2147483647);n.addClass("expanded-all");this._ModuleEle.addClass("expanded-all");return}if(n.hasClass("js-toggle-content")&&n.hasClass("expanded-all")){t(this,parseInt(n.attr("data-record-collapsed")));n.removeClass("expanded-all");this._ModuleEle.removeClass("exapnded-all");return}t(this,2147483647)};PressResultsModule.prototype.ChangePage=function(n){var t=1,i;typeof n!="undefined"&&n!==""&&(t=parseInt(n));i=SEOService.AddQueryStringParam(this._XSLParams.PageSEOUrl,"CurrentPage="+t);this._ReloadContent(i)};PressResultsModule.prototype.LoadMore=function(n,t){if(n){var i=this,f=SEOService.AddMandatoryUrlParts("/widget/nowrapper/"+this._XSLParams.ModuleTagName+"/xml-out?AgentId="+this._XSLParams.AgentId+"&CurrentPage="+parseInt(n)+"&Sort="+this._XSLParams.Sort+"&IsTeam="+this._XSLParams.IsTeam+"&ArticlesPerPage="+this._XSLParams.PerPage),u=t||gts.$(".js-loadmore",this._ModuleEle),r=n===1?"":!0,e={params:gts.$.extend({IsAjaxCall:r},globalParams,this._XSLParams),eval:!1,callback:function(){if(r===""){i.Initialize(i._XSLParams);return}i._InitializeSameHeight();i._InitializeSmartImages()}};XslTransformer.Transform(u,this._XSLParams.XSLPath,f,e,r);gts.$(".js-loadmore",this._ModuleEle).unwrap("#"+u.attr("id"))}};PressResultsModule.prototype._InitializeSmartImages=function(){gts.$(".js-smartimage",this._ModuleEle).smartImage({useLazyLoad:!0,useBestFit:!0})};PressResultsModule.prototype._InitializeSameHeight=function(){var n=this;typeof $("body").sameHeight!="undefined"&&setTimeout(function(){gts.$(".js-press-same-height",n._ModuleEle).sameHeight({eventNamespace:n._XSLParams.ModuleId})},0)};PressResultsModule.prototype.SortBy=function(n){n&&(this._XSLParams.Sort=n,this.LoadMore(1,this._ModuleEle))};;;;function TestimonialsResultsModule(){ModuleBase.call()}TestimonialsResultsModule.prototype=new ModuleBase;TestimonialsResultsModule.prototype._OnInitialize=function(){let t=this;this._ModuleEle=gts.$("#"+this._XSLParams.ModuleId);this._InitializeSameHeight();let n=gts.$(".js-testimonial-viewall",this._ModuleEle);n.data("record-total")<=n.data("record-perpage")&&n.addClass("u-hide");this._InitializeSmartImages();gts.$(document).off(ModuleStatusNotifyServiceType.AnchorChanged+"Loaded"+RenoEventsNS+"."+this._XSLParams.ModuleId+"ScrollToTargetOnModuleStatusNotifyService").on(ModuleStatusNotifyServiceType.AnchorChanged+"Loaded"+RenoEventsNS+"."+this._XSLParams.ModuleId+"ScrollToTargetOnModuleStatusNotifyService",function(){t._InitializeSmartImages()})};TestimonialsResultsModule.prototype._InitializeSmartImages=function(){let n=gts.$(".js-testimonials-thumbnails",gts.$("#"+this._XSLParams.ModuleId));gts.$(".js-smartimage",n).smartImage({useBestFit:!0,useLazyLoad:!0,alwaysFill:!0})};TestimonialsResultsModule.prototype.ViewAll=function(){const n=gts.$(".js-testimonial-viewall",this._ModuleEle),t=(n,t)=>{var i=t,r=SEOService.AddQueryStringParam(n._XSLParams.PageSEOUrl,"ArticlesPerPage="+i);n._ReloadContent(r)};if(n.hasClass("js-toggle-content")&&!n.hasClass("expanded-all")){t(this,2147483647);n.addClass("expanded-all");return}if(n.hasClass("js-toggle-content")&&n.hasClass("expanded-all")){t(this,parseInt(n.attr("data-record-collapsed")));n.removeClass("expanded-all");return}t(this,2147483647)};TestimonialsResultsModule.prototype.ChangePage=function(n){var t=1,i;typeof n!="undefined"&&n!==""&&(t=parseInt(n));i=SEOService.AddQueryStringParam(this._XSLParams.PageSEOUrl,"CurrentPage="+t);this._ReloadContent(i);this._InitializeSameHeight();this._InitializeSmartImages()};TestimonialsResultsModule.prototype._InitializeSameHeight=function(){var n=this;typeof $("body").sameHeight!="undefined"&&setTimeout(function(){gts.$(".js-testimonials-same-height",n._ModuleEle).sameHeight({eventNamespace:n._XSLParams.ModuleId})},0)};TestimonialsResultsModule.prototype._LoadMore=function(n,t){n&&t&&gts.$.ajax({url:n,error:function(t,i,r){r!=="abort"&&console.log(String.Format("TestimonialsResultsModule - Load items failed. Url: {0}. Error: {1}",n,r))},success:t})};;;;TestimonialsResultsModule.prototype._OnInitialize=function(){this._ModuleEle=gts.$("#"+this._XSLParams.ModuleId);this._InitializeSameHeight();this._ShowNonFeaturedItems()};TestimonialsResultsModule.prototype._BindToEvents=function(){var n=this,t="click"+RenoEventsNS+"."+n.Id,i="resize.accordion"+RenoEventsNS+"."+n.Id;$(".js-non-featured",n._ModuleEle).off(t).on(t,function(t){t.preventDefault();n._LoadNonFeatured()});$(window).off(i).on(i,$.throttle(250,function(){n._MarkExpandableItems()}))};TestimonialsResultsModule.prototype._MarkExpandableItems=function(){var n=this,t=$(".js-testimonial-accordion:not(:checked)","#modal-"+n.Id).next(".js-testimonial-accordion-text");t.each(function(){var n=$(this),t=n.next(".js-testimonial-accordion-label");n[0].scrollWidth>n[0].offsetWidth?t.removeClass("u-hide"):t.addClass("u-hide")})};TestimonialsResultsModule.prototype._ExpandOneItem=function(){var n=this,t=$(".js-testimonial-accordion","#modal-"+n.Id),i="change.accordion"+RenoEventsNS+"."+n.Id;t.off(i).on(i,function(){var n=$(this);n.prop("checked")&&t.not(n).prop("checked",!1)})};TestimonialsResultsModule.prototype._InitializeSameHeight=function(){var n=this;typeof $("body").sameHeight!="undefined"&&setTimeout(function(){gts.$(".js-testimonials-same-height",n._ModuleEle).sameHeight({eventNamespace:n._XSLParams.ModuleId})},0)};TestimonialsResultsModule.prototype._LoadNonFeatured=function(){var n=this,t=SEOService.AddMandatoryUrlParts("/widget/nowrapper/"+this._XSLParams.ModuleTagName+"?AgentId="+this._XSLParams.AgentId+"&ArticlesPerPage="+this._XSLParams.PerPage+"&layout=modal&FeaturedDisplayFilter=NonFeatured&IncludeAgentsArticlesForTeam="+this._XSLParams.IncludeAgentsArticlesForTeam),i=function(t){ShowDialogResult(t);n._MarkExpandableItems();n._ExpandOneItem()};n._LoadMore(t,i)};TestimonialsResultsModule.prototype._ShowNonFeaturedItems=function(){var n=this,t=SEOService.AddMandatoryUrlParts("/widget/nowrapper/"+this._XSLParams.ModuleTagName+"/json-out?AgentId="+this._XSLParams.AgentId+"&ArticlesPerPage=1&layout=modal&FeaturedDisplayFilter=NonFeatured&IncludeAgentsArticlesForTeam="+this._XSLParams.IncludeAgentsArticlesForTeam),i=function(t){t&&t.mainwidgethandler&&t.mainwidgethandler[n._XSLParams.ModuleTagName]&&t.mainwidgethandler[n._XSLParams.ModuleTagName].TestimonialsResultsModule&&t.mainwidgethandler[n._XSLParams.ModuleTagName].TestimonialsResultsModule.RecordTotal&&$(".js-non-featured",n._XSLParams._ModuleEle).removeClass("u-hide")};n._LoadMore(t,i)};;;;function _TxtPager(){}function SetupTxtPagerEventHandlers(n,t,i){_TxtPager.AddHandlers(n,t,i)}_TxtPager.AddHandlers=function(n,t,i){var r=this;$(n).each(function(){r._AddFocusAndBlurHandlers(this);r._AddKeyUpHandler(this,t,i);r._AddKeyDownHandler(this)})};_TxtPager._AddKeyUpHandler=function(n,t,i){(t.PageTotal==null||t.PageTotal=="")&&(t.PageTotal=0);$(n).keyup(function(r){return r.keyCode==13?isNaN($(n).val())?!1:(parseFloat($(n).val())>parseFloat(t.PageTotal)?$(n).val(t.PageTotal):parseFloat($(n).val())<1?$(n).val("1"):trim($(this).val())==""&&$(n).val("1"),i(parseInt($(n).val())),!1):!1})};_TxtPager._AddKeyDownHandler=function(n){$(n).keydown(function(n){if(n.keyCode==13)return!1})};_TxtPager._AddFocusAndBlurHandlers=function(n){var t="";$(n).focus(function(){t=$(n).val();$(n).val("")});$(n).blur(function(){$(n).val(t)})};;;;/*!
 * jQuery.scrollTo
 * Copyright (c) 2007 Ariel Flesler - aflesler  gmail  com | https://github.com/flesler
 * Licensed under MIT
 * https://github.com/flesler/jquery.scrollTo
 * @projectDescription Lightweight, cross-browser and highly customizable animated scrolling with jQuery
 * @author Ariel Flesler
 * @version 2.1.2
 */
(function(n){"use strict";typeof define=="function"&&define.amd?define(["jquery"],n):typeof module!="undefined"&&module.exports?module.exports=n(require("jquery")):n(jQuery)})(function(n){"use strict";function r(t){return!t.nodeName||n.inArray(t.nodeName.toLowerCase(),["iframe","#document","html","body"])!==-1}function i(t){return n.isFunction(t)||n.isPlainObject(t)?t:{top:t,left:t}}var t=n.scrollTo=function(t,i,r){return n(window).scrollTo(t,i,r)};return t.defaults={axis:"xy",duration:0,limit:!0},n.fn.scrollTo=function(u,f,e){typeof f=="object"&&(e=f,f=0);typeof e=="function"&&(e={onAfter:e});u==="max"&&(u=9e9);e=n.extend({},t.defaults,e);f=f||e.duration;var o=e.queue&&e.axis.length>1;return o&&(f/=2),e.offset=i(e.offset),e.over=i(e.over),this.each(function(){function p(t){var i=n.extend({},e,{queue:!0,duration:f,complete:t&&function(){t.call(c,s,e)}});a.animate(h,i)}var y;if(u!==null){var l=r(this),c=l?this.contentWindow||window:this,a=n(c),s=u,h={},v;switch(typeof s){case"number":case"string":if(/^([+-]=?)?\d+(\.\d+)?(px|%)?$/.test(s)){s=i(s);break}s=l?n(s):n(s,c);case"object":if(s.length===0)return;(s.is||s.style)&&(v=(s=n(s)).offset())}y=n.isFunction(e.offset)&&e.offset(c,s)||e.offset;n.each(e.axis.split(""),function(n,i){var w=i==="x"?"Left":"Top",u=w.toLowerCase(),r="scroll"+w,b=a[r](),k=t.max(c,i),f;v?(h[r]=v[u]+(l?0:b-a.offset()[u]),e.margin&&(h[r]-=parseInt(s.css("margin"+w),10)||0,h[r]-=parseInt(s.css("border"+w+"Width"),10)||0),h[r]+=y[u]||0,e.over[u]&&(h[r]+=s[i==="x"?"width":"height"]()*e.over[u])):(f=s[u],h[r]=f.slice&&f.slice(-1)==="%"?parseFloat(f)/100*k:f);e.limit&&/^\d+$/.test(h[r])&&(h[r]=h[r]<=0?0:Math.min(h[r],k));!n&&e.axis.length>1&&(b===h[r]?h={}:o&&(p(e.onAfterFirst),h={}))});p(e.onAfter)}})},t.max=function(t,i){var u=i==="x"?"Width":"Height",f="scroll"+u;if(!r(t))return t[f]-n(t)[u.toLowerCase()]();var e="client"+u,o=t.ownerDocument||t.document,s=o.documentElement,h=o.body;return Math.max(s[f],h[f])-Math.min(s[e],h[e])},n.Tween.propHooks.scrollLeft=n.Tween.propHooks.scrollTop={get:function(t){return n(t.elem)[t.prop]()},set:function(t){var r=this.get(t),i;if(t.options.interrupt&&t._last&&t._last!==r)return n(t.elem).stop();i=Math.round(t.now);r!==i&&(n(t.elem)[t.prop](i),t._last=this.get(t))}},t});;;;var ScrollToTargetOnModuleStatusNotifyServiceEventBase=Class.create({_defaultInitSettings:{scrollToTargetSelector:".js-default-ajax-scroll-target",scrollToTargetOffset:0,eventToBindTo:ModuleStatusNotifyServiceEvent.ModulesLoaded,eventToBindToFullLoaded:ModuleStatusNotifyServiceEvent.ModuleFullLoaded,scrollService:undefined,moduleStatusNotifyServiceType:undefined,loadDataAdditionalRequestInfoPropertyToCheck:undefined},initialize:function(n){this._options=gts.$.extend({},this._defaultInitSettings,n);this._BindToModuleStatusNotifyServiceEvent()},_BindToModuleStatusNotifyServiceEvent:function(){if(gts.$(document).off(this._options.moduleStatusNotifyServiceType+this._options.eventToBindTo+this._options.eventNs),this._options.scrollService!=null&&this._options.moduleStatusNotifyServiceType!=null&&this._options.loadDataAdditionalRequestInfoPropertyToCheck!=null){var n=this,t=this._options.moduleStatusNotifyServiceType+this._options.eventToBindTo+this._options.eventNs,i=this._options.moduleStatusNotifyServiceType+this._options.eventToBindToFullLoaded+this._options.eventNs;gts.$(document).off(t+" "+i).on(t+" "+i,function(t,i){typeof i.loadDataAdditionalRequestInfo!="undefined"&&typeof i.loadDataAdditionalRequestInfo[n._options.loadDataAdditionalRequestInfoPropertyToCheck]!="undefined"&&n._ScrollToTarget()})}},_ScrollToTarget:function(){this._options.scrollService.Scroll(this._options.scrollToTargetSelector)}});;;;ScrollService=Class.create({_defaultInitSettings:{scrollIfCurrentPositionIsAboveTarget:!1},_defaultScrollDuration:500,_defaultScrollSettings:{},initialize:function(){},Initialize:function(n){this._SetInitSettings(n);this._SetScrollDuration();this._SetScrollSettings()},_SetInitSettings:function(n){this._initSettings=gts.$.extend({},this._defaultInitSettings,n)},_SetScrollDuration:function(){if(typeof this._initSettings.scrollDuration=="undefined"){this._scrollDuration=this._defaultScrollDuration;return}this._scrollDuration=this._initSettings.scrollDuration},_SetScrollSettings:function(){typeof this._initSettings.scrollSettings=="undefined"&&(this._initSettings.scrollSettings={});this._scrollSettings=gts.$.extend({},this._defaultScrollSettings,this._initSettings.scrollSettings)},_GetScrollSettings:function(){return this._scrollSettings},Scroll:function(n){var i=this._GetScrollTarget(n),t,r;i!=null&&i.length!=0&&(this._initSettings.scrollIfCurrentPositionIsAboveTarget||!this._IsCurrentPositionAboveScrollToEle(i))&&(t=this._GetScrollSettings(),!0===jQuery.isFunction(window[t.offset])?(r=window[t.offset].call()||0,t=$.extend({},t,{offset:r})):parseInt(t.offset).toString()===t.offset&&(t=$.extend({},t,{offset:t.offset})),gts.$(window).scrollTo(i,this._scrollDuration,t))},_IsCurrentPositionAboveScrollToEle:function(n){var t=n.offset().top,i=$(document).scrollTop();return i<=t},_GetScrollTarget:function(n){return typeof n!="undefined"&&n!=null&&n!=""?gts.$(n):null}});;;;function RecordExpanderToggleModuleBase(){this._Params=undefined;this.Initialize=function(n){var t,i;typeof n.RecordExpanderToggleSelector!="undefined"&&n.RecordExpanderToggleSelector!==""&&(t=this,t._Params=n,typeof t._Params.RecordMarkers!="undefined"&&(t._MarkerData=t._Params.RecordMarkers),i=gts.$(t._Params.RecordExpanderToggleSelector),i.length!==0)&&(i.each(function(){t._SetMapMarkerDataToToggleSelector(gts.$(this))}).bind("click.toggleDescription",function(){t._CollapseSiblings(this);t._ChangeToggleCollapserIcon(this);t._ToggleRecordExpandedState(this);t._OnExpandCollapseComplete(gts.$(this))}),t._Params.ShowRecordsAsExpanded||i.prev().hide())};this._SetMapMarkerDataToToggleSelector=function(n){var i=n.attr("id"),t;typeof n.recordItemMap=="undefined"&&(t=n.prev().find(".map"),t.length!==0)&&this._Params.ShowRecordsAsExpanded&&this._CreateMarkerAndMap(n)};this._CreateMarkerAndMap=function(n){var r=n.attr("id"),t,i;typeof n.recordItemMap=="undefined"&&(t=MarkerDataFinder.GetMarkerData(r,this._MarkerData),typeof t!="undefined"&&t!==null)&&(i=gts.$.extend({},this._Params,{MapContainer:n.prev().find(".map"),MarkerData:t.Data,Index:t.Index}),n.recordItemMap=new RecordItemMap(i))};this._CollapseSiblings=function(n){if(!this._Params.ShowRecordsAsExpanded){var r=gts.$(this._Params.RecordExpanderToggleCollapserSelector),t=r.not(n),i=t.prev();i.stop(!0,!1).slideUp();this._Params.ReverseTogglePrevPrev&&i.prev().stop(!0,!1).slideDown();t.children().addClass("icon-plus-medium").removeClass("icon-minus-medium")}};this._ChangeToggleCollapserIcon=function(n){var r=gts.$("span.icon",n),t="icon-plus-medium",i="icon-minus-medium";isResponsive&&(t="icon-arrow-up-full",i="icon-arrow-down-full");gts.$(n).prev().is(":visible")?r.addClass(t).removeClass(i):r.addClass(i).removeClass(t)};this._ToggleRecordExpandedState=function(n){var t=gts.$(n).prev();t.is(":visible")&&t.css("min-height","auto");t.stop(!0,!1).slideToggle(function(){var n=gts.$(this);setTimeout(function(){n.is(":visible")&&n.css("min-height",n.height()+"px")},5)});this._Params.ReverseTogglePrevPrev&&t.prev().stop(!0,!1).slideToggle()};this._OnExpandCollapseComplete=function(n){this._Params.ShowRecordsAsExpanded||this._CreateMarkerAndMap(n)}};;;var TabsDataBubbleService=Class.create(MapBubbleServiceBase,{initialize:function(){this._currentWindow=null;this._infoWindowCloseService=new GInfoWindowCloseService},ShowBubble:function(n){var t=this,i=n.content;this._CloseCurrentWindow();this._currentWindow=this._CreateInfoWindow(n.marker,i);this._currentWindow.oldCenter=n.marker.map.getCenter();this._currentWindow.oldZoom=n.marker.map.getZoom();this._currentWindow.open(n.marker.map);google.maps.event.addListener(this._currentWindow,"closeclick",function(){n.goToOldPosition=!0;t._OnClose(n)});google.maps.event.addListenerOnce(this._currentWindow,"domready",function(){t._StyleInfoBubble();t._StyleCloseButton();gts.$(".js-info-bubble-close").off("click").on("click",function(i){i.preventDefault();i.stopPropagation();t._OnClose(n)})});gts.$(document).trigger("MapModule.InfoBubbleDataLoaded"+RenoEventsNS,{map:n.marker.map,infoWindow:t._currentWindow})},_CloseCurrentWindow:function(){this._currentWindow!==null&&(this._currentWindow.close(),this._currentWindow=null)},_OnClose:function(n){this.CloseBubble(n)},CloseBubble:function(n){n.marker!==null&&(this._infoWindowCloseService.CloseInfoWindow({map:n.marker.map,marker:n.marker,infoWindow:this._currentWindow,oldCenter:this._currentWindow?this._currentWindow.oldCenter:null,oldZoom:this._currentWindow?this._currentWindow.oldZoom:null,goToOldPosition:n.goToOldPosition}),gts.$(".js-mobile-info-bubble").html(""),typeof n.onCloseCallback=="function"&&n.onCloseCallback())},_StyleCloseButton:function(){var n=gts.$(".gm-style-iw-d").next();n.addClass("info-bubble__close  js-info-bubble-close  icon  icon-close-slim").removeAttr("style");gts.$(".js-info-bubble-close img").css("display","none")}});;;;(function(n){"use strict";var t="LsQuickView",i={OpenQuickview:".js-ls-quickview",MainImageSelector:".js-c-thumbnail-carousel img",SmartImage:".js-smartimage",Record:".js-record"},r={CardClasses:"is-card-active u-nomargin-top",Modal:"c-modal"};n.widget("gts."+t,{defaults:{ModuleId:"",JSXSLPath:"",DataEndpoint:"",ModuleLayout:"default",ParentItemSelector:"[id^='LS']",ParentItemIdAttribute:"id",transformParams:{ListingInfoDisplayMode:""},IsAjaxCall:!0},DataEndpoint:"",XSLPath:"",RecordId:"",_create:function(){var n=this,i=!0;return n.options=_.extend({},n.defaults,n.options),n.options.transformParams=_.extend({},globalParams,n.options.transformParams),n.options.IsAjaxCall===!0&&(n.options.transformParams.IsAjaxCall=n.options.IsAjaxCall),this.clickEvent="click.quickview"+RenoEventsNS+"."+n.options.ModuleId,this._ModuleEle=gts.$("#"+n.options.ModuleId),n.options.ModuleId===""&&(log.debug(String.Format("{0} cannot run without ModuleId param",t)),i=!1),n.options.JSXSLPath===""&&(log.debug(String.Format("{0} cannot run without JSXSLPath param",t)),i=!1),n.options.DataEndpoint===""&&(log.debug(String.Format("{0} cannot run without DataEndpoint param",t)),i=!1),i===!0?n._initialize():log.debug(String.Format("Initialization of {0} aborted.",t)),n},_destroy:function(){this._ModuleEle.off(this.clickEvent)},_initialize:function(){var n=this;n._setDataEndpoint();n._setXSLPath();n.xslCache="";n.xmlCache="";this._ModuleEle.off(n.clickEvent).on(n.clickEvent,i.OpenQuickview,function(t){t.preventDefault();n.RecordId=gts.$(this).closest(n.options.ParentItemSelector).attr(n.options.ParentItemIdAttribute).replace("LS","");n._loadXSLIfNecessary(n.XSLPath,n._XslDocLoaded)})},_loadXSLIfNecessary:function(n,t){var i=this,r=i.xslCache;if(i.xslCache===""){XslLoader.Load(n,function(n){i.xslCache=n;t.apply(i,[n])});return}t.apply(i,[r])},_loadXMLIfNecessary:function(n,i){var r=this,u=r.xmlCache;if(r.xmlCache===""){gts.$.ajax({url:n,dataType:"xml",success:function(n,t,u){var f;u.status===AjaxResponseCode.RuleChanged?f=AjaxResponseCode.RuleChanged:(f=n,r.xmlCache=f);i.apply(r,[f])},error:function(i,r,u){log.debug(String.Format("{0} Failed to load XML from url: {1}",t,n));log.debug(u)}});return}i.apply(r,[u])},_XslDocLoaded:function(){var n=this;n._loadXMLIfNecessary(n.DataEndpoint,n._XmlDocLoaded)},_XmlDocLoaded:function(n){var t=this,f=gts.$(String.Format("<div class='{0}'><\/div>",r.Modal)),s=XmlConverter.XmlToString(n),u=gts.$(s).find(String.Format("listing[id={0}]",t.RecordId)).wrap("<div><\/div>").parent().html(),e,o;u&&(u=u.replace(/<!--\[CDATA\[(.*?)]]-->/gi,"$1"),XslTransformer.Transform(f,t.xslCache,XmlConverter.StringToXml(u),{params:t.options.transformParams}),e=f.find(i.Record).addClass(r.CardClasses).attr("id"),ShowDialogResult(f),o=gts.$(String.Format("#{0}",e)),t._createCarousel(o))},_setDataEndpoint:function(){var n=this;n.DataEndpoint=String.Format("{0}{1}/xml-out?ajaxcall=true&ajaxtarget={2}",SEOService.TrimTrailingSlashes(currentWebsiteDomainWebRoot),n.options.DataEndpoint,n.options.ModuleId)},_setXSLPath:function(){var n=this;n.XSLPath=String.Format("{0}/layouts/quickview/module.xsl",n.options.JSXSLPath.replace("module_js.xsl",""))},_createCarousel:function(n){var t=this,r=gts.$.extend({},t.options,{ModuleId:String.Format("LS{0}",t.RecordId),ContextEle:n,RecordId:t.RecordId,Photos:ArrLImg[t.RecordId],MainImageSelector:i.MainImageSelector,HoverEle:".photo",ThumbPagerEle:".thumb-pager",StartPhotoIndexAttr:"js-data-startphotoindex"}),u=CreateGtsCarouselParams(r),f=new ThumbnailCarousel;f.Initialize(u);myPortfolioControllerModule.RefreshSavedRecords([t.RecordId])}})})(gts.jQuery,gts.jQuery);;;;function TabsDataModuleBase(){ModuleBase.call()}function GoToDetailPage(n,t,i,r,u,f){var e=new SearchCookie(n);return(e.DetailIndex=i,e.Page=r,e.Save(),Report(t,u),f!==undefined&&document.all)?(window.location.href=f,!1):!0}TabsDataModuleBase.prototype=new ModuleBase;TabsDataModuleBase.prototype._BuildSearchCookie=undefined;TabsDataModuleBase.prototype._Map=undefined;TabsDataModuleBase.prototype._Marker=undefined;TabsDataModuleBase.prototype._selectors={tabItem:".js-tabs-item"};TabsDataModuleBase.prototype._events={click:"click.tabsDataModule"+RenoEventsNS};TabsDataModuleBase.prototype._OnInitialize=function(){this._OnInitializeTabsDataModuleBase();this._InitializeInfoBubbleService();this._SetupThumbnailPager();SetupListingToolsHover(this._ModuleEle);this._InitializeSmartImages();this._InitializeSameHeight();this._InitializeSelectboxIt();this._InitializeScrollCarousel();this._BindEvents();this._BindToAuthentificationEvents();this.BuildSearchCookie();this._RefreshSavedRecords();this._BindToGetSavedItemsEvent()};TabsDataModuleBase.prototype._RefreshSavedRecords=function(){var n=this;typeof n._XSLParams.ListingIds!="undefined"&&n._XSLParams.ListingIds!==null&&n._XSLParams.ListingIds.length!==0&&myPortfolioControllerModule.RefreshSavedRecords(n._XSLParams.ListingIds)};TabsDataModuleBase.prototype._BindEvents=function(){var t=this,i=gts.$(".js-tabs-data-toggle",this._ModuleEle),f=gts.$(".js-calculate-item-width");if(i.length>0){var u=gts.$(".js-tabs-data-modal",this._ModuleEle),r=$("body"),n=gts.$(".js-tabs-data-close",this._ModuleEle);if(i.each(function(){$(this).on("click.openTab"+RenoEventsNS+" touchstart.openTab"+RenoEventsNS,function(){var e=$(this).attr("data-tabname-toggle"),f=gts.$('.js-tabs-data-modal[data-tabname="'+e+'"]',t._ModuleEle);u.not(f).filter(".is-open").removeClass("is-open");i.not(this).filter(".is-active").removeClass("is-active");f.length>0&&(r.addClass("no-scroll  has-modal-opened"),r.scrollTop(0),f.addClass("is-open"),$(this).addClass("is-active"),n.length>0&&n.focus(),t._trapFocus())})}),n.length>0)n.on("click.closeTab"+RenoEventsNS+" touchstart.openTab"+RenoEventsNS,function(n){n.preventDefault();u.removeClass("is-open");i.removeClass("is-active");r.removeClass("no-scroll  has-modal-opened");t._undoTrapFocus();i.focus()});$(document).keyup(function(t){t.keyCode===27&&n.length>0&&n.click()})}f.length>0&&t._CalculateSameWidthItems($(window).width());gts.$(this._selectors.tabItem,this._ModuleEle).off(this._events.click).on(this._events.click,function(n){n.preventDefault();var i=gts.$(this).attr("data-seo-part");t.ChangeTab(i)})};TabsDataModuleBase.prototype._BindToGetSavedItemsEvent=function(){var n=this;gts.$(document).off(RenoEvent.GetSavedItems+RenoEventsNS+"."+n.Id);gts.$(document).on(RenoEvent.GetSavedItems+RenoEventsNS+"."+n.Id,function(){n._RefreshSavedRecords()})};TabsDataModuleBase.prototype._BindToAuthentificationEvents=function(){var n=this;if(gts.$(document).off(RenoEvent.SignIn+RenoEventsNS+"."+n.Id+" "+RenoEvent.SignOut+RenoEventsNS+"."+n.Id),n._XSLParams.HasVowListings)gts.$(document).on(RenoEvent.SignIn+RenoEventsNS+"."+n.Id+" "+RenoEvent.SignOut+RenoEventsNS+"."+n.Id,function(){n._ReloadContent(n._GetUrl(),!1,!0,undefined,!0,!0,{scrollToTop:!0})})};TabsDataModuleBase.prototype._trapFocus=function(){var n=$(this._ModuleEle).find(":focusable"),t=n.first()[0],i=n.last()[0],r=9;$(this._ModuleEle).on("keydown"+RenoEventsNS,function(n){var u=n.key==="Tab"||n.keyCode===r;u&&(n.shiftKey?document.activeElement===t&&(i.focus(),n.preventDefault()):document.activeElement===i&&(t.focus(),n.preventDefault()))})};TabsDataModuleBase.prototype._undoTrapFocus=function(){$(this._ModuleEle).off("keydown"+RenoEventsNS)};TabsDataModuleBase.prototype._InitializeSmartImages=function(){var t=this._XSLParams.SelectedSectionUseImageLazyLoading,n=this._XSLParams.SelectedSectionUseImageBestFit;gts.$(".js-smartimage",this._ModuleEle).smartImage({useLazyLoad:t,useBestFit:n,alwaysFill:n})};TabsDataModuleBase.prototype._InitializeSameHeight=function(){var n=this,t=gts.$(".js-agent-same-height",n._ModuleEle);t.length===2&&gts.$(".js-same-height-master",n._ModuleEle).length===1&&t.sameHeight({masterElementSelector:".js-same-height-master",minWindowWidth:768,eventNamespace:this._XSLParams.ModuleId});typeof $("body").sameHeight!="undefined"&&setTimeout(function(){gts.$(".js-same-height",n._ModuleEle).sameHeight({minWindowWidth:n._XSLParams.MinWindowWidthSameHeight,eventNamespace:n._XSLParams.ModuleId})},0)};TabsDataModuleBase.prototype._InitializeSelectboxIt=function(){gts.$(".js-sort-select, .js-select-default",this._ModuleEle).selectBoxIt({autoWidth:!1});var n=gts.$(".js-tabs-data-select",this._ModuleEle),t=gts.$(".js-select-direction",this._ModuleEle);n.length>0&&n.selectBoxIt({autoWidth:!1});t.length>0&&t.selectBoxIt({similarSearch:!0,autoWidth:!1,createPlaceholders:!0})};TabsDataModuleBase.prototype._OnInitializeTabsDataModuleBase=function(){log.debug("TabsDataModuleBase._OnInitialize");this._SetSEOParam("sort",this._XSLParams.CurrentSort);var n=parseInt(this._XSLParams.CurrentPage)>1?String.Format(this._XSLParams.PagingStringFormat,this._XSLParams.CurrentPage):"";this._SetSEOParam("paging",n);this._SetSEOParam("section",this._XSLParams.CurrentSectionSeoPart);this._InitializeMap();this._InitializeExpanderToggle();this._InitializeScrollService();this._InitializeScrollToTargetOnModuleStatusNotifyServiceEvent();typeof this._OnInitializeMobile=="function"&&this._OnInitializeMobile();this._GoToTabSection()};TabsDataModuleBase.prototype._InitializeInfoBubbleService=function(){this._bubbleService=new TabsDataBubbleService};TabsDataModuleBase.prototype._InitializeExpanderToggle=function(){if(typeof RecordExpanderToggleModuleBase!="undefined"){var n=new RecordExpanderToggleModuleBase;n.Initialize(this._XSLParams)}};TabsDataModuleBase.prototype.BuildSearchCookie=function(){if(typeof this._searchCookieData!="undefined"){var n=this._searchCookieData;BuildSearchCookie(n.channelKey,n.pageNumber,n.pageTotal,n.perPage,n.seoQuery,n.listingsTotal,n.detailIndex,n.referrerQueryType,n.referrerId,n.extraSearchParams)}};TabsDataModuleBase.prototype.ChangePage=function(n){var r,u,t,i;return(log.debug("TabsDataModuleBase.ChangePage"),n===this._XSLParams.CurrentPage)?!1:(r=n>1?String.Format(this._XSLParams.PagingStringFormat,n):"",this._SetSEOParam("paging",r),u={scrollToTop:!0},this._ReloadContent(this._GetUrl(),this._XSLParams.UpdateAnchorOnAjax,this._XSLParams.UseAjaxForPaging,undefined,!0,!1,u),typeof this._searchCookieData!="undefined"&&(t=this._searchCookieData.perPage,i=this._searchCookieData.listingsTotal,t!=="undefined"&&i!=="undefined"&&this.ChangeTopPagination(n,t,i)),!1)};TabsDataModuleBase.prototype.ChangeTopPagination=function(n,t,i){var u=(n-1)*t+1,r=u+t-1;r>i&&(r=i);gts.$(".js-paging-top").html(String.Format("{2} results",`<span class="page_from  paging__count">${u}</span>`,`<span class="page_to  paging__count">${r}</span>`,`<span class="page_total  paging__count-total">${i}</span>`))};TabsDataModuleBase.prototype.ChangeSort=function(n){if(log.debug("TabsDataModuleBase.ChangeSort"),n===this._XSLParams.CurrentSort)return!1;this._SetSEOParam("sort",StringFormatEmpty("{0}",n));this._SetSEOParam("paging","");return this._ReloadContent(this._GetUrl(),this._XSLParams.UpdateAnchorOnAjax,this._XSLParams.UseAjaxForSorting,undefined,!0,!1,{scrollToTop:!0}),!1};TabsDataModuleBase.prototype._GetUrl=function(){return this._BuildSEOPath()};TabsDataModuleBase.prototype._InitializeMap=function(){var t=gts.$(this._XSLParams.MapSelector,this._ModuleEle),n;t.length!==0&&(this._MapSettings=JSON.parse(this._XSLParams.MapSettings),n=this,GoogleMapsAPILoader.Load(function(){n._OnApiLoadedCallback()}))};TabsDataModuleBase.prototype._GetMapOptions=function(){var n=GetDefaultMapOptions(this._XSLParams),t=gts.$(this._XSLParams.MapSelector,this._ModuleEle);return isMobileWebsite&&(n.scrollwheel=!0,n.draggable=!0),this._XSLParams.SelectedSection===TabsDataSectionType.Contact&&(n.zoom=15),n.center=new google.maps.LatLng(this._XSLParams.DefaultCenterLat,this._XSLParams.DefaultCenterLng),n.mapContainer=t,n};TabsDataModuleBase.prototype._OnApiLoadedCallback=function(){var t=gts.$(this._XSLParams.MapSelector,this._ModuleEle),n,i;t.length>0&&(n=this._GetMapOptions(),this._Map=new google.maps.Map(t[0],n),n.useCustomControls&&(i=new CustomMapControls(this._Map,n,n.customControls)),this._SetMainRecordMarkerToMap(t),this._SetRecordMarkersToMap(),this._MapSettings.customPositionForControls&&(this._BindToMapTilesLoaded(),this._BindToSplitterToggleEvents(),this._InitializeMapMarkerHighlightingOnHover()))};TabsDataModuleBase.prototype._BindToMapTilesLoaded=function(){var n=this;google.maps.event.addListenerOnce(n._Map,MapEventType.TilesLoaded,function(){window.setTimeout(function(){n._MapSettings.customPositionForControls&&!gts.$(".map-zoom-wrapper",n._ModuleEle).length&&gts.$(".map-control--zoom, .map-control--change-map-type",n._ModuleEle).wrapAll('<div class="map-zoom-wrapper">');gts.$(window).trigger("initialization.Tooltipster"+RenoEventsNS,{rounded:n._MapSettings.customPositionForControls})},100)})};TabsDataModuleBase.prototype._BindToSplitterToggleEvents=function(){var n=this;gts.$(".js-splitter-toggle",n._ModuleEle).off(n._events.click).on(n._events.click,function(t){t.preventDefault();gts.$(this).hasClass("gallery")?(gts.$(".js-split-right",n._ModuleEle).addClass("u-hide"),gts.$(".js-split-left",n._ModuleEle).removeClass("u-hide")):(gts.$(".js-split-left",n._ModuleEle).addClass("u-hide"),gts.$(".js-split-right",n._ModuleEle).removeClass("u-hide palm--hide palm-wide--hide is-half-map").addClass("is-full-map"))})};TabsDataModuleBase.prototype._InitializeMapMarkerHighlightingOnHover=function(){var n=this;typeof MapHighlightModuleBase!="undefined"&&(this._XSLParams.HighlightSelector=gts.$(".js-record",this._ModuleEle),this._XSLParams.HighlightOnHover=!0,typeof this._mapHighlightModule=="undefined"&&(this._mapHighlightModule=new MapHighlightModuleBase),this._mapHighlightModule.Initialize(this._XSLParams),MapModule._ModuleEle=this._ModuleEle,gts.$(document).trigger("MarkersReady.MapModule"+RenoEventsNS,{markers:[],map:n._Map}))};TabsDataModuleBase.prototype._SetMainRecordMarkerToMap=function(n){var r,u,t,i;this._XSLParams.RecordType&&(r=new RecordMarkerBuilder,u={id:null,lat:this._XSLParams.DefaultCenterLat,lng:this._XSLParams.DefaultCenterLng,recordType:this._XSLParams.RecordType,geoStatus:this._XSLParams.GeoStatus,status:null,markerNumber:null,selected:!1},Map_clearMarker(this._Marker),this._Marker=r.Build(u),this._Marker.setMap(this._Map),t=this,this._showInfo=!0,i=n.attr("showinfo"),i!==undefined&&i==="false"&&(this._showInfo=!1),google.maps.event.addListenerOnce(this._Map,"idle",function(){n.hasClass("js-no-infowindow")||t._ShowInfoWindow()}),google.maps.event.addListener(this._Marker,"click",function(){n.trigger("TabsDataMapMarkerClicked"+RenoEventsNS);n.hasClass("js-no-infowindow")||(t._showInfo=!0,t._ShowInfoWindow())}))};TabsDataModuleBase.prototype._ShowInfoWindow=function(){var n=$("#"+this.Id+" #marker_wrap").html();this._bubbleService.ShowBubble({content:n,marker:this._Marker})};TabsDataModuleBase.prototype._SetRecordMarkersToMap=function(){var n=this._XSLParams.RecordMarkers;n!==undefined&&n!==null&&n.length!==0&&(this._RecordMarkersBuilder=new RecordMarkersBuilder(this._GetRecordMarkersBuilderParams()),Map_clearMarkers(this._RecordMarkers),this._RecordMarkers=[],this._RecordMarkers=this._RecordMarkersBuilder.Build(n),typeof this._XSLParams.DefaultMapBounds!="undefined"||this._XSLParams.DefaultMapBounds!==null)&&MapBoundsUtility.FitBounds({map:this._Map,bounds:this._XSLParams.DefaultMapBounds.ToGoogleFormat()})};TabsDataModuleBase.prototype._GetRecordMarkersBuilderParams=function(){return gts.$.extend({map:this._Map},this._XSLParams)};TabsDataModuleBase.prototype._ReloadContentJSTransformCallback=function(){isMobileWebsite&&(gts.$(document).scrollTop(0),gts.$("#"+this._XSLParams.ModuleId).trigger("create"))};TabsDataModuleBase.prototype.ChangeResultsPerPage=function(n){if(log.debug("TabsDataModuleBase.ChangeResultsPerPage"),n=GetSeoPart(seoPartType.PerPage,n),this._GetSEOParam("pp")===n){log.debug("TabsDataModuleBase.ChangeResultsPerPage. Value not changed, stopping change request.");return}this._SetSEOParam("pp",n);this._SetSEOParam("paging","");this._ReloadContent(this._GetUrl(),this._XSLParams.UpdateAnchorOnAjax,!0,undefined,!0,!1,{scrollToTop:!0})};TabsDataModuleBase.prototype._InitializeScrollService=function(){var n={moduleId:this._XSLParams.ModuleId,scrollSettings:{offset:this._XSLParams.ScrollToTargetOffset||0}};typeof this._ScrollService=="undefined"&&(this._ScrollService=new ScrollService);this._ScrollService.Initialize(n)};TabsDataModuleBase.prototype._GetCurrentTargetSectorForScroll=function(){const n="#"+this._XSLParams.ScrollToModuleSelector;return gts.$(n).length>0?n:this._XSLParams.ScrollToTargetSelector};TabsDataModuleBase.prototype._InitializeScrollToTargetOnModuleStatusNotifyServiceEvent=function(){if(this._XSLParams.ScrollToTargetOnRefreshResults&&typeof this._ScrollToTargetOnModuleStatusNotifyServiceEvent=="undefined"){const n=this._GetCurrentTargetSectorForScroll();var t={moduleStatusNotifyServiceType:this._ModuleStatusNotifyServiceType,scrollToTargetSelector:n,scrollToTargetOffset:this._XSLParams.ScrollToTargetOffset,scrollService:this._ScrollService,eventNs:this._EventNS+"ScrollToTargetOnModuleStatusNotifyService",loadDataAdditionalRequestInfoPropertyToCheck:"scrollToTop"};this._ScrollToTargetOnModuleStatusNotifyServiceEvent=new ScrollToTargetOnModuleStatusNotifyServiceEventBase(t)}};TabsDataModuleBase.prototype._SetupThumbnailPager=function(){var n=this;this._ThumbnailPagers={};gts.$.each(gts.$(".hlisting, .js-record",this._ModuleEle),function(){var i=gts.$(this),t=i.attr("id").replace("LS",""),u=gts.$.extend({},n._XSLParams,{ContextEle:i,RecordId:t,Photos:ArrLImg[t],MainImageSelector:".photo img, .js-c-thumbnail-carousel .js-smartimage",HoverEle:".photo",ThumbPagerEle:".thumb-pager",StartPhotoIndexAttr:"js-data-startphotoindex"}),f=CreateGtsCarouselParams(u),r=new ThumbnailCarousel;r.Initialize(f);n._ThumbnailPagers[t]=r})};TabsDataModuleBase.prototype.selectTab=function(n){var t=gts.$(n).val();typeof t!="undefined"&&this.ChangeTab(t)};TabsDataModuleBase.prototype._getCurrentModulesClasses=function(n){var t=gts.$(n).attr("class").split(" "),i;return t=t.filter(Boolean),i=t.map(function(n){return"."+n}),i.join()};TabsDataModuleBase.prototype.ChangeTab=function(n){var t,i;this._SetSEOParam("section",n);this._SetSEOParam("paging","");this._SetSEOParam("sort","");this._SetSEOParam("pp","");this._SetSEOParam("letter","");t=!0;const r=this._getCurrentModulesClasses(this._ModuleEle);gts.$(r).length>1&&(t=!1);i={scrollToTop:!0};this._ReloadContent(this._GetUrl(),!0,this._XSLParams.UseAjaxToLoadDetailTabs,undefined,!0,t,i)};TabsDataModuleBase.prototype._InitializeScrollCarousel=function(){var n=gts.$(".js-tabs-container",this._ModuleEle),t=gts.$(".tabs__item--selected",this._ModuleEle);n.length&&(n.scrollCarousel({sliderSelector:".js-tabs"}),t.length&&n.trigger("scrollCarouselUpdatePosition",t))};TabsDataModuleBase.prototype._GoToTabSection=function(){const t=window.location.hash,n=$(t,this._ModuleEle);gts.$(window).off("load"+RenoEventsNS+"."+this.Id).on("load"+RenoEventsNS+"."+this.Id,function(){n.length&&$("html, body").animate({scrollTop:n.offset().top})})};TabsDataModuleBase.prototype._CalculateSameWidthItems=function(n){var i=gts.$(".js-calculate-item-width"),u=i.outerWidth(),o=gts.$(".js-enlarge-fullscreen",i),f=gts.$(".js-tabs-select-tab",i),r=gts.$(".js-listing-item-flag",i),t=0,e=1;if(n<=1024&&(r.css({"min-width":"","max-width":""}),u=parseInt(u-r.outerWidth()),e=0),o.length>0&&t++,f.length>0&&(t+=f.length),e&&r.length>0&&t++,t>0){const n=u/t;o.css({"min-width":n+"px","max-width":n+"px"});f.css({"min-width":n+"px","max-width":n+"px"});e&&r.css({"min-width":n+"px","max-width":n+"px"})}else return};;;;function SetupListingToolsHover(n){typeof n=="undefined"&&(n=document);$("div.hlisting ul.tools>li.listing-tools",n).hover(function(){$(">ul",this).show()},function(){$(">ul",this).hide()})};;;var TabsDataSectionType={Sales:"sales",Rentals:"rentals",BuildingsCommunities:"buildings-communities",Associates:"associates",Offices:"offices",OpenHouses:"open-houses",Sold:"sold",Rented:"rented",VacationRentals:"vacation-rentals",Profile:"profile",Contact:"contact"},TabsDataSectionTypeService={ToString:function(n){return this._TranslateSectionType(n)},_TranslateSectionType:function(n){var t=TranslationCollection[n];return typeof t=="undefined"||t==null||t==""?n:t}};;;;var MapRecordMarkerBubbleService=Class.create(MapBubbleServiceBase,{ShowBubble:function(n){var r=this,t,i;r._ShowLoadingBubble(n);t=this._GetMapInfoBubbleWidgetId(n);i=SEOService.LanguageTranslatePath("/widget/nowrapper/"+t+"/"+n.Channel);this._LoadBubbleData(n,t,{url:i,data:gts.$.extend({idrecords:n.recordIds.join(","),fullresultindexes:this._GetFullResultIndexes(n).join(","),mapmarkerrendering:n.MapMarkerRendering},n.bubbleparams)})},_ShowLoadingBubble:function(n){var r=this,i=GInfoWindow,t;i==null?(GInfoCenter=n.map.getCenter(),GInfoZoom=n.map.getZoom()):i.close();t=this._CreateLoadingWindow(n.marker);t.open(n.map);google.maps.event.addListener(t,"domready",function(){r._StyleInfoBubble("loading")});GInfoWindow=t},_OnBubbleDataLoaded:function(n,t,i){var f=this,e=$(i).filter("#"+t)[0],u,r;gts.$(document).trigger("MapModule.InfoBubbleListingLoaded"+RenoEventsNS,{moduleId:t,response:e});u=GInfoWindow;u==null?(GInfoCenter=n.map.getCenter(),GInfoZoom=n.map.getZoom()):u.close();r=this._CreateInfoWindow(n.marker,e);r.open(n.map);google.maps.event.addListener(r,"closeclick",function(){f._OnClose(n)});google.maps.event.addListenerOnce(r,"domready",function(){f._OnBubbleDataRendered(r,n,i)});gts.$(document).trigger("MapModule.InfoBubbleDataLoaded"+RenoEventsNS,{map:n.map,infoWindow:r});GInfoWindow=r},_OnBubbleDataRendered:function(n,t,i){var r=this;this._LoadBubbleJavascripts(i);this._StyleInfoBubble();gts.$(".gm-style-iw").prev().hide();gts.$(".js-info-bubble-close").off("click").on("click",function(n){n.preventDefault();n.stopPropagation();r._OnClose(t)});gts.$(document).trigger("MapModule.InfoBubbleListingRendered"+RenoEventsNS)},_OnClose:function(n){CloseGInfoWindow({map:n.map,marker:n.marker,goToOldPosition:!0});typeof n.onCloseCallback=="function"&&n.onCloseCallback()},_GetMapInfoBubbleWidgetId:function(n){if(typeof n.MapBubbleWidget!="undefined")return n.MapBubbleWidget;var t=n.RecordType.toLowerCase();return String.Format("{0}mapinfobubble",t)},_GetFullResultIndexes:function(n){var t=[];return gts.$.each(n.recordIds,function(i,r){var u=MarkerDataFinder.GetMarkerData(r,n.markerInfos);t.push(u==null?-1:u.Index)}),t},GetInfoWindow:function(){return GInfoWindow}});;;;var RegionMarkersLoader=Class.create({initialize:function(n){this._markerCollection=[];this._xslParams=gts.$.extend({},n);this._map=this._xslParams.map;this._OngoingRequest=null},Load:function(){var n=this,i=typeof this._xslParams.CurrentPageSEOUrl!="undefined"?this._xslParams.CurrentPageSEOUrl:LocationAnchorService.GetLocationAnchorOrHRef(),t=this._map.getBounds();gts.$.ajax({type:"GET",contentType:"application/json; charset=utf-8",url:baseWebRoot+SEOService.AddMandatoryUrlParts("/widget/nowrapper/getmapregionsdata/json-out"),dataType:"json",data:{seoquery:i.seoEncode(),northeast:t.getNorthEast().toString().replace(/[\(\)]+/g,"").replace(" ",""),southwest:t.getSouthWest().toString().replace(/[\(\)]+/g,"").replace(" ",""),zoom:this._map.getZoom()},beforeSend:function(t){n.Abort();n._OngoingRequest=t},error:function(n,t,i){i!=="abort"&&log.debug("RegionMarkersLoader.Load: Json Error Message: error ("+i+') "'+t+'"')},success:function(t){var i=t.mainwidgethandler.getmapregionsdata,e,o,h,r,c,f;if(Map_clearMarkers(n._markerCollection),n._markerCollection=[],i.group&&i.group.length>0)for(e=[],$("input[name='selected-location']:checked").each(function(){e.push($(this).attr("id"))}),o=undefined,isResponsive&&(o={updateSelf:!1}),h=new RegionMarkerProvider({moduleId:n._xslParams.ModuleId,searchType:n._xslParams.SearchType,clickEvent:"ActLocationsRequest",clickEventParams:o}),r=0;r<i.group.length;r++)for(c=i.group[r].name,f=0;f<i.group[r].option.length;f++){var u=i.group[r].option[f],l=n._IsSelected(u.valuegid,e),a={name:u.value,listingcount:u.count,id:u.valuegid,lat:u.valuelatlng.split(",")[0],lng:u.valuelatlng.split(",")[1],level:c,selected:l},s=h.GetMarker(a);s!=null&&(n._markerCollection.push(s),s.setMap(n._map))}}})},Abort:function(){this._OngoingRequest!=null&&this._OngoingRequest.abort()},_IsSelected:function(n,t){var i=!1;return t.length>0&&(i=$.inArray(n,t)>-1),i}});;;;function _LSGroupItem(n,t){this.lat=n.lat;this.lng=n.lng;this.address=n.address;this.id=n.id;this.lsGroupName=n.name;this.geoStatus=n.geoStatus;this.status=n.status;this.index=t}function _LSGroup(n){this.lat=n.lat;this.lng=n.lng;this.Items=new Array(n)}function _LSGroupCollectionObject(){this.LSGroups=[]}_LSGroup.prototype.GetLSGroupName=function(){for(var t=null,n=0;n<this.Items.length;n++)if(this.Items[n].lsGroupName!="null"&&this.Items[n].lsGroupName!=""){t=this.Items[n].lsGroupName;break}else{t="This Location";break}if(t==null)for(n=0;n<this.Items.length;n++)if(this.Items[n].address!=""){t=this.Items[n].address;break}return t==null&&(t="Listing Group"),t};_LSGroup.prototype.GetBestStatus=function(){if(this.Items.length<=0)return null;var t="\\{0}\\b",n=$.grep(this.Items,function(n){return n.status!=null&&n.status.search(String.Format(t,"Recent"))>-1});return n.length==0&&(n=$.grep(this.Items,function(n){return n.status!=null&&n.status.search(String.Format(t,"OffMarket"))>-1})),n.length==0&&(n=$.grep(this.Items,function(n){return n.status!=null&&n.status.search(String.Format(t,"UnderContract"))>-1})),n.length==0&&(n=$.grep(this.Items,function(n){return n.status!=null&&n.status.search(String.Format(t,"ContractPending"))>-1})),n.length==0&&(n=$.grep(this.Items,function(n){return n.status!=null&&n.status.search(String.Format(t,"OfferPending"))>-1})),n.length==0&&(n=$.grep(this.Items,function(n){return n.status!=null&&n.status.search(String.Format(t,"Open House"))>-1})),n.length==0&&(n=$.grep(this.Items,function(n){return n.status!=null&&n.status.search(String.Format(t,"Reduction"))>-1})),n.length==0&&(n=$.grep(this.Items,function(n){return n.status!=null&&n.status.search(String.Format(t,"New"))>-1})),n.length==0&&(n=$.grep(this.Items,function(n){return n.status!=null&&n.status.search(String.Format(t,"Featured"))>-1})),n.length==0&&(n=this.Items),n[0].status};_LSGroup.prototype.GetListingIdsArray=function(){for(var t=[],n=0;n<this.Items.length;n++)t.push(this.Items[n].id);return t};_LSGroupCollectionObject.prototype.indexOf=function(n,t){if(this.LSGroups.length>0)for(var i=0;i<this.LSGroups.length;i++)if(this.LSGroups[i].lat==n&&this.LSGroups[i].lng==t)return i;return-1};_LSGroupCollectionObject.prototype.Add=function(n){var t=n.lat,i=n.lng;this.indexOf(t,i)>-1?this.LSGroups[this.indexOf(t,i)].Items.push(n):this.LSGroups.push(new _LSGroup(n))};_LSGroupCollectionObject.prototype.Build=function(){var t,n;if(this.LSGroups.length>0){for(t=[],n=0;n<this.LSGroups.length;n++)this.LSGroups[n].Items.length>1&&t.push(this.LSGroups[n]);this.LSGroups=t}};var RecordMarkersBuilder=Class.create({initialize:function(n){this._xslParams=gts.$.extend({isVisibleMarkerGetter:function(n){return typeof n.markerData.visible!="undefined"?n.markerData.visible:!0}},n);var t=gts.$.extend({hoverClassPrefix:"record-marker"},n.hoverServiceParams);this._mapMarkerService=new RecordMarkersBuilderMapMarkerService(gts.$.extend({bubbleService:n.bubbleService,highlighterService:new MarkerHighlighterService({hoverServiceParams:t})},this._xslParams));this._map=this._xslParams.map},Build:function(n){var f=new _LSGroupCollectionObject,e=new _LSGroupCollectionObject,o=[],l={SelectedMarkerId:this._xslParams.SelectedMarkerId},r,s,t,h,c,u,i,a;if(typeof n!="undefined"&&n.length>0){for(i=0;i<n.length;i++)(t=n[i],t!=null&&t!=!1)&&(r=new _LSGroupItem(t,i),r.geoStatus==5?!e.indexOf(r.lat,r.lng)>-1&&e.Add(r):!f.indexOf(r.lat,r.lng)>-1&&f.Add(r));for(f.Build(),e.Build(),s=1,i=0;i<n.length;i++)(t=n[i],t!=null&&t!=!1&&t.lat!=null&&t.lng!=null&&t.lat!=""&&t.lng!=""&&t.lat!=0&&t.lng!=0)&&((h=f.indexOf(t.lat,t.lng),c=e.indexOf(t.lat,t.lng),(h!=-1||c!=-1)&&this._MarkerWithIdExistsCollection(t.id,o))||(u=null,u=h==-1||this._xslParams.IsSelectableMultilisting?c==-1||this._xslParams.IsSelectableMultilisting?this._mapMarkerService.GetListingMarker(this._map,t,s,l,n):this._mapMarkerService.GetMultiZipMarker(this._map,e.LSGroups[c],s,l,n):this._mapMarkerService.GetMultiListingMarker(this._map,f.LSGroups[h],s,l,n),u.markerData.visible=this._xslParams.isVisibleMarkerGetter(u),o.push(u),u.markerData.visible&&s++))}if(typeof this._xslParams.ShowMarkersOnMap=="undefined"||this._xslParams.ShowMarkersOnMap)for(i=0;i<o.length;i++)a=o[i],a.markerData.visible&&a.setMap(this._map);return o},_MarkerWithIdExistsCollection:function(n,t){var i=!1;return gts.$.each(t,function(t,r){var u=r.markerData.id;return gts.$.isArray(u)||(u=[u]),gts.$.inArray(n,u)!==-1?(i=!0,!1):void 0}),i}});;;;var MapRecordMarkerClickService=Class.create({initialize:function(n){this._marker=null;this._bubbleService=n.bubbleService;this.HighlighterService=n.highlighterService},OnMarkerClick:function(n){var i=typeof n.HighlightSelectedMarker!="undefined"&&n.HighlightSelectedMarker,t;if(i&&this._marker!=null&&this.HighlighterService.UnhighlightMarker(this._marker,this._marker.markerData.statusData.bestStatus),this._SetSelectedMarker(n.marker),i&&this._marker!=null&&this.HighlighterService.HighlightMarker(this._marker),n.map.customPositionForControls||typeof n.TriggerEventOnSingleRecordMarkerClick!="undefined"&&n.TriggerEventOnSingleRecordMarkerClick&&n.recordIds.length==1||typeof n.TriggerEventOnMultiRecordMarkerClick!="undefined"&&n.TriggerEventOnMultiRecordMarkerClick&&n.recordIds.length>1){this._TriggerMarkerClickEvent(n.map,this._marker,n.recordIds);return}this._bubbleService!=null&&(t=this,this._bubbleService.ShowBubble(gts.$.extend({},n,{onCloseCallback:function(){t._marker!=null&&t.HighlighterService.UnhighlightMarker(t._marker,t._marker.markerData.statusData.bestStatus)}})))},_SetSelectedMarker:function(n){this._marker!=null&&(this._marker.selected=!1);this._marker=n;this._marker.selected=!0},_TriggerMarkerClickEvent:function(n,t,i){gts.$(document).trigger("MapModule.RecordMarkerClicked"+RenoEventsNS,{map:n,marker:t,recordIds:i})}});;;;var RecordMarkersBuilderMapMarkerService=Class.create({_defaultSettings:{ShowToolTips:!0,HighlightMarkerOnHover:!0,RecordMarkerBuilderGetter:function(n){return new RecordMarkerBuilder(n)}},initialize:function(n){this._xslParams=gts.$.extend({},this._defaultSettings,n);this._markerClickService=new MapRecordMarkerClickService({bubbleService:this._xslParams.bubbleService,highlighterService:this._xslParams.highlighterService});this._toolTipService=new RecordMarkersBuilderToolTipService(n);this._highlighterService=this._xslParams.highlighterService;this._recordMarkerBuilder=this._xslParams.RecordMarkerBuilderGetter(this._xslParams)},_GetGMarker:function(n,t,i){var r=this._recordMarkerBuilder.Build(n),u=t.SelectedMarkerId;return typeof u!="undefined"&&u!==null&&u.indexOf(n.id)>-1&&this._xslParams.HighlightSelectedMarker===!0&&this._markerClickService.MarkerHighlighterService.HighlightMarker(r),this._xslParams.ShowToolTips&&this._toolTipService.AddToolTipToMarker(r,n.tooltip,i),r},GetListingMarker:function(n,t,i,r,u){var h=this,f=t.geoStatus,o,e,s;return $.isArray(f)&&(f=f[0]),o=gts.$.extend({},t,{recordType:this._GetRecordType(),geoStatus:f,markerNumber:i,selected:!1}),e=this._GetGMarker(o,r),this._AddMarkerMouseHoverHandler(e),(typeof this._xslParams.OpenBubbleOnMarkerClick=="undefined"||this._xslParams.OpenBubbleOnMarkerClick)&&(s=function(){h._DoReportOnClick(t.id)},this._AddMarkerClickHandler(n,[t.id],e,u,s)),e},GetMultiListingMarker:function(n,t,i,r,u){var o=this._GetMultiListingMarkerToolTipText(t),s=this._GetMultiListingMarkerIconType(),e,f;return isResponsive||(i=gts.$.map(t.Items,function(n){return n.index})),e={id:t.GetListingIdsArray(),lat:t.lat,lng:t.lng,recordType:this._GetRecordType(),geoStatus:null,status:t.GetBestStatus(),markerNumber:i,selected:!1,tooltip:o,typeOverride:s,itemCount:t.Items.length},f=this._GetGMarker(e,r,u),this._AddMarkerMouseHoverHandler(f),this._AddMarkerClickHandler(n,t.GetListingIdsArray(),f,u),f},GetMultiZipMarker:function(n,t,i,r,u){var o=this._GetZipMarkerToolTipText(t),e,f;return isResponsive||(i=gts.$.map(t.Items,function(n){return n.index})),e={id:t.GetListingIdsArray(),lat:t.lat,lng:t.lng,recordType:this._GetRecordType(),geoStatus:null,status:t.GetBestStatus(),markerNumber:i,selected:!1,tooltip:o,typeOverride:MapIconType.MultiZip,itemCount:t.Items.length},f=this._GetGMarker(e,r),this._AddMarkerMouseHoverHandler(f),this._AddMarkerClickHandler(n,t.GetListingIdsArray(),f,u),f},_GetRecordType:function(){var n=this._xslParams.Channel===ChannelService.ToString(RenoChannelType.Sold)||this._xslParams.Channel===ChannelService.ToString(RenoChannelType.Rented);return n?"soldlisting":this._xslParams.RecordType},_GetMultiListingMarkerToolTipText:function(n){var t;switch(this._xslParams.RecordType){case RecordType.Community:t="{0} communities at  {1}";break;case RecordType.Broker:t="{0} offices at {1}";break;default:t="{0} listings at {1}"}return String.Format(t,n.Items.length,n.GetLSGroupName())},_GetMultiListingMarkerIconType:function(){var n,t;switch(this._xslParams.RecordType){case RecordType.Community:n=MapIconType.MultiCommunity;break;case RecordType.Broker:n=MapIconType.MultiOffice;break;default:t=this._xslParams.Channel===ChannelService.ToString(RenoChannelType.Sold)||this._xslParams.Channel===ChannelService.ToString(RenoChannelType.Rented);n=t?MapIconType.MultiSoldListing:MapIconType.MultiListing}return n},_GetZipMarkerToolTipText:function(n){var t,i=n.Items.length>1;switch(this._xslParams.RecordType){case RecordType.Community:t=i?" Communities":" Community";break;case RecordType.Broker:t=i?" Offices":" O";break;default:t=i?" Listings":" listing"}return n.Items.length+t+" in Postal Code "+n.GetLSGroupName()},_DoReportOnClick:function(n){var t;switch(this._xslParams.RecordType){case RecordType.Listing:t="RE.Listing.Detail";break;case RecordType.Community:t="RE.Community.Results";break;default:return}DoReport(ListingReporting[n],t)},_AddMarkerMouseHoverHandler:function(n){var t=this._CanHighlightMarkerOnHover();typeof t!="undefined"&&t&&this._highlighterService.AddMarkerMouseHover(n)},_CanHighlightMarkerOnHover:function(){return this._xslParams.HighlightMarkerOnHover},_AddMarkerClickHandler:function(n,t,i,r,u){var f=this;google.maps.event.addListener(i,"click",function(e){try{var o={map:n,marker:i,recordIds:t,Channel:f._xslParams.Channel,bubbleparams:f._xslParams.bubbleparams,markerInfos:r,TriggerEventOnSingleRecordMarkerClick:f._xslParams.TriggerEventOnSingleRecordMarkerClick,HighlightSelectedMarker:f._xslParams.HighlightSelectedMarker,RecordType:f._xslParams.RecordType,MapBubbleWidget:f._xslParams.MapBubbleWidget,MapMarkerRendering:f._xslParams.MapMarkerRendering};isResponsive||(o.PaginateBubble=f._xslParams.PaginateBubble);f._markerClickService.OnMarkerClick(o);e&&(e.preventDefault(),e.stopPropagation(),e.cancelBubble=!0);typeof u=="function"&&u.apply()}catch(s){}})}});;;;var PhotoGetter=Class.create({initialize:function(){this._requests={}},_AbortRequest:function(n){var t=this._requests[n];typeof t!="undefined"&&t!==null&&t.abort()},Cancel:function(n){this._AbortRequest(n)},Get:function(n){var r=this,t=null,u,i;if(typeof n.id=="string"?t=n.id:typeof n.id=="object"&&n.id.length>1&&(t=n.id[0]),t===null){n.callback(undefined);return}(u={id:t,channel:n.channel},i=this._requests[t],typeof i=="undefined"||i===null)&&gts.$.ajax({url:SEOService.AddMandatoryUrlParts("/reno/photo/photogetter.ashx"),data:u,dataType:"text",error:function(n,t,i){log.debug("Json Error Message: error("+i+') "'+t+'"')},beforeSend:function(t){r._requests[n.id]=t},success:function(t){r._requests[n.id]=undefined;n.callback(t)}})}});;;;var RecordMarkersBuilderToolTipService=Class.create({_defaultSettings:{ShowPhotoInMarkerTooltip:!1,tooltipTheme:"tooltipster-default",tooltipThemeAlt:"tooltipster-alt",mapUsesAltTooltipClass:"js-map-uses-different-tooltip"},initialize:function(n){this._xslParams=gts.$.extend({},this._defaultSettings,n);this._ListingCardSimplified=new ListingBubblesLite(n);this._photoAspectRatio=this._xslParams.PhotoAspectRatio;this._useImageLazyLoding=!1;this._useImageBestFit=this._xslParams.UseImageBestFit;this._MapContainer=gts.$(this._xslParams.map.mapContainer);this._MapOptions=this._xslParams.map;this._photoGetter=this._xslParams.ShowPhotoInMarkerTooltip||this._MapOptions.customPositionForControls?new PhotoGetter:null;this._ModuleBase=new ModuleBase;this._MapOptions&&this._MapOptions.customPositionForControls&&(this._xslParams.tooltipTheme="tooltipster-default  tooltipster-card");this._ModuleEle=typeof this._xslParams.ModuleId!="undefined"?gts.$("#"+this._xslParams.ModuleId):null},AddToolTipToMarker:function(n,t,i){var r=this,u=this._xslParams.tooltipTheme,f;this._ModuleEle!==null&&this._ModuleEle.hasClass(this._xslParams.mapUsesAltTooltipClass)&&(u+="  "+this._xslParams.tooltipThemeAlt);r._photoGetter?(f=gts.isMobileDevice?r._MapOptions.customPositionForControls?"click":"":"mouseover",f!==""&&google.maps.event.addListenerOnce(n,f,function(){if(r._MapOptions.customPositionForControls){var f=r._ListingCardSimplified.Build(n.markerData,i);r._GetMarkerTooltip(n,u,t,undefined,f,i);return}r._photoGetter.Get({id:n.markerData.id,channel:r._xslParams.Channel,callback:function(i){r._GetMarkerTooltip(n,u,t,i)}})})):r._GetMarkerTooltip(n,u,t)},_GetMarkerTooltip:function(n,t,i,r,u,f){var e=this,c,h,l,o,a,s;if(typeof gts.$("body").tooltipster=="undefined"||(c=typeof i!="undefined"&&i!==null&&i.trim()!=="",!c&&!u&&(!this._xslParams.ShowPhotoInMarkerTooltip||!r)))return null;if(h="",r){const n=new ResponsiveImage({imageProxyServer:ImageProxyServer,imageUrl:r,BestFit:e._useImageBestFit});h=e._CreateTemplateImage(e._photoAspectRatio,n.GetHtml())}if(l=i?` <div class="record-marker__text-tooltip">${i}</div>`:"",o={offset:{x:20,y:-15},contentAsHTML:!0,content:u?gts.$(u):gts.$(l+h),theme:t,timer:0,positionTracker:typeof u=="undefined",positionTrackerCallback:function(){return},interactive:typeof u!="undefined",arrow:typeof u=="undefined",ShowTooltipsOnTouchDevices:!0},(r||u)&&(o.functionReady=function(t,i){if(e._InitSmartImage(gts.$(i).find(".js-smartimage")),u){gts.$.each(i.find(".js-map-bubble-item"),function(){var u=gts.$(this),t=[],i=u.find(".lite-bubble__container").attr("id"),r,o;n.markerData.itemCount&&n.markerData.itemCount>1?(r=MarkerDataFinder.GetMarkerData(i,f),r.Data.photoitems&&(t=r.Data.photoitems.map(n=>HtmlEncoder.Decode(n.photoitems.url)))):t=n.markerData.photoitems.map(n=>HtmlEncoder.Decode(n.photoitems.url));t.length||(o=StaticResources+"/_responsive/images/common/nophoto/"+(n.markerData.statusData.type==="multilisting"?"listing":n.markerData.statusData.type)+".jpg",t.push(o));var s={ContextEle:u,RecordId:i,Photos:t,MainImageSelector:"a img.smartimage__item",ReportData:"",HoverEle:".photo",ThumbPagerEle:".thumb-pager",StartPhotoIndexAttr:"js-data-startphotoindex",ModuleId:"listingsmapinfobubble",UseImageBestFit:!1,SelectedRecordId:i,Paginate:!1,ImageFailURL:e._GetImageFailUrl(e._xslParams.Channel),MainPhotoWidth:235},h=CreateGtsCarouselParams(s),c=new ThumbnailCarousel;c.Initialize(h)});const u=e._ModuleBase._GetCurrentBreakpoint();if(u&&u.class==="js-break-mobile"){const n=gts.$(window).outerHeight()-gts.$(i).outerHeight();gts.$(i).css("top",n)}if(t.tooltipster("show"),gts.$(i).find(".pagination").length===0)return;var r=gts.$(i).find(".js-pagination-index");gts.$(i).find(".js-lite-bubbles-container").imageCarousel({autorotateInterval:0,hasControls:!1,hasBullets:!1,height:"100%",isSingle:!0,smartImageParameters:{useLazyLoad:!1,useBestFit:!1,alwaysFill:!1},onSlideChanged:function(n,t){t.removeAttr("style");r.html(n.index()+1)}});gts.$(i).find(".js-next").on("click",function(){gts.$(i).find(".js-lite-bubbles-container").imageCarousel("Next")});gts.$(i).find(".js-prev").on("click",function(){gts.$(i).find(".js-lite-bubbles-container").imageCarousel("Prev")});if(t.tooltipster("reposition"),u&&u.class==="js-break-mobile"){const n=gts.$(window).outerHeight()-gts.$(i).outerHeight();gts.$(i).css("top",n)}}}),a=n.getContent(),s=gts.$(a),n.ready_){const t=gts.$.inviewport(n.content)&&gts.isInContainer(s,this._MapContainer);t&&(n.toolTip=s.tooltipster(o),(gts.isMobileDevice||n.isMarkerHighlight)&&n.toolTip.tooltipster("show"))}else google.maps.event.addListener(n,"ready",function(){n.toolTip=s.tooltipster(o)});u&&setTimeout(function(){google.maps.event.trigger(n,"ready")},300)},_InitSmartImage:function(n){var t=this;n.smartImage({useLazyLoad:!1,alwaysFill:t._useImageBestFit,useBestFit:t._useImageBestFit})},_CreateTemplateImage:function(n,t){return`
				<div class="record-marker__image-tooltip">
					<div class="u-ar">
						<div class="u-ar__${n}"></div>
						<div class="u-ar__content">
							${t}
						</div>
					</div>
				</div>
			`},_GetImageFailUrl:function(n){switch(n){case ChannelService.ToString(RenoChannelType.Sales):case ChannelService.ToString(RenoChannelType.Rentals):case ChannelService.ToString(RenoChannelType.VacationRentals):return NoPhotoUrls.GetUrlByRecordType(NoPhotoUrls.RecordType.None);case ChannelService.ToString(RenoChannelType.BuildingsCommunities):return NoPhotoUrls.GetUrlByRecordType(NoPhotoUrls.RecordType.Community);case ChannelService.ToString(RenoChannelType.Sold):return NoPhotoUrls.GetUrlByRecordType(NoPhotoUrls.RecordType.RecentListing);case ChannelService.ToString(RenoChannelType.Offices):case ChannelService.ToString(RenoChannelType.Brokers):return NoPhotoUrls.GetUrlByRecordType(NoPhotoUrls.RecordType.Broker);default:return NoPhotoUrls.GetUrlByRecordType(NoPhotoUrls.RecordType.None)}}});;;;var ListingBubblesLite=Class.create({initialize:function(n){this._xslParams=gts.$.extend({},n);this._mapRecordMarkerStatusDataProvider=new MapRecordMarkerStatusDataProvider},Build:function(n,t){return this._BuildLiteBubbleCards(n,t)},_GetHighestPriorityStatus:function(n,t){var i,r;return n.includes("comingsoon")?(i="Coming Soon",r="comingsoon"):n.includes("recent")&&n.includes("soldorrented")&&(t==="vacation-rental"||t==="rental"||t==="rented")?(i="Sold",r="soldorrented"):n.includes("recent")?(i="Sold",r="recent"):n.includes("sold")?(i="Sold",r="soldorrented"):n.includes("rented")?(i="Rented",r="soldorrented"):n.includes("undercontract")?(i="Contract Signed",r="under-contract"):n.includes("contractpending")?(i="Offer Pending",r="contract-pending"):n.includes("expired")?(i="Expired",r="expired"):n.includes("virtualopenhouse")?(i="Virtual Open House",r="virtualopenhouse"):n.includes("openhouse")?(i="Open House",r="open-house"):n.includes("pricereduced")?(i="Price Reduced",r="reduced"):n.includes("new")?(i="New Listing",r="new"):n.includes("featured")?(i="Featured Listing",r="featured"):n.includes("offerpending")?(i="Offer Pending",r=""):n.includes("offmarket")?(i="Off Market",r="offmarket"):n.includes("normal")&&(i="",r=""),{status:i,flagClass:r}},_GetBuildingCardData:function(n,t){let i;return n&&(i=n),t&&(typeof i!="undefined"?i+="-"+t:i=t),i},_BuildLiteBubbleCards:function(n,t){var i="",r=this,u;n.itemCount&&n.itemCount>1?(gts.$.each(n.id,function(n,u){let f=MarkerDataFinder.GetMarkerData(u,t);f=gts.$.extend({statusData:r._mapRecordMarkerStatusDataProvider.GetStatusData(f.Data.recordType,f.Data.geoStatus,f.Data.status,f.Data.typeOverride),selected:!1},f.Data);i+=r._GetLiteBubbleCard(f,!0)}),u=`
					<div class="pagination  lite-bubble__pagination">
						<a class="previous  lite-bubble__pagination-prev  js-prev">
							<i class="icon  icon-arrow-left-full  u-text-size-xxs" aria-hidden="true"></i>
						</a>
						<span class="index lite-bubble__pagination-index  u-text-align-center">
							<span id="group_info_window_index" class="js-pagination-index">1</span>
							of ${n.itemCount}
							Listings
						</span>
						<a class="next lite-bubble__pagination-next  js-next">
							<i class="icon  icon-arrow-right-full  u-text-size-xxs" aria-hidden="true"></i>
						</a>
					</div>
				`):i=r._GetLiteBubbleCard(n);let f=`
				<div class="lite-bubbles" id="listingsmapinfobubble">
					<ul class="lite-bubbles__container o-list-bare  js-lite-bubbles-container">
						${i}
					</ul>
					${u?u:""}
				</div>
			`;return gts.$(f)},_GetLiteBubbleCard:function(n,t){var i=this,e=this._xslParams.Channel===ChannelService.ToString(RenoChannelType.BuildingsCommunities),o=this._xslParams.Channel===ChannelService.ToString(RenoChannelType.Brokers)||this._xslParams.Channel===ChannelService.ToString(RenoChannelType.Offices);const u=new ResponsiveImage({IDListing:n.id,imageProxyServer:ImageProxyServer,imageUrl:n.photoitems?n.photoitems[0].photoitems.url:"",ImageId:"THUM-MAP-"+n.id,BestFit:!0}),f=`
				<span class="o-imagenav--left o-imagenav--small  o-imagenav  o-imagenav--center  icon  icon-arrow-left-slim js-thumb-pager-prev js-thumb-pager js-thum-pager-disabled"></span>
				<span class="o-imagenav--right o-imagenav--small  o-imagenav  o-imagenav--center  icon  icon-arrow-right-slim js-thumb-pager-next js-thumb-pager js-active"></span>
			`;var r=i._GetHighestPriorityStatus(n.statusData.bestStatus,i._xslParams.Channel),s=typeof n.bedroom!="undefined"&&n.bedroom>0?n.bedroom:0,h=typeof n.bathsfull!="undefined"&&n.bathsfull>0?n.bathsfull:0;return e?`
					<li class="lite-bubble  js-carousel-container  js-map-bubble-item  ${t?"lite-bubble--multilisting":""}">
						<div class="lite-bubble__container" id="${n.id}">
							<div class="lite-bubble__wrapper  js-c-thumbnail-carousel">
								<div class="lite-bubble__data">
									<div class="bed-bath">${i._GetBuildingCardData(n.communitybedsmin,n.communitybedsmax)}bd/${i._GetBuildingCardData(n.communitybathsmin,n.communitybathsmax)}ba</div>
									<div class="sqft">${i._GetBuildingCardData(n.communitysizemin,n.communitysizemax)?i._GetBuildingCardData(n.communitysizemin,n.communitysizemax)+" SF":""}</div>
									<div class="price  u-text-ellipsis">${n.formattedtext}</div>
								</div>
								<span class="lite-bubble__flag  o-listing-flag  u-text-uppercase  flag--${r.flagClass}  ">
									${r.status}
								</span>
								<a href="${n.canonicalurl}">
									${u.GetHtml()}
								</a>
								<div class="lite-bubble__listing-title">
									<span>${n.name?n.name:n.addr}</span>
								</div>
								${n.photoitems&&n.photoitems.length>1?f:""}
							</div>
						</div>
					</li>
				`:o?`
					<li class="lite-bubble  js-carousel-container  js-map-bubble-item  ${t?"lite-bubble--multilisting":""}">
						<div class="lite-bubble__container" id="${n.id}">
							<div class="lite-bubble__wrapper  js-c-thumbnail-carousel">
								<a href="${n.canonicalurl}">
									${u.GetHtml()}
								</a>
								<div class="lite-bubble__listing-title">
								<span>${n.addrneighborhood?n.addrneighborhood:n.addrcity} O</span>
								</div>
								${n.photoitems&&n.photoitems.length>1?f:""}
							</div>
						</div>
					</li>
				`:`
					<li class="lite-bubble  js-carousel-container  js-map-bubble-item  ${t?"lite-bubble--multilisting":""}">
						<div class="lite-bubble__container" id="${n.id}">
							<div class="lite-bubble__wrapper  js-c-thumbnail-carousel">
								<div class="lite-bubble__data">
									<div class="bed-bath">${s} bd / ${h} ba</div>
									<div class="sqft">${n.sqfeetinterior?n.sqfeetinterior+" SF":""}</div>
									<div class="price  u-text-ellipsis">${n.formattedtext}</div>
								</div>
								<span class="lite-bubble__flag  o-listing-flag  u-text-uppercase  flag--${r.flagClass}  ">
									${r.status}
								</span>
								<a href="${n.canonicalurl}">
									${u.GetHtml()}
								</a>
								<div class="lite-bubble__listing-title">
									<span>${n.name?n.name:n.addr}</span>
								</div>
								${n.photoitems&&n.photoitems.length>1?f:""}
							</div>
						</div>
					</li>
				`}});;;;TabsDataModuleBase.prototype._TranslationData={Address:"Address",Unit:"Unit",Neighborhood:"Neighborhood",City:"City",Price:"Price",Beds:"Beds",Baths:"Baths",SqFt:"Sq. Ft.",SqM:"Sq. M."};TabsDataModuleBase.prototype._OnInitializeBase=TabsDataModuleBase.prototype._OnInitialize;TabsDataModuleBase.prototype._OnInitialize=function(){var n=this,t;n._OnInitializeBase();n._SetSEOParam("represented",n._XSLParams.CurrentRepresentedFilter);n._BindToListingHover();n._HandleTouchBehaviour();n._XSLParams.ListingResult&&n._XSLParams.TabsDataListingViewType==="table"&&(t=gts.$("#listingresult,.js-listing-container",n._ModuleEle),t.length!==0&&GoogleVisualizationAPILoader.LoadVisualization(["table"],()=>n._OnInitializeTableView(t)))};TabsDataModuleBase.prototype.ChangeRepresentedFilter=function(n){if(log.debug("TabsDataModuleBase.ChangeRepresentedFilter"),n===this._XSLParams.CurrentRepresentedFilter)return!1;this._SetSEOParam("sort",StringFormatEmpty("{0}",this._XSLParams.CurrentSort));this._SetSEOParam("represented",StringFormatEmpty("{0}",n));this._SetSEOParam("paging","");return this._ReloadContent(this._GetUrl(),this._XSLParams.UpdateAnchorOnAjax,this._XSLParams.UseAjaxForRepresentedFilter,undefined,!0,!1,{scrollToTop:!0}),!1};TabsDataModuleBase.prototype.ChangeSort=function(n){if(log.debug("TabsDataModuleBase.ChangeSort"),n===this._XSLParams.CurrentSort)return!1;this._SetSEOParam("sort",StringFormatEmpty("{0}",n));this._SetSEOParam("represented",StringFormatEmpty("{0}",this._XSLParams.CurrentRepresentedFilter));this._SetSEOParam("paging","");return this._ReloadContent(this._GetUrl(),this._XSLParams.UpdateAnchorOnAjax,this._XSLParams.UseAjaxForSorting,undefined,!0,!1,{scrollToTop:!0}),!1};TabsDataModuleBase.prototype.ChangeTab=function(n){this._SetSEOParam("section",n);this._SetSEOParam("paging","");this._SetSEOParam("sort","");this._SetSEOParam("represented","");this._SetSEOParam("pp","");this._SetSEOParam("letter","");this._ReloadContent(this._GetUrl(),!0,this._XSLParams.UseAjaxToLoadDetailTabs,undefined,!0,!0,{scrollToTop:!0})};TabsDataModuleBase.prototype._OnInitializeTableView=function(n){var r=this,e=r._XSLParams.ListingResult.listingresult,i=r._TranslationData,t=new google.visualization.DataTable,u,f;t.addColumn("string",i.Address);t.addColumn("string",i.Unit);t.addColumn("string",i.Neighborhood);t.addColumn("string",i.City);t.addColumn("number",i.Price);t.addColumn("number",i.Beds);t.addColumn("number",i.Baths);t.addColumn("number",globalParams.CurrentUnitSystem==="metric"?i.SqM:i.SqFt);var o={region:DisplayCurrency_CultureCode,roundToDecimalPlace:0},s='<a href="{0}">{1}<\/a>',h="{0}";e.listing.forEach(function(n){var r,i,e,u,f,c,l,a,v,y,p,w,b,k;n.listing.address.address&&(i=n.listing.address.address);n.listing.address.addrdisplay&&(i=n.listing.address.addrdisplay);n.listing.address.addrneighborhood&&(u=n.listing.address.addrneighborhood);n.listing.address.addrcity&&(f=n.listing.address.addrcity);n.listing.node.forEach(function(n){switch(n.node.id){case"CanonicalUrl":r=n.node.value;return;case"Address":case"AddrDisplay":i=n.node.value;return;case"BuildingUnitsTotal":e=n.node.value;return;case"AddrNeighborhood":u=n.node.value;return;case"AddrCity":f=n.node.value;return}var t=parseInt(n.node.value);if(!isNaN(t)&&!(t<1))switch(n.node.id){case"Price":y=t;c=CurrencyFormatter.FormatCurrencyForCulture(n.node.value,o);return;case"Bedroom":p=t;l=n.node.value;return;case"BathsFull":w=t;a=n.node.value;return;case"SqFeetInterior":case"SqMetersInterior":b=t;v=n.node.value;return}});k=typeof r=="undefined"?String.Format(h,i):String.Format(s,r,i);t.addRow([{f:k,v:i},e,u,f,{f:c,v:y},{f:l,v:p},{f:a,v:w},{f:v,v:b}])});u={showRowNumber:!0,width:"100%",height:"100%",allowHtml:!0};f=new google.visualization.Table(n[0]);f.draw(t,u)};TabsDataModuleBase.prototype._BindToListingHover=function(){var n=this,t=gts.$(".js-record",n._ModuleEle);if(typeof gts.hasTouch=="function"&&!gts.hasTouch()){t.on("mousemove"+RenoEventsNS,function(){var t=gts.$(this);t.addClass("is-card-active");n.inactiveTimer!==undefined&&window.clearTimeout(n.inactiveTimer);n.inactiveTimer=window.setTimeout(function(){t.removeClass("is-card-active")},2e3);gts.$(".js-thumb-pager, .js-galleryview-tabs",t).on("mouseenter"+RenoEventsNS+" mousemove"+RenoEventsNS,function(t){window.clearTimeout(n.inactiveTimer);t.stopPropagation()})});t.on("mouseleave",function(){gts.$(this).removeClass("is-card-active")})}};TabsDataModuleBase.prototype._HandleTouchBehaviour=function(){var n=this;typeof gts.hasTouch=="function"&&gts.hasTouch()&&gts.$(".js-record",n._ModuleEle).addClass("is-card-active")};;;;var NumberFormatting=NumberFormatting||{};NumberFormatting.DefaultNumberFormatter=Class.create(NumberFormatting.NumberFormatterBase,{initialize:function($super,n){this._className="DefaultNumberFormatter";$super(n)},FormatNumber:function(n){var i;if(n=this._CleanUpValue(n),!this._IsValidInput(n))return this._invalidInputResponse;var r=this._ToNumberTypeWithoutClean(n),u=gts.$.extend({},this._regionSettings,{positiveFormat:"%n",symbol:"",region:"",AbbreviateNumber:!1}),t=gts.$("<div/>");return t.html(r),gts.$(t).formatCurrency(u),i=t.html().toUpperCase(),this._FormatDecimals(i)},_FormatDecimals:function(n){return this._FormatDecimalsForNumber(n)},_ToNumberTypeWithoutClean:function(n){var t=gts.$.formatCurrency.regions[DisplayCurrency_CultureCode],i=new RegExp(t.digitGroupSymbol.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),"g");return n=n.replace(i,""),n=this.ConvertToDecimalPointNumber(n),this.DecimalSymbolToDisplayFormat(n)}});;;;(function(n){"use strict";n.widget("gts.renoSmartSliderRadius",n.gts.renoSmartSlider,{defaults:{inputMinSelector:".js-radius-min",inputMaxSelector:".js-radius-max",labelMaxSelector:".js-radius-label-max",unitSystem:"imperial",unitDistanceText:""},_formatInputValueFromNumericValue:function(n){switch(this.options.unitSystem){case"imperial":return String.Format(this.options.unitDistanceText,n);case"metric":return String.Format(this.options.unitDistanceText,parseFloat(DistanceUtility.MilesToKilometers(n).toFixed(2)));default:return String.Format(this.options.unitDistanceText,n,parseFloat(DistanceUtility.MilesToKilometers(n).toFixed(2)))}},_getRangeOptValue:function(n){var t=this.options.rangeOptItemsAreArrays?n[0]:n;return this._formatInputValueFromNumericValue(t,t)}})})(jQuery,jQuery);;;;(function(n){"use strict";n.widget("gts.renoSmartSliderSizeBase",n.gts.renoSmartSlider,{defaults:{unitSystem:"imperial",bothUnitSystemValueSeparator:"/"},_getNumericValueFromUnformattedInputValue:function(n,t){return this.options.unitSystem=="both"&&(n=n.split(this.options.bothUnitSystemValueSeparator)[0].trim()),this._super(n,t)},_convertValueToSeoValue:function(n){var t=this.options.numberFormatter;return this.options.unitSystem=="metric"?Math.round(t.RoundNumber(this._toImperial(n))):t.RoundNumber(n)},_processRangeOpts:function(){if(this.options.unitSystem!="imperial"){var t=this;n.each(this.options.rangeOpts,function(n,i){if(n==t.options.minIndex||n==t.options.maxIndex)return!0;var u=t.options.rangeOptItemsAreArrays?i[1]:i,r=t._formatInputValueFromNumericValue(t._toMetric(u));t.options.unitSystem=="both"&&(r=u+" "+t.options.bothUnitSystemValueSeparator+" "+r);t.options.rangeOpts[n]=t.options.rangeOptItemsAreArrays?[r,u]:r})}},_findRangeOptByInputValueComparer:function(n,t){var i=n.toLowerCase()==t.toLowerCase();return i?!0:(this.options.unitSystem=="both"&&(t=t.split(this.options.bothUnitSystemValueSeparator)[0].trim()),n.toLowerCase()==t.toLowerCase())},_toImperial:function(n){return n},_toMetric:function(n){return n}})})(jQuery,jQuery);;;;function MortgageCalculator(){var n=this;n.xslParams=null;n.AskPrice=null;n.PercentDown=null;n.LoanTerm=null;n.InterestRate=null;n.MonthlyTax=null;n.MonthlyMaintenance=null;n.MortgageValues=null;n.MonthlyMortgagePayment=null;n.PrincipalBalance=null;n.DownPayment=null;n.Container=null;n.InitialChargesAndTaxesState=null;this.Initialize=function(t){n.xslParams=t;n.Container=gts.$("#"+n.xslParams.ContainerId);n.resultsPrincipal=n.Container.find(".js-principal");n.Container.length&&(n.AskPrice=n.Container.find("#MC-AskPrice"),n.PercentDown=n.xslParams.UseRangeSlider?n.Container.find("#MC-PercentDown"):n.Container.find("#MC-DownPaymentPercent"),n.LoanTerm=n.Container.find("#MC-LoanTerm"),n.InterestRate=n.Container.find("#MC-InterestRate"),n.MonthlyTax=n.Container.find("#MC-MonthlyTax"),n.MonthlyMaintenance=n.Container.find("#MC-MonthlyMaintenance"),n.MortgageValues=n.Container.find("#MC-MortgageValues"),n.MonthlyMortgagePayment=n.Container.find("#MC-MonthlyMortgagePayment"),n.PrincipalBalance=n.Container.find("#MC-PrincipalBalance"),n.DownPayment=n.Container.find("#MC-DownPayment"),n.ModuleId="#"+n.xslParams.ContainerId,n.InterestRate.val(n.xslParams.MortgageCalculatorAPR),n.AskPrice.val(n.xslParams.OriginalAskingPrice),n.MonthlyTax.length&&(n.xslParams.UseRangeSlider?n.MonthlyTax.val(n.xslParams.Realestatetaxmonthly):n.xslParams.Realestatetaxmonthly?n.MonthlyTax.html(n.xslParams.Realestatetaxmonthly):""),n.MonthlyMaintenance.length&&(n.xslParams.UseRangeSlider?n.MonthlyMaintenance.val(n.xslParams.Monthlyccmaintenance):n.xslParams.Monthlyccmaintenance?n.MonthlyMaintenance.html(n.xslParams.Monthlyccmaintenance):""),typeof n.xslParams.OriginalAskingPrice=="number"&&typeof n.xslParams.MortgageCalculatorAPR=="number"&&n.calculateMortgage(!0),n.MortgageValues.length&&(n.xslParams.Realestatetaxmonthly||n.xslParams.Monthlyccmaintenance)&&n.MortgageValues.removeClass("u-hide"),n.InitialChargesAndTaxesState=gts.$(".js-monthly-charges",n.ModuleId).prop("checked"),n._BindToFormSubmitEvent(),n._BindToAskPriceEvent(),n.xslParams.UseRangeSlider?n._InitializePriceRangeSlider():(n._setDefaultRangeValue(),n._BindToAutoCalc(),n.calculateMortgage()))};this._InitializePriceRangeSlider=function(){if(n.Slider=n.Container.find(".js-slider",n.ModuleId),n.xslParams.RangeOpts.length){var t=n.xslParams.RangeOpts.length-1;n.Slider.renoSmartSliderPrice({rangeOpts:n.xslParams.RangeOpts,numberFormatter:NumberFormatting.NumberFormatterFactory.GetNumberFormatter(NumberFormatting.NumberFormatterType.Price,{addCurrencySymbolInFormatNumber:!1}),minIndex:0,maxIndex:t,current:"0,"+t,wrapInputs:"slider__ranges",wrapPosition:"top",inputType:"text",dragWidth:48,inputMinSelector:"",inputMinSelector:"",template:'<div class="slider__track-container js-slider"><div class="slider__track js-drag-holder"><span class="slider__track slider__track--current js-bar"/><span class="slider__handle"/><span class="slider__handle js-drag"/><\/div><\/div>',onStop:function(t){n.MaxSeo=t.maxSeo;n._UpdateRangePosition()},onAfterInitialize:function(){n._setDefaultRangeValue();n._CalculatePercentageDown(n._RepositionElements);n.calculateMortgage()},onChange:n._CalculatePercentageDown}).data("gts-renoSmartSliderPrice")}};this._UpdateRangePosition=function(){var i=(20-n.xslParams.RangeOpts.length)*5,t=n.MaxSeo+i;gts.$(".js-drag",n.ModuleId).css("left",t+"%").data("position",t);gts.$(".js-bar",n.ModuleId).css("width",t+"%")};this._setDefaultRangeValue=function(){if(n._InputMax||(n._InputMax=n.xslParams.UseRangeSlider?gts.$(".js-price-max",n.ModuleId):gts.$(".js-down-payment-percent",n.ModuleId),n._InputMax.length)){if(n._InputMax.val(n.xslParams.UseRangeSlider?"20%":"20"),n.MaxSeo=20,n.xslParams.UseRangeSlider){n._UpdateRangePosition();return}n._CalculatePercentageDown()}};this._setDefaultDownPayment=function(){(n._InputMax||(n._InputMax=gts.$(".js-down-payment-percent",n.ModuleId),n._InputMax.length))&&(n._InputMax.val("20%"),n.MaxSeo=20)};this._RepositionElements=function(){var t=n._InputMax.detach();gts.$(".js-input-container",n.ModuleId).append(t)};this._CalculatePercentageDown=function(t){var u,i,r;n._InputMax.length&&(u=n.IsNumeric(n._InputMax.val()),i=CurrencyFormatter.FormatNumberForCulture(n.AskPrice.val()),i=Math.round(parseFloat(i)),r=u*i/100,n.xslParams.UseRangeSlider?gts.$(".js-results-container",n.ModuleId).html(CurrencyFormatter.FormatCurrencyForCulture(r,{region:DisplayCurrency_CultureCode,roundToDecimalPlace:0})):gts.$(".js-down-payment-value",n.ModuleId).val(CurrencyFormatter.FormatCurrencyForCulture(r,{region:DisplayCurrency_CultureCode,roundToDecimalPlace:0})),typeof t=="function"&&t.apply(this,[]))};this._BindToFormSubmitEvent=function(){var t=n.Container.find("#mortgage_calc_form");t.off("submit"+RenoEventsNS+"."+n.ContainerId);t.on("submit"+RenoEventsNS+"."+n.ContainerId,function(){return n.calculateMortgage(),!1})};this._BindToAskPriceEvent=function(){n.AskPrice.off("change"+RenoEventsNS+"."+n.ContainerId);n.AskPrice.on("change"+RenoEventsNS+"."+n.ContainerId,function(){n._CalculatePercentageDown()})};this._BindToAutoCalc=function(){n.Container.find(".o-input").off("keyup"+RenoEventsNS+"."+n.ContainerId);n.Container.find(".o-input").on("keyup"+RenoEventsNS+"."+n.ContainerId,function(){gts.$(this).attr("id")==="MC-DownPaymentPercent"&&n._CalculatePercentageDown();n.calculateMortgage()});n.InterestRate.off("change"+RenoEventsNS+"."+n.ContainerId);n.InterestRate.on("change"+RenoEventsNS+"."+n.ContainerId,function(){Number.isInteger(parseFloat(n.InterestRate.val()))&&n.InterestRate.val(parseFloat(n.InterestRate.val()).toFixed(1))});n.InterestRate.trigger("change"+RenoEventsNS+"."+n.ContainerId)};this.formatCurrency=function(n){var i,t;for(n=n.toString().replace(/\$|\,/g,""),isNaN(n)&&(n="0"),i=n===(n=Math.abs(n)),n=Math.floor(n*100+.50000000001),n=Math.floor(n/100).toString(),t=0;t<Math.floor((n.length-(1+t))/3);t++)n=n.substring(0,n.length-(4*t+3))+","+n.substring(n.length-(4*t+3));return(i?"":"-")+"$"+n};this.IsNumeric=function(n){return n?gts.$.isNumeric(n)?n:(n=+n.replace(/\D/g,""),gts.$.isNumeric(n))?n:!1:!1};this.calculateMortgage=function(t){var r=CurrencyFormatter.FormatNumberForCulture(n.AskPrice.val()),s=0,h=0,e,u,i,o,f,l,c;n.MonthlyTax.length&&(s=CurrencyFormatter.FormatNumberForCulture(n.MonthlyTax.val()));n.MonthlyMaintenance.length&&(h=CurrencyFormatter.FormatNumberForCulture(n.MonthlyMaintenance.val()));t=typeof t!="undefined"&&t;r=Math.round(parseFloat(r));e=n.PercentDown.length?n.IsNumeric(n.PercentDown.val()):n.MaxSeo?n.MaxSeo:n.IsNumeric(n._InputMax.val());n.xslParams.UseRangeSlider&&(!n.IsNumeric(e)||n.PercentDown.val()==="")&&(e=0,n.PercentDown.focus());u=n.LoanTerm.val();n.IsNumeric(u)&&n.LoanTerm.val()!==""||(u=0,n.LoanTerm.focus());u=parseFloat(n.LoanTerm.val())*12;i=n.InterestRate.val();n.IsNumeric(i)&&n.InterestRate.val()!==""||(i=0,n.InterestRate.focus());i=parseFloat(n.InterestRate.val())/1200;o=r-r*e/100;f=0;f=(i+i/(Math.pow(1+i,u)-1))*o;n.MortgageValues.length&&(l=gts.$(".js-monthly-charges",n.ModuleId).prop("checked"),l&&(f+=s+h));c=0;c=r-o;n.MonthlyMortgagePayment.html(CurrencyFormatter.FormatCurrencyForCulture(Math.round(f),{region:DisplayCurrency_CultureCode,roundToDecimalPlace:n.xslParams.UseRangeSlider?2:0}));n.resultsPrincipal.html(CurrencyFormatter.FormatCurrencyForCulture(Math.round(f),{region:DisplayCurrency_CultureCode,roundToDecimalPlace:n.xslParams.UseRangeSlider?2:0}));n.PrincipalBalance.html(CurrencyFormatter.FormatCurrencyForCulture(Math.round(o),{region:DisplayCurrency_CultureCode,roundToDecimalPlace:0}));n.DownPayment.html(CurrencyFormatter.FormatCurrencyForCulture(Math.round(c),{region:DisplayCurrency_CultureCode,roundToDecimalPlace:0}));n.AskPrice.val(CurrencyFormatter.FormatCurrencyForCulture(r,{region:DisplayCurrency_CultureCode,roundToDecimalPlace:0}));n.MortgageValues.removeClass("u-hide");n.MonthlyTax.length&&n.MonthlyTax.val(CurrencyFormatter.FormatCurrencyForCulture(s,{region:DisplayCurrency_CultureCode,roundToDecimalPlace:0}));n.MonthlyMaintenance.length&&n.MonthlyMaintenance.val(CurrencyFormatter.FormatCurrencyForCulture(h,{region:DisplayCurrency_CultureCode,roundToDecimalPlace:0}))};this.resetMortgageValue=function(){n.PercentDown.val("20");n.LoanTerm.val("30");n.AskPrice.val(n.xslParams.OriginalAskingPrice);n.InterestRate.val(n.xslParams.MortgageCalculatorAPR);n.MonthlyTax.length&&n.MonthlyTax.val(n.xslParams.Realestatetaxmonthly);n.MonthlyMaintenance.length&&n.MonthlyMaintenance.val(n.xslParams.Monthlyccmaintenance);gts.$(".js-monthly-charges",n.ModuleId).prop("checked",n.InitialChargesAndTaxesState);n.MonthlyMortgagePayment.html("&nbsp;");n.PrincipalBalance.html("&nbsp;");n.DownPayment.html("&nbsp;");n._setDefaultRangeValue();n._CalculatePercentageDown();n.calculateMortgage()}};;;function SendFriendEmailModule(){this._XSLParams=undefined;this.Id=undefined;this.Initialize=function(n){var t=this,i;log.debug("SendFriendEmailModule.Initialize");t._XSLParams=n;t.Id=t._XSLParams.ModuleId;UseRecaptcha&&(i=t.Id+"_captcha",RecaptchaHandler.CreateRecaptcha("#"+i,null));t.BindToEvents();gts.$(document).trigger("SendFriendEmailModule.overrideDefaultValidation",{instance:t,type:"sendEmail"})};this.BindToEvents=function(){var n=this;gts.$(document).off(RenoEventsNS+"."+n.Id);n._BindToFormSubmitEvent();gts.$(document).on(RenoEvent.SignIn+RenoEventsNS+"."+n.Id,function(t,i){gts.$(String.Format("#{0}user_name",n._XSLParams.FieldIdPrefix),gts.$(n._XSLParams.FormSelector)).val(i.find("username").text());gts.$(String.Format("#{0}user_email",n._XSLParams.FieldIdPrefix),gts.$(n._XSLParams.FormSelector)).val(i.find("email").text())});gts.$(document).on(RenoEvent.SignOut+RenoEventsNS+"."+n.Id,function(){gts.$(String.Format("#{0}user_name",n._XSLParams.FieldIdPrefix),gts.$(n._XSLParams.FormSelector)).val("");gts.$(String.Format("#{0}user_email",n._XSLParams.FieldIdPrefix),gts.$(n._XSLParams.FormSelector)).val("")})};this._BindToFormSubmitEvent=function(){var n=this;gts.$(n._XSLParams.FormSelector).on("submit"+RenoEventsNS+"."+n.Id,function(){return n.Send(),!1})};this.SetValidateRules=function(n){var t=this,i;t._AddMultipleEmailsValidator();i={ignore:[],rules:n,showErrors:function(){this.defaultShowErrors()}};$(t._XSLParams.FormSelector).validate(gts.$.extend({},defaultValidationSettings,i))};this._AddMultipleEmailsValidator=function(){(log.debug("SendFriendEmailModule._AddMultipleEmailsValidator"),typeof $.validator.methods.multipleEmails!="function")&&gts.jQuery.validator.addMethod("multipleEmails",function(n,t){var u,i,r,f,n;if(this.optional(t))return!0;for(u=n.split(","),i=!0,r=0,f=u.length;r<f;r++)if(n=String.Trim(u[r]),i=jQuery.validator.methods.email.call(this,n,t),!i)return!1;return i},"Invalid email address(es)")};this.Send=function(){var t,n,r,i;(log.debug("SendFriendEmailModule.Send"),t=this,n=gts.$(t._XSLParams.FormSelector),n.validate().form())&&(typeof n.overlay=="function"&&n.overlay(),r=SEOService.AddMandatoryUrlParts(String.Format("/widget/nowrapper/{0}/send/xml-out",t._XSLParams.EmailModule)),i={a:1,idrecord:gts.$("#email_friend_idrecord",n).val(),email_friend_user_name:gts.$("#email_friend_user_name",n).val(),email_friend_user_email:gts.$("#email_friend_user_email",n).val(),email_friend_friendemail:gts.$("#email_friend_friendemail",n).val(),email_friend_user_message:gts.$("#email_friend_user_message",n).val(),email_friend_referrer:gts.$("#email_friend_referrer",n).val(),channel:t._XSLParams.Channel},UseRecaptcha&&(i["g-recaptcha-response"]=RecaptchaHandler.GetResponse(n)),gts.$.post(r,i,function(n,i){var u=null,f,r,e;i=="success"&&(u=gts.$(n).find("emailmodule > responsecode").text(),u=="success"&&(f=gts.$(n).find("emailmodule > recordreportdatas recordreportdata").text(),DoReport(f,"RE.Listing.EmailFriend"),typeof EmailSubmissionConfirmationPageUrl!="undefined"&&EmailSubmissionConfirmationPageUrl!=""&&(window.location.href=SEOService.AddMandatoryUrlParts(EmailSubmissionConfirmationPageUrl))));u=="recaptchaerror"?(r=gts.$("#"+t._XSLParams.ModuleId+"_captcha_message"),r.show(),r.attr("class","error"),r.text(gts.$(n).find("emailmodule > responsemessage").text()),RecaptchaHandler.ReinitializeAllCaptchasInContainer(gts.$("#"+t._XSLParams.ModuleId))):(e=gts.$(n).find("emailmodule > responsemessage").text(),gts.$(t._XSLParams.ResponseTargerSelector).addClass("modal__response-message"),gts.$(t._XSLParams.ResponseTargerSelector).html(e),CloseDialog(5e3));gts.$.overlay.die()},"xml"))}};;