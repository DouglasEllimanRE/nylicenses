;var SuggestObjectEvents={Selected:"Selected"},EnumSuggestType={NOGROUP:"nogroup",GROUP:"group",CATEGORY:"category",AGENT:"agent",BROKER:"broker"},EnumSuggestAction={SHOWALL:"0",DISPLAYMOREOPTIONS:"1",RELOADFILTERED:"2",RELOADHIDDEN:"3",SHOWRECENTSEARCHES:"4"},EnumSuggestTarget={UNDEFINED:"0",LOCATION:"1",FILTEREDRECORD:"2",RECORD:"3",USERLOCATION:"4"},EnumSuggestFilterType={BEDROOM:"bedroom",PRICERANGE:"pricerange"},EnumSuggestSearchOrderServerCall={SingleCall:"SingleCall",MultipleCalls:"MultipleCalls"},EnumSuggestGroupType={1:"listing",2:"dxlisting",3:"agent",4:"broker",5:"community",6:"registrationagent",12:"registrationbroker"},EnumSuggestRecordType={Undefined:0,Listing:1,DXLocation:2,Agent:3,Broker:4,Community:5,RegistrationAgent:6,DXLocationWithCount:7,LocalGuide:8,SoldRented:9,UserLocation:10,DXSchoolDistrictWithCount:11,RegistrationBroker:12};;;;SuggestConfigurationProvider=Class.create({initialize:function(n){this._configurations={};this._isLoadings={};this._callbacks={};this._initSettings=n;this._ajaxUrl=String.Format("{0}{1}/suggestconfiguration.ashx?&searchtype={2}&suggesttype={3}",currentWebsiteDomainWebRoot,SEOService.AddMandatoryUrlParts("/reno/suggest"),this._initSettings.searchType,this._initSettings.suggestType)},GetConfiguration:function(n,t){this._AddCallback(n,t);var i=this._GetExistingConfiguration(n);if(i!=null){this._ExecuteCallbacks(n,i);return}this._GetConfigurationFromServer(n)},_AddCallback:function(n,t){typeof this._callbacks[n]=="undefined"&&(this._callbacks[n]=[]);this._callbacks[n].push(t)},RemoveCallbacks:function(n){typeof this._callbacks[n]!="undefined"&&(gts.$.each(this._callbacks[n],function(n,t){t=undefined}),this._callbacks[n].length=0)},_ExecuteCallbacks:function(n,t){if(typeof this._callbacks[n]!="undefined"){var i=this;gts.$.each(this._callbacks[n],function(n,r){i._ExecuteCallback(r,t)});this._callbacks[n].length=0}},_ExecuteCallback:function(n,t){typeof n=="function"&&n(t)},_GetConfigurationFromServer:function(n){var t=this,i;(typeof this._isLoadings[n]=="undefined"||this._isLoadings[n]!=!0)&&(this._isLoadings[n]=!0,i=null,gts.$.ajax({type:"GET","async":!0,contentType:"application/json; charset=utf-8",url:this._ajaxUrl+String.Format("&channel={0}",n),data:"{}",dataType:"jsonp",error:function(r,u,f){log.debug("Json Error Message: error("+f+') "'+u+'"');i=null;t._isLoadings[n]=!1;t._ExecuteCallbacks(n,null)},success:function(i){t.AddConfiguration(i,n)}}))},AddConfiguration:function(n,t){var i=this._ConfigurationRetrievedResponseHandler(n,t);this._isLoadings[t]=!1;this._ExecuteCallbacks(t,i)},_GetExistingConfiguration:function(n){if(typeof n=="undefined")return null;var t=this._configurations[n];return typeof t=="undefined"?null:t},_InitializeResponseContainer:function(){var n={};return n.suggestConfig={},n.searches=[],n},_ConfigurationRetrievedResponseHandler:function(n,t){var i=this._InitializeResponseContainer();return i.suggestConfig=n.suggestconfig.searchsuggestconfig,(typeof i.suggestConfig=="undefined"||i.suggestConfig==null)&&(i.suggestConfig={}),i.suggestConfig.controls=n.suggestconfig.controls,i.searches=this._CreateSearchesFromSearchConfigs(n.suggestconfig.searches),typeof t!="undefined"&&this._SetConfigurationToCache(i,t),i},_SetConfigurationToCache:function(n,t){this._configurations[t]=n},_CreateSearchesFromSearchConfigs:function(n){var i=this,t=[];return typeof n!="undefined"&&gts.$.each(n,function(n,r){t.push(i._CreateSearchFromSearchConfig(n,r))}),t},_CreateSearchFromSearchConfig:function(n,t){return{type:t.search.type,target:t.search.target,orderIndex:n}}});;;;var SuggestGroupOptionControls=SuggestGroupOptionControls||{};SuggestGroupOptionControls.AgentItemFactory=Class.create({initialize:function(n){this._initSettings=n},CreateControl:function(n){var t=n.controlData,i=gts.$("<li >"),r,u,f;return i.attr("class",String.Format("{0}  {1}","search-suggest__data",this._initSettings.suggestDataElementPrefix+" data")),r=this._ReplacePipesWithLinebreak(t.title),r=this._ReplaceNonSpacedCommas(r),i.attr("agentName",String.Format("{0}",t.name)),i.attr("agentId",String.Format("{0}",t.valuegid)),i.attr("agentId",String.Format("{0}",t.valuegid)),i.attr("agentEmail",String.Format("{0}",t.email!="undefined"?t.email:"")),i.html(String.Format('<span class="description search-suggest__agent-detail">{0}<\/span>',r)),u=gts.$("<div><\/div>"),u.attr("class",String.Format("{0}-photo {1}",this._initSettings.suggestDataElementPrefix," search-suggest__agent-photo")),f=new ResponsiveImage({imageProxyServer:ImageProxyServer,idListing:t.valuegid,imageUrl:typeof t.image!="undefined"?t.image:null,imageFailUrl:NoPhotoUrls.GetUrlByRecordType(NoPhotoUrls.RecordType.Agent),BestFit:!1}),u.html(f.GetHtml()),u.prependTo(i),i},_ReplaceNonSpacedCommas:function(n){return n.replace(", ",",").replace(",",", ")},_ReplacePipesWithLinebreak:function(n){while(n.indexOf("|")!=-1)n=n.replace("|","<br/>");return n}});;;;var SuggestGroupOptionControls=SuggestGroupOptionControls||{};SuggestGroupOptionControls.BrokerItemFactory=Class.create({initialize:function(n){this._initSettings=n},CreateControl:function(n){var t=n.controlData,i=gts.$("<li >"),r,u,f;return i.attr("class",String.Format("{0}  {1}","search-suggest__data",this._initSettings.suggestDataElementPrefix+" data")),r=this._ReplacePipesWithLinebreak(t.title),r=this._ReplaceNonSpacedCommas(r),i.attr("brokerName",String.Format("{0}",t.name)),i.attr("brokerId",String.Format("{0}",t.valuegid)),i.attr("brokerEmail",String.Format("{0}",t.email!=="undefined"?t.email:"")),i.html(String.Format('<span class="description search-suggest__broker-detail">{0}<\/span>',r)),u=gts.$("<div><\/div>"),u.attr("class",String.Format("{0}-photo {1}",this._initSettings.suggestDataElementPrefix," search-suggest__broker-photo")),f=new ResponsiveImage({imageProxyServer:ImageProxyServer,idListing:t.valuegid,imageUrl:typeof t.image!="undefined"?t.image:null,imageFailUrl:NoPhotoUrls.GetUrlByRecordType(NoPhotoUrls.RecordType.Agent),BestFit:!1}),u.html(f.GetHtml()),u.prependTo(i),i},_ReplaceNonSpacedCommas:function(n){return n.replace(", ",",").replace(",",", ")},_ReplacePipesWithLinebreak:function(n){while(n.indexOf("|")!==-1)n=n.replace("|","<br/>");return n}});;;;var SuggestGroupOptionControls=SuggestGroupOptionControls||{};SuggestGroupOptionControls.DefaultItemFactory=Class.create({initialize:function(n){this._initSettings=n},CreateControl:function(n){var r=n.controlData,t=gts.$("<dd>"),i,s,u,e,f,o;if(t.attr("class",String.Format("{0} {1}","search-suggest__data",this._initSettings.suggestDataElementPrefix)),t.attr("seo",String.Format("{0}",r.valueseo)),t.attr("name",String.Format("{0}",r.valuegid)),t.attr("latlng",String.Format("{0}",r.valuelatlng)),t.attr("type",n.searchTarget),i=typeof r.title!="undefined"?r.title.split("|"):[],i.length>0){if(s=gts.$('<a href="#" class="description search-suggest__detail" tabindex= "0" />'),u=this._ReplaceNonSpacedCommas(i[0]),i.length>1)for(e=i[i.length-1].search(/\^/)!==-1?i.pop().split("^^").map(n=>n.split("^")):[],u='<span class="search-suggest__detail-item">'+this._ReplaceNonSpacedCommas(i.join('<\/span><span class="search-suggest__detail-item">'))+"<\/span>",f=0;f<e.length;f++){var h=e[f],a=h[0],c=h[1]||"",l=RenoChannelType[c],v=l?`<span class="search-suggest__detail-channel"> ${ChannelService.ToString(l)}</span>`:`<span class="rental-availability__period  rental-availability__period--normal"> ${c}</span>`;u+=`<span class="search-suggest__detail-item  search-suggest__detail-item--price">${a+v}</span>`}s.html(u).appendTo(t);n.searchTarget===4&&gts.$('<span class="icon icon-location-target"><\/span>').prependTo(t)}return n.suggestrecordtype===EnumSuggestRecordType.SoldRented||(o=this.CreatePhotoContainer(n),o!==null&&o.prependTo(t)),t},CreatePhotoContainer:function(n){var t,i,r;return typeof n.controlData.image!="undefined"&&n.controlData.image!==""?(t=gts.$("<div><\/div>"),t.attr("class",String.Format("{0}-photo  {1}  palm--hide  palm-wide--hide  lap--hide",this._initSettings.suggestDataElementPrefix,"search-suggest__photo")),i=!0,(n.suggestRecordType===EnumSuggestRecordType.Broker||n.suggestRecordType===EnumSuggestRecordType.Agent)&&(i=!1),r=new ResponsiveImage({imageProxyServer:ImageProxyServer,idListing:n.controlData.valuegid,imageUrl:n.controlData.image,imageFailUrl:this._GetImageFailUrl(n.suggestRecordType),option:this._GetImageOptions(n),BestFit:i}),t.html(r.GetHtml()),t.wrapInner('<div class="search-suggest__photo-wrap" />'),t):null},_ReplaceNonSpacedCommas:function(n){return n.replace(new RegExp(", ","g"),",").replace(/,(?!\d{3}(?=\D|$))/g,", ")},_GetImageOptions:function(n){return n.suggestRecordType===EnumSuggestRecordType.Agent&&this._initSettings.agentPhotoColor==="B"?"W":null},_GetImageFailUrl:function(n){switch(n){case EnumSuggestRecordType.Listing:case EnumSuggestRecordType.DXListing:return NoPhotoUrls.GetUrlByRecordType(NoPhotoUrls.RecordType.Listing);case EnumSuggestRecordType.Community:return NoPhotoUrls.GetUrlByRecordType(NoPhotoUrls.RecordType.Community);case EnumSuggestRecordType.Agent:return NoPhotoUrls.GetUrlByRecordType(NoPhotoUrls.RecordType.Agent);case EnumSuggestRecordType.Broker:return NoPhotoUrls.GetUrlByRecordType(NoPhotoUrls.RecordType.Broker);default:return NoPhotoUrls.GetUrlByRecordType(NoPhotoUrls.RecordType.None)}}});;;;var SuggestGroupOptionControls=SuggestGroupOptionControls||{};SuggestGroupOptionControls.SoldOrRentedItemFactory=Class.create(SuggestGroupOptionControls.DefaultItemFactory,{initialize:function($super,n){$super(n)},CreateControl:function($super,n){var i=this,f=n.controlData,r,u;if(!f.title.includes("^"))return $super(n);if(r=gts.$("<dd>"),r.attr("class",String.Format("{0} {1}","search-suggest__data  search-suggest__data--block",this._initSettings.suggestDataElementPrefix)),r.attr("seo",String.Format("{0}",f.valueseo)),r.attr("name",String.Format("{0}",f.valuegid)),r.attr("latlng",String.Format("{0}",f.valuelatlng)),r.attr("type",n.searchTarget),u=typeof f.title!="undefined"?f.title.split("^"):[],u.length>0){var t={Address:i.CreateAddressWithZip(u[0]),Price:i._removeWhiteSpaces(u[1]),LastSoldDate:i._removeWhiteSpaces(u[2]),LastSoldValue:i._removeWhiteSpaces(u[3]),PriceEstimate:i._removeWhiteSpaces(u[4])},e=`
				<span class="description  search-suggest__detail  search-suggest__detail--flex  ${i._checkIfSoldDataIsAvailable(t.PriceEstimate,t.LastSoldDate,t.LastSoldValue)}" tabindex="0">
					<div class="search-suggest__detail--address">
						${t.Address}
					</div>
					<div class="search-suggest__detail--boxes">
						${t.PriceEstimate!==""?i.CreateEstimatedValueField(t.PriceEstimate):""}
						${t.LastSoldDate!==""||t.LastSoldValue!==""?i.CreateLastSoldField(t.LastSoldDate,t.LastSoldValue):""}
					</div>
				</span>
			`,o=gts.$(e);o.appendTo(r)}return r},_checkIfSoldDataIsAvailable:function(n,t,i){if(n===""&&t===""&&i==="")return"sold-box-empty"},CreateAddressWithZip:function(n){var t="";return n.includes("|")?(n=n.split("|"),n.forEach(function(n){t+=`<span class="search-suggest__detail-item">${n}</span>`})):t=`<span class="search-suggest__detail-item">${n}</span>`,t},CreateEstimatedValueField:function(n){return`
			<span class="search-suggest__detail--box  estimatedvalue">
				<span class="price"> ${n}</span>
				<span class="label"> Estimated value </span>
			</span>
		`},CreateLastSoldField:function(n,t){return`
			<span class="search-suggest__detail--box  lastsold">
				<span class="price"> ${t}</span>
				<span class="label"> Last sold ${n!==""?n:""} </span>
			</span>
		`},_removeWhiteSpaces:function(n){return n!==undefined?n.replace(/\s+/g,""):""}});;;;var SuggestGroupOptionControls=SuggestGroupOptionControls||{};SuggestGroupOptionControls.FactoryType={DefaultItemFactory:"DefaultItemFactory",SoldOrRentedItemFactory:"SoldOrRentedItemFactory",AgentItemFactory:"AgentItemFactory",BrokerItemFactory:"BrokerItemFactory",ShowAllLinkFactory:"ShowAllLinkFactory",SeeMoreLinkFactory:"SeeMoreLinkFactory",GroupHeaderFactory:"GroupHeaderFactory",AllGroupTypeLinkFactory:"AllGroupTypeLinkFactory",UserLocationItemFactory:"UserLocationItemFactory"};SuggestGroupOptionControls.FactoryProvider=Class.create({initialize:function(n){this._factories={};this._initSettings=n},Get:function(n,t,i){if(t===EnumSuggestTarget.USERLOCATION)return SuggestGroupOptionControls.FactoryType.UserLocationItemFactory;switch(n){case EnumSuggestType.AGENT:return SuggestGroupOptionControls.FactoryType.AgentItemFactory;case EnumSuggestType.BROKER:return SuggestGroupOptionControls.FactoryType.BrokerItemFactory;default:return i===EnumSuggestRecordType.SoldRented?SuggestGroupOptionControls.FactoryType.SoldOrRentedItemFactory:SuggestGroupOptionControls.FactoryType.DefaultItemFactory}},GetFactory:function(n,t){var r=this._factories[n],i;if(typeof r!="undefined")return r;switch(n){case SuggestGroupOptionControls.FactoryType.AllGroupTypeLinkFactory:i=new SuggestGroupOptionControls.AllGroupTypeLinkFactory(t);break;case SuggestGroupOptionControls.FactoryType.AgentItemFactory:i=new SuggestGroupOptionControls.AgentItemFactory(t);break;case SuggestGroupOptionControls.FactoryType.BrokerItemFactory:i=new SuggestGroupOptionControls.BrokerItemFactory(t);break;case SuggestGroupOptionControls.FactoryType.ShowAllLinkFactory:i=new SuggestGroupOptionControls.ShowAllLinkFactory(t);break;case SuggestGroupOptionControls.FactoryType.SeeMoreLinkFactory:i=new SuggestGroupOptionControls.SeeMoreLinkFactory(t);break;case SuggestGroupOptionControls.FactoryType.GroupHeaderFactory:i=new SuggestGroupOptionControls.GroupHeaderFactory(t);break;case SuggestGroupOptionControls.FactoryType.UserLocationItemFactory:i=new SuggestGroupOptionControls.UserLocationItemFactory(t);break;case SuggestGroupOptionControls.FactoryType.SoldOrRentedItemFactory:i=new SuggestGroupOptionControls.SoldOrRentedItemFactory(t);break;default:i=new SuggestGroupOptionControls.DefaultItemFactory(t)}return this._factories[n]=i,i}});;;;var SuggestGroupOptionControls=SuggestGroupOptionControls||{};SuggestGroupOptionControls.GroupHeaderFactory=Class.create({initialize:function(n){this._initSettings=n;this._suggest=this._initSettings.suggest},CreateControl:function(n){var t=null,i=this,r="",u=this._initSettings.suggest._initSettings.isFlyout;if(u&&n.morelink&&(r='<a href="#" class="js-suggest-change-category  search-suggest__group-header-link">Show More<\/a>'),n.headerCaption!==""&&(t=gts.$(String.Format('<dt class="search-suggest__group  u-text-uppercase"><span class="search-suggest__group--title">{0}<\/span>'+r+"<\/dt>",n.headerCaption))),u&&t)t.on("click",".js-suggest-change-category",function(n){n.preventDefault();var t=$(this).closest("*[type]").attr("type"),r=$(".js-suggest-controls-tabs",i._initSettings.suggest.ModuleEle);r.length&&(i._suggest.ChangeGroupType(t),i._suggest.UpdateGroupTypeTabs(),gts.$(window).trigger("getData"+RenoEventsNS+"."+i._suggest.ModuleId,[t]))});return t},FindExistingByTitle:function(n,t){var i=null;return gts.$.each(gts.$(".search-suggest__group",t),function(){var t=gts.$(this);if(t.text().trim()===n.trim())return i=t,!1}),i}});;;;var SuggestGroupOptionControls=SuggestGroupOptionControls||{};SuggestGroupOptionControls.AllGroupTypeLinkFactory=Class.create({initialize:function(n){this._initSettings=n;this._suggest=this._initSettings.suggest},CreateControl:function(n){var t=null,i=this;t=n>0?gts.$(String.Format('<p {0}>No suggestions have been found in this category<\/p><p {1}>There are {2} suggestions in <a href="#" {3}>All categories<\/a><\/p>','class="search-suggest__no-data-text"','class="search-suggest__no-data-text"',n,'class="js-suggest-change-category-all"')):gts.$(String.Format('<p {0}>No suggestions have been found in this category<\/p><p {1}>There are other suggestions in <a href="#" {2}>All categories<\/a><\/p>','class="search-suggest__no-data-text"','class="search-suggest__no-data-text"','class="js-suggest-change-category-all"'));t.on("click",".js-suggest-change-category-all",function(n){n.preventDefault();var t=$(".js-suggest-controls-tabs",i._initSettings.suggest.ModuleEle);t.length&&i._suggest.ChangeGroupType("")});return t}});;;;var SuggestGroupOptionControls=SuggestGroupOptionControls||{};SuggestGroupOptionControls.SeeMoreLinkFactory=Class.create({initialize:function(n){this._initSettings=n;this._suggest=this._initSettings.suggest},CreateControl:function(n){var i,r,t;if(!n.groupData.morelink||n.seeMoreOptionCount<=0||n.offset>=n.groupData.totalcount||this._GetLabel(n)==="")return null;i=this;i._suggest.ModuleId=i._suggest.ModuleEle.attr("id");r=n.groupData.name;t=gts.$("<a><\/a>");t.attr("id",r);t.attr("class","seemore  search-suggest__more-link  search-suggest__links");t.attr("data-group-showmore",r);t.attr("href","#");t.attr("onclick","return false;");t.html(i._GetLabel(n));const u={group:{name:r,offset:n.offset,target:n.groupData.target},action:EnumSuggestAction.DISPLAYMOREOPTIONS};t.on("mousedown"+RenoEventsNS+"."+i._suggest.ModuleId,function(t){t.stopPropagation();i._suggest.SeeMoreFromGroup(n.searchTerm,u);SuggestUtility.StopProcessingEvents(t)});return i._BindToGetResult(n.searchTerm,u),t},_GetLabel:function(n){return n.groupData.showmorelabel?n.groupData.showmorelabel+' <i class="icon  icon-plus"><\/i>':""},_BindToGetResult:function(n,t){const i=this;gts.$(window).off("getData"+RenoEventsNS+"."+i._suggest.ModuleId).on("getData"+RenoEventsNS+"."+i._suggest.ModuleId,function(r,u){r.stopPropagation();const f=t;f.group.name=u;i._suggest.SeeMoreFromGroup(n,f);SuggestUtility.StopProcessingEvents(r)})}});;;;var SuggestGroupOptionControls=SuggestGroupOptionControls||{};SuggestGroupOptionControls.ShowAllLinkFactory=Class.create({initialize:function(n){this._initSettings=n},CreateControl:function(n){if(typeof n.groupData.alllink=="undefined"||n.groupData.alllink===null||n.groupData.alllink==="")return null;var t=gts.$("<a><\/a>");return t.attr("href","#"),t.attr("id",n.groupData.name+"_all"),t.attr("class","showall  search-suggest__all-link  search-suggest__links"),t.attr("onclick","return false;"),t.html(this._GetLabel(n)),t.mousedown(function(t){window.location.href=String.Format("{0}/{1}",currentWebsiteDomainWebRoot,n.groupData.alllink);SuggestUtility.StopProcessingEvents(t)}),t.keydown(function(t){t.type==="keydown"&&t.which===13&&(window.location.href=String.Format("{0}/{1}",currentWebsiteDomainWebRoot,n.groupData.alllink),SuggestUtility.StopProcessingEvents(t))}),t},_GetLabel:function(n){return n.groupData.showalllabel?n.groupData.showalllabel+' <i class="icon  icon-arrow-right-full"><\/i>':""}});;;;SuggestManagerBase=Class.create({_defaultSettings:{textInputEleSelector:"#GSTerm",suggestDataElementPrefix:"suggest-data",suggestDataGroupPrefix:"suggest-group-data",responseContainerEleSelector:"#CGSSuggestContainer",dataContainerId:"suggest-categories",closeSuggestOnEsc:!0,closeSuggestOnMouseDownOutsideSuggestArea:!0,renderSearchControls:!0,closeSuggestOnSelect:!0,pageSearchType:SearchType.Location,suggestFilterElementPrefix:"suggest-control",performSearchDelay:200,isFlyout:!1,openClass:"is-open",readyClass:"is-ready",closedClass:"is-closed",goToIntermediatePageOnSubmitIfSuggestIsBusy:!1,showMakeSelectionMessageOnEnterClick:!1,hideSuggestOnEnterClick:!0,defaultFilters:undefined,redirectToRegionalSiteWhenLocationIsSelected:!1,recentSearchesData:JSON.parse(localStorage.getItem("recentSearches"))},initialize:function(n){this._enterKeyDown=!1;this._isBusy=!1;this._initialized=!1;this._initSettings=gts.$.extend({},this._defaultSettings,n);this.EventNS=".SuggestManagerBase"+this._initSettings.suggestId;this.AbortOngoingRequest();this._configuration=null;this._ongoingSearches=[];this._InitializeElementSelectors();var t=this.TextInputEle.length>0;t&&(this.UnbindEvents(),this._performSearchTimer=null,this._SetChannel(this._initSettings.channel),this.DefaultText=this._initSettings.persistRegionSearchTerm?"":this.TextInputEle.val(),this._cleanedDefaultText=this._CleanUpSearchTerm(this.DefaultText),this._SetSuggestUrlBase(),this._InitializeConfigurationProvider(),this._InitializeSuggestedActionProvider(),this._HookupEvents(),this._initialized=!0,this._InitializeSelectHandler(),this._initSettings.ShowRecentlySearchedLocation&&this._InitializeStorageList())},_InitializeConfigurationProvider:function(){this._configurationProvider=new SuggestConfigurationProvider({searchType:this._initSettings.searchType,suggestType:this._initSettings.suggestType});typeof this._initSettings.suggestconfig!="undefined"&&this._configurationProvider.AddConfiguration(this._initSettings.suggestconfig,this._selectedChannel)},_InitializeSuggestedActionProvider:function(){var n=gts.$.extend({},this._initSettings,{channel:this._selectedChannel,pageSearchType:this._initSettings.pageSearchType,moduleEle:this.ModuleEle});this._suggestedActionProvider=new SuggestNoSelection.SuggestedActionProvider(n)},_InitializeProgressIndicator:function(){typeof this._progressIndicator=="undefined"&&(this._progressIndicator=SuggestProgressIndicators.ProgressIndicatorFactory.GetProgressIndicator({responseContainerEle:this._responseContainerEle,searchOrderServerCall:this._configuration.suggestConfig.searchorderservercall}))},_InitializeElementSelectors:function(){this.ModuleEle=gts.$(this._initSettings.moduleEleSelector);this.TextInputEle=gts.$(this._initSettings.textInputEleSelector,this.ModuleEle);this.TextSelectedDataEle=gts.$(this._initSettings.textSelectedDataEleSelector,this.ModuleEle);this._responseContainerEle=gts.$(this._initSettings.responseContainerEleSelector,this.ModuleEle);this.SuggestDataElementPrefix=this._initSettings.suggestDataElementPrefix;this.SuggestDataGroupPrefix=this._initSettings.suggestDataGroupPrefix},_InitializeResponseRenderer:function(){if(typeof this._responseRenderer=="undefined"){var n=gts.$.extend({},this._initSettings,{suggest:this,moduleEle:this.ModuleEle,eventNS:this.EventNS,suggestConfig:this._configuration==null?null:this._configuration.suggestConfig,suggestFilterElementPrefix:this._initSettings.suggestFilterElementPrefix,channel:this._selectedChannel,suggestType:this._initSettings.suggestType});this._responseRenderer=SuggestResponseRendererFactory.GetResponseRenderer(n)}},_InitializeSelectHandler:function(){if(typeof this.SelectHandler!="undefined")return!1;var n=this;return this.SelectHandler=new SuggestSelectHandler({suggest:this,eventNS:this.EventNS,suggestType:this._initSettings.suggestType,responseContainerEle:this._responseContainerEle,suggestDataElementPrefix:this.SuggestDataElementPrefix,suggestFilterElementPrefix:this._initSettings.suggestFilterElementPrefix,selectedChannel:this._selectedChannel,closeSuggestOnSelect:this._initSettings.closeSuggestOnSelect,pageSearchType:this._initSettings.pageSearchType,handleSelectCategoryLocation:this._initSettings.handleSelectCategoryLocation,redirectToRegionalSiteWhenLocationIsSelected:this._initSettings.redirectToRegionalSiteWhenLocationIsSelected,selectedRefinementsGetter:function(){return n._selectedRefinementsGetter()},showRecentSearches:this._initSettings.showRecentSearches}),!0},_selectedRefinementsGetter:function(){var i=gts.$("select."+this._initSettings.suggestFilterElementPrefix,this._responseContainerEle),n=[],t;return gts.$.each(i,function(t,i){if(i.value!==""&&i.value!=="0"){var r=i.value;i.id===EnumSuggestFilterType.PRICERANGE&&(r=GetSeoPart(seoPartType.Price,String.Format("0-{0}",r)));n.push(r)}}),t=typeof this._initSettings.defaultFilters!="undefined"?this._initSettings.defaultFilters[this._selectedChannel]:undefined,typeof t!="undefined"&&gts.$.each(t.defaultFilters.seos,function(t,i){if(n.indexOf(i)<0)return!0;n.push(i)}),n},_InitializeStorageList:function(){var n=localStorage.getItem("recentSearches");n=JSON.parse(n);n&&n.group!==null&&n.group[0].option.length>0&&($("li[Content|='Sales'] ul").html("").html(this._getDataFromLocalStorage(n.group[0].option,"Sales")),$("li[Content|='Rentals'] ul").html("").html(this._getDataFromLocalStorage(n.group[0].option,"Rentals")),$("li[Content|='Sold/Value'] ul").html("").html(this._getDataFromLocalStorage(n.group[0].option,"Sold")),$("li[Content|='Agents'] ul").html("").html(this._getDataFromLocalStorage(n.group[0].option,"Agents")))},_getDataFromLocalStorage:function(n,t){var i="";return gts.$.each(n,function(n,r){t==="Sales"&&(i+=`<li class="primary-nav__item js-smartmenu-item" originalurl="/sales/${r.valueseo}" pageseourl="sales/${r.valueseo}" content="${r.title}">
					<a class="primary-nav__link  js-primary-nav-link" href="/sales/${r.valueseo}" aria-label="">
						<span class="primary-nav__link--text">${r.title}</span>
					</a>
					</li>`);t==="Rentals"&&(i+=`<li class="primary-nav__item js-smartmenu-item" originalurl="/rentals/${r.valueseo}" pageseourl="rentals/${r.valueseo}" content="${r.title}">
					<a class="primary-nav__link  js-primary-nav-link" href="/rentals/${r.valueseo}" aria-label="">
						<span class="primary-nav__link--text">${r.title}</span>
					</a>
					</li>`);t==="Sold"&&(i+=`<li class="primary-nav__item js-smartmenu-item" originalurl="/sold/${r.valueseo}" pageseourl="sold/${r.valueseo}" content="${r.title}">
					<a class="primary-nav__link  js-primary-nav-link" href="/sold/${r.valueseo}" aria-label="">
						<span class="primary-nav__link--text">${r.title}</span>
					</a>
					</li>`);t==="Agents"&&(i+=`<li class="primary-nav__item js-smartmenu-item" originalurl="/agents/${r.valueseo}" pageseourl="agents/${r.valueseo}" content="${r.title}">
					<a class="primary-nav__link  js-primary-nav-link" href="/agents/${r.valueseo}" aria-label="">
						<span class="primary-nav__link--text">${r.title}</span>
					</a>
					</li>`)}),i},AbortOngoingRequest:function(){if(this._RemoveConfigurationRetrieveCallbacksForChannel(),window.clearTimeout(this._performSearchTimer),typeof this._responseRenderer!="undefined"&&this._responseRenderer.EndResponseLoading(),this._StopProgressIndicator(),typeof this._ongoingSearches=="undefined"||this._ongoingSearches==null){this._isBusy=!1;return}gts.$.each(this._ongoingSearches,function(n,t){if(t==null||t[1]==null)return!0;t[1].abort()});this._ongoingSearches.length=0;this._ongoingSearches=[];this._isBusy=!1},_TriggerEnterKeyDownEvent:function(){this.TextInputEle.trigger("SuggestEnterKeyDown"+this.EventNS,{})},_SetChannel:function(n){if(typeof n=="undefined"){this._selectedChannel="";return}this._selectedChannel=n;this._SetSuggestUrlBase()},ChangeGroupType:function(n){if(this._initialized){var i=gts.$("."+this.SuggestDataGroupPrefix,this.ModuleEle),f=gts.$("."+this.dataContainerId,this.ModuleEle),t=gts.$(".js-suggest-controls-tabs",this.ModuleEle),r=t.find("*[href=#"+n+"]").text(),u;r&&this._responseRenderer.ChangeGroupType({name:n,title:r,selected:!0});n===""?(i.removeClass("u-hide search-suggest__group--active"),f.removeClass()):(u=$.grep(i,function(t){return $(t).attr("type")===n}),i.addClass("u-hide").removeClass("search-suggest__group--active"),$(u).removeClass("u-hide").addClass("search-suggest__group--active"));t.length>0&&(t.find(".tabs__item").removeClass("tabs__item--selected"),t.find(".tabs__item").attr("aria-selected",!1),t.find("*[href=#"+n+"]").addClass("tabs__item--selected"),t.find("*[href=#"+n+"]").attr("aria-selected",!0))}},UpdateGroupTypeTabs:function(){var t;if(this._initialized){var n=gts.$(".js-suggest-controls-tabs",this.ModuleEle),r=n.find(".tabs__item--selected"),u=n.scrollLeft(),f=n.parent().outerWidth(),i=20;(n.find(".tabs__item").attr("role","tab"),n.length&&r.length)&&(t=r.offset().left-n.offset().left,t<0?n.animate({scrollLeft:t+i},300):f+u-i*2<t&&n.animate({scrollLeft:t-i},300))}},ChangeChannel:function(n,t,i){var f=this._selectedChannel==n,r,u;this._initialized&&!f&&(this._SetChannel(n),typeof t=="undefined"&&(t=this._currentSearchTerm),r=this,u=function(){r._InitializeSuggestedActionProvider();r.SelectHandler&&r.SelectHandler.ChangeChannel(r._selectedChannel);r._responseRenderer&&r._responseRenderer.ChangeChannel(r._selectedChannel,r._configuration.suggestConfig);r.PerformSearch(t,i)},this._SetConfigurationFromServer(u))},_SetSuggestUrlBase:function(){var n=this._initSettings.searchServiceRoot;this._suggestUrlBase=String.Format("{0}/suggest.ashx?channel={1}&returntype=json&ruleid={2}&",n,this._selectedChannel,window.CurrentMatchedRuleId)},GetSmartSearchJsonUrl:function(n){return this._GetPopulatedSuggestUrl(n)},CloseSuggest:function(){var n=this._initSettings.responseContainerEleSelector;"undefined"!=typeof n&&gts.$(n).length>0&&gts.$(n).trigger("SuggestBeforeClose"+RenoEventsNS);this._CloseSuggestWithParams({setDefaultTextToTextInputIfEmpty:!0})},_CloseSuggestWithParams:function(n){this._initialized&&(this.AbortOngoingRequest(),typeof this._responseRenderer!="undefined"&&this._responseRenderer.CloseResponseContainer(),n.setDefaultTextToTextInputIfEmpty&&this._SetDefaultTextToTextInputIfEmpty())},_SetDefaultTextToTextInputIfEmpty:function(){this.TextInputEle.val()==""&&(this.TextInputEle.val(this.DefaultText),this.TextInputEle.css("font-color","#777"))},_GetTotalSuggestMatches:function(){return gts.$(String.Format("li.{0}",this.SuggestDataElementPrefix),this._responseContainerEle).length},_GetPopulatedSuggestUrl:function(n){var t=String.Format(this._suggestUrlBase+"suggesttype={0}&searchtype={1}&term={2}",this._initSettings.suggestType,this._initSettings.searchType,this.ProcessSearchTermForUrl(n));return typeof this._initSettings.coverageArea!="undefined"&&(t+="&coveragearea="+this._initSettings.coverageArea),t},PerformSearch:function(n,t){var r,i;if(this._suggestedAction=undefined,this._responseContainerEle.removeClass(this._initSettings.readyClass),t!==EnumSuggestAction.SHOWRECENTSEARCHES&&(r=typeof n=="undefined"||n==null||n.length<MinSearchTermLength,r)){this._CloseSuggestWithParams({setDefaultTextToTextInputIfEmpty:!1});return}if(this._currentSearchTerm=n,this.AbortOngoingRequest(),this._isBusy=!0,this._configuration!=null){this._OnPerformSearchConfigurationRetrieved(this._currentSearchTerm,t);return}i=this;this._performSearchTimer=window.setTimeout(function(){var n=function(){i._OnPerformSearchConfigurationRetrieved(i._currentSearchTerm,t)};i._SetConfigurationFromServer(n)},this._initSettings.performSearchDelay)},_SetConfigurationFromServer:function(n){this._isBusy=!0;var t=this,i=this._selectedChannel;this._RemoveConfigurationRetrieveCallbacksForChannel();this._configurationProvider.GetConfiguration(i,function(i){if(i!=null){t._configuration=i;var r=t._configuration.defaultFilters;typeof r!="undefined"&&gts.$.each(r,function(n,i){typeof t._defaultFilters[n]=="undefined"&&(t.defaultFilters[n]={defaultFilters:i})});n()}})},_RemoveConfigurationRetrieveCallbacksForChannel:function(){typeof this._configurationProvider!="undefined"&&this._configurationProvider.RemoveCallbacks(this._selectedChannel)},_OnPerformSearchConfigurationRetrieved:function(n,t){var i;this._isBusy=!0;this._OnConfigurationRetrieved();this.TextSelectedDataEle.val("");typeof t=="undefined"&&(t=EnumSuggestAction.SHOWALL);this._responseRenderer.ClearResponseContainer();i=t!==EnumSuggestAction.SHOWRECENTSEARCHES?this._GetPopulatedSuggestUrl(n):null;this._GetSuggestDatas(this._configuration.searches,n,i,null,t)},_OnConfigurationRetrieved:function(){this._InitializeResponseRenderer();this._InitializeProgressIndicator();this._InitializeSelectHandler()},_GetSuggestDatas:function(n,t,i,r,u){var f=typeof this._configuration.suggestConfig.searchorderservercall!="undefined"&&this._configuration.suggestConfig.searchorderservercall==EnumSuggestSearchOrderServerCall.MultipleCalls;if(f){this._GetSuggestDatasInMultipleCalls(n,t,i,r,u);return}this._GetSuggestDatasInSingleCall(t,i,r,u)},_GetSuggestDatasInSingleCall:function(n,t,i,r){var u={search:null,searchTerm:n,jsonUrl:t,settings:i,action:r};this._OnResponseLoadingStarted(1,undefined,r);this._AddSearchToOngoingSearches(u);this._GetSuggestData(u)},_GetSuggestDatasInMultipleCalls:function(n,t,i,r,u){this._OnResponseLoadingStarted(n.length,n,u);var f=this;this._AddSearchesToOngoingSearches(n,t,i,r,u);gts.$.each(this._ongoingSearches,function(n,t){var i=f._GetFromOngoingSearches(t[0]);if(i==null)return!0;f._GetSuggestData(i[0])})},_AddSearchesToOngoingSearches:function(n,t,i,r,u){var f=this;gts.$.each(n,function(n,e){var o=i+String.Format("&suggestsearchtype={0}&index={1}",e.type,"0"),s={search:e,searchTerm:t,jsonUrl:o,settings:r,action:u};f._AddSearchToOngoingSearches(s)})},_GetSuggestData:function(n){var t=this;if(n.action!==EnumSuggestAction.SHOWRECENTSEARCHES)gts.$.ajax({type:"GET",contentType:"application/json; charset=utf-8",url:n.jsonUrl,data:"{}",dataType:"jsonp",beforeSend:function(i){t._AddRequestToOngoingSearches(n,i)},error:function(i,r,u){u!="abort"&&t._OnGetSuggestDataEnd(n)},success:function(i){t._GetSuggestDataResponseHandler(n,i);t._OnGetSuggestDataEnd(n,i)}});else{let i=localStorage.getItem("recentSearches");i=JSON.parse(i);i.group.map(n=>{n.isRecentSearch=!0});t._GetSuggestDataResponseHandler(n,i);t._OnGetSuggestDataEnd(n,i)}},_SetContainerHeight:function(){const n=gts.$(".js-carousel-caption").length>0?gts.$(".js-carousel-caption"):0,i=gts.$(".js-header"),t=gts.$(".m-lpsw");if(n!==0&&t.length>0&&!this.ModuleEle.hasClass("m-quicksearch")){let r;r=parseInt(n.position().top)-(parseInt(t.outerHeight())+parseInt(i.outerHeight()));this._responseContainerEle.height(r)}},_OnGetSuggestDataEnd:function(n,t){(this._RemoveFromOngoingRequests(n),this._UpdateProgressIndicatorSteps(),this._responseContainerEle.addClass(this._initSettings.readyClass),n.action!==EnumSuggestAction.SHOWRECENTSEARCHES&&this._SetContainerHeight(),this._IsSuggestSearching())||(this.TextSelectedDataEle.trigger("SuggestResultsRetrieved",{requestParams:n,response:t}),typeof this._responseRenderer!="undefined"&&this._responseRenderer.EndResponseLoading(),this._StopProgressIndicator(),this._CloseSuggestIfNoDataToRender(n),this.UpdateGroupTypeTabs(),this._isBusy=!1)},_IsSuggestSearching:function(){return typeof this._ongoingSearches!="undefined"&&this._ongoingSearches!=null&&this._ongoingSearches.length!=0},IsBusy:function(){return this._isBusy},_AddSearchToOngoingSearches:function(n){this._ongoingSearches.push([n])},_AddRequestToOngoingSearches:function(n,t){var i=this._GetFromOngoingSearches(n);i!=null&&i.push(t)},_GetFromOngoingSearches:function(n){var t=null;return gts.$.grep(this._ongoingSearches,function(i){if(i[0]!=null&&n==i[0])return t=i,!1}),t},_RemoveFromOngoingRequests:function(n){if(n!=null){var t=-1;gts.$.grep(this._ongoingSearches,function(i,r){i[0]!=null&&n==i[0]&&(t=r)});t>-1&&this._ongoingSearches.splice(t,1)}},_GetSuggestDataResponseHandler:function(n,t){var i=this._ongoingSearches.length==1;this._responseRenderer.RenderResponse(gts.$.extend({},n,{hidden:this._enterKeyDown||t.action===EnumSuggestAction.RELOADHIDDEN,removeObsoleteResults:i}),t);this._SetSuggestedAction()},_CloseSuggestIfNoDataToRender:function(n){if(!this._responseRenderer.HasData()){this.CloseSuggest();log.debug("SuggestManagerBase in '"+this._initSettings.suggestId+"' module: No Data returned for \""+n.searchTerm+'"');return}},UnbindEvents:function(){gts.$(document).off(this.EventNS);this.TextInputEle.off(this.EventNS);this.TextSelectedDataEle.off(this.EventNS);this._responseContainerEle.off(this.EventNS)},_HookupEvents:function(){var n=this;this.TextInputEle.off("keydown"+this.EventNS).on("keydown"+this.EventNS,function(t){return n._TextInputKeyDownEventHandler(t)});this.TextInputEle.off("keyup"+this.EventNS).on("keyup"+this.EventNS,function(t){return typeof NearbyLocationsModule!="undefined"&&NearbyLocationsModule.IsInitialized&&gts.$(window).trigger("closeLocationsSuggest.RENO"),n._TextInputKeyUpEventHandler(t)});this.TextInputEle.off("focus"+this.EventNS).on("focus"+this.EventNS,function(t,i){var i=i||{isJsTriggered:!1};n._TextInputFocusEventHandler(i)});this.TextInputEle.off("dblclick"+this.EventNS).on("dblclick"+this.EventNS,function(){n._TextInputDblClickEventHandler()});gts.$(document).off("mousedown"+this.EventNS).on("mousedown"+this.EventNS,function(t){n._DocumentMouseDownEventHandler(t)});this.TextInputEle.off("search"+this.EventNS).on("search"+this.EventNS,function(){return n._TextInputSearchEventHandler()});this.TextInputEle.prev().off("click"+this.EventNS).on("click"+this.EventNS,function(){if(n._initSettings.showRecentSearches&&n._initSettings.recentSearchesData){if(n.TextInputEle.hasClass("js-quicksearch-input")&&!$(this).parent().hasClass("is-editable"))return;n._SearchIconClickHandler()}})},_TextInputKeyUpEventHandler:function(n){var i=window.event?n.keyCode:n.which,t;switch(i){case 9:case 13:case 16:case 17:case 19:case 33:case 34:case 35:case 36:case 37:case 39:case 45:case 92:case 93:case 144:case 145:case 112:case 113:case 114:case 115:case 116:case 117:case 118:case 119:case 120:case 121:case 122:case 123:return!1;case 27:return this._initSettings.closeSuggestOnEsc&&this.CloseSuggest(),!1;case 40:isResponsive||typeof this._responseRenderer.Scroller=="undefined"||this._responseRenderer.Scroller.ScrollToNext(ScrollerType.keyboard);break;case 38:isResponsive||typeof this._responseRenderer.Scroller=="undefined"||this._responseRenderer.Scroller.ScrollToPrev(ScrollerType.keyboard);break;default:if(t=this._CleanUpSearchTerm(this.TextInputEle.val()),t==this._cleanedDefaultText)return this.AbortOngoingRequest(),i===8&&(this._initSettings.closeSuggestOnEsc&&this.CloseSuggest(),this._initSettings.showRecentSearches&&this._initSettings.textInputEleSelector!==".js-location-suggest-input"&&this._RenderRecentSearches()),!1;this.PerformSearch(t)}},_TextInputKeyDownEventHandler:function(n){var t=window.event?n.keyCode:n.which;switch(t){case 13:this._enterKeyDown=!0;this._OnEnterKeyDown();break;default:this._enterKeyDown=!1}},_OnEnterKeyDown:function(){this._initSettings.showMakeSelectionMessageOnEnterClick||(this._initSettings.hideSuggestOnEnterClick&&typeof this._responseRenderer!="undefined"&&this._responseRenderer.HideResponseContainer(),this._initSettings.goToIntermediatePageOnSubmitIfSuggestIsBusy&&this.AbortOngoingRequest());this._TriggerEnterKeyDownEvent()},_TextInputFocusEventHandler:function(){var n=this;this._responseContainerEle.is(":visible")||this.TextInputEle.val()!=this.DefaultText||n._ClearTextInput();this._initSettings.showRecentSearches&&this.TextInputEle.val()==this.DefaultText&&this._responseContainerEle.is(":empty")&&this._initSettings.textInputEleSelector!=="moduleEleSelector"&&(typeof this._responseRenderer!="undefined"?typeof this._responseRenderer.eventOnSuggestType=="undefined"?n._RenderRecentSearches():this._responseRenderer.eventOnSuggestType!=="clickedOnLastSearched"?(this._responseRenderer.eventOnSuggestType="",n._RenderRecentSearches()):this._responseRenderer.eventOnSuggestType="":n._RenderRecentSearches())},_RenderRecentSearches:function(){let n=localStorage.getItem("recentSearches");if(n){const t=this._CleanUpSearchTerm(this.TextInputEle.val());this.PerformSearch(t,EnumSuggestAction.SHOWRECENTSEARCHES)}},_TextInputDblClickEventHandler:function(){this._ClearTextInput()},_TextInputSearchEventHandler:function(){this.TextInputEle.val()==""&&this.CloseSuggest()},_DocumentMouseDownEventHandler:function(n){var f=gts.$(n.target)[0]==gts.$("html")[0],t,i,r,u;f||(t=this._responseContainerEle.is(":visible"),t)&&((i=gts.$(n.target).closest(this._responseContainerEle).length>0,i)||(r=gts.$(n.target).closest(this.TextInputEle).length>0,r)||this._initSettings.closeSuggestOnMouseDownOutsideSuggestArea&&((u=gts.$(n.target).closest(this.ModuleEle).length>0,this._initSettings.isFlyout&&u)||this.CloseSuggest()))},_SearchIconClickHandler:function(){var n=this._GetRecentSearchesFirstItem();this.SelectHandler.Select(n)},_GetRecentSearchesFirstItem:function(){let t=localStorage.getItem("recentSearches");t=JSON.parse(t);let n=t.group[0].option[0];return n=`<dd class="search-suggest__data suggest-data is-from-search-icon" seo="${n.valueseo}" name="${n.valuegid}" latlng="" type="1"><span class="description search-suggest__detail" tabindex="0">${n.title}</span></dd>`,gts.$(n)},_ClearTextInput:function(){this.TextInputEle.css("font-color","#000");this.TextInputEle.val("");this.CloseSuggest()},FocusToTextInput:function(){var n=this;setTimeout(function(){n.TextInputEle.focus()},13)},_OnResponseLoadingStarted:function(n,t,i){this._responseRenderer.StartResponseLoading({hidden:this._enterKeyDown||i===EnumSuggestAction.RELOADHIDDEN,searches:t});this._progressIndicator!=null&&this._progressIndicator.Start(n)},_StopProgressIndicator:function(){this._progressIndicator!=null&&this._progressIndicator.Stop()},_UpdateProgressIndicatorSteps:function(){this._progressIndicator!=null&&this._progressIndicator.UpdateSteps(this._ongoingSearches.length)},_CleanUpSearchTerm:function(n){return typeof n=="undefined"||n==null?"":n.trim()},ProcessSearchTermForUrl:function(n){return typeof n=="undefined"||n==null?"":SuggestUtility.ProcessSearchTermForUrl(n.trim())},_GetSuggestFiltersQueryString:function(){return""},_SetSuggestedAction:function(){this._suggestedAction=this._suggestedActionProvider.GetSuggestedAction(this._currentSearchTerm,this._GetSuggestFiltersQueryString())},GetSuggestedAction:function(){return this._initSettings.goToIntermediatePageOnSubmitIfSuggestIsBusy&&typeof this._suggestedAction=="undefined"?this._suggestedActionProvider.GetIntermediatePageResponse(this._currentSearchTerm,this._GetSuggestFiltersQueryString()):typeof this._suggestedAction=="undefined"?{action:SuggestNoSelection.SuggestedAction.SmartSearch}:this._suggestedAction},SetPageSearchType:function(n){this._initSettings.pageSearchType=n;typeof this._suggestedActionProvider!="undefined"&&this._suggestedActionProvider.SetPageSearchType(this._initSettings.pageSearchType);typeof this.SelectHandler!="undefined"&&this.SelectHandler.SetPageSearchType(this._initSettings.pageSearchType)},GetPerformSearchDelay:function(){return this._initSettings.performSearchDelay},RenderPredefinedResult:function(n){if(this._currentSearchTerm=this._CleanUpSearchTerm(this.TextInputEle.val()),typeof n!="undefined"){this._isBusy=!0;var t=this,i=function(){var i,r;t._OnConfigurationRetrieved();i=EnumSuggestAction.SHOWALL;t._responseRenderer.ClearResponseContainer();r={action:i,searchTerm:t._currentSearchTerm};t._GetSuggestDataResponseHandler(r,n)};if(this._configuration!=null){i();return}t._SetConfigurationFromServer(i)}}});;;;var SuggestManagerFactory={GetManager:function(n){n.suggestType=SuggestUtility.ToEnumSuggestType(n.suggestType);switch(n.suggestType){case EnumSuggestType.CATEGORY:case EnumSuggestType.GROUP:case EnumSuggestType.BROKER:case EnumSuggestType.AGENT:return new CategorySuggestManager(n);case EnumSuggestType.NOGROUP:return new NoGroupSuggestManager(n);default:return null}}};;;;CategorySuggestManager=Class.create(SuggestManagerBase,{FilterResults:function(n,t){var i=typeof this._configuration.suggestConfig.searchorderservercall!="undefined"&&this._configuration.suggestConfig.searchorderservercall==EnumSuggestSearchOrderServerCall.MultipleCalls;if(i){this._FilterResultsInMultipleCalls(n,t);return}this._FilterResultsInSingleCall(n,t)},_FilterResultsInMultipleCalls:function(n,t){var i=gts.$.grep(this._configuration.searches,function(n){return SuggestUtility.ToEnumSuggestTarget(n.target)==EnumSuggestTarget.FILTEREDRECORD}),r;i.length!=0&&(this.AbortOngoingFilterableRequests(i),r=this._GetPopulatedSuggestUrl(n)+this._GetSuggestFiltersQueryString(),this._GetSuggestDatasInMultipleCalls(i,n,r,t,t.action),this.FocusToTextInput())},_FilterResultsInSingleCall:function(n,t){var i=this._GetPopulatedSuggestUrl(n)+this._GetSuggestFiltersQueryString();this._GetSuggestDatasInSingleCall(n,i,t,t.action);this.FocusToTextInput()},AbortOngoingFilterableRequests:function(n){var t=this;gts.$.each(n,function(n,i){gts.$.each(t._ongoingRequests,function(n,t){if(t==null||t[1]==null||t[0].type!=i.type)return!0;t[1].abort()})})},_GetSuggestFiltersQueryString:function(){var n="",t=gts.$("select."+this._initSettings.suggestFilterElementPrefix+" option:selected");return gts.$.each(t,function(){var i=gts.$(this),r=gts.$(this).parent().attr("id"),t=i.val();t!=""&&(t=t.split("-")[0]);t=="0"&&(t="");t!=""&&(n+="&"+String.Format("{0}={1}",r,t))}),n.toLowerCase()},SeeMoreFromGroup:function(n,t){var i=this._GetPopulatedSuggestUrl(n),r;i+=String.Format("&suggestsearchtype={0}&index={1}",t.group.name,t.group.offset);t.group.target==EnumSuggestTarget.FILTEREDRECORD&&(i+=this._GetSuggestFiltersQueryString());r={search:t.group.name,searchTerm:n,jsonUrl:i,settings:t,action:t.action};this._GetSuggestData(r)},_CloseSuggestIfNoDataToRender:function(){this._responseRenderer.HasData()||this._responseRenderer.ShowNoResultsMessage()||this.CloseSuggest()}});;;;NoGroupSuggestManager=Class.create(SuggestManagerBase,{_InitializeProgressIndicator:function(){this._progressIndicator=null}});;;;var SuggestNoSelection=SuggestNoSelection||{};SuggestNoSelection.SuggestedAction={Undefined:"undefined",Navigate:"navigate",SmartSearch:"smartsearch",IntermediatePage:"intermediatepage",ResultsPageWithDYMIntermediateLink:"resultswithdymintermediatelink"};;;;var SuggestNoSelection=SuggestNoSelection||{};SuggestNoSelection.SuggestedActionProvider=Class.create({_defaultSettings:{forceLocationInSuggestedAction:!1,forceDidYouMeanPageInSuggestedAction:!1,getDidYouMeanPageResultsOnServerSide:!0},initialize:function(n){this._settings=gts.$.extend({},this._defaultSettings,n);this._moduleEle=this._settings.moduleEle;this._responseContainerEle=gts.$(this._settings.responseContainerEleSelector,this._moduleEle)},SetPageSearchType:function(n){this._settings.pageSearchType=n},GetSuggestedAction:function(n,t){if(this._settings.forceDidYouMeanPageInSuggestedAction)return this.GetIntermediatePageResponse(n,t);var i=this._GetGroupsFromResponse();return i.length<=0?this._GetSuggestedActionNoResults():i.length==1?this._GetSuggestedActionOneGroup(i,n,t):this._GetSuggestedActionMultipleGroups(i,n,t)},_GetSuggestedActionNoResults:function(){return{action:SuggestNoSelection.SuggestedAction.SmartSearch}},_GetSuggestedActionOneGroup:function(n,t,i){var h=this._GetGroupItems(n),c=h.first(),r=c.attr("type"),u=c.attr("seo"),o,f,s,l,e;return h.length==1&&r!=EnumSuggestTarget.USERLOCATION?(f=u,r==EnumSuggestTarget.LOCATION&&(o=ChannelService.ContainsChannel(f)?"":this._settings.channel,f=o+SEOService.EnsureLeadingSlash(f)),{action:SuggestNoSelection.SuggestedAction.Navigate,suggestTargetType:r,seo:f,itemSeo:u}):(s=this._GetShowAllTarget(n),s!=null)?{action:SuggestNoSelection.SuggestedAction.Navigate,seo:s,suggestTargetType:EnumSuggestTarget.UNDEFINED}:(l=isResponsive&&r==EnumSuggestTarget.LOCATION&&this._settings.forceLocationInSuggestedAction,l)?(o=ChannelService.ContainsChannel(u)?"":SEOService.EnsureLeadingSlash(this._settings.channel),{action:SuggestNoSelection.SuggestedAction.ResultsPageWithDYMIntermediateLink,url:o+SEOService.EnsureLeadingSlash(u),queryString:"dym=true&"+this._GetDidYouMeanQueryString(t,i)}):(e={action:SuggestNoSelection.SuggestedAction.SmartSearch},r===EnumSuggestTarget.RECORD?(e.action=SuggestNoSelection.SuggestedAction.Navigate,e.seo=u):r===EnumSuggestTarget.LOCATION&&(e.seo=u),e)},_GetSuggestedActionMultipleGroups:function(n,t,i){var r=this,c,f,e,u,s=((r._settings.suggestconfig||{}).suggestconfig||{}).precedenceorder,o,l;if(s&&s.length!==0&&(o=gts.$(),s.forEach(function(t){n.each(function(){return $(this).attr("type")===t?(o.push(this),!1):!0})}),o.length!==0&&(c=r._GetGroupItems(o),f=r._GetLocationGroupEles(o),e=r._GetGroupItems(f),u=e.first())),u&&u.length!==0||(c=r._GetGroupItems(n),f=r._GetLocationGroupEles(n),e=r._GetGroupItems(f),u=e.first()),l=isResponsive&&r._settings.forceLocationInSuggestedAction&&u.length===1,l){var h=u.attr("seo"),v=ChannelService.ContainsChannel(h)?"":SEOService.EnsureLeadingSlash(r._settings.channel),a=v+SEOService.EnsureLeadingSlash(h);return e.length===1?{action:SuggestNoSelection.SuggestedAction.Navigate,suggestTargetType:EnumSuggestTarget.LOCATION,seo:a,itemSeo:h}:{action:SuggestNoSelection.SuggestedAction.ResultsPageWithDYMIntermediateLink,url:a,queryString:"dym=true&"+r._GetDidYouMeanQueryString(t,i)}}return n.length===f.length?{action:SuggestNoSelection.SuggestedAction.SmartSearch,seo:u.attr("seo")}:this.GetIntermediatePageResponse(t,i)},GetIntermediatePageResponse:function(n,t){return{action:SuggestNoSelection.SuggestedAction.IntermediatePage,url:"/"+PageTypeSEONames.DidYouMean_PageSEO,queryString:this._GetDidYouMeanQueryString(n,t)}},_GetDidYouMeanQueryString:function(n,t){var i=this._settings.getDidYouMeanPageResultsOnServerSide?"&analyze=true":"",r=typeof this._settings.didYouMeanSearchType!="undefined"&&this._settings.didYouMeanSearchType!=""?this._settings.didYouMeanSearchType:this._settings.searchType;return String.Format("channel={0}&term={1}&suggesttype={2}&searchtype={3}&pagesearchtype={4}&forcelocationinsuggestedaction={5}{6}{7}",this._settings.channel,SuggestUtility.ProcessSearchTermForUrl(n),this._settings.suggestType,r,this._settings.pageSearchType,this._settings.forceLocationInSuggestedAction,i,t)},_GetGroupsFromResponse:function(){return this._responseContainerEle.find("."+this._settings.suggestDataGroupPrefix+"[type != '"+EnumSuggestTarget.USERLOCATION+"']")},_GetGroupItems:function(n){return n.children("."+this._settings.suggestDataElementPrefix+"[type != '"+EnumSuggestTarget.USERLOCATION+"']")},_GetShowAllTarget:function(n){var t=n.attr("data-alllink");return typeof t=="undefined"||t==0?null:"/"+t},_GetLocationGroupEles:function(n){return n.filter("[target='"+EnumSuggestTarget.LOCATION+"']")}});;;